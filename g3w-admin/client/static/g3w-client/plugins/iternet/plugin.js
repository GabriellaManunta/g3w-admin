!function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return o(i?i:t)},c,c.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){function n(t){var e={layer:["cod_acc"],relations:{interno:["cod_acc"],numero_civico:["cod_civ"]}};t.copyAndPasteFieldsNotOverwritable=e;var t=t;this._askConfirmToDeleteEditingListener=function(){this.onbeforeasync("deleteFeature",function(t,e,i){"0102"==t.get("tip_acc")?s.dialog.confirm("Vuoi eliminare l'elemento selezionato e gli elementi ad essi collegati?",function(t){i(t)}):r(this,"_deleteFeatureDialog",i)})},r(this,t)}var o=g3wsdk.core.utils.inherit,r=g3wsdk.core.utils.base,s=g3wsdk.gui.GUI,a=t("./iterneteditor");o(n,a),e.exports=n},{"./iterneteditor":4}],2:[function(t,e,i){function n(t){r(this,t),this._formPanel=d}var o=g3wsdk.core.utils.inherit,r=g3wsdk.core.utils.base,s=g3wsdk.core.ProjectsRegistry,a=g3wsdk.gui.FormPanel,l=g3wsdk.gui.Form,d=a.extend({});o(n,l);var c=n.prototype;c._isVisible=function(t){var e=!0;switch(t.name){case"cod_acc_est":var i=this._getField("tip_acc");"0101"==i.value&&(e=!1);break;case"cod_acc_int":var i=this._getField("tip_acc");"0101"!=i.value&&"0501"!=i.value||(e=!1)}return e},c._isEditable=function(t){return!("tip_acc"==t.name&&!this._isNew())&&l.prototype._isEditable.call(this,t)},c._shouldShowRelation=function(t){if("numero_civico"==t.name){var e=this._getField("tip_acc");if("0102"==e.value)return!1}return!0},c._pickLayer=function(t){var e=this,i=t.input.options.layerid;l.prototype._pickLayer.call(this,t).then(function(n){var o,r;switch(t.name){case"cod_ele":o=e._getRelationField("cod_top","numero_civico");break;case"cod_top":o=e._getField("cod_ele")}if(o){var a=s.getCurrentProject();r=a.getLayerAttributeLabel(i,o.input.options.field),o&&n[r]&&(o.value=n[r])}})},e.exports=n},{}],3:[function(t,e,i){function n(t){r(this,t),this._service=null,this._stradeEditor=null,this._giunzioneGeomListener=null,this._setupMoveGiunzioniListener=function(){var t=this;this.on("movestart",function(e){t._startMovingGiunzione(e)})},this._stradeToUpdate=[],this._startMovingGiunzione=function(t){var e=this,i=(this.getVectorLayer(),this._stradeEditor),n=t,o=n.get("cod_gnz");this._stradeToUpdate=[];var r=i.getVectorLayer().getSource().getFeatures();_.forEach(r,function(t){var i=t.get("nod_ini"),r=t.get("nod_fin"),s=i==o,a=r==o;if(s||a){var l=!!s;e._stradeToUpdate.push(t),e._startGiunzioniStradeTopologicalEditing(n,t,l)}}),this.once("moveend",function(t){e._stradeToUpdate.length&&(i.isStarted()||i.start(this._service),_.forEach(e._stradeToUpdate,function(t){i.updateFeature(t)}))})},this._startGiunzioniStradeTopologicalEditing=function(t,e,i){var n=e.getGeometry(),o=e.getGeometry().getCoordinates(),r=i?0:o.length-1,s=t.getGeometry(),a=s.on("change",function(t){o[r]=t.target.getCoordinates(),n.setCoordinates(o)});this._giunzioneGeomListener=a},this._setupDeleteGiunzioniListener=function(){var t=this._stradeEditor;this.onbeforeasync("deleteFeature",function(e,i,n){var o=!1,r=t.getVectorLayer();_.forEach(r.getFeatures(),function(t){var i=e.get("cod_gnz"),n=t.get("nod_ini"),r=t.get("nod_fin"),s=n==i,a=r==i;(s||a)&&(o=!0)}),o&&GUI.notify.error("Non è possibile rimuovere la giunzioni perché risulta connessa ad una o più strade"),n(!o)})}}var o=g3wsdk.core.utils.inherit,r=g3wsdk.core.utils.base,s=t("./iterneteditor");o(n,s),e.exports=n;var a=n.prototype;a.start=function(t){return this._service=t,this._stradeEditor=t._layers[t.layerCodes.STRADE].editor,this._setupMoveGiunzioniListener(),this._setupDeleteGiunzioniListener(),s.prototype.start.call(this)},a.stop=function(){var t=!1;return s.prototype.stop.call(this)&&(t=!0,ol.Observable.unByKey(this._giunzioneGeomListener)),t},a.setTool=function(t){var e;return"addfeature"==t&&(e={snap:{vectorLayer:this._stradeEditor.getVectorLayer()}}),s.prototype.setTool.call(this,t,e)}},{"./iterneteditor":4}],4:[function(t,e,i){function n(t){r(this,t)}var o=g3wsdk.core.utils.inherit,r=g3wsdk.core.utils.base,s=g3wsdk.core.Editor;t("./attributesform");o(n,s),e.exports=n},{"./attributesform":2}],5:[function(t,e,i){function n(t){r(this,t),this._service=null,this._giunzioniEditor=null,this._mapService=s.getComponent("map").getService(),this._stradeSnaps=null,this._stradeSnapsCollection=function(){var t=[];this.length=0,this.push=function(e){var i=!1;return this.canSnap(e)&&(t.push(e),this.length+=1,i=!0),i},this.getLast=function(){return t[t.length-1]},this.getFirst=function(){return t[0]},this.clear=function(){t.splice(0,t.length),this.length=0},this.getSnaps=function(){return t},this.canSnap=function(t){if(this.isAlreadySnapped(t))return!1;var e=t.get("cod_gnz");return!_.isNil(e)&&""!=e},this.isAlreadySnapped=function(t){return _.includes(this.snaps,t)}},this._updateStradaAttributes=function(t){var e=this._stradeSnaps;t.set("nod_ini",e.getSnaps()[0].get("cod_gnz")),t.set("nod_fin",e.getSnaps()[1].get("cod_gnz"))},this._loadMissingGiunzioniInView=function(){var t=this.getVectorLayer(),e=this._giunzioniEditor.getVectorLayer(),i=t.getSource(),n=ol.extent.buffer(i.getExtent(),1),o=this._service.getLoader();o._loadVectorData(e,n)},this._drawRemoveLastPoint=_.bind(function(t){var e=this,i=this.getActiveTool().getType();"addfeature"==i&&46==t.keyCode&&(t.preventDefault(),t.stopPropagation(),e.getActiveTool().getTool().removeLastPoint())},this),this._setupDrawStradeConstraints=function(){var t=this;this.onbefore("addFeature",function(e){var i=t._stradeSnaps;return 2==i.length&&(t._updateStradaAttributes(e),i.clear(),!0)},0)},this._getCheckSnapsCondition=function(){var t=this;return function(e){var i=t._stradeSnaps;return 2==i.length||(s.notify.error("L'ultimo vertice deve corrispondere con una giunzione"),!1)}},this._getStradaIsBeingSnappedCondition=function(){var t=this,e=this._mapService.viewer.map,i=this._giunzioniEditor.getVectorLayer();return function(n){var o=t._stradeSnaps,r=e.getCoordinateFromPixel(n.pixel),a=i.getSource(),l=ol.extent.buffer([r[0],r[1],r[0],r[1]],1),d=a.getFeaturesInExtent(l)[0];if(2==o.length&&(!d||d!=o.getSnaps()[1])){return s.notify.error("Una strada non può avere vertici intermedi in corrispondenza di giunzioni.<br> Premere <b>CANC</b> per rimuovere l'ultimo vertice."),!1}return d&&o.length<2&&o.push(d),0!=o.length||(s.notify.error("Il primo vertice deve corrispondere con una giunzione"),!1)}},this._modifyRemovePoint=_.bind(function(t){var e=this,i=this.getActiveTool().getType();"modifyvertex"==i&&46==t.keyCode&&(t.preventDefault(),t.stopPropagation(),e.getActiveTool().getTool().removePoint())},this),this._setupModifyVertexStradeConstraints=function(){var t=this;this._mapService.viewer.map;this.onbefore("modifyFeature",function(e){var i=t._stradeSnaps,n=t._checkStradaIsCorrectlySnapped(e.getGeometry());return n&&(t._updateStradaAttributes(e),i.clear()),n})},this._checkStradaIsCorrectlySnapped=function(t){var e=!0,i=(this._mapService.viewer.map,this._giunzioniEditor.getVectorLayer());this._stradeSnaps.clear();var n=this._stradeSnaps,o=t.getCoordinates(),r=!1,a=!1;return _.forEach(o,function(t,e){var s=i.getSource(),l=ol.extent.buffer([t[0],t[1],t[0],t[1]],.1),d=s.getFeaturesInExtent(l)[0];d&&(0==e&&n.push(d)?r=!0:e==o.length-1&&n.push(d)&&(a=!0))}),n.length>2&&(s.notify.error("Una strada non può avere vertici intermedi in corrispondenza di giunzioni"),e=!1),r||(s.notify.error("Il primo vertice deve corrispondere con una giunzione"),e=!1),a||(s.notify.error("L'ultimo vertice deve corrispondere con una giunzione"),e=!1),e},this._setupStradeCutterPostSelection=function(){var t=this;this.onbeforeasync("cutLine",function(e,i,n){if("MODONCUT"==i){var o=e.added[0],r=t._getFirstLastSnappedGiunzioni(o.getGeometry());o.set("nod_ini",r[0].get("cod_gnz")),o.set("nod_fin",r[1].get("cod_gnz"));var s=e.updated,a=t._getFirstLastSnappedGiunzioni(s.getGeometry());s.set("nod_ini",a[0].get("cod_gnz")),s.set("nod_fin",a[1].get("cod_gnz")),t._openEditorForm("new",o,n)}else n(!0)})},this._getFirstLastSnappedGiunzioni=function(t){var e=t.getCoordinates(),i=this._giunzioniEditor.getVectorLayer(),n=null,o=null;return _.forEach(e,function(t,r){var s=i.getSource(),a=ol.extent.buffer([t[0],t[1],t[0],t[1]],.1),l=s.getFeaturesInExtent(a)[0];l&&(0==r?n=l:r==e.length-1&&(o=l))}),[n,o]},this._setupDrawStradeConstraints(),this._setupModifyVertexStradeConstraints(),this._setupStradeCutterPostSelection()}var o=g3wsdk.core.utils.inherit,r=g3wsdk.core.utils.base,s=g3wsdk.gui.GUI,a=t("./iterneteditor");o(n,a),e.exports=n;var l=n.prototype;l.start=function(t){return this._service=t,this._giunzioniEditor=t._layers[t.layerCodes.GIUNZIONI].editor,this._loadMissingGiunzioniInView(),r(this,"start")},l.setTool=function(t){var e,i=this._giunzioniEditor.getVectorLayer();"addfeature"==t&&(e={snap:{vectorLayer:i},finishCondition:this._getCheckSnapsCondition(),condition:this._getStradaIsBeingSnappedCondition()}),"modifyvertex"==t&&(e={snap:{vectorLayer:i},deleteCondition:_.constant(!1)}),"cutline"==t&&(e={pointLayer:i.getMapLayer()});var n=r(this,"setTool",t,e);return n&&(this._stradeSnaps=new this._stradeSnapsCollection,$("body").keyup(this._drawRemoveLastPoint),$("body").keyup(this._modifyRemovePoint)),n},l.stopTool=function(){var t=!1;return t=a.prototype.stopTool.call(this),t&&(this._stradeSnaps=null,$("body").off("keyup",this._drawRemoveLastPoint),$("body").off("keyup",this._modifyRemovePoint)),t}},{"./iterneteditor":4}],6:[function(t,e,i){var n=g3wsdk.core.utils.inherit,o=g3wsdk.core.utils.base,r=g3wsdk.core.Plugin,s=g3wsdk.gui.GUI,a=t("./pluginservice"),l=t("./panel"),d=function(){o(this),this.name="iternet",this.config=null,this.service=null,this.init=function(){this.setPluginService(a),this.config=this.getPluginConfig(),this.registerPlugin(this.config.gid)&&(s.ready?this.setupGui():s.on("ready",_.bind(this.setupGui,this)),this.service.init(this.config))},this.setupGui=function(){var t=this,e=s.getComponent("tools"),i=e.getService();i.addTools(0,"ITERNET",[{name:"Editing dati",action:_.bind(t.showEditingPanel,this)}])},this.showEditingPanel=function(){var t=new l;s.showPanel(t)}};n(d,r),function(t){t.init()}(new d)},{"./panel":8,"./pluginservice":9}],7:[function(t,e,i){e.exports='<div class="g3w-iternet-editing-panel">\n  <template v-for="toolbar in editorstoolbars">\n    <div class="panel panel-primary">\n      <div class="panel-heading">\n        <h3 class="panel-title">{{ toolbar.name }}</h3>\n      </div>\n      <div class="panel-body">\n        <template v-for="tool in toolbar.tools">\n          <div class="editbtn" :class="{\'enabled\' : (state.editing.on && editingtoolbtnEnabled(tool)), \'toggled\' : editingtoolbtnToggled(toolbar.layercode,tool.tooltype)}">\n            <img height="30px" width="30px" @click="toggleEditTool(toolbar.layercode,tool.tooltype)" :alt.once="tool.title" :title.once="tool.title" :src.once="resourcesurl+\'images/\'+tool.icon"/>\n          </div>\n        </template>\n      </div>\n    </div>\n  </template>\n  <div>\n    <button class="btn btn-primary" v-disabled="editingbtnEnabled" :class="{\'btn-success\' : state.editingOn}" @click="toggleEditing">{{ editingbtnlabel }}</button>\n    <button class="btn btn-danger" v-disabled="!state.hasEdits" @click="saveEdits">{{ savebtnlabel }}</button>\n    <img v-show="state.retrievingData" :src="resourcesurl +\'images/loader.svg\'">\n  </div>\n  <div class="message">\n    {{{ message }}}\n  </div>\n</div>\n'},{}],8:[function(t,e,i){function n(){this.id="iternet-editing-panel",this.name="Gestione dati ITERNET",this.internalPanel=new d}var o=g3wsdk.core.utils.resolve,r=g3wsdk.core.utils.inherit,s=g3wsdk.gui.GUI,a=g3wsdk.gui.Panel,l=t("./pluginservice"),d=Vue.extend({template:t("./panel.html"),data:function(){return{state:l.state,resourcesurl:s.getResourcesUrl(),editorstoolbars:[{name:"Accessi",layercode:l.layerCodes.ACCESSI,tools:[{title:"Aggiungi accesso",tooltype:"addfeature",icon:"iternetAddPoint.png"},{title:"Sposta accesso",tooltype:"movefeature",icon:"iternetMovePoint.png"},{title:"Rimuovi accesso",tooltype:"deletefeature",icon:"iternetDeletePoint.png"},{title:"Edita attributi",tooltype:"editattributes",icon:"editAttributes.png"}]},{name:"Giunzioni stradali",layercode:l.layerCodes.GIUNZIONI,tools:[{title:"Aggiungi giunzione",tooltype:"addfeature",icon:"iternetAddPoint.png"},{title:"Sposta giunzione",tooltype:"movefeature",icon:"iternetMovePoint.png"},{title:"Rimuovi giunzione",tooltype:"deletefeature",icon:"iternetDeletePoint.png"},{title:"Edita attributi",tooltype:"editattributes",icon:"editAttributes.png"}]},{name:"Elementi stradali",layercode:l.layerCodes.STRADE,tools:[{title:"Aggiungi strada",tooltype:"addfeature",icon:"iternetAddLine.png"},{title:"Sposta vertice strada",tooltype:"modifyvertex",icon:"iternetMoveVertex.png"},{title:"Taglia su giunzione",tooltype:"cutline",icon:"iternetCutOnVertex.png"},{title:"Rimuovi strada",tooltype:"deletefeature",icon:"iternetDeleteLine.png"},{title:"Edita attributi",tooltype:"editattributes",icon:"editAttributes.png"}]}],savebtnlabel:"Salva"}},methods:{toggleEditing:function(){l.toggleEditing()},saveEdits:function(){l.saveEdits()},toggleEditTool:function(t,e){""!=e&&this.state.editing.on&&l.toggleEditTool(t,e)},editingtoolbtnToggled:function(t,e){return this.state.editing.layerCode==t&&this.state.editing.toolType==e},editingtoolbtnEnabled:function(t){return""!=t.tooltype}},computed:{editingbtnlabel:function(){return this.state.editing.on?"Termina editing":"Avvia editing"},editingbtnEnabled:function(){return this.state.editing.enabled||this.state.editing.on?"":"disabled"},message:function(){var t="";if(this.state.editing.enabled){if(this.state.editing.toolstep.message){var e=this.state.editing.toolstep.n,i=this.state.editing.toolstep.total,n=this.state.editing.toolstep.message;t='<div style="margin-top:20px">GUIDA STRUMENTO:</div><div><span>['+e+"/"+i+'] </span><span style="color: yellow">'+n+"</span></div>"}}else t='<span style="color: red">Aumentare il livello di zoom per abilitare l\'editing';return t}}});r(n,a);var c=a.prototype;c.onShow=function(t){console.log("ciao");var e=this.internalPanel;return e.$mount().$appendTo(t),o(!0)},c.onClose=function(){var t=this,e=$.Deferred();return l.stop().then(function(){t.internalPanel.$destroy(!0),t.internalPanel=null,e.resolve()}).fail(function(){e.reject()}),e.promise()},e.exports=n},{"./panel.html":7,"./pluginservice":9}],9:[function(t,e,i){function n(){var t=this;this._mapService=null,this._runningEditor=null;var e=this.layerCodes={STRADE:"strade",GIUNZIONI:"giunzioni",ACCESSI:"accessi"};this._editorClass={},this._editorClass[e.ACCESSI]=d,this._editorClass[e.GIUNZIONI]=c,this._editorClass[e.STRADE]=u,this._layers={},this._layers[e.ACCESSI]={layerCode:e.ACCESSI,vector:null,editor:null,style:function(t){var e="#d9b581";switch(t.get("tip_acc")){case"0101":e="#d9b581";break;case"0102":e="#d9bc29";break;case"0501":e="#68aad9";break;default:e="#d9b581"}return[new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:e})})})]}},this._layers[e.GIUNZIONI]={layerCode:e.GIUNZIONI,vector:null,editor:null,style:new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"#0000ff"})})})},this._layers[e.STRADE]={layerCode:e.STRADE,vector:null,editor:null,style:new ol.style.Style({stroke:new ol.style.Stroke({width:3,color:"#ff7d2d"})})},this._loadDataOnMapViewChangeListener=null,this._currentEditingLayer=null,this._loadedExtent=null,this.state={editing:{on:!1,enabled:!1,layerCode:null,toolType:null,startingEditingTool:!1,toolstep:{n:null,total:null,message:null}},retrievingData:!1,hasEdits:!1},this._loader=new a,this.init=function(t){var e=this;this.config=t,this._mapService=s.getComponent("map").getService();var i={layers:this._layers,baseurl:this.config.baseurl,mapService:this._mapService};this._loader.init(i),this._loader.on("retriewvectorlayers",function(t,i){_.forEach(i,function(i,n){t&&(e._setUpVectorLayer(n,i),e._setUpEditor(n)),e.state.retrievingData=t})}),this._loader.on("retriewvectolayersdata",function(t){e.state.retrievingData=t}),this._loader.on("featurelocks",function(t,i){e._layers[t].editor.setFeatureLocks(i)}),this._mapService.on("pointerInteractionSet",function(t){var i=e._getCurrentEditingLayer();if(i){var n=i.editor.getActiveTool().instance;n&&!n.ownsInteraction(t)&&e._stopEditingTool()}}),this.state.editing.enabled=!0,_.forEach(this._layers,function(i,n){var o=t.layers[n].id,r=e._mapService.getProject().getLayerById(o);i.name=r.getOrigName(),i.id=o})},this.stop=function(){var e=$.Deferred();return this.state.editing.on?this._cancelOrSave().then(function(){t._stopEditing(),e.resolve()}).fail(function(){e.reject()}):e.resolve(),e.promise()},this.toggleEditing=function(){var t=$.Deferred();if(this.state.editing.enabled&&!this.state.editing.on)this._startEditing();else if(this.state.editing.on)return this.stop();return t.promise()},this.saveEdits=function(){this._cancelOrSave(2)},this.toggleEditTool=function(t,e){var i=this,n=this._layers[t];if(n){var o=this._getCurrentEditingLayer();o&&t==o.layerCode?e==o.editor.getActiveTool().getType()?this._stopEditingTool():(this._stopEditingTool(),this._startEditingTool(o,e)):o&&o.editor.isStarted()?this._cancelOrSave(2).then(function(){i._stopEditor()&&i._startEditingTool(n,e)}):this._startEditingTool(n,e)}},this.getLayerCodes=function(){return _.values(this.layerCodes)},this._setUpVectorLayer=function(t,e){this._layers[t].vector=e},this._setUpEditor=function(t){var e=this,i={mapService:e._mapService,formClass:l},n=this._layers[t].vector,o=new e._editorClass[t](i);o.setVectorLayer(n),o.on("dirty",function(t){e.state.hasEdits=t}),this._layers[t].editor=o},this._startEditing=function(){var t=this;this._loader.loadLayers().then(function(e){t._addToMap(),t.state.editing.on=!0,t.emit("editingstarted"),t._loadDataOnMapViewChangeListener||(t._loadDataOnMapViewChangeListener=t._mapService.onafter("setMapView",function(){t.state.editing.on&&t.state.editing.enabled&&t._loader.loadAllVectorsData()}))})},this._stopEditing=function(e){this._stopEditor(e)&&(_.forEach(this._layers,function(e,i){var n=e.vector;t._mapService.viewer.removeLayerByName(n.name),e.vector=null,e.editor=null,t._unlockLayer(t._layers[i])}),this._updateEditingState(),t.state.editing.on=!1,t._cleanUp(),t.emit("editingstopped"))},this._cleanUp=function(){this._loader.cleanUpLayers()},this._startEditor=function(t){return!!t.editor.start(this)&&(this._setCurrentEditingLayer(t),!0)},this._startEditingTool=function(t,e,i){this.state.startingEditingTool=!0;var n=!0;return t.editor.isStarted()||(n=this._startEditor(t)),n&&t.editor.setTool(e,i)?(this._updateEditingState(),this.state.startingEditingTool=!1,!0):(this.state.startingEditingTool=!1,!1)},this._stopEditor=function(t){var e=!0,i=this._getCurrentEditingLayer();return i&&(e=i.editor.stop(t),e&&this._setCurrentEditingLayer()),e},this._stopEditingTool=function(){var t=!0,e=this._getCurrentEditingLayer();return e&&(t=e.editor.stopTool(),t&&this._updateEditingState()),t},this._cancelOrSave=function(t){var e=$.Deferred();try{var i=1;t&&(i=t);var n=this,o={};_.forEach(this._layers,function(t,e){t.editor.isDirty()&&(o[e]=t.editor)}),_.keys(o).length?this._askCancelOrSave(i).then(function(t){"save"===t?n._saveEdits(o).then(function(t){e.resolve()}).fail(function(t){e.reject()}):"nosave"==t?e.resolve():"cancel"==t&&e.reject()}):e.resolve()}catch(r){e.reject()}return e.promise()},this._askCancelOrSave=function(t){var e=$.Deferred(),i={SAVE:{label:"Salva",className:"btn-success",callback:function(){e.resolve("save")}},NOSAVE:{label:"Termina senza salvare",className:"btn-danger",callback:function(){e.resolve("nosave")}},CANCEL:{label:"Annulla",className:"btn-primary",callback:function(){e.resolve("cancel")}}};switch(t){case 1:buttons={save:i.SAVE,nosave:i.NOSAVE,cancel:i.CANCEL};break;case 2:buttons={save:i.SAVE,cancel:i.CANCEL}}return s.dialog.dialog({message:"Vuoi salvare definitivamente le modifiche?",title:"Salvataggio modifica",buttons:buttons}),e.promise()},this._saveEdits=function(e){var i=$.Deferred();return this._sendEdits(e).then(function(n){s.notify.success("I dati sono stati salvati correttamente"),t._commitEdits(e,n),t._mapService.refreshMap(),i.resolve()}).fail(function(t){s.notify.error("Errore nel salvataggio sul server"),i.resolve()}),i.promise()},this._sendEdits=function(t){var e=$.Deferred(),i=_.map(t,function(t){return{layername:t.getVectorLayer().name,edits:t.getEditedFeatures()}});return this._postData(i).then(function(t){t.result?e.resolve(t.response):e.reject(t.response)}).fail(function(t){e.reject(t.response)}),e.promise()},this._commitEdits=function(t,e){_.forEach(t,function(t){e&&e["new"]&&_.forEach(e["new"],function(e){var i=e.clientid,n=e.id;t.getEditVectorLayer().setFeatureData(i,n,null,e)}),t.commit()})},this._undoEdits=function(t){var e=this._getCurrentEditingLayer().layerCode;t[e];this._stopEditing(!0)},this._updateEditingState=function(){var t=this._getCurrentEditingLayer();t?(this.state.editing.layerCode=t.layerCode,this.state.editing.toolType=t.editor.getActiveTool().getType()):(this.state.editing.layerCode=null,this.state.editing.toolType=null),this._updateToolStepsState()},this._updateToolStepsState=function(){var t,e=this,i=this._getCurrentEditingLayer();if(i&&(t=i.editor.getActiveTool()),t&&t.getTool()){var n=t.getTool();n.steps&&(this._setToolStepState(t),n.steps.on("step",function(i,n){e._setToolStepState(t)}),n.steps.on("complete",function(){e._setToolStepState()}))}else e._setToolStepState()},this._setToolStepState=function(t){var e,i,n;if(_.isUndefined(t))e=null,i=null,n=null;else{var o=t.getTool(),r=g[t.getType()];e=o.steps.currentStepIndex(),i=o.steps.totalSteps(),n=r[e],_.isUndefined(n)&&(e=null,i=null,n=null)}this.state.editing.toolstep.n=e+1,this.state.editing.toolstep.total=i,this.state.editing.toolstep.message=n},this._getCurrentEditingLayer=function(){return this._currentEditingLayer},this._setCurrentEditingLayer=function(t){t?this._currentEditingLayer=t:this._currentEditingLayer=null},this._addToMap=function(){var e=this._mapService.viewer.map,i=this.getLayerCodes();_.forEach(i,function(i){t._layers[i].vector.addToMap(e)})},this._postData=function(t){if(t.length>1)return this._postBatchData(t);var e=t[0].layername,i=t[0].edits,n=JSON.stringify(i);return $.post({url:this.config.baseurl+e+"/",data:n,contentType:"application/json"})},this._postBatchData=function(t){var e={};_.forEach(t,function(t){e[t.layername]=t.edits});var i=JSON.stringify(e);return $.post({url:this.config.baseurl,data:i,contentType:"application/json"})},this._unlock=function(){var e=this.getLayerCodes();_.map(e,function(e){return t._unlockLayer(t._layers[e])})},this._unlockLayer=function(t){$.get(this.config.baseurl+t.name+"/?unlock")},this.getLoader=function(){return this._loader}}var o=g3wsdk.core.utils.inherit,r=(g3wsdk.core.utils.resolve,g3wsdk.core.utils.reject,g3wsdk.core.G3WObject),s=g3wsdk.gui.GUI,a=(g3wsdk.core.VectorLayer,g3wsdk.core.VectorLayerLoader),l=t("./editors/attributesform"),d=t("./editors/accessieditor"),c=t("./editors/giunzionieditor"),u=t("./editors/stradeeditor"),g={cutline:["Seleziona la strada da tagliare","Seleziona la giunzione di taglio","Seleziona la porizione di strada originale da mantenere"]};o(n,r),e.exports=new n},{"./editors/accessieditor":1,"./editors/attributesform":2,"./editors/giunzionieditor":3,"./editors/stradeeditor":5}]},{},[6]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1aWxkLmpzIl0sIm5hbWVzIjpbImUiLCJ0IiwibiIsInIiLCJzIiwibyIsInUiLCJhIiwicmVxdWlyZSIsImkiLCJmIiwiRXJyb3IiLCJjb2RlIiwibCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIkFjY2Vzc2lFZGl0b3IiLCJvcHRpb25zIiwiY29weUFuZFBhc3RlRmllbGRzTm90T3ZlcndyaXRhYmxlIiwibGF5ZXIiLCJyZWxhdGlvbnMiLCJpbnRlcm5vIiwibnVtZXJvX2NpdmljbyIsInRoaXMiLCJfYXNrQ29uZmlybVRvRGVsZXRlRWRpdGluZ0xpc3RlbmVyIiwib25iZWZvcmVhc3luYyIsImZlYXR1cmUiLCJpc05ldyIsIm5leHQiLCJnZXQiLCJHVUkiLCJkaWFsb2ciLCJjb25maXJtIiwicmVzdWx0IiwiYmFzZSIsImluaGVyaXQiLCJnM3dzZGsiLCJjb3JlIiwidXRpbHMiLCJndWkiLCJJdGVybmV0RWRpdG9yIiwiLi9pdGVybmV0ZWRpdG9yIiwiMiIsIkl0ZXJuZXRGb3JtIiwiX2Zvcm1QYW5lbCIsIkl0ZXJuZXRGb3JtUGFuZWwiLCJQcm9qZWN0c1JlZ2lzdHJ5IiwiRm9ybVBhbmVsIiwiRm9ybSIsImV4dGVuZCIsInByb3RvIiwicHJvdG90eXBlIiwiX2lzVmlzaWJsZSIsImZpZWxkIiwicmV0IiwibmFtZSIsInRpcF9hY2MiLCJfZ2V0RmllbGQiLCJ2YWx1ZSIsIl9pc0VkaXRhYmxlIiwiX2lzTmV3IiwiX3Nob3VsZFNob3dSZWxhdGlvbiIsInJlbGF0aW9uIiwiX3BpY2tMYXllciIsInNlbGYiLCJsYXllcklkIiwiaW5wdXQiLCJsYXllcmlkIiwidGhlbiIsImF0dHJpYnV0ZXMiLCJsaW5rZWRGaWVsZCIsImxpbmtlZEZpZWxkQXR0cmlidXRlTmFtZSIsIl9nZXRSZWxhdGlvbkZpZWxkIiwicHJvamVjdCIsImdldEN1cnJlbnRQcm9qZWN0IiwiZ2V0TGF5ZXJBdHRyaWJ1dGVMYWJlbCIsIjMiLCJHaXVuemlvbmlFZGl0b3IiLCJfc2VydmljZSIsIl9zdHJhZGVFZGl0b3IiLCJfZ2l1bnppb25lR2VvbUxpc3RlbmVyIiwiX3NldHVwTW92ZUdpdW56aW9uaUxpc3RlbmVyIiwib24iLCJfc3RhcnRNb3ZpbmdHaXVuemlvbmUiLCJfc3RyYWRlVG9VcGRhdGUiLCJzdHJhZGVFZGl0b3IiLCJnZXRWZWN0b3JMYXllciIsImdpdW56aW9uZSIsImNvZF9nbnoiLCJzdHJhZGUiLCJnZXRTb3VyY2UiLCJnZXRGZWF0dXJlcyIsIl8iLCJmb3JFYWNoIiwic3RyYWRhIiwibm9kX2luaSIsIm5vZF9maW4iLCJpbmkiLCJmaW4iLCJpbml0aWFsIiwicHVzaCIsIl9zdGFydEdpdW56aW9uaVN0cmFkZVRvcG9sb2dpY2FsRWRpdGluZyIsIm9uY2UiLCJpc1N0YXJ0ZWQiLCJzdGFydCIsInVwZGF0ZUZlYXR1cmUiLCJzdHJhZGFHZW9tIiwiZ2V0R2VvbWV0cnkiLCJzdHJhZGFDb29yZHMiLCJnZXRDb29yZGluYXRlcyIsImNvb3JkSW5kZXgiLCJnaXVuemlvbmVHZW9tIiwibGlzdGVuZXJLZXkiLCJ0YXJnZXQiLCJzZXRDb29yZGluYXRlcyIsIl9zZXR1cERlbGV0ZUdpdW56aW9uaUxpc3RlbmVyIiwic3RvcERlbGV0aW9uIiwic3RyYWRlVmVjdG9yTGF5ZXIiLCJub3RpZnkiLCJlcnJvciIsIml0ZXJuZXRTZXJ2aWNlIiwiX2xheWVycyIsImxheWVyQ29kZXMiLCJTVFJBREUiLCJlZGl0b3IiLCJzdG9wIiwib2wiLCJPYnNlcnZhYmxlIiwidW5CeUtleSIsInNldFRvb2wiLCJ0b29sVHlwZSIsInNuYXAiLCJ2ZWN0b3JMYXllciIsIjQiLCJFZGl0b3IiLCIuL2F0dHJpYnV0ZXNmb3JtIiwiNSIsIlN0cmFkZUVkaXRvciIsIl9naXVuemlvbmlFZGl0b3IiLCJfbWFwU2VydmljZSIsImdldENvbXBvbmVudCIsImdldFNlcnZpY2UiLCJfc3RyYWRlU25hcHMiLCJfc3RyYWRlU25hcHNDb2xsZWN0aW9uIiwic25hcHMiLCJwdXNoZWQiLCJjYW5TbmFwIiwiZ2V0TGFzdCIsImdldEZpcnN0IiwiY2xlYXIiLCJzcGxpY2UiLCJnZXRTbmFwcyIsImlzQWxyZWFkeVNuYXBwZWQiLCJpc05pbCIsImluY2x1ZGVzIiwiX3VwZGF0ZVN0cmFkYUF0dHJpYnV0ZXMiLCJzZXQiLCJfbG9hZE1pc3NpbmdHaXVuemlvbmlJblZpZXciLCJnaXVuemlvbmlWZWN0b3JMYXllciIsInN0cmFkZVNvdXJjZSIsImV4dGVudCIsImJ1ZmZlciIsImdldEV4dGVudCIsImxvYWRlciIsImdldExvYWRlciIsIl9sb2FkVmVjdG9yRGF0YSIsIl9kcmF3UmVtb3ZlTGFzdFBvaW50IiwiYmluZCIsImdldEFjdGl2ZVRvb2wiLCJnZXRUeXBlIiwia2V5Q29kZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiZ2V0VG9vbCIsInJlbW92ZUxhc3RQb2ludCIsIl9zZXR1cERyYXdTdHJhZGVDb25zdHJhaW50cyIsIm9uYmVmb3JlIiwiX2dldENoZWNrU25hcHNDb25kaXRpb24iLCJfZ2V0U3RyYWRhSXNCZWluZ1NuYXBwZWRDb25kaXRpb24iLCJtYXAiLCJ2aWV3ZXIiLCJjIiwiZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCIsInBpeGVsIiwiZ2l1bnppb25pU291cmNlIiwic25hcHBlZEZlYXR1cmUiLCJnZXRGZWF0dXJlc0luRXh0ZW50IiwiX21vZGlmeVJlbW92ZVBvaW50IiwicmVtb3ZlUG9pbnQiLCJfc2V0dXBNb2RpZnlWZXJ0ZXhTdHJhZGVDb25zdHJhaW50cyIsImNvcnJlY3QiLCJfY2hlY2tTdHJhZGFJc0NvcnJlY3RseVNuYXBwZWQiLCJnZW9tZXRyeSIsImNvb3JkaW5hdGVzIiwiZmlyc3RWZXJ0ZXhTbmFwcGVkIiwibGFzdFZlcnRleFNuYXBwZWQiLCJpbmRleCIsIl9zZXR1cFN0cmFkZUN1dHRlclBvc3RTZWxlY3Rpb24iLCJkYXRhIiwibW9kVHlwZSIsIm5ld0ZlYXR1cmUiLCJhZGRlZCIsIm5ld0ZlYXR1cmVTbmFwcyIsIl9nZXRGaXJzdExhc3RTbmFwcGVkR2l1bnppb25pIiwidXBkYXRlZCIsInVwZGF0ZUZlYXR1cmVTbmFwcyIsIl9vcGVuRWRpdG9yRm9ybSIsInBsdWdpblNlcnZpY2UiLCJHSVVOWklPTkkiLCJmaW5pc2hDb25kaXRpb24iLCJjb25kaXRpb24iLCJkZWxldGVDb25kaXRpb24iLCJjb25zdGFudCIsInBvaW50TGF5ZXIiLCJnZXRNYXBMYXllciIsIiQiLCJrZXl1cCIsInN0b3BUb29sIiwib2ZmIiwiNiIsIlBsdWdpbiIsIlNlcnZpY2UiLCJFZGl0aW5nUGFuZWwiLCJfUGx1Z2luIiwiY29uZmlnIiwic2VydmljZSIsImluaXQiLCJzZXRQbHVnaW5TZXJ2aWNlIiwiZ2V0UGx1Z2luQ29uZmlnIiwicmVnaXN0ZXJQbHVnaW4iLCJnaWQiLCJyZWFkeSIsInNldHVwR3VpIiwidG9vbHNDb21wb25lbnQiLCJ0b29sc1NlcnZpY2UiLCJhZGRUb29scyIsImFjdGlvbiIsInNob3dFZGl0aW5nUGFuZWwiLCJwYW5lbCIsInNob3dQYW5lbCIsInBsdWdpbiIsIi4vcGFuZWwiLCIuL3BsdWdpbnNlcnZpY2UiLCI3IiwiOCIsIkVkaXRvclBhbmVsIiwiaWQiLCJpbnRlcm5hbFBhbmVsIiwiUGFuZWxDb21wb25lbnQiLCJyZXNvbHZlZFZhbHVlIiwicmVzb2x2ZSIsIlBhbmVsIiwiVnVlIiwidGVtcGxhdGUiLCJzdGF0ZSIsInJlc291cmNlc3VybCIsImdldFJlc291cmNlc1VybCIsImVkaXRvcnN0b29sYmFycyIsImxheWVyY29kZSIsIkFDQ0VTU0kiLCJ0b29scyIsInRpdGxlIiwidG9vbHR5cGUiLCJpY29uIiwic2F2ZWJ0bmxhYmVsIiwibWV0aG9kcyIsInRvZ2dsZUVkaXRpbmciLCJzYXZlRWRpdHMiLCJ0b2dnbGVFZGl0VG9vbCIsImxheWVyQ29kZSIsImVkaXRpbmciLCJlZGl0aW5ndG9vbGJ0blRvZ2dsZWQiLCJlZGl0aW5ndG9vbGJ0bkVuYWJsZWQiLCJ0b29sIiwiY29tcHV0ZWQiLCJlZGl0aW5nYnRubGFiZWwiLCJlZGl0aW5nYnRuRW5hYmxlZCIsImVuYWJsZWQiLCJtZXNzYWdlIiwidG9vbHN0ZXAiLCJ0b3RhbCIsInN0ZXBtZXNzYWdlIiwib25TaG93IiwiY29udGFpbmVyIiwiY29uc29sZSIsImxvZyIsIiRtb3VudCIsIiRhcHBlbmRUbyIsIm9uQ2xvc2UiLCJkZWZlcnJlZCIsIkRlZmVycmVkIiwiJGRlc3Ryb3kiLCJmYWlsIiwicmVqZWN0IiwicHJvbWlzZSIsIi4vcGFuZWwuaHRtbCIsIjkiLCJJdGVybmV0U2VydmljZSIsIl9ydW5uaW5nRWRpdG9yIiwiX2VkaXRvckNsYXNzIiwidmVjdG9yIiwic3R5bGUiLCJjb2xvciIsIlN0eWxlIiwiaW1hZ2UiLCJDaXJjbGUiLCJyYWRpdXMiLCJmaWxsIiwiRmlsbCIsInN0cm9rZSIsIlN0cm9rZSIsIndpZHRoIiwiX2xvYWREYXRhT25NYXBWaWV3Q2hhbmdlTGlzdGVuZXIiLCJfY3VycmVudEVkaXRpbmdMYXllciIsIl9sb2FkZWRFeHRlbnQiLCJzdGFydGluZ0VkaXRpbmdUb29sIiwicmV0cmlldmluZ0RhdGEiLCJoYXNFZGl0cyIsIl9sb2FkZXIiLCJWZWN0b3JMb2FkZXJMYXllciIsIm9wdGlvbnNfbG9hZGVyIiwibGF5ZXJzIiwiYmFzZXVybCIsIm1hcFNlcnZpY2UiLCJib29sIiwidmVjdG9yTGF5ZXJzIiwiX3NldFVwVmVjdG9yTGF5ZXIiLCJfc2V0VXBFZGl0b3IiLCJmZWF0dXJlbG9ja3MiLCJzZXRGZWF0dXJlTG9ja3MiLCJpbnRlcmFjdGlvbiIsImN1cnJlbnRFZGl0aW5nTGF5ZXIiLCJfZ2V0Q3VycmVudEVkaXRpbmdMYXllciIsImFjdGl2ZVRvb2wiLCJpbnN0YW5jZSIsIm93bnNJbnRlcmFjdGlvbiIsIl9zdG9wRWRpdGluZ1Rvb2wiLCJMYXllciIsImdldFByb2plY3QiLCJnZXRMYXllckJ5SWQiLCJnZXRPcmlnTmFtZSIsIl9jYW5jZWxPclNhdmUiLCJfc3RvcEVkaXRpbmciLCJfc3RhcnRFZGl0aW5nIiwiX3N0YXJ0RWRpdGluZ1Rvb2wiLCJfc3RvcEVkaXRvciIsImdldExheWVyQ29kZXMiLCJ2YWx1ZXMiLCJvcHRpb25zX2VkaXRvciIsImZvcm1DbGFzcyIsIkZvcm1DbGFzcyIsInNldFZlY3RvckxheWVyIiwiZGlydHkiLCJsb2FkTGF5ZXJzIiwiX2FkZFRvTWFwIiwiZW1pdCIsIm9uYWZ0ZXIiLCJsb2FkQWxsVmVjdG9yc0RhdGEiLCJyZXNldCIsInJlbW92ZUxheWVyQnlOYW1lIiwiX3VubG9ja0xheWVyIiwiX3VwZGF0ZUVkaXRpbmdTdGF0ZSIsIl9jbGVhblVwIiwiY2xlYW5VcExheWVycyIsIl9zdGFydEVkaXRvciIsIl9zZXRDdXJyZW50RWRpdGluZ0xheWVyIiwiY2FuU3RhcnRUb29sIiwidHlwZSIsIl9hc2tUeXBlIiwiZGlydHlFZGl0b3JzIiwiaXNEaXJ0eSIsImtleXMiLCJfYXNrQ2FuY2VsT3JTYXZlIiwiX3NhdmVFZGl0cyIsImJ1dHRvblR5cGVzIiwiU0FWRSIsImxhYmVsIiwiY2xhc3NOYW1lIiwiY2FsbGJhY2siLCJOT1NBVkUiLCJDQU5DRUwiLCJidXR0b25zIiwic2F2ZSIsIm5vc2F2ZSIsImNhbmNlbCIsIl9zZW5kRWRpdHMiLCJyZXNwb25zZSIsInN1Y2Nlc3MiLCJfY29tbWl0RWRpdHMiLCJyZWZyZXNoTWFwIiwiZXJyb3JzIiwiZWRpdHNUb1B1c2giLCJsYXllcm5hbWUiLCJlZGl0cyIsImdldEVkaXRlZEZlYXR1cmVzIiwiX3Bvc3REYXRhIiwicmV0dXJuZWQiLCJlZGl0b3JzIiwidXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzIiwib2xkZmlkIiwiY2xpZW50aWQiLCJmaWQiLCJnZXRFZGl0VmVjdG9yTGF5ZXIiLCJzZXRGZWF0dXJlRGF0YSIsImNvbW1pdCIsIl91bmRvRWRpdHMiLCJjdXJyZW50RWRpdGluZ0xheWVyQ29kZSIsIl91cGRhdGVUb29sU3RlcHNTdGF0ZSIsInRvb2xJbnN0YW5jZSIsInN0ZXBzIiwiX3NldFRvb2xTdGVwU3RhdGUiLCJzdGVwIiwiaXNVbmRlZmluZWQiLCJtZXNzYWdlcyIsInRvb2xTdGVwc01lc3NhZ2VzIiwiY3VycmVudFN0ZXBJbmRleCIsInRvdGFsU3RlcHMiLCJhZGRUb01hcCIsIl9wb3N0QmF0Y2hEYXRhIiwibGF5ZXJOYW1lIiwianNvbkRhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwicG9zdCIsInVybCIsImNvbnRlbnRUeXBlIiwibXVsdGlFZGl0c1RvUHVzaCIsIl91bmxvY2siLCJsYXllckNvbmZpZyIsIkczV09iamVjdCIsIlZlY3RvckxheWVyIiwiVmVjdG9yTGF5ZXJMb2FkZXIiLCJjdXRsaW5lIiwiLi9lZGl0b3JzL2FjY2Vzc2llZGl0b3IiLCIuL2VkaXRvcnMvYXR0cmlidXRlc2Zvcm0iLCIuL2VkaXRvcnMvZ2l1bnppb25pZWRpdG9yIiwiLi9lZGl0b3JzL3N0cmFkZWVkaXRvciJdLCJtYXBwaW5ncyI6IkNBQUEsUUFBVUEsR0FBRUMsRUFBRUMsRUFBRUMsR0FBRyxRQUFTQyxHQUFFQyxFQUFFQyxHQUFHLElBQUlKLEVBQUVHLEdBQUcsQ0FBQyxJQUFJSixFQUFFSSxHQUFHLENBQUMsR0FBSUUsR0FBa0Isa0JBQVRDLFVBQXFCQSxPQUFRLEtBQUlGLEdBQUdDLEVBQUUsTUFBT0EsR0FBRUYsR0FBRSxFQUFJLElBQUdJLEVBQUUsTUFBT0EsR0FBRUosR0FBRSxFQUFJLElBQUlLLEdBQUUsR0FBSUMsT0FBTSx1QkFBdUJOLEVBQUUsSUFBSyxNQUFNSyxHQUFFRSxLQUFLLG1CQUFtQkYsRUFBRSxHQUFJRyxHQUFFWCxFQUFFRyxJQUFJUyxXQUFZYixHQUFFSSxHQUFHLEdBQUdVLEtBQUtGLEVBQUVDLFFBQVEsU0FBU2QsR0FBRyxHQUFJRSxHQUFFRCxFQUFFSSxHQUFHLEdBQUdMLEVBQUcsT0FBT0ksR0FBRUYsRUFBRUEsRUFBRUYsSUFBSWEsRUFBRUEsRUFBRUMsUUFBUWQsRUFBRUMsRUFBRUMsRUFBRUMsR0FBRyxNQUFPRCxHQUFFRyxHQUFHUyxRQUFrRCxJQUFJLEdBQTFDTCxHQUFrQixrQkFBVEQsVUFBcUJBLFFBQWdCSCxFQUFFLEVBQUVBLEVBQUVGLEVBQUVh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RyxJQUFJVCxJQUVqQmlTLEdBRGMzUixPQUFPQyxLQUFLeVksWUFDTjFZLE9BQU9DLEtBQUswWSxtQkFFaENqRixFQUFZelYsRUFBUSw0QkFHcEJXLEVBQWdCWCxFQUFRLDJCQUN4QndFLEVBQWtCeEUsRUFBUSw2QkFDMUJvSSxFQUFlcEksRUFBUSwwQkFHdkJ5WixHQUNGa0IsU0FDRSxrQ0FDQSxtQ0FDQSwyREFrckJKN1ksR0FBUXNRLEVBQWVvSSxHQUV2QjlaLEVBQU9KLFFBQVUsR0FBSThSLEtBQ2xCd0ksMEJBQTBCLEVBQUVDLDJCQUEyQixFQUFFQyw0QkFBNEIsRUFBRUMseUJBQXlCLFNBQVMiLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgYmFzZSA9IGczd3Nkay5jb3JlLnV0aWxzLmJhc2U7XG52YXIgR1VJID0gZzN3c2RrLmd1aS5HVUk7XG52YXIgSXRlcm5ldEVkaXRvciA9IHJlcXVpcmUoJy4vaXRlcm5ldGVkaXRvcicpO1xuXG5mdW5jdGlvbiBBY2Nlc3NpRWRpdG9yKG9wdGlvbnMpIHtcbiAgdmFyIGNvcHlBbmRQYXN0ZUZpZWxkc05vdE92ZXJ3cml0YWJsZSA9IHtcbiAgICAnbGF5ZXInOiAgWydjb2RfYWNjJ10sXG4gICAgJ3JlbGF0aW9ucyc6IHtcbiAgICAgICAgJ2ludGVybm8nOiBbJ2NvZF9hY2MnXSxcbiAgICAgICAgJ251bWVyb19jaXZpY28nOiBbJ2NvZF9jaXYnXVxuICAgIH1cbiAgfTtcbiAgb3B0aW9ucy5jb3B5QW5kUGFzdGVGaWVsZHNOb3RPdmVyd3JpdGFibGUgPSBjb3B5QW5kUGFzdGVGaWVsZHNOb3RPdmVyd3JpdGFibGU7XG4gIHZhciBvcHRpb25zID0gb3B0aW9ucztcbiAgLy9zb3ZyYXNjcml2byBhc2tjb25maXJtIGxpc3RlbmVyc1xuICB0aGlzLl9hc2tDb25maXJtVG9EZWxldGVFZGl0aW5nTGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm9uYmVmb3JlYXN5bmMoJ2RlbGV0ZUZlYXR1cmUnLCBmdW5jdGlvbiAoZmVhdHVyZSwgaXNOZXcsIG5leHQpIHtcbiAgICAgIGlmIChmZWF0dXJlLmdldCgndGlwX2FjYycpID09IFwiMDEwMlwiKSB7XG4gICAgICAgIEdVSS5kaWFsb2cuY29uZmlybShcIlZ1b2kgZWxpbWluYXJlIGwnZWxlbWVudG8gc2VsZXppb25hdG8gZSBnbGkgZWxlbWVudGkgYWQgZXNzaSBjb2xsZWdhdGk/XCIsIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICBuZXh0KHJlc3VsdCk7XG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB2YWRvIGEgcmljaGlhbWFyZSBpbCBkaWFsb2cgcGFkcmVcbiAgICAgICAgYmFzZSh0aGlzLCdfZGVsZXRlRmVhdHVyZURpYWxvZycsbmV4dCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIGJhc2UodGhpcyxvcHRpb25zKTtcbn1cblxuaW5oZXJpdChBY2Nlc3NpRWRpdG9yLCBJdGVybmV0RWRpdG9yKTtcblxubW9kdWxlLmV4cG9ydHMgPSBBY2Nlc3NpRWRpdG9yO1xuXG59LHtcIi4vaXRlcm5ldGVkaXRvclwiOjR9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBpbmhlcml0ID0gZzN3c2RrLmNvcmUudXRpbHMuaW5oZXJpdDtcbnZhciBiYXNlID0gZzN3c2RrLmNvcmUudXRpbHMuYmFzZTtcbnZhciBQcm9qZWN0c1JlZ2lzdHJ5ID0gZzN3c2RrLmNvcmUuUHJvamVjdHNSZWdpc3RyeTtcbnZhciBGb3JtUGFuZWwgPSBnM3dzZGsuZ3VpLkZvcm1QYW5lbDtcbnZhciBGb3JtID0gZzN3c2RrLmd1aS5Gb3JtO1xuXG52YXIgSXRlcm5ldEZvcm1QYW5lbCA9IEZvcm1QYW5lbC5leHRlbmQoe1xuICAvL3RlbXBsYXRlOiByZXF1aXJlKCcuL2F0dHJpYnV0ZXNmb3JtLmh0bWwnKVxufSk7XG5cbmZ1bmN0aW9uIEl0ZXJuZXRGb3JtKG9wdGlvbnMpe1xuICBiYXNlKHRoaXMsb3B0aW9ucyk7XG4gIHRoaXMuX2Zvcm1QYW5lbCA9IEl0ZXJuZXRGb3JtUGFuZWw7XG59XG5pbmhlcml0KEl0ZXJuZXRGb3JtLEZvcm0pO1xuXG52YXIgcHJvdG8gPSBJdGVybmV0Rm9ybS5wcm90b3R5cGU7XG5cbnByb3RvLl9pc1Zpc2libGUgPSBmdW5jdGlvbihmaWVsZCl7XG4gIHZhciByZXQgPSB0cnVlO1xuICBzd2l0Y2ggKGZpZWxkLm5hbWUpe1xuICAgIGNhc2UgXCJjb2RfYWNjX2VzdFwiOlxuICAgICAgdmFyIHRpcF9hY2MgPSB0aGlzLl9nZXRGaWVsZChcInRpcF9hY2NcIik7XG4gICAgICBpZiAodGlwX2FjYy52YWx1ZT09XCIwMTAxXCIpe1xuICAgICAgICByZXQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjb2RfYWNjX2ludFwiOlxuICAgICAgdmFyIHRpcF9hY2MgPSB0aGlzLl9nZXRGaWVsZChcInRpcF9hY2NcIik7XG4gICAgICBpZiAodGlwX2FjYy52YWx1ZT09XCIwMTAxXCIgfHwgdGlwX2FjYy52YWx1ZT09XCIwNTAxXCIpe1xuICAgICAgICByZXQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiByZXQ7XG59O1xuXG5wcm90by5faXNFZGl0YWJsZSA9IGZ1bmN0aW9uKGZpZWxkKXtcbiAgaWYgKGZpZWxkLm5hbWUgPT0gXCJ0aXBfYWNjXCIgJiYgIXRoaXMuX2lzTmV3KCkpe1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbiAgcmV0dXJuIEZvcm0ucHJvdG90eXBlLl9pc0VkaXRhYmxlLmNhbGwodGhpcyxmaWVsZCk7XG59O1xuXG5wcm90by5fc2hvdWxkU2hvd1JlbGF0aW9uID0gZnVuY3Rpb24ocmVsYXRpb24pe1xuICBpZiAocmVsYXRpb24ubmFtZT09XCJudW1lcm9fY2l2aWNvXCIpe1xuICAgIHZhciB0aXBfYWNjID0gdGhpcy5fZ2V0RmllbGQoXCJ0aXBfYWNjXCIpO1xuICAgIGlmICh0aXBfYWNjLnZhbHVlID09ICcwMTAyJyl7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxucHJvdG8uX3BpY2tMYXllciA9IGZ1bmN0aW9uKGZpZWxkKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgbGF5ZXJJZCA9IGZpZWxkLmlucHV0Lm9wdGlvbnMubGF5ZXJpZDtcbiAgXG4gIEZvcm0ucHJvdG90eXBlLl9waWNrTGF5ZXIuY2FsbCh0aGlzLGZpZWxkKVxuICAudGhlbihmdW5jdGlvbihhdHRyaWJ1dGVzKXtcbiAgICB2YXIgbGlua2VkRmllbGQ7XG4gICAgdmFyIGxpbmtlZEZpZWxkQXR0cmlidXRlTmFtZTtcbiAgICBcbiAgICBzd2l0Y2ggKGZpZWxkLm5hbWUpIHtcbiAgICAgIGNhc2UgJ2NvZF9lbGUnOlxuICAgICAgICBsaW5rZWRGaWVsZCA9IHNlbGYuX2dldFJlbGF0aW9uRmllbGQoXCJjb2RfdG9wXCIsXCJudW1lcm9fY2l2aWNvXCIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2NvZF90b3AnOlxuICAgICAgICBsaW5rZWRGaWVsZCA9IHNlbGYuX2dldEZpZWxkKFwiY29kX2VsZVwiKTs7XG4gICAgfVxuICAgIFxuICAgIGlmIChsaW5rZWRGaWVsZCkge1xuICAgICAgdmFyIHByb2plY3QgPSBQcm9qZWN0c1JlZ2lzdHJ5LmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgICBsaW5rZWRGaWVsZEF0dHJpYnV0ZU5hbWUgPSBwcm9qZWN0LmdldExheWVyQXR0cmlidXRlTGFiZWwobGF5ZXJJZCxsaW5rZWRGaWVsZC5pbnB1dC5vcHRpb25zLmZpZWxkKTtcbiAgICAgIGlmIChsaW5rZWRGaWVsZCAmJiBhdHRyaWJ1dGVzW2xpbmtlZEZpZWxkQXR0cmlidXRlTmFtZV0pe1xuICAgICAgICBsaW5rZWRGaWVsZC52YWx1ZSA9IGF0dHJpYnV0ZXNbbGlua2VkRmllbGRBdHRyaWJ1dGVOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEl0ZXJuZXRGb3JtO1xuXG59LHt9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBpbmhlcml0ID0gZzN3c2RrLmNvcmUudXRpbHMuaW5oZXJpdDtcbnZhciBiYXNlID0gZzN3c2RrLmNvcmUudXRpbHMuYmFzZTtcbnZhciBJdGVybmV0RWRpdG9yID0gcmVxdWlyZSgnLi9pdGVybmV0ZWRpdG9yJyk7XG5cbmZ1bmN0aW9uIEdpdW56aW9uaUVkaXRvcihvcHRpb25zKXtcbiAgYmFzZSh0aGlzLG9wdGlvbnMpO1xuICBcbiAgdGhpcy5fc2VydmljZSA9IG51bGw7XG4gIHRoaXMuX3N0cmFkZUVkaXRvciA9IG51bGw7XG4gIHRoaXMuX2dpdW56aW9uZUdlb21MaXN0ZW5lciA9IG51bGw7XG4gIFxuICAvKiBJTklaSU8gTU9ESUZJQ0EgVE9QT0xPR0lDQSBERUxMRSBHSVVOWklPTkkgKi9cbiAgXG4gIHRoaXMuX3NldHVwTW92ZUdpdW56aW9uaUxpc3RlbmVyID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5vbignbW92ZXN0YXJ0JyxmdW5jdGlvbihmZWF0dXJlKXtcbiAgICAgIC8vIHJpbXVvdm8gZXZlbnR1YWxpIHByZWNlZGVudGkgbGlzdGVuZXJzXG4gICAgICBzZWxmLl9zdGFydE1vdmluZ0dpdW56aW9uZShmZWF0dXJlKTtcbiAgICB9KTtcbiAgfTtcbiAgXG4gIHRoaXMuX3N0cmFkZVRvVXBkYXRlID0gW107XG4gIFxuICB0aGlzLl9zdGFydE1vdmluZ0dpdW56aW9uZSA9IGZ1bmN0aW9uKGZlYXR1cmUpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdmVjdG9yTGF5ZXIgPSB0aGlzLmdldFZlY3RvckxheWVyKCk7XG4gICAgdmFyIHN0cmFkZUVkaXRvciA9IHRoaXMuX3N0cmFkZUVkaXRvcjtcbiAgICB2YXIgZ2l1bnppb25lID0gZmVhdHVyZTtcbiAgICB2YXIgY29kX2dueiA9IGdpdW56aW9uZS5nZXQoJ2NvZF9nbnonKTtcbiAgICAvLyBkZXZvIGF2dmlhcmUgbCdlZGl0b3IgZGVsbGUgc3RyYWRlXG4gICAgdGhpcy5fc3RyYWRlVG9VcGRhdGUgPSBbXTtcbiAgICB2YXIgc3RyYWRlID0gc3RyYWRlRWRpdG9yLmdldFZlY3RvckxheWVyKCkuZ2V0U291cmNlKCkuZ2V0RmVhdHVyZXMoKTtcbiAgICBfLmZvckVhY2goc3RyYWRlLGZ1bmN0aW9uKHN0cmFkYSl7XG4gICAgICB2YXIgbm9kX2luaSA9IHN0cmFkYS5nZXQoJ25vZF9pbmknKTtcbiAgICAgIHZhciBub2RfZmluID0gc3RyYWRhLmdldCgnbm9kX2ZpbicpO1xuICAgICAgdmFyIGluaSA9IChub2RfaW5pID09IGNvZF9nbnopO1xuICAgICAgdmFyIGZpbiA9IChub2RfZmluID09IGNvZF9nbnopO1xuICAgICAgaWYgKGluaSB8fCBmaW4pe1xuICAgICAgICB2YXIgaW5pdGlhbCA9IGluaSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgc2VsZi5fc3RyYWRlVG9VcGRhdGUucHVzaChzdHJhZGEpO1xuICAgICAgICBzZWxmLl9zdGFydEdpdW56aW9uaVN0cmFkZVRvcG9sb2dpY2FsRWRpdGluZyhnaXVuemlvbmUsc3RyYWRhLGluaXRpYWwpXG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5vbmNlKCdtb3ZlZW5kJyxmdW5jdGlvbihmZWF0dXJlKXtcbiAgICAgIGlmICggc2VsZi5fc3RyYWRlVG9VcGRhdGUubGVuZ3RoKXtcbiAgICAgICAgaWYgKCFzdHJhZGVFZGl0b3IuaXNTdGFydGVkKCkpe1xuICAgICAgICAgIHN0cmFkZUVkaXRvci5zdGFydCh0aGlzLl9zZXJ2aWNlKTtcbiAgICAgICAgfVxuICAgICAgICBfLmZvckVhY2goIHNlbGYuX3N0cmFkZVRvVXBkYXRlLGZ1bmN0aW9uKHN0cmFkYSl7XG4gICAgICAgICAgc3RyYWRlRWRpdG9yLnVwZGF0ZUZlYXR1cmUoc3RyYWRhKTtcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgXG4gIHRoaXMuX3N0YXJ0R2l1bnppb25pU3RyYWRlVG9wb2xvZ2ljYWxFZGl0aW5nID0gZnVuY3Rpb24oZ2l1bnppb25lLHN0cmFkYSxpbml0aWFsKXtcbiAgICB2YXIgc3RyYWRhR2VvbSA9IHN0cmFkYS5nZXRHZW9tZXRyeSgpO1xuICAgIHZhciBzdHJhZGFDb29yZHMgPSBzdHJhZGEuZ2V0R2VvbWV0cnkoKS5nZXRDb29yZGluYXRlcygpO1xuICAgIHZhciBjb29yZEluZGV4ID0gaW5pdGlhbCA/IDAgOiBzdHJhZGFDb29yZHMubGVuZ3RoLTE7XG4gICAgdmFyIGdpdW56aW9uZUdlb20gPSBnaXVuemlvbmUuZ2V0R2VvbWV0cnkoKTtcbiAgICB2YXIgbGlzdGVuZXJLZXkgPSBnaXVuemlvbmVHZW9tLm9uKCdjaGFuZ2UnLGZ1bmN0aW9uKGUpe1xuICAgICAgc3RyYWRhQ29vcmRzW2Nvb3JkSW5kZXhdID0gZS50YXJnZXQuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIHN0cmFkYUdlb20uc2V0Q29vcmRpbmF0ZXMoc3RyYWRhQ29vcmRzKTtcbiAgICB9KTtcbiAgICB0aGlzLl9naXVuemlvbmVHZW9tTGlzdGVuZXIgPSBsaXN0ZW5lcktleTtcbiAgfTtcbiAgXG4gIC8qIEZJTkUgTU9ESUZJQ0EgVE9QT0xPR0lDQSBHSVVOWklPTkkgKi9cbiAgXG4gIC8qIElOSVpJTyBSSU1PWklPTkUgR0lVTlpJT05JICovXG4gIFxuICB0aGlzLl9zZXR1cERlbGV0ZUdpdW56aW9uaUxpc3RlbmVyID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHN0cmFkZUVkaXRvciA9IHRoaXMuX3N0cmFkZUVkaXRvcjtcbiAgICB0aGlzLm9uYmVmb3JlYXN5bmMoJ2RlbGV0ZUZlYXR1cmUnLGZ1bmN0aW9uKGZlYXR1cmUsaXNOZXcsbmV4dCl7XG4gICAgICB2YXIgc3RvcERlbGV0aW9uID0gZmFsc2U7XG4gICAgICB2YXIgc3RyYWRlVmVjdG9yTGF5ZXIgPSBzdHJhZGVFZGl0b3IuZ2V0VmVjdG9yTGF5ZXIoKTtcbiAgICAgIF8uZm9yRWFjaChzdHJhZGVWZWN0b3JMYXllci5nZXRGZWF0dXJlcygpLGZ1bmN0aW9uKHN0cmFkYSl7XG4gICAgICAgIHZhciBjb2RfZ256ID0gZmVhdHVyZS5nZXQoJ2NvZF9nbnonKTtcbiAgICAgICAgdmFyIG5vZF9pbmkgPSBzdHJhZGEuZ2V0KCdub2RfaW5pJyk7XG4gICAgICAgIHZhciBub2RfZmluID0gc3RyYWRhLmdldCgnbm9kX2ZpbicpO1xuICAgICAgICB2YXIgaW5pID0gKG5vZF9pbmkgPT0gY29kX2dueik7XG4gICAgICAgIHZhciBmaW4gPSAobm9kX2ZpbiA9PSBjb2RfZ256KTtcbiAgICAgICAgaWYgKGluaSB8fCBmaW4pe1xuICAgICAgICAgIHN0b3BEZWxldGlvbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAoc3RvcERlbGV0aW9uKXtcbiAgICAgICAgR1VJLm5vdGlmeS5lcnJvcihcIk5vbiDDqCBwb3NzaWJpbGUgcmltdW92ZXJlIGxhIGdpdW56aW9uaSBwZXJjaMOpIHJpc3VsdGEgY29ubmVzc2EgYWQgdW5hIG8gcGnDuSBzdHJhZGVcIik7XG4gICAgICB9XG4gICAgICBuZXh0KCFzdG9wRGVsZXRpb24pO1xuICAgIH0pO1xuICB9O1xuICBcbiAgLyogRklORSAqL1xufVxuaW5oZXJpdChHaXVuemlvbmlFZGl0b3IsSXRlcm5ldEVkaXRvcik7XG5tb2R1bGUuZXhwb3J0cyA9IEdpdW56aW9uaUVkaXRvcjtcblxudmFyIHByb3RvID0gR2l1bnppb25pRWRpdG9yLnByb3RvdHlwZTtcblxucHJvdG8uc3RhcnQgPSBmdW5jdGlvbihpdGVybmV0U2VydmljZSkge1xuICB0aGlzLl9zZXJ2aWNlID0gaXRlcm5ldFNlcnZpY2U7XG4gIHRoaXMuX3N0cmFkZUVkaXRvciA9IGl0ZXJuZXRTZXJ2aWNlLl9sYXllcnNbaXRlcm5ldFNlcnZpY2UubGF5ZXJDb2Rlcy5TVFJBREVdLmVkaXRvcjtcbiAgdGhpcy5fc2V0dXBNb3ZlR2l1bnppb25pTGlzdGVuZXIoKTtcbiAgdGhpcy5fc2V0dXBEZWxldGVHaXVuemlvbmlMaXN0ZW5lcigpO1xuICByZXR1cm4gSXRlcm5ldEVkaXRvci5wcm90b3R5cGUuc3RhcnQuY2FsbCh0aGlzKTtcbn07XG5cbnByb3RvLnN0b3AgPSBmdW5jdGlvbigpe1xuICB2YXIgcmV0ID0gZmFsc2U7XG4gIGlmIChJdGVybmV0RWRpdG9yLnByb3RvdHlwZS5zdG9wLmNhbGwodGhpcykpe1xuICAgIHJldCA9IHRydWU7XG4gICAgb2wuT2JzZXJ2YWJsZS51bkJ5S2V5KHRoaXMuX2dpdW56aW9uZUdlb21MaXN0ZW5lcik7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5cbnByb3RvLnNldFRvb2wgPSBmdW5jdGlvbih0b29sVHlwZSl7XG4gIHZhciBvcHRpb25zO1xuICBpZiAodG9vbFR5cGU9PSdhZGRmZWF0dXJlJyl7XG4gICAgb3B0aW9ucyA9IHtcbiAgICAgIHNuYXA6IHtcbiAgICAgICAgdmVjdG9yTGF5ZXI6IHRoaXMuX3N0cmFkZUVkaXRvci5nZXRWZWN0b3JMYXllcigpXG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBJdGVybmV0RWRpdG9yLnByb3RvdHlwZS5zZXRUb29sLmNhbGwodGhpcyx0b29sVHlwZSxvcHRpb25zKTtcbn07XG5cbn0se1wiLi9pdGVybmV0ZWRpdG9yXCI6NH1dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIGluaGVyaXQgPSBnM3dzZGsuY29yZS51dGlscy5pbmhlcml0O1xudmFyIGJhc2UgPSBnM3dzZGsuY29yZS51dGlscy5iYXNlO1xudmFyIEVkaXRvciA9IGczd3Nkay5jb3JlLkVkaXRvcjtcblxudmFyIEZvcm0gPSByZXF1aXJlKCcuL2F0dHJpYnV0ZXNmb3JtJyk7XG52YXIgZm9ybSA9IG51bGw7IC8vIGJydXR0byBtYSBkZXZvIHRlbmVybG8gZXN0ZXJubyBzZW5uw7Igc2kgY3JlYSB1biBjbGljbyBkaSByaWZlcmltZW50aSBjaGUgbWFuZGEgaW4gcGFsbGEgVnVlXG4gIFxuZnVuY3Rpb24gSXRlcm5ldEVkaXRvcihvcHRpb25zKSB7XG5cbiAgLy8gaW4gcXVlc3RvIG1vZG8gcGFzc2lhbW8gaWwgbWFwc2VydmljZSBjb21lIGFyZ29tZW50byBhbCBzdXBlcmNsYXNzIChlZGl0b3IpXG4gIC8vIGRpIGl0ZXJuZXRlZGl0b3IgaW4gbW9kbyBkYSBhc3NlZ25hcmFlIGFuY2hlIGEgaXRlcm5ldGVkaXRvciBpbCBtYXBzZXJ2ZWljZSBjaGUgeHNlcnZpcsOgIGFkIGVzZW1waW8gYWQgYWdnaXVuZ2VyZVxuICAvLyBsJ2ludGVyYWN0aW9uIGFsbGEgbWFwcGEgcXVhbmRvIHZpZW5lIGNsaWNjYXRvIHN1IHVuIHRvb2xcbiAgYmFzZSh0aGlzLCBvcHRpb25zKTtcbiAgLy8gYXByZSBmb3JtIGF0dHJpYnV0aSBwZXIgaW5zZXJpbWVudG9cbn1cbmluaGVyaXQoSXRlcm5ldEVkaXRvciwgRWRpdG9yKTtcblxubW9kdWxlLmV4cG9ydHMgPSBJdGVybmV0RWRpdG9yO1xuXG59LHtcIi4vYXR0cmlidXRlc2Zvcm1cIjoyfV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgYmFzZSA9IGczd3Nkay5jb3JlLnV0aWxzLmJhc2U7XG52YXIgR1VJID0gZzN3c2RrLmd1aS5HVUk7XG52YXIgSXRlcm5ldEVkaXRvciA9IHJlcXVpcmUoJy4vaXRlcm5ldGVkaXRvcicpO1xuXG5mdW5jdGlvbiBTdHJhZGVFZGl0b3Iob3B0aW9ucykge1xuXG4gIGJhc2UodGhpcyxvcHRpb25zKTtcbiAgdGhpcy5fc2VydmljZSA9IG51bGw7XG4gIHRoaXMuX2dpdW56aW9uaUVkaXRvciA9IG51bGw7XG4gIHRoaXMuX21hcFNlcnZpY2UgPSBHVUkuZ2V0Q29tcG9uZW50KCdtYXAnKS5nZXRTZXJ2aWNlKCk7XG4gIHRoaXMuX3N0cmFkZVNuYXBzID0gbnVsbDtcbiAgdGhpcy5fc3RyYWRlU25hcHNDb2xsZWN0aW9uID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc25hcHMgPSBbXTtcbiAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgXG4gICAgdGhpcy5wdXNoID0gZnVuY3Rpb24oZmVhdHVyZSl7XG4gICAgICB2YXIgcHVzaGVkID0gZmFsc2U7XG4gICAgICBpZiAodGhpcy5jYW5TbmFwKGZlYXR1cmUpKXtcbiAgICAgICAgc25hcHMucHVzaChmZWF0dXJlKTtcbiAgICAgICAgdGhpcy5sZW5ndGggKz0gMTtcbiAgICAgICAgcHVzaGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwdXNoZWQ7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmdldExhc3QgPSBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHNuYXBzW3NuYXBzLmxlbmd0aC0xXTtcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuZ2V0Rmlyc3QgPSBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHNuYXBzWzBdO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5jbGVhciA9IGZ1bmN0aW9uKCl7XG4gICAgICBzbmFwcy5zcGxpY2UoMCxzbmFwcy5sZW5ndGgpO1xuICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRTbmFwcyA9IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gc25hcHM7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmNhblNuYXAgPSBmdW5jdGlvbihmZWF0dXJlKXtcbiAgICAgIGlmICh0aGlzLmlzQWxyZWFkeVNuYXBwZWQoZmVhdHVyZSkpe1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgY29kX2dueiA9IGZlYXR1cmUuZ2V0KCdjb2RfZ256Jyk7XG4gICAgICByZXR1cm4gKCFfLmlzTmlsKGNvZF9nbnopICYmIGNvZF9nbnogIT0gJycpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5pc0FscmVhZHlTbmFwcGVkID0gZnVuY3Rpb24oZmVhdHVyZSl7XG4gICAgICByZXR1cm4gXy5pbmNsdWRlcyh0aGlzLnNuYXBzLGZlYXR1cmUpO1xuICAgIH1cbiAgfTtcbiAgXG4gIHRoaXMuX3VwZGF0ZVN0cmFkYUF0dHJpYnV0ZXMgPSBmdW5jdGlvbihmZWF0dXJlKXtcbiAgICB2YXIgc25hcHMgPSB0aGlzLl9zdHJhZGVTbmFwcztcbiAgICBmZWF0dXJlLnNldCgnbm9kX2luaScsc25hcHMuZ2V0U25hcHMoKVswXS5nZXQoJ2NvZF9nbnonKSk7XG4gICAgZmVhdHVyZS5zZXQoJ25vZF9maW4nLHNuYXBzLmdldFNuYXBzKClbMV0uZ2V0KCdjb2RfZ256JykpO1xuICB9O1xuICBcbiAgLyogQ09OVFJPTExPIEdJVU5aSU9OSSBQRVIgTEUgU1RSQURFIE5PTiBDT01QTEVUQU1FTlRFIENPTlRFTlVURSBORUxMQSBWSVNUQSAqL1xuICBcbiAgLy8gcGVyIGxlIHN0cmFkZSBwcmVzZW50aSBuZWxsYSB2aXN0YSBjYXJpY2EgbGUgZ2l1bnppb25pIGV2ZW50dWFsbWVudGUgbWFuY2FudGkgKGVzdGVybmUgYWxsYSB2aXN0YSlcbiAgdGhpcy5fbG9hZE1pc3NpbmdHaXVuemlvbmlJblZpZXcgPSBmdW5jdGlvbigpe1xuICAgIHZhciB2ZWN0b3JMYXllciA9IHRoaXMuZ2V0VmVjdG9yTGF5ZXIoKTtcbiAgICB2YXIgZ2l1bnppb25pVmVjdG9yTGF5ZXIgPSB0aGlzLl9naXVuemlvbmlFZGl0b3IuZ2V0VmVjdG9yTGF5ZXIoKTtcbiAgICB2YXIgc3RyYWRlU291cmNlID0gdmVjdG9yTGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgdmFyIGV4dGVudCA9IG9sLmV4dGVudC5idWZmZXIoc3RyYWRlU291cmNlLmdldEV4dGVudCgpLDEpO1xuICAgIHZhciBsb2FkZXIgPSB0aGlzLl9zZXJ2aWNlLmdldExvYWRlcigpO1xuICAgIGxvYWRlci5fbG9hZFZlY3RvckRhdGEoZ2l1bnppb25pVmVjdG9yTGF5ZXIsZXh0ZW50KTtcbiAgfTtcbiAgXG4gIC8qIEZJTkUgKi9cbiAgXG4gIC8qIElOSVpJTyBHRVNUSU9ORSBWSU5DT0xPIFNOQVAgU1UgR0lVTlpJT05JIERVUkFOVEUgSUwgRElTRUdOTyBERUxMRSBTVFJBREUgKi9cbiAgXG4gIHRoaXMuX2RyYXdSZW1vdmVMYXN0UG9pbnQgPSBfLmJpbmQoZnVuY3Rpb24oZSl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB0b29sVHlwZSA9IHRoaXMuZ2V0QWN0aXZlVG9vbCgpLmdldFR5cGUoKTtcbiAgICAvLyBpbCBsaXN0ZW5lciB2aWVuZSBhdHRpdmF0byBwZXIgdHV0dGkgaSB0b29sIGRlbGwnZWRpdG9yIHN0cmFkZSwgcGVyIGN1aSBkZXZvIGNvbnRyb2xsYXJlIGNoZSBzaWEgcXVlbGxvIGdpdXN0b1xuICAgIGlmICh0b29sVHlwZSA9PSAnYWRkZmVhdHVyZScpe1xuICAgICAgLy8gQ0FOQ1xuICAgICAgaWYoZS5rZXlDb2RlPT00Nil7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgc2VsZi5nZXRBY3RpdmVUb29sKCkuZ2V0VG9vbCgpLnJlbW92ZUxhc3RQb2ludCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSx0aGlzKTtcbiAgXG4gIHRoaXMuX3NldHVwRHJhd1N0cmFkZUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5vbmJlZm9yZSgnYWRkRmVhdHVyZScsZnVuY3Rpb24oZmVhdHVyZSkge1xuICAgICAgdmFyIHNuYXBzID0gc2VsZi5fc3RyYWRlU25hcHM7XG4gICAgICBpZiAoc25hcHMubGVuZ3RoID09IDIpe1xuICAgICAgICBzZWxmLl91cGRhdGVTdHJhZGFBdHRyaWJ1dGVzKGZlYXR1cmUpO1xuICAgICAgICBzbmFwcy5jbGVhcigpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LDApO1xuICB9O1xuICBcbiAgdGhpcy5fZ2V0Q2hlY2tTbmFwc0NvbmRpdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIGFkIG9nbmkgY2xpY2sgY29udHJvbGxvIHNlIGNpIHNvbm8gZGVnbGkgc25hcCBjb24gbGUgZ2l1bnppb25pXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpe1xuICAgICAgdmFyIHNuYXBzID0gc2VsZi5fc3RyYWRlU25hcHM7XG4gICAgICBpZiAoc25hcHMubGVuZ3RoID09IDIpe1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIEdVSS5ub3RpZnkuZXJyb3IoXCJMJ3VsdGltbyB2ZXJ0aWNlIGRldmUgY29ycmlzcG9uZGVyZSBjb24gdW5hIGdpdW56aW9uZVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG4gIFxuICAvLyBhZCBvZ25pIGNsaWNrIGNvbnRyb2xsbyBzZSBjaSBzb25vIGRlZ2xpIHNuYXAgY29uIGxlIGdpdW56aW9uaVxuICB0aGlzLl9nZXRTdHJhZGFJc0JlaW5nU25hcHBlZENvbmRpdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBtYXAgPSB0aGlzLl9tYXBTZXJ2aWNlLnZpZXdlci5tYXA7XG4gICAgdmFyIGdpdW56aW9uaVZlY3RvckxheWVyID0gdGhpcy5fZ2l1bnppb25pRWRpdG9yLmdldFZlY3RvckxheWVyKCk7XG4gICAgXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpe1xuICAgICAgdmFyIHNuYXBzID0gc2VsZi5fc3RyYWRlU25hcHM7XG4gICAgICB2YXIgYyA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsKGUucGl4ZWwpO1xuICAgICAgdmFyIGdpdW56aW9uaVNvdXJjZSA9IGdpdW56aW9uaVZlY3RvckxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgdmFyIGV4dGVudCA9IG9sLmV4dGVudC5idWZmZXIoW2NbMF0sY1sxXSxjWzBdLGNbMV1dLDEpO1xuICAgICAgdmFyIHNuYXBwZWRGZWF0dXJlID0gZ2l1bnppb25pU291cmNlLmdldEZlYXR1cmVzSW5FeHRlbnQoZXh0ZW50KVswXTtcbiAgICAgIFxuICAgICAgLy8gc2UgaG8gZ2nDoCBkdWUgc25hcCBlIHF1ZXN0byBjbGljayBub24gw6ggc3UgdW4nYWx0cmEgZ2l1bnppb25lLCBvcHB1cmUgc2UgaG8gcGnDuSBkaSAyIHNuYXAsIG5vbiBwb3NzbyBpbnNlcmlyZSB1biB1bHRlcmlvcmUgdmVydGljZVxuICAgICAgaWYgKChzbmFwcy5sZW5ndGggPT0gMiAmJiAoIXNuYXBwZWRGZWF0dXJlIHx8IHNuYXBwZWRGZWF0dXJlICE9IHNuYXBzLmdldFNuYXBzKClbMV0pKSl7XG4gICAgICAgIHZhciBsYXN0U25hcHBlZDtcbiAgICAgICAgR1VJLm5vdGlmeS5lcnJvcihcIlVuYSBzdHJhZGEgbm9uIHB1w7IgYXZlcmUgdmVydGljaSBpbnRlcm1lZGkgaW4gY29ycmlzcG9uZGVuemEgZGkgZ2l1bnppb25pLjxicj4gUHJlbWVyZSA8Yj5DQU5DPC9iPiBwZXIgcmltdW92ZXJlIGwndWx0aW1vIHZlcnRpY2UuXCIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChzbmFwcGVkRmVhdHVyZSAmJiBzbmFwcy5sZW5ndGggPCAyKXtcbiAgICAgICAgc25hcHMucHVzaChzbmFwcGVkRmVhdHVyZSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIHNlIG5vbiBjaSBzb25vIHNuYXAsIHZ1b2wgZGlyZSBjaGUgc29ubyBhbmNvcmEgYWwgcHJpbW8gY2xpY2sgZSBub24gaG8gc25hcHBhdG8gY29uIGxhIGdpdW56aW9uZSBpbml6aWFsZVxuICAgICAgaWYgKHNuYXBzLmxlbmd0aCA9PSAwKXtcbiAgICAgICAgR1VJLm5vdGlmeS5lcnJvcihcIklsIHByaW1vIHZlcnRpY2UgZGV2ZSBjb3JyaXNwb25kZXJlIGNvbiB1bmEgZ2l1bnppb25lXCIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH07XG4gIFxuICAvKiBGSU5FIERJU0VHTk8gKi9cbiAgXG4gIC8qIElOSVpJTyBDT05UUk9MTEkgU1UgTU9ESUZJQ0EgKi9cbiAgXG4gIHRoaXMuX21vZGlmeVJlbW92ZVBvaW50ID0gXy5iaW5kKGZ1bmN0aW9uKGUpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdG9vbFR5cGUgPSB0aGlzLmdldEFjdGl2ZVRvb2woKS5nZXRUeXBlKCk7XG4gICAgaWYgKHRvb2xUeXBlID09ICdtb2RpZnl2ZXJ0ZXgnKXtcbiAgICAgIGlmKGUua2V5Q29kZT09NDYpe1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHNlbGYuZ2V0QWN0aXZlVG9vbCgpLmdldFRvb2woKS5yZW1vdmVQb2ludCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSx0aGlzKTtcbiAgXG4gIHRoaXMuX3NldHVwTW9kaWZ5VmVydGV4U3RyYWRlQ29uc3RyYWludHMgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgbWFwID0gdGhpcy5fbWFwU2VydmljZS52aWV3ZXIubWFwO1xuICAgIHRoaXMub25iZWZvcmUoJ21vZGlmeUZlYXR1cmUnLGZ1bmN0aW9uKGZlYXR1cmUpe1xuICAgICAgdmFyIHNuYXBzID0gc2VsZi5fc3RyYWRlU25hcHM7XG4gICAgICB2YXIgY29ycmVjdCA9IHNlbGYuX2NoZWNrU3RyYWRhSXNDb3JyZWN0bHlTbmFwcGVkKGZlYXR1cmUuZ2V0R2VvbWV0cnkoKSk7XG4gICAgICBpZiAoY29ycmVjdCl7XG4gICAgICAgIHNlbGYuX3VwZGF0ZVN0cmFkYUF0dHJpYnV0ZXMoZmVhdHVyZSk7XG4gICAgICAgIHNuYXBzLmNsZWFyKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29ycmVjdDtcbiAgICB9KTtcbiAgfTtcbiAgXG4gIHRoaXMuX2NoZWNrU3RyYWRhSXNDb3JyZWN0bHlTbmFwcGVkID0gZnVuY3Rpb24oZ2VvbWV0cnkpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcmV0ID0gdHJ1ZTtcbiAgICB2YXIgbWFwID0gdGhpcy5fbWFwU2VydmljZS52aWV3ZXIubWFwO1xuICAgIHZhciBnaXVuemlvbmlWZWN0b3JMYXllciA9IHRoaXMuX2dpdW56aW9uaUVkaXRvci5nZXRWZWN0b3JMYXllcigpO1xuICAgIHRoaXMuX3N0cmFkZVNuYXBzLmNsZWFyKCk7XG4gICAgdmFyIHNuYXBzID0gdGhpcy5fc3RyYWRlU25hcHM7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICBcbiAgICB2YXIgZmlyc3RWZXJ0ZXhTbmFwcGVkID0gZmFsc2U7XG4gICAgdmFyIGxhc3RWZXJ0ZXhTbmFwcGVkID0gZmFsc2U7XG4gICAgXG4gICAgXy5mb3JFYWNoKGNvb3JkaW5hdGVzLGZ1bmN0aW9uKGMsaW5kZXgpeyAgICAgIFxuICAgICAgdmFyIGdpdW56aW9uaVNvdXJjZSA9IGdpdW56aW9uaVZlY3RvckxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgXG4gICAgICB2YXIgZXh0ZW50ID0gb2wuZXh0ZW50LmJ1ZmZlcihbY1swXSxjWzFdLGNbMF0sY1sxXV0sMC4xKTtcbiAgICAgIFxuICAgICAgdmFyIHNuYXBwZWRGZWF0dXJlID0gZ2l1bnppb25pU291cmNlLmdldEZlYXR1cmVzSW5FeHRlbnQoZXh0ZW50KVswXTtcbiAgICAgIFxuICAgICAgaWYgKHNuYXBwZWRGZWF0dXJlKXtcbiAgICAgICAgaWYgKGluZGV4ID09IDAgJiYgc25hcHMucHVzaChzbmFwcGVkRmVhdHVyZSkpe1xuICAgICAgICAgIGZpcnN0VmVydGV4U25hcHBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5kZXggPT0gKGNvb3JkaW5hdGVzLmxlbmd0aC0xKSAmJiBzbmFwcy5wdXNoKHNuYXBwZWRGZWF0dXJlKSl7XG4gICAgICAgICAgbGFzdFZlcnRleFNuYXBwZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGlmIChzbmFwcy5sZW5ndGggPiAyKXtcbiAgICAgIEdVSS5ub3RpZnkuZXJyb3IoXCJVbmEgc3RyYWRhIG5vbiBwdcOyIGF2ZXJlIHZlcnRpY2kgaW50ZXJtZWRpIGluIGNvcnJpc3BvbmRlbnphIGRpIGdpdW56aW9uaVwiKTtcbiAgICAgIHJldCA9IGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIWZpcnN0VmVydGV4U25hcHBlZCl7XG4gICAgICBHVUkubm90aWZ5LmVycm9yKFwiSWwgcHJpbW8gdmVydGljZSBkZXZlIGNvcnJpc3BvbmRlcmUgY29uIHVuYSBnaXVuemlvbmVcIik7XG4gICAgICByZXQgPSBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCFsYXN0VmVydGV4U25hcHBlZCl7XG4gICAgICBHVUkubm90aWZ5LmVycm9yKFwiTCd1bHRpbW8gdmVydGljZSBkZXZlIGNvcnJpc3BvbmRlcmUgY29uIHVuYSBnaXVuemlvbmVcIik7XG4gICAgICByZXQgPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcbiAgXG4gIC8qIEZJTkUgTU9ESUZJQ0EgKi9cbiAgXG4gIC8qIElOSVpJTyBUQUdMSU8gKi9cbiAgXG4gIHRoaXMuX3NldHVwU3RyYWRlQ3V0dGVyUG9zdFNlbGVjdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMub25iZWZvcmVhc3luYygnY3V0TGluZScsZnVuY3Rpb24oZGF0YSxtb2RUeXBlLG5leHQpe1xuICAgICAgaWYgKG1vZFR5cGUgPT0gJ01PRE9OQ1VUJyl7XG4gICAgICAgIC8vIGxhIHByaW1hIGZlYXR1cmUgaW4gZGF0YS5hZGQgw6ggcXVlbGxhIGRhIGFnZ2l1bmdlcmUgY29tZSBudW92YVxuICAgICAgICB2YXIgbmV3RmVhdHVyZSA9IGRhdGEuYWRkZWRbMF07XG4gICAgICAgIHZhciBuZXdGZWF0dXJlU25hcHMgPSBzZWxmLl9nZXRGaXJzdExhc3RTbmFwcGVkR2l1bnppb25pKG5ld0ZlYXR1cmUuZ2V0R2VvbWV0cnkoKSk7XG4gICAgICAgIG5ld0ZlYXR1cmUuc2V0KCdub2RfaW5pJyxuZXdGZWF0dXJlU25hcHNbMF0uZ2V0KCdjb2RfZ256JykpO1xuICAgICAgICBuZXdGZWF0dXJlLnNldCgnbm9kX2ZpbicsbmV3RmVhdHVyZVNuYXBzWzFdLmdldCgnY29kX2dueicpKTtcbiAgICAgICAgXG4gICAgICAgIHZhciB1cGRhdGVGZWF0dXJlID0gZGF0YS51cGRhdGVkO1xuICAgICAgICB2YXIgdXBkYXRlRmVhdHVyZVNuYXBzID0gc2VsZi5fZ2V0Rmlyc3RMYXN0U25hcHBlZEdpdW56aW9uaSh1cGRhdGVGZWF0dXJlLmdldEdlb21ldHJ5KCkpO1xuICAgICAgICB1cGRhdGVGZWF0dXJlLnNldCgnbm9kX2luaScsdXBkYXRlRmVhdHVyZVNuYXBzWzBdLmdldCgnY29kX2dueicpKTtcbiAgICAgICAgdXBkYXRlRmVhdHVyZS5zZXQoJ25vZF9maW4nLHVwZGF0ZUZlYXR1cmVTbmFwc1sxXS5nZXQoJ2NvZF9nbnonKSk7XG4gICAgICAgIFxuICAgICAgICBzZWxmLl9vcGVuRWRpdG9yRm9ybSgnbmV3JyxuZXdGZWF0dXJlLG5leHQpO1xuICAgICAgICBcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBuZXh0KHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICBcbiAgdGhpcy5fZ2V0Rmlyc3RMYXN0U25hcHBlZEdpdW56aW9uaSA9IGZ1bmN0aW9uKGdlb21ldHJ5KSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgZ2l1bnppb25pVmVjdG9yTGF5ZXIgPSB0aGlzLl9naXVuemlvbmlFZGl0b3IuZ2V0VmVjdG9yTGF5ZXIoKTtcbiAgICB2YXIgZmlyc3RWZXJ0ZXhTbmFwcGVkID0gbnVsbDtcbiAgICB2YXIgbGFzdFZlcnRleFNuYXBwZWQgPSBudWxsO1xuICAgIFxuICAgIF8uZm9yRWFjaChjb29yZGluYXRlcyxmdW5jdGlvbihjLGluZGV4KXsgICAgICBcbiAgICAgIHZhciBnaXVuemlvbmlTb3VyY2UgPSBnaXVuemlvbmlWZWN0b3JMYXllci5nZXRTb3VyY2UoKTtcbiAgICAgIFxuICAgICAgdmFyIGV4dGVudCA9IG9sLmV4dGVudC5idWZmZXIoW2NbMF0sY1sxXSxjWzBdLGNbMV1dLDAuMSk7XG4gICAgICBcbiAgICAgIHZhciBzbmFwcGVkRmVhdHVyZSA9IGdpdW56aW9uaVNvdXJjZS5nZXRGZWF0dXJlc0luRXh0ZW50KGV4dGVudClbMF07XG4gICAgICBcbiAgICAgIGlmIChzbmFwcGVkRmVhdHVyZSl7XG4gICAgICAgIGlmIChpbmRleCA9PSAwKXtcbiAgICAgICAgICBmaXJzdFZlcnRleFNuYXBwZWQgPSBzbmFwcGVkRmVhdHVyZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbmRleCA9PSAoY29vcmRpbmF0ZXMubGVuZ3RoLTEpKXtcbiAgICAgICAgICBsYXN0VmVydGV4U25hcHBlZCA9IHNuYXBwZWRGZWF0dXJlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFtmaXJzdFZlcnRleFNuYXBwZWQsbGFzdFZlcnRleFNuYXBwZWRdO1xuICB9O1xuXG4gIHRoaXMuX3NldHVwRHJhd1N0cmFkZUNvbnN0cmFpbnRzKCk7XG4gIHRoaXMuX3NldHVwTW9kaWZ5VmVydGV4U3RyYWRlQ29uc3RyYWludHMoKTtcbiAgdGhpcy5fc2V0dXBTdHJhZGVDdXR0ZXJQb3N0U2VsZWN0aW9uKCk7XG5cbiAgLyogRklORSBUQUdMSU8gKi9cbn1cbmluaGVyaXQoU3RyYWRlRWRpdG9yLCBJdGVybmV0RWRpdG9yKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTdHJhZGVFZGl0b3I7XG5cbnZhciBwcm90byA9IFN0cmFkZUVkaXRvci5wcm90b3R5cGU7XG5cbnByb3RvLnN0YXJ0ID0gZnVuY3Rpb24ocGx1Z2luU2VydmljZSkge1xuICB0aGlzLl9zZXJ2aWNlID0gcGx1Z2luU2VydmljZTtcbiAgdGhpcy5fZ2l1bnppb25pRWRpdG9yID0gcGx1Z2luU2VydmljZS5fbGF5ZXJzW3BsdWdpblNlcnZpY2UubGF5ZXJDb2Rlcy5HSVVOWklPTkldLmVkaXRvcjtcbiAgdGhpcy5fbG9hZE1pc3NpbmdHaXVuemlvbmlJblZpZXcoKTtcbiAgcmV0dXJuIGJhc2UodGhpcywgJ3N0YXJ0Jyk7XG59O1xuXG5wcm90by5zZXRUb29sID0gZnVuY3Rpb24odG9vbFR5cGUpIHtcbiAgdmFyIGdpdW56aW9uaVZlY3RvckxheWVyID0gdGhpcy5fZ2l1bnppb25pRWRpdG9yLmdldFZlY3RvckxheWVyKCk7XG4gIHZhciBzdGVwc0luZm8gPSBbXTtcbiAgdmFyIG9wdGlvbnM7XG4gIGlmICh0b29sVHlwZT09J2FkZGZlYXR1cmUnKSB7XG5cbiAgICBvcHRpb25zID0ge1xuICAgICAgc25hcDoge1xuICAgICAgICB2ZWN0b3JMYXllcjogZ2l1bnppb25pVmVjdG9yTGF5ZXJcbiAgICAgIH0sXG4gICAgICBmaW5pc2hDb25kaXRpb246IHRoaXMuX2dldENoZWNrU25hcHNDb25kaXRpb24oKSxcbiAgICAgIGNvbmRpdGlvbjogdGhpcy5fZ2V0U3RyYWRhSXNCZWluZ1NuYXBwZWRDb25kaXRpb24oKVxuICAgIH1cbiAgfVxuICBpZiAodG9vbFR5cGU9PSdtb2RpZnl2ZXJ0ZXgnKXtcbiAgICBvcHRpb25zID0ge1xuICAgICAgc25hcDoge1xuICAgICAgICB2ZWN0b3JMYXllcjogZ2l1bnppb25pVmVjdG9yTGF5ZXJcbiAgICAgIH0sXG4gICAgICBkZWxldGVDb25kaXRpb246IF8uY29uc3RhbnQoZmFsc2UpXG4gICAgfVxuICB9XG4gIGlmICh0b29sVHlwZT09J2N1dGxpbmUnKXtcbiAgICBvcHRpb25zID0ge1xuICAgICAgcG9pbnRMYXllcjogZ2l1bnppb25pVmVjdG9yTGF5ZXIuZ2V0TWFwTGF5ZXIoKVxuICAgIH1cbiAgfVxuICB2YXIgc3RhcnQgPSAgYmFzZSh0aGlzLCAnc2V0VG9vbCcsIHRvb2xUeXBlLCBvcHRpb25zKTtcbiAgaWYgKHN0YXJ0KSB7XG4gICAgLy90aGlzLnRvb2xQcm9ncmVzcy5zZXRTdGVwc0luZm8oc3RlcHNJbmZvKTtcbiAgICB0aGlzLl9zdHJhZGVTbmFwcyA9IG5ldyB0aGlzLl9zdHJhZGVTbmFwc0NvbGxlY3Rpb247XG4gICAgJCgnYm9keScpLmtleXVwKHRoaXMuX2RyYXdSZW1vdmVMYXN0UG9pbnQpO1xuICAgICQoJ2JvZHknKS5rZXl1cCh0aGlzLl9tb2RpZnlSZW1vdmVQb2ludCk7XG4gIH1cbiAgcmV0dXJuIHN0YXJ0O1xufTtcblxucHJvdG8uc3RvcFRvb2wgPSBmdW5jdGlvbigpe1xuICB2YXIgc3RvcCA9IGZhbHNlO1xuICBzdG9wID0gSXRlcm5ldEVkaXRvci5wcm90b3R5cGUuc3RvcFRvb2wuY2FsbCh0aGlzKTtcbiAgXG4gIGlmIChzdG9wKXtcbiAgICB0aGlzLl9zdHJhZGVTbmFwcyA9IG51bGw7XG4gICAgJCgnYm9keScpLm9mZigna2V5dXAnLHRoaXMuX2RyYXdSZW1vdmVMYXN0UG9pbnQpO1xuICAgICQoJ2JvZHknKS5vZmYoJ2tleXVwJyx0aGlzLl9tb2RpZnlSZW1vdmVQb2ludCk7XG4gIH1cbiAgXG4gIHJldHVybiBzdG9wOyBcbn07XG5cbn0se1wiLi9pdGVybmV0ZWRpdG9yXCI6NH1dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIGluaGVyaXQgPSBnM3dzZGsuY29yZS51dGlscy5pbmhlcml0O1xudmFyIGJhc2UgPSBnM3dzZGsuY29yZS51dGlscy5iYXNlO1xudmFyIFBsdWdpbiA9IGczd3Nkay5jb3JlLlBsdWdpbjtcbnZhciBHVUkgPSBnM3dzZGsuZ3VpLkdVSTtcblxudmFyIFNlcnZpY2UgPSByZXF1aXJlKCcuL3BsdWdpbnNlcnZpY2UnKTtcbnZhciBFZGl0aW5nUGFuZWwgPSByZXF1aXJlKCcuL3BhbmVsJyk7XG5cbi8qIC0tLS0gUEFSVEUgREkgQ09ORklHVVJBWklPTkUgREVMTCdJTlRFUk8gIFBMVUdJTlNcbi8gU0FSRUJCRSBJTlRFUlNTQU5URSBDT05GSUdVUkFSRSBJTiBNQU5JRVJBIFBVTElUQSBMQVlFUlMgKFNUWUxFUywgRVRDLi4pIFBBTk5FTExPIElOIFVOXG4vIFVOSUNPIFBVTlRPIENISUFSTyBDT1PDjCBEQSBMRUdBUkUgVE9PTFMgQUkgTEFZRVJcbiovXG5cblxudmFyIF9QbHVnaW4gPSBmdW5jdGlvbigpe1xuICBiYXNlKHRoaXMpO1xuICB0aGlzLm5hbWUgPSAnaXRlcm5ldCc7XG4gIHRoaXMuY29uZmlnID0gbnVsbDtcbiAgdGhpcy5zZXJ2aWNlID0gbnVsbDtcbiAgXG4gIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvL3NldHRvIGlsIHNlcnZpemlvXG4gICAgdGhpcy5zZXRQbHVnaW5TZXJ2aWNlKFNlcnZpY2UpO1xuICAgIC8vcmVjdXBlcm8gY29uZmlndXJhemlvbmUgZGVsIHBsdWdpblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5nZXRQbHVnaW5Db25maWcoKTtcbiAgICAvL3JlZ2l0cm8gaWwgcGx1Z2luXG4gICAgaWYgKHRoaXMucmVnaXN0ZXJQbHVnaW4odGhpcy5jb25maWcuZ2lkKSkge1xuICAgICAgaWYgKCFHVUkucmVhZHkpIHtcbiAgICAgICAgR1VJLm9uKCdyZWFkeScsXy5iaW5kKHRoaXMuc2V0dXBHdWksIHRoaXMpKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLnNldHVwR3VpKCk7XG4gICAgICB9XG4gICAgICAvL2luaXppYWxpenpvIGlsIHNlcnZpemlvLiBJbCBzZXJ2aXppbyDDqCBsJ2lzdGFuemEgZGVsbGEgY2xhc3NlIHNlcnZpemlvXG4gICAgICB0aGlzLnNlcnZpY2UuaW5pdCh0aGlzLmNvbmZpZyk7XG4gICAgfVxuICB9O1xuICAvL21ldHRvIHN1IGwnaW50ZXJmYWNjaWEgZGVsIHBsdWdpblxuICB0aGlzLnNldHVwR3VpID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHRvb2xzQ29tcG9uZW50ID0gR1VJLmdldENvbXBvbmVudCgndG9vbHMnKTtcbiAgICB2YXIgdG9vbHNTZXJ2aWNlID0gdG9vbHNDb21wb25lbnQuZ2V0U2VydmljZSgpO1xuICAgIC8vYWRkIFRvb2xzIChvcmRpbmUsIE5vbWUgZ3J1cHBvLCB0b29scylcbiAgICB0b29sc1NlcnZpY2UuYWRkVG9vbHMoMCwgJ0lURVJORVQnLCBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiRWRpdGluZyBkYXRpXCIsXG4gICAgICAgIGFjdGlvbjogXy5iaW5kKHNlbGYuc2hvd0VkaXRpbmdQYW5lbCwgdGhpcylcbiAgICAgIH1cbiAgICBdKVxuICB9O1xuICBcbiAgdGhpcy5zaG93RWRpdGluZ1BhbmVsID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBhbmVsID0gbmV3IEVkaXRpbmdQYW5lbCgpO1xuICAgIEdVSS5zaG93UGFuZWwocGFuZWwpO1xuICB9XG59O1xuXG5pbmhlcml0KF9QbHVnaW4sIFBsdWdpbik7XG5cbihmdW5jdGlvbihwbHVnaW4pe1xuICBwbHVnaW4uaW5pdCgpO1xufSkobmV3IF9QbHVnaW4pO1xuXG5cbn0se1wiLi9wYW5lbFwiOjgsXCIuL3BsdWdpbnNlcnZpY2VcIjo5fV0sNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiZzN3LWl0ZXJuZXQtZWRpdGluZy1wYW5lbFxcXCI+XFxuICA8dGVtcGxhdGUgdi1mb3I9XFxcInRvb2xiYXIgaW4gZWRpdG9yc3Rvb2xiYXJzXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwicGFuZWwgcGFuZWwtcHJpbWFyeVxcXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwicGFuZWwtaGVhZGluZ1xcXCI+XFxuICAgICAgICA8aDMgY2xhc3M9XFxcInBhbmVsLXRpdGxlXFxcIj57eyB0b29sYmFyLm5hbWUgfX08L2gzPlxcbiAgICAgIDwvZGl2PlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcInBhbmVsLWJvZHlcXFwiPlxcbiAgICAgICAgPHRlbXBsYXRlIHYtZm9yPVxcXCJ0b29sIGluIHRvb2xiYXIudG9vbHNcXFwiPlxcbiAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJlZGl0YnRuXFxcIiA6Y2xhc3M9XFxcInsnZW5hYmxlZCcgOiAoc3RhdGUuZWRpdGluZy5vbiAmJiBlZGl0aW5ndG9vbGJ0bkVuYWJsZWQodG9vbCkpLCAndG9nZ2xlZCcgOiBlZGl0aW5ndG9vbGJ0blRvZ2dsZWQodG9vbGJhci5sYXllcmNvZGUsdG9vbC50b29sdHlwZSl9XFxcIj5cXG4gICAgICAgICAgICA8aW1nIGhlaWdodD1cXFwiMzBweFxcXCIgd2lkdGg9XFxcIjMwcHhcXFwiIEBjbGljaz1cXFwidG9nZ2xlRWRpdFRvb2wodG9vbGJhci5sYXllcmNvZGUsdG9vbC50b29sdHlwZSlcXFwiIDphbHQub25jZT1cXFwidG9vbC50aXRsZVxcXCIgOnRpdGxlLm9uY2U9XFxcInRvb2wudGl0bGVcXFwiIDpzcmMub25jZT1cXFwicmVzb3VyY2VzdXJsKydpbWFnZXMvJyt0b29sLmljb25cXFwiLz5cXG4gICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L3RlbXBsYXRlPlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gIDwvdGVtcGxhdGU+XFxuICA8ZGl2PlxcbiAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG4gYnRuLXByaW1hcnlcXFwiIHYtZGlzYWJsZWQ9XFxcImVkaXRpbmdidG5FbmFibGVkXFxcIiA6Y2xhc3M9XFxcInsnYnRuLXN1Y2Nlc3MnIDogc3RhdGUuZWRpdGluZ09ufVxcXCIgQGNsaWNrPVxcXCJ0b2dnbGVFZGl0aW5nXFxcIj57eyBlZGl0aW5nYnRubGFiZWwgfX08L2J1dHRvbj5cXG4gICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1kYW5nZXJcXFwiIHYtZGlzYWJsZWQ9XFxcIiFzdGF0ZS5oYXNFZGl0c1xcXCIgQGNsaWNrPVxcXCJzYXZlRWRpdHNcXFwiPnt7IHNhdmVidG5sYWJlbCB9fTwvYnV0dG9uPlxcbiAgICA8aW1nIHYtc2hvdz1cXFwic3RhdGUucmV0cmlldmluZ0RhdGFcXFwiIDpzcmM9XFxcInJlc291cmNlc3VybCArJ2ltYWdlcy9sb2FkZXIuc3ZnJ1xcXCI+XFxuICA8L2Rpdj5cXG4gIDxkaXYgY2xhc3M9XFxcIm1lc3NhZ2VcXFwiPlxcbiAgICB7e3sgbWVzc2FnZSB9fX1cXG4gIDwvZGl2PlxcbjwvZGl2PlxcblwiO1xuXG59LHt9XSw4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciByZXNvbHZlZFZhbHVlID0gZzN3c2RrLmNvcmUudXRpbHMucmVzb2x2ZTtcbnZhciBpbmhlcml0ID0gZzN3c2RrLmNvcmUudXRpbHMuaW5oZXJpdDtcbnZhciBHVUkgPSBnM3dzZGsuZ3VpLkdVSTtcbnZhciBQYW5lbCA9ICBnM3dzZGsuZ3VpLlBhbmVsO1xuXG52YXIgU2VydmljZSA9IHJlcXVpcmUoJy4vcGx1Z2luc2VydmljZScpO1xuXG52YXIgUGFuZWxDb21wb25lbnQgPSBWdWUuZXh0ZW5kKHtcbiAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vcGFuZWwuaHRtbCcpLFxuICBkYXRhOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLy9sbyBzdGF0ZSDDqCBxdWVsbG8gZGVsIHNlcnZpemlvIGluIHF1YW50byDDqCBsdWkgY2hlIHZhIGEgbW9kaWZpY2FyZSBvcGVyYXJlIHN1aSBkYXRpXG4gICAgICBzdGF0ZTogU2VydmljZS5zdGF0ZSxcbiAgICAgIHJlc291cmNlc3VybDogR1VJLmdldFJlc291cmNlc1VybCgpLFxuICAgICAgZWRpdG9yc3Rvb2xiYXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiBcIkFjY2Vzc2lcIixcbiAgICAgICAgICBsYXllcmNvZGU6IFNlcnZpY2UubGF5ZXJDb2Rlcy5BQ0NFU1NJLFxuICAgICAgICAgIHRvb2xzOltcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiQWdnaXVuZ2kgYWNjZXNzb1wiLFxuICAgICAgICAgICAgICB0b29sdHlwZTogJ2FkZGZlYXR1cmUnLFxuICAgICAgICAgICAgICBpY29uOiAnaXRlcm5ldEFkZFBvaW50LnBuZydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRpdGxlOiBcIlNwb3N0YSBhY2Nlc3NvXCIsXG4gICAgICAgICAgICAgIHRvb2x0eXBlOiAnbW92ZWZlYXR1cmUnLFxuICAgICAgICAgICAgICBpY29uOiAnaXRlcm5ldE1vdmVQb2ludC5wbmcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJSaW11b3ZpIGFjY2Vzc29cIixcbiAgICAgICAgICAgICAgdG9vbHR5cGU6ICdkZWxldGVmZWF0dXJlJyxcbiAgICAgICAgICAgICAgaWNvbjogJ2l0ZXJuZXREZWxldGVQb2ludC5wbmcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJFZGl0YSBhdHRyaWJ1dGlcIixcbiAgICAgICAgICAgICAgdG9vbHR5cGU6ICdlZGl0YXR0cmlidXRlcycsXG4gICAgICAgICAgICAgIGljb246ICdlZGl0QXR0cmlidXRlcy5wbmcnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJHaXVuemlvbmkgc3RyYWRhbGlcIixcbiAgICAgICAgICBsYXllcmNvZGU6IFNlcnZpY2UubGF5ZXJDb2Rlcy5HSVVOWklPTkksXG4gICAgICAgICAgdG9vbHM6W1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJBZ2dpdW5naSBnaXVuemlvbmVcIixcbiAgICAgICAgICAgICAgdG9vbHR5cGU6ICdhZGRmZWF0dXJlJyxcbiAgICAgICAgICAgICAgaWNvbjogJ2l0ZXJuZXRBZGRQb2ludC5wbmcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJTcG9zdGEgZ2l1bnppb25lXCIsXG4gICAgICAgICAgICAgIHRvb2x0eXBlOiAnbW92ZWZlYXR1cmUnLFxuICAgICAgICAgICAgICBpY29uOiAnaXRlcm5ldE1vdmVQb2ludC5wbmcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJSaW11b3ZpIGdpdW56aW9uZVwiLFxuICAgICAgICAgICAgICB0b29sdHlwZTogJ2RlbGV0ZWZlYXR1cmUnLFxuICAgICAgICAgICAgICBpY29uOiAnaXRlcm5ldERlbGV0ZVBvaW50LnBuZydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRpdGxlOiBcIkVkaXRhIGF0dHJpYnV0aVwiLFxuICAgICAgICAgICAgICB0b29sdHlwZTogJ2VkaXRhdHRyaWJ1dGVzJyxcbiAgICAgICAgICAgICAgaWNvbjogJ2VkaXRBdHRyaWJ1dGVzLnBuZydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiBcIkVsZW1lbnRpIHN0cmFkYWxpXCIsXG4gICAgICAgICAgbGF5ZXJjb2RlOiBTZXJ2aWNlLmxheWVyQ29kZXMuU1RSQURFLFxuICAgICAgICAgIHRvb2xzOltcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiQWdnaXVuZ2kgc3RyYWRhXCIsXG4gICAgICAgICAgICAgIHRvb2x0eXBlOiAnYWRkZmVhdHVyZScsXG4gICAgICAgICAgICAgIGljb246ICdpdGVybmV0QWRkTGluZS5wbmcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJTcG9zdGEgdmVydGljZSBzdHJhZGFcIixcbiAgICAgICAgICAgICAgdG9vbHR5cGU6ICdtb2RpZnl2ZXJ0ZXgnLFxuICAgICAgICAgICAgICBpY29uOiAnaXRlcm5ldE1vdmVWZXJ0ZXgucG5nJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiVGFnbGlhIHN1IGdpdW56aW9uZVwiLFxuICAgICAgICAgICAgICB0b29sdHlwZTogJ2N1dGxpbmUnLFxuICAgICAgICAgICAgICBpY29uOiAnaXRlcm5ldEN1dE9uVmVydGV4LnBuZydcbiAgICAgICAgICAgIH0sLypcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiU3Bvc3RhIHN0cmFkYVwiLFxuICAgICAgICAgICAgICB0b29sdHlwZTogJ21vdmVmZWF0dXJlJyxcbiAgICAgICAgICAgICAgaWNvbjogJ2l0ZXJuZXRNb3ZlTGluZS5wbmcnXG4gICAgICAgICAgICB9LCovXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRpdGxlOiBcIlJpbXVvdmkgc3RyYWRhXCIsXG4gICAgICAgICAgICAgIHRvb2x0eXBlOiAnZGVsZXRlZmVhdHVyZScsXG4gICAgICAgICAgICAgIGljb246ICdpdGVybmV0RGVsZXRlTGluZS5wbmcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJFZGl0YSBhdHRyaWJ1dGlcIixcbiAgICAgICAgICAgICAgdG9vbHR5cGU6ICdlZGl0YXR0cmlidXRlcycsXG4gICAgICAgICAgICAgIGljb246ICdlZGl0QXR0cmlidXRlcy5wbmcnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgc2F2ZWJ0bmxhYmVsOiBcIlNhbHZhXCJcbiAgICB9XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICB0b2dnbGVFZGl0aW5nOiBmdW5jdGlvbigpIHtcbiAgICAgIC8vc2kgaGEgcXVhbmRvIHZpZW5lIGF2dmlhdGEgbyB0ZXJtaW5hdGEgdW5hIHNlc3Npb25lIGRpIGVkaXRpbmdcbiAgICAgIFNlcnZpY2UudG9nZ2xlRWRpdGluZygpO1xuICAgIH0sXG4gICAgc2F2ZUVkaXRzOiBmdW5jdGlvbigpIHtcbiAgICAgIC8vY2hhaWFtYXRhIHF1YW5kbyBzaSBwcmVtZSBzdSBzYWx2YSBlZGl0c1xuICAgICAgU2VydmljZS5zYXZlRWRpdHMoKTtcbiAgICB9LFxuICAgIHRvZ2dsZUVkaXRUb29sOiBmdW5jdGlvbihsYXllckNvZGUsIHRvb2xUeXBlKSB7XG4gICAgICAvL2NoaWFtYXRvIHF1YW5kbyBzaSBjbGljY2Egc3UgdW4gdG9vbCBkZWxsJ2VkaXRvclxuICAgICAgaWYgKHRvb2xUeXBlID09ICcnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN0YXRlLmVkaXRpbmcub24pIHtcbiAgICAgICAgU2VydmljZS50b2dnbGVFZGl0VG9vbChsYXllckNvZGUsIHRvb2xUeXBlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGVkaXRpbmd0b29sYnRuVG9nZ2xlZDogZnVuY3Rpb24obGF5ZXJDb2RlLCB0b29sVHlwZSkge1xuICAgICAgcmV0dXJuICh0aGlzLnN0YXRlLmVkaXRpbmcubGF5ZXJDb2RlID09IGxheWVyQ29kZSAmJiB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbFR5cGUgPT0gdG9vbFR5cGUpO1xuICAgIH0sXG4gICAgZWRpdGluZ3Rvb2xidG5FbmFibGVkOiBmdW5jdGlvbih0b29sKSB7XG4gICAgICByZXR1cm4gdG9vbC50b29sdHlwZSAhPSAnJztcbiAgICB9XG4gIH0sXG4gIGNvbXB1dGVkOiB7XG4gICAgZWRpdGluZ2J0bmxhYmVsOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0YXRlLmVkaXRpbmcub24gPyBcIlRlcm1pbmEgZWRpdGluZ1wiIDogXCJBdnZpYSBlZGl0aW5nXCI7XG4gICAgfSxcbiAgICBlZGl0aW5nYnRuRW5hYmxlZDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gKHRoaXMuc3RhdGUuZWRpdGluZy5lbmFibGVkIHx8IHRoaXMuc3RhdGUuZWRpdGluZy5vbikgPyBcIlwiIDogXCJkaXNhYmxlZFwiO1xuICAgIH0sXG4gICAgbWVzc2FnZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbWVzc2FnZSA9IFwiXCI7XG4gICAgICBpZiAoIXRoaXMuc3RhdGUuZWRpdGluZy5lbmFibGVkKSB7XG4gICAgICAgIG1lc3NhZ2UgPSAnPHNwYW4gc3R5bGU9XCJjb2xvcjogcmVkXCI+QXVtZW50YXJlIGlsIGxpdmVsbG8gZGkgem9vbSBwZXIgYWJpbGl0YXJlIGxcXCdlZGl0aW5nJztcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC5tZXNzYWdlKSB7XG4gICAgICAgIHZhciBuID0gdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLm47XG4gICAgICAgIHZhciB0b3RhbCA9IHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC50b3RhbDtcbiAgICAgICAgdmFyIHN0ZXBtZXNzYWdlID0gdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLm1lc3NhZ2U7XG4gICAgICAgIG1lc3NhZ2UgPSAnPGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6MjBweFwiPkdVSURBIFNUUlVNRU5UTzo8L2Rpdj4nICtcbiAgICAgICAgICAnPGRpdj48c3Bhbj5bJytuKycvJyt0b3RhbCsnXSA8L3NwYW4+PHNwYW4gc3R5bGU9XCJjb2xvcjogeWVsbG93XCI+JytzdGVwbWVzc2FnZSsnPC9zcGFuPjwvZGl2Pic7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBFZGl0b3JQYW5lbCgpIHtcbiAgLy8gcHJvcHJpZXTDoCBuZWNlc3NhcmllLiBJbiBmdXR1cm8gbGUgbWV0dGVybW8gaW4gdW5hIGNsYXNzZSBQYW5lbCBkYSBjdWkgZGVyaXZlcmFubm8gdHV0dGkgaSBwYW5uZWxsaSBjaGUgdm9nbGlvbm8gZXNzZXJlIG1vc3RyYXRpIG5lbGxhIHNpZGViYXJcbiAgdGhpcy5pZCA9IFwiaXRlcm5ldC1lZGl0aW5nLXBhbmVsXCI7XG4gIHRoaXMubmFtZSA9IFwiR2VzdGlvbmUgZGF0aSBJVEVSTkVUXCI7XG4gIHRoaXMuaW50ZXJuYWxQYW5lbCA9IG5ldyBQYW5lbENvbXBvbmVudCgpO1xufVxuXG5pbmhlcml0KEVkaXRvclBhbmVsLCBQYW5lbCk7XG5cbnZhciBwcm90byA9IFBhbmVsLnByb3RvdHlwZTtcblxuLy8gdmllbmUgcmljaGlhbWF0byBkYWxsYSB0b29sYmFyIHF1YW5kbyBpbCBwbHVnaW4gY2hpZWRlIGRpIG1vc3RyYXJlXG4vLyB1biBwcm9wcmlvIHBhbm5lbGxvIG5lbGxhIEdVSSAoR1VJLnNob3dQYW5lbClcbnByb3RvLm9uU2hvdyA9IGZ1bmN0aW9uKGNvbnRhaW5lcikge1xuICBjb25zb2xlLmxvZygnY2lhbycpO1xuICB2YXIgcGFuZWwgPSB0aGlzLmludGVybmFsUGFuZWw7XG4gIHBhbmVsLiRtb3VudCgpLiRhcHBlbmRUbyhjb250YWluZXIpO1xuICByZXR1cm4gcmVzb2x2ZWRWYWx1ZSh0cnVlKTtcbn07XG5cbi8vIHJpY2hpYW1hdG8gcXVhbmRvIGxhIEdVSSBjaGllZGUgZGkgY2hpdWRlcmUgaWwgcGFubmVsbG8uIFNlIHJpdG9ybmEgZmFsc2UgaWwgcGFubmVsbG8gbm9uIHZpZW5lIGNoaXVzb1xucHJvdG8ub25DbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgU2VydmljZS5zdG9wKClcbiAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgc2VsZi5pbnRlcm5hbFBhbmVsLiRkZXN0cm95KHRydWUpO1xuICAgIHNlbGYuaW50ZXJuYWxQYW5lbCA9IG51bGw7XG4gICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICB9KVxuICAuZmFpbChmdW5jdGlvbigpIHtcbiAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgfSk7XG4gIFxuICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFZGl0b3JQYW5lbDtcblxufSx7XCIuL3BhbmVsLmh0bWxcIjo3LFwiLi9wbHVnaW5zZXJ2aWNlXCI6OX1dLDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIGluaGVyaXQgPSBnM3dzZGsuY29yZS51dGlscy5pbmhlcml0O1xudmFyIHJlc29sdmVkVmFsdWUgPSBnM3dzZGsuY29yZS51dGlscy5yZXNvbHZlO1xudmFyIHJlamVjdGVkVmFsdWUgPSBnM3dzZGsuY29yZS51dGlscy5yZWplY3Q7XG52YXIgRzNXT2JqZWN0ID0gZzN3c2RrLmNvcmUuRzNXT2JqZWN0O1xudmFyIEdVSSA9IGczd3Nkay5ndWkuR1VJO1xudmFyIFZlY3RvckxheWVyID0gZzN3c2RrLmNvcmUuVmVjdG9yTGF5ZXI7XG52YXIgVmVjdG9yTG9hZGVyTGF5ZXIgPSBnM3dzZGsuY29yZS5WZWN0b3JMYXllckxvYWRlcjtcblxudmFyIEZvcm1DbGFzcyA9IHJlcXVpcmUoJy4vZWRpdG9ycy9hdHRyaWJ1dGVzZm9ybScpO1xuXG4vL1F1aSBjaSBzb25vIGdsaSBlZGl0b3IgKGNsYXNzaSkgdXNhdGkgZGFpIHZhcmkgbGF5ZXJcbnZhciBBY2Nlc3NpRWRpdG9yID0gcmVxdWlyZSgnLi9lZGl0b3JzL2FjY2Vzc2llZGl0b3InKTtcbnZhciBHaXVuemlvbmlFZGl0b3IgPSByZXF1aXJlKCcuL2VkaXRvcnMvZ2l1bnppb25pZWRpdG9yJyk7XG52YXIgU3RyYWRlRWRpdG9yID0gcmVxdWlyZSgnLi9lZGl0b3JzL3N0cmFkZWVkaXRvcicpO1xuXG4vL29nZ2V0dG8gY2hlIGRlZmluaXNjZSBnbGkgc3RlcHMgbWVzc2FnZXMgY2hlIHVuIHRvb2wgZGV2ZSBmYXJlXG52YXIgdG9vbFN0ZXBzTWVzc2FnZXMgPSB7XG4gICdjdXRsaW5lJzogW1xuICAgIFwiU2VsZXppb25hIGxhIHN0cmFkYSBkYSB0YWdsaWFyZVwiLFxuICAgIFwiU2VsZXppb25hIGxhIGdpdW56aW9uZSBkaSB0YWdsaW9cIixcbiAgICBcIlNlbGV6aW9uYSBsYSBwb3JpemlvbmUgZGkgc3RyYWRhIG9yaWdpbmFsZSBkYSBtYW50ZW5lcmVcIlxuICBdXG59O1xuXG5mdW5jdGlvbiBJdGVybmV0U2VydmljZSgpIHtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIC8vcXVpIHZhZG8gIGEgc2V0dGFyZSBpbCBtYXBzZXJ2aWNlXG4gIHRoaXMuX21hcFNlcnZpY2UgPSBudWxsO1xuICB0aGlzLl9ydW5uaW5nRWRpdG9yID0gbnVsbDtcblxuICAvL2RlZmluaXNjbyBpIGNvZGljaSBsYXllclxuICB2YXIgbGF5ZXJDb2RlcyA9IHRoaXMubGF5ZXJDb2RlcyA9IHtcbiAgICBTVFJBREU6ICdzdHJhZGUnLFxuICAgIEdJVU5aSU9OSTogJ2dpdW56aW9uaScsXG4gICAgQUNDRVNTSTogJ2FjY2Vzc2knXG4gIH07XG4gIC8vIGNsYXNzaSBlZGl0b3JcbiAgdGhpcy5fZWRpdG9yQ2xhc3MgPSB7fTtcbiAgdGhpcy5fZWRpdG9yQ2xhc3NbbGF5ZXJDb2Rlcy5BQ0NFU1NJXSA9IEFjY2Vzc2lFZGl0b3I7XG4gIHRoaXMuX2VkaXRvckNsYXNzW2xheWVyQ29kZXMuR0lVTlpJT05JXSA9IEdpdW56aW9uaUVkaXRvcjtcbiAgdGhpcy5fZWRpdG9yQ2xhc3NbbGF5ZXJDb2Rlcy5TVFJBREVdID0gU3RyYWRlRWRpdG9yO1xuICAvL2RmaW5pc2NvIGxheWVyIGRlbCBwbHVnaW4gY29tZSBvZ2dldHRvXG4gIHRoaXMuX2xheWVycyA9IHt9O1xuICB0aGlzLl9sYXllcnNbbGF5ZXJDb2Rlcy5BQ0NFU1NJXSA9IHtcbiAgICBsYXllckNvZGU6IGxheWVyQ29kZXMuQUNDRVNTSSxcbiAgICB2ZWN0b3I6IG51bGwsXG4gICAgZWRpdG9yOiBudWxsLFxuICAgIC8vZGVmaW5pc2NvIGxvIHN0aWxlXG4gICAgc3R5bGU6IGZ1bmN0aW9uKGZlYXR1cmUpe1xuICAgICAgdmFyIGNvbG9yID0gJyNkOWI1ODEnO1xuICAgICAgc3dpdGNoIChmZWF0dXJlLmdldCgndGlwX2FjYycpKXtcbiAgICAgICAgY2FzZSBcIjAxMDFcIjpcbiAgICAgICAgICBjb2xvciA9ICcjZDliNTgxJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIjAxMDJcIjpcbiAgICAgICAgICBjb2xvciA9ICcjZDliYzI5JztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIjA1MDFcIjpcbiAgICAgICAgICBjb2xvciA9ICcjNjhhYWQ5JztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBjb2xvciA9ICcjZDliNTgxJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBbXG4gICAgICAgIG5ldyBvbC5zdHlsZS5TdHlsZSh7XG4gICAgICAgICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5DaXJjbGUoe1xuICAgICAgICAgICAgcmFkaXVzOiA1LFxuICAgICAgICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xuICAgICAgICAgICAgICBjb2xvcjogY29sb3JcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIF1cbiAgICB9XG4gIH07XG4gIHRoaXMuX2xheWVyc1tsYXllckNvZGVzLkdJVU5aSU9OSV0gPSB7XG4gICAgbGF5ZXJDb2RlOiBsYXllckNvZGVzLkdJVU5aSU9OSSxcbiAgICB2ZWN0b3I6IG51bGwsXG4gICAgZWRpdG9yOiBudWxsLFxuICAgIHN0eWxlOiBuZXcgb2wuc3R5bGUuU3R5bGUoe1xuICAgICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5DaXJjbGUoe1xuICAgICAgICByYWRpdXM6IDUsXG4gICAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHtcbiAgICAgICAgICBjb2xvcjogJyMwMDAwZmYnXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH07XG4gIHRoaXMuX2xheWVyc1tsYXllckNvZGVzLlNUUkFERV0gPSB7XG4gICAgbGF5ZXJDb2RlOiBsYXllckNvZGVzLlNUUkFERSxcbiAgICB2ZWN0b3I6IG51bGwsXG4gICAgZWRpdG9yOiBudWxsLFxuICAgIHN0eWxlOiBuZXcgb2wuc3R5bGUuU3R5bGUoe1xuICAgICAgc3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtcbiAgICAgICAgd2lkdGg6IDMsXG4gICAgICAgIGNvbG9yOiAnI2ZmN2QyZCdcbiAgICAgIH0pXG4gICAgfSlcbiAgfTtcblxuICB0aGlzLl9sb2FkRGF0YU9uTWFwVmlld0NoYW5nZUxpc3RlbmVyID0gbnVsbDtcblxuICB0aGlzLl9jdXJyZW50RWRpdGluZ0xheWVyID0gbnVsbDtcblxuICB0aGlzLl9sb2FkZWRFeHRlbnQgPSBudWxsO1xuXG4gIHRoaXMuc3RhdGUgPSB7XG4gICAgZWRpdGluZzoge1xuICAgICAgb246IGZhbHNlLFxuICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICBsYXllckNvZGU6IG51bGwsXG4gICAgICB0b29sVHlwZTogbnVsbCxcbiAgICAgIHN0YXJ0aW5nRWRpdGluZ1Rvb2w6IGZhbHNlLFxuICAgICAgdG9vbHN0ZXA6IHtcbiAgICAgICAgbjogbnVsbCxcbiAgICAgICAgdG90YWw6IG51bGwsXG4gICAgICAgIG1lc3NhZ2U6IG51bGxcbiAgICAgIH1cbiAgICB9LFxuICAgIHJldHJpZXZpbmdEYXRhOiBmYWxzZSxcbiAgICBoYXNFZGl0czogZmFsc2VcbiAgfTtcblxuICAvL2RlZmluaXNjbyBpbCBsb2FkZXIgZGVsIHBsdWdpblxuICB0aGlzLl9sb2FkZXIgPSBuZXcgVmVjdG9yTG9hZGVyTGF5ZXI7XG4gIC8vIGluaXppYWxpenphemlvbmUgZGVsIHBsdWdpblxuICAvLyBjaGlhbXRvIGRhbGwgJHNjcmlwdCh1cmwpIGRlbCBwbHVnaW4gcmVnaXN0cnlcbiAgLy8gaW5pemlhbGl6emF6aW9uZSBkZWwgcGx1Z2luXG4gIC8vIGNoaWFtdG8gZGFsbCAkc2NyaXB0KHVybCkgZGVsIHBsdWdpbiByZWdpc3RyeVxuICB0aGlzLmluaXQgPSBmdW5jdGlvbihjb25maWcpIHtcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAvLyBzZXR0byBpbCBtYXBzZXJ2aWNlIGNoZSBtaSBwZXJtZXR0ZSBkaSBpbmVyYWdpcmUgY29uIGxhIG1hcHBhXG4gICAgdGhpcy5fbWFwU2VydmljZSA9IEdVSS5nZXRDb21wb25lbnQoJ21hcCcpLmdldFNlcnZpY2UoKTtcbiAgICAvL2luaXppYWxpenpvIGlsIGxvYWRlclxuICAgIHZhciBvcHRpb25zX2xvYWRlciA9IHtcbiAgICAgICdsYXllcnMnOiB0aGlzLl9sYXllcnMsXG4gICAgICAnYmFzZXVybCc6IHRoaXMuY29uZmlnLmJhc2V1cmwsXG4gICAgICAnbWFwU2VydmljZSc6IHRoaXMuX21hcFNlcnZpY2VcbiAgICB9O1xuICAgIC8vaW5pemlhbGl6em8gaWwgbG9hZGVyXG4gICAgdGhpcy5fbG9hZGVyLmluaXQob3B0aW9uc19sb2FkZXIpO1xuICAgIC8vY2FzbyBkaSByZXRyaWV3IGRhdGFcbiAgICB0aGlzLl9sb2FkZXIub24oJ3JldHJpZXd2ZWN0b3JsYXllcnMnLCBmdW5jdGlvbihib29sLCB2ZWN0b3JMYXllcnMpIHtcbiAgICAgIF8uZm9yRWFjaCh2ZWN0b3JMYXllcnMsIGZ1bmN0aW9uICh2ZWN0b3JMYXllciwgbGF5ZXJDb2RlKSB7XG4gICAgICAgIGlmIChib29sKSB7XG4gICAgICAgICAgc2VsZi5fc2V0VXBWZWN0b3JMYXllcihsYXllckNvZGUsIHZlY3RvckxheWVyKTtcbiAgICAgICAgICBzZWxmLl9zZXRVcEVkaXRvcihsYXllckNvZGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNldHRvIGEgdHJ1ZSBpbiBxdWVzdG8gbW9kbyBjYXBpc2NvIGNoZSBpIGxheWVydmV0dG9yaWFsaSBzb25vIHN0YXRpIHJlY3VwZXJhdGlcbiAgICAgICAgLy8gZGFsIHNlcnZlciBlIGNoZSBxdWluZGkgaW5pem8gYSBmYXJlIGlsIGxvYWRpbmcgZGVpIGRhdGkgdmVyaSBlIHByb3ByaVxuICAgICAgICBzZWxmLnN0YXRlLnJldHJpZXZpbmdEYXRhID0gYm9vbDtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX2xvYWRlci5vbigncmV0cmlld3ZlY3RvbGF5ZXJzZGF0YScsIGZ1bmN0aW9uKGJvb2wpIHtcbiAgICAgIC8vIHF1ZXN0YSBtaSBzZXJ2ZXIgcGVyIHNwZW5nZXJlIGFsbGEgZmluZSAgaWwgbG9hZGluZyBnaWZcbiAgICAgIHNlbGYuc3RhdGUucmV0cmlldmluZ0RhdGEgPSBib29sO1xuICAgIH0pO1xuICAgIC8vZXZlbnRvIHF1YW5kbyByaWNldm8gZGFsIGxvYWRlciBsJ2FycmF5IGRpIGZlYXR1cmVzIGxvY2tlZFxuICAgIHRoaXMuX2xvYWRlci5vbignZmVhdHVyZWxvY2tzJywgZnVuY3Rpb24obGF5ZXJDb2RlLCBmZWF0dXJlbG9ja3MpIHtcbiAgICAgIC8vYXNzZWdubyBhbGwnZWRpdG9yIGwnYXJyYXkgZGVsbGUgZmVhdHVyZSBsb2NrZWRcbiAgICAgIHNlbGYuX2xheWVyc1tsYXllckNvZGVdLmVkaXRvci5zZXRGZWF0dXJlTG9ja3MoZmVhdHVyZWxvY2tzKTtcbiAgICB9KTtcblxuICAgIC8vIGRpc2FiaWxpdG8gbCdldmVudHVhbGUgdG9vbCBhdHRpdm8gc2UgdmllbmUgYXR0aXZhdGFcbiAgICAvLyB1bidpbnRlcmF6aW9uZSBkaSB0aXBvIHBvaW50ZXJJbnRlcmFjdGlvblNldCBzdWxsYSBtYXBwYVxuICAgIHRoaXMuX21hcFNlcnZpY2Uub24oJ3BvaW50ZXJJbnRlcmFjdGlvblNldCcsIGZ1bmN0aW9uKGludGVyYWN0aW9uKSB7XG4gICAgICB2YXIgY3VycmVudEVkaXRpbmdMYXllciA9IHNlbGYuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICAgIGlmIChjdXJyZW50RWRpdGluZ0xheWVyKSB7XG4gICAgICAgIHZhciBhY3RpdmVUb29sID0gY3VycmVudEVkaXRpbmdMYXllci5lZGl0b3IuZ2V0QWN0aXZlVG9vbCgpLmluc3RhbmNlO1xuICAgICAgICAvLyBkZXZvIHZlcmlmaWNhcmUgY2hlIG5vbiBzaWEgdW4naW50ZXJhemlvbmUgYXR0aXZhdGEgZGEgdW5vIGRlaSB0b29sIGRpIGVkaXRpbmcgZGVsIHBsdWdpblxuICAgICAgICBpZiAoYWN0aXZlVG9vbCAmJiAhYWN0aXZlVG9vbC5vd25zSW50ZXJhY3Rpb24oaW50ZXJhY3Rpb24pKSB7XG4gICAgICAgICAgc2VsZi5fc3RvcEVkaXRpbmdUb29sKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICAvLyAgc2V0dG8gZWRpdGluZyBkZWxsb2dldHRvIHN0YXRlIG9uIGEgdHJ1ZVxuICAgIHRoaXMuc3RhdGUuZWRpdGluZy5lbmFibGVkID0gIHRydWU7XG4gICAgLy8gcGVyIG9nbmkgbGF5ZXIgZGVmaW5pdGkgbmVsIHBsdWdpbiBzZXR0byBuYW1lIGUgaWRcbiAgICAvLyByZWN1cGVyYXRpIGdyYXppZSBhbCBtYXBzZXJ2aWNlXG4gICAgXy5mb3JFYWNoKHRoaXMuX2xheWVycywgZnVuY3Rpb24oTGF5ZXIsIGxheWVyQ29kZSkge1xuICAgICAgLy9yZWN1cGVybyBsJ2lkIGRhbGxhIGNvbmZpZ3VyYXppb25lIGRlbCBwbHVnaW5cbiAgICAgIHZhciBsYXllcklkID0gY29uZmlnLmxheWVyc1tsYXllckNvZGVdLmlkO1xuICAgICAgLy8gcmVjdXBlcmEgaWwgbGF5ZXIgZGFsIG1hcHNlcnZpY2VcbiAgICAgIHZhciBsYXllciA9IHNlbGYuX21hcFNlcnZpY2UuZ2V0UHJvamVjdCgpLmdldExheWVyQnlJZChsYXllcklkKTtcbiAgICAgIExheWVyLm5hbWUgPSBsYXllci5nZXRPcmlnTmFtZSgpO1xuICAgICAgTGF5ZXIuaWQgPSBsYXllcklkO1xuICAgIH0pO1xuXG4gIH07XG4gIC8vIGZpbmUgZGVsIG1ldG9kbyBJTklUXG5cbiAgLy9zdG9wXG4gIHRoaXMuc3RvcCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIGlmICh0aGlzLnN0YXRlLmVkaXRpbmcub24pIHtcbiAgICAgIHRoaXMuX2NhbmNlbE9yU2F2ZSgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNlbGYuX3N0b3BFZGl0aW5nKCk7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZmFpbChmdW5jdGlvbigpe1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgICAgfSlcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH07XG5cbiAgLy8gYXZ2aW8gbyB0ZXJtaW5vIGxhIHNlc3Npb25lIGRpIGVkaXRpbmcgZ2VuZXJhbGVcbiAgdGhpcy50b2dnbGVFZGl0aW5nID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy5lbmFibGVkICYmICF0aGlzLnN0YXRlLmVkaXRpbmcub24pe1xuICAgICAgdGhpcy5fc3RhcnRFZGl0aW5nKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy5vbikge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcCgpO1xuICAgIH1cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuXG4gIHRoaXMuc2F2ZUVkaXRzID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLl9jYW5jZWxPclNhdmUoMik7XG4gIH07XG5cbiAgLy8gYXZ2aWEgdW5vIGRlaSB0b29sIGRpIGVkaXRpbmcgdHJhIHF1ZWxsaSBzdXBwb3J0YXRpIGRhIEVkaXRvciAoYWRkZmVhdHVyZSwgZWNjLilcbiAgLy8gZnVuemlvbmUgZGVsbCdlbGVtZW50byBwYW5lbCB2dWVcbiAgdGhpcy50b2dnbGVFZGl0VG9vbCA9IGZ1bmN0aW9uKGxheWVyQ29kZSwgdG9vbFR5cGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy9wcmVuZG8gaWwgbGF5ZXIgaW4gYmFzZSBhbCBjb2RpY2UgcGFzc2F0byBkYWxsIGNvbXBvbmVudGUgdnVlXG4gICAgdmFyIGxheWVyID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV07XG4gICAgaWYgKGxheWVyKSB7XG4gICAgICAvL3JlY3VwcmVybyBpbCBjdXJyZW50IGxheWVyIGluIGVkaXRpbmdcbiAgICAgIHZhciBjdXJyZW50RWRpdGluZ0xheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgICAgLy8gc2Ugc2kgc3RhIHVzYW5kbyB1biB0b29sIGNoZSBwcmV2ZWRlIGxvIHN0ZXNzbyBsYXllciBpbiBlZGl0YXppb25lXG4gICAgICBpZiAoY3VycmVudEVkaXRpbmdMYXllciAmJiBsYXllckNvZGUgPT0gY3VycmVudEVkaXRpbmdMYXllci5sYXllckNvZGUpIHtcbiAgICAgICAgLy8gZSBsbyBzdGVzc28gdG9vbCBhbGxvcmEgZGlzYXR0aXZvIGlsIHRvb2wgKGluIHF1YW50byDDqFxuICAgICAgICAvLyBwcmVtdXRvIHN1bGxvIHN0ZXNzbyBib3R0b25lKVxuICAgICAgICBpZiAodG9vbFR5cGUgPT0gY3VycmVudEVkaXRpbmdMYXllci5lZGl0b3IuZ2V0QWN0aXZlVG9vbCgpLmdldFR5cGUoKSkge1xuICAgICAgICAgIC8vIHN0ZXNzbyB0aXBvIGRpIHRvb2wgcXVpbmRpIHNpIMOoIHZlcmlmaWNhdG8gdW4gdG9nZ2xlIG5lbCBib3R0b25lXG4gICAgICAgICAgLy8gYWxsb3JhIHN0aXBwbyBsJ2VkaXRpbmcgVG9vbFxuICAgICAgICAgIHRoaXMuX3N0b3BFZGl0aW5nVG9vbCgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFsdHJpbWVudGkgYXR0aXZvIGlsIHRvb2wgcmljaGllc3RvXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vc3RvcHBvIHByZXZlbnRpdmFtZW50ZSBsJ2VkaXRpbmcgdG9vbCBhdHRpdm9cbiAgICAgICAgICB0aGlzLl9zdG9wRWRpdGluZ1Rvb2woKTtcbiAgICAgICAgICAvL2ZhY2NpbyBwYXJ0aXJlIGwnZWRpdG5nIHRvb2wgcGFzc2FuZG8gY3VycmVudCBFZGl0aW5nIExheWVyIGUgaWwgdGlwbyBkaSB0b29sXG4gICAgICAgICAgdGhpcy5fc3RhcnRFZGl0aW5nVG9vbChjdXJyZW50RWRpdGluZ0xheWVyLCB0b29sVHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGFsdHJpbWVudGkgY2FzbyBpbiBjdWkgbm9uIMOoIHN0YXRvIHNldHRhdG8gaWwgY3VycmVudCBlZGl0aW5nIGxheWVyIG9cbiAgICAgICAgLy8gaWwgbGF5ZXIgY2hlIHNpIHN0YSBjZXJjYW5kbyBkaSBlZGl0YXJlIMOoIGRpdmVyc28gZGEgcXVlbGxvIGluIGVkaXRpbmcgaW4gcHJlY2VkZW56YVxuICAgICAgICAvLyBuZWwgY2FzbyBzaWEgZ2nDoCAgYXR0aXZvIHVuIGVkaXRvciB2ZXJpZmljbyBkaSBwb3RlcmxvIHN0b3BwYXJlXG4gICAgICAgIGlmIChjdXJyZW50RWRpdGluZ0xheWVyICYmIGN1cnJlbnRFZGl0aW5nTGF5ZXIuZWRpdG9yLmlzU3RhcnRlZCgpKSB7XG4gICAgICAgICAgLy8gc2UgbGEgdGVybWluYXppb25lIGRlbGwnZWRpdGluZyBzYXLDoCAgYW5kYXRhIGEgYnVvbiBmaW5lLCBzZXR0byBpbCB0b29sXG4gICAgICAgICAgLy8gcHJvdm8gYSBzdG9wcGFyZVxuICAgICAgICAgIHRoaXMuX2NhbmNlbE9yU2F2ZSgyKVxuICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLl9zdG9wRWRpdG9yKCkpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYuX3N0YXJ0RWRpdGluZ1Rvb2wobGF5ZXIsIHRvb2xUeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvL25lbCBjYXNvIHNpYSBsYSBwcmltYSB2b2x0YSBjaGUgaW50ZXJhZ2lzY28gY29uIHVuIHRvb2xcbiAgICAgICAgICAvLyBlIHF1aW5kaSBub24gw6ggc3RhdG8gc2V0dGF0byBuZXNzdW4gbGF5ZXIgaW4gZWRpdGluZ1xuICAgICAgICAgIHRoaXMuX3N0YXJ0RWRpdGluZ1Rvb2wobGF5ZXIsIHRvb2xUeXBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvL2Z1bnppb25lIGNoZSByZXN0aXR1aXNjZSBsJ2FycmF5IGRlaSBjb2RpY2kgZGVpIGxheWVyc1xuICB0aGlzLmdldExheWVyQ29kZXMgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiBfLnZhbHVlcyh0aGlzLmxheWVyQ29kZXMpO1xuICB9O1xuXG4gIC8qIE1FVE9ESSBQUklWQVRJICovXG4gIC8vIGZ1bnppb25lIHBlciBzZXR0YXJlIGlsIHZlY3RvcmxheWVyIGFsbGEgcHJvcmlldMOgIHZlY3RvciBkZWwgbGF5ZXJcbiAgdGhpcy5fc2V0VXBWZWN0b3JMYXllciA9IGZ1bmN0aW9uKGxheWVyQ29kZSwgdmVjdG9yTGF5ZXIpIHtcbiAgICB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS52ZWN0b3IgPSB2ZWN0b3JMYXllcjtcbiAgfTtcbiAgLy9mdW56aW9uZSBjaGUgcGVybWV0dGUgZGkgZmFyZSBpbCBzZXR1cCBkZWxsJ2VkaXRvciBlIGFzc2VnYW5ybG8gYWwgbGF5ZXJcbiAgdGhpcy5fc2V0VXBFZGl0b3IgPSBmdW5jdGlvbihsYXllckNvZGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy9vcHRpb24gZWRpdG9yXG4gICAgdmFyIG9wdGlvbnNfZWRpdG9yID0ge1xuICAgICAgJ21hcFNlcnZpY2UnOiBzZWxmLl9tYXBTZXJ2aWNlLFxuICAgICAgJ2Zvcm1DbGFzcyc6IEZvcm1DbGFzc1xuICAgIH07XG5cbiAgICAvLyBwcmVuZG8gaWwgdmVjdG9yIGxheWVyIGRlbCBsYXllclxuICAgIHZhciB2ZWN0b3JMYXllciA9IHRoaXMuX2xheWVyc1tsYXllckNvZGVdLnZlY3RvcjtcbiAgICAvL0dFU1RJT05FIEUgSU5JWklBTElaWkFaSU9ORSBERUxMJ0VESVRPUiBSRUxBVElWTyBBTCBMQVlFUiBWRVRUT1JJQUxFXG4gICAgLy9jcmVvIGwnaXN0YW56YSBkZWxsJ2VkaXRvciBjaGUgZ2VzdGlyw6AgaWwgbGF5ZXJcbiAgICB2YXIgZWRpdG9yID0gbmV3IHNlbGYuX2VkaXRvckNsYXNzW2xheWVyQ29kZV0ob3B0aW9uc19lZGl0b3IpO1xuICAgIC8vc2V0dG8gaWwgbGF5ZXIgdmV0dG9yaWFsZSBhc3NvY2lhdG8gYWxsJ2VkaXRvclxuICAgIC8vIGUgaSB0aXBpIGRpIHRvb2xzIGFzc29jaWF0aSBhZCBlc3NvXG4gICAgZWRpdG9yLnNldFZlY3RvckxheWVyKHZlY3RvckxheWVyKTtcbiAgICAvL2VtZXR0ZSBldmVudG8gY2hlIMOoIHN0YXRhIGdlbmVyYXRhIHVuYSBtb2RpZmljYSBsYSBsYXllclxuICAgIGVkaXRvci5vbihcImRpcnR5XCIsIGZ1bmN0aW9uIChkaXJ0eSkge1xuICAgICAgc2VsZi5zdGF0ZS5oYXNFZGl0cyA9IGRpcnR5O1xuICAgIH0pO1xuICAgIC8vYXNzZWdubyBsJ2lzdGFuemEgZWRpdG9yIGFsIGxheWVyIHRyYW1pdGUgbGEgcHJvcHJpZXTDoCBlZGl0b3JcbiAgICB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS5lZGl0b3IgPSBlZGl0b3I7XG4gICAgLy8vLyBGSU5FIEdFU1RJT05FIEVESVRPUlxuICB9O1xuICAvL2ZhIHBhcnRpcmUgbCdlZGl0aW5nXG4gIHRoaXMuX3N0YXJ0RWRpdGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLl9sb2FkZXIubG9hZExheWVycygpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAvLyBzZSB0dXR0byAgw6ggYW5kYXRvIGEgYnVvbiBmaW5lIGFnZ2l1bmdvIGkgVmVjdG9yTGF5ZXIgYWxsYSBtYXBwYVxuICAgICAgICAgIHNlbGYuX2FkZFRvTWFwKCk7XG4gICAgICAgICAgc2VsZi5zdGF0ZS5lZGl0aW5nLm9uID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLmVtaXQoXCJlZGl0aW5nc3RhcnRlZFwiKTtcbiAgICAgICAgICBpZiAoIXNlbGYuX2xvYWREYXRhT25NYXBWaWV3Q2hhbmdlTGlzdGVuZXIpIHtcbiAgICAgICAgICAgIC8vdmllbmUgcml0b3JuYXRhIGxhIGxpc3RlbmVyIGtleVxuICAgICAgICAgICAgc2VsZi5fbG9hZERhdGFPbk1hcFZpZXdDaGFuZ2VMaXN0ZW5lciA9IHNlbGYuX21hcFNlcnZpY2Uub25hZnRlcignc2V0TWFwVmlldycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBpZiAoc2VsZi5zdGF0ZS5lZGl0aW5nLm9uICYmIHNlbGYuc3RhdGUuZWRpdGluZy5lbmFibGVkKXtcbiAgICAgICAgICAgICAgICBzZWxmLl9sb2FkZXIubG9hZEFsbFZlY3RvcnNEYXRhKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gIH07XG5cbiAgdGhpcy5fc3RvcEVkaXRpbmcgPSBmdW5jdGlvbihyZXNldCl7XG4gICAgLy8gc2UgcG9zc28gc3RvcHBhcmUgdHV0dGkgZ2xpIGVkaXRvci4uLlxuICAgIGlmICh0aGlzLl9zdG9wRWRpdG9yKHJlc2V0KSl7XG4gICAgICBfLmZvckVhY2godGhpcy5fbGF5ZXJzLCBmdW5jdGlvbihsYXllciwgbGF5ZXJDb2RlKXtcbiAgICAgICAgdmFyIHZlY3RvciA9IGxheWVyLnZlY3RvcjtcbiAgICAgICAgc2VsZi5fbWFwU2VydmljZS52aWV3ZXIucmVtb3ZlTGF5ZXJCeU5hbWUodmVjdG9yLm5hbWUpO1xuICAgICAgICBsYXllci52ZWN0b3I9IG51bGw7XG4gICAgICAgIGxheWVyLmVkaXRvcj0gbnVsbDtcbiAgICAgICAgc2VsZi5fdW5sb2NrTGF5ZXIoc2VsZi5fbGF5ZXJzW2xheWVyQ29kZV0pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl91cGRhdGVFZGl0aW5nU3RhdGUoKTtcbiAgICAgIHNlbGYuc3RhdGUuZWRpdGluZy5vbiA9IGZhbHNlO1xuICAgICAgc2VsZi5fY2xlYW5VcCgpO1xuICAgICAgc2VsZi5lbWl0KFwiZWRpdGluZ3N0b3BwZWRcIik7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuX2NsZWFuVXAgPSBmdW5jdGlvbigpIHtcbiAgICAvL3ZhZG8gYWQgYW5udWxhcmUgbCdlc3Rlbnppb25lIGRlbCBsb2FkZXIgcGVyIHBvdGVyIHJpY2FyaWNhcmUgaSBkYXRpIHZldHR0b3JpYWxpXG4gICAgLy9kYSByaXZlZGVyZTtcbiAgICB0aGlzLl9sb2FkZXIuY2xlYW5VcExheWVycygpO1xuXG4gIH07XG4gIC8vc2Ugbm9uIMOoIGFuY29yYSBwYXJ0aXRvIGZhY2NpbyBwYXJ0aXJlIGxvIHN0YXJ0IGVkaXRvclxuICB0aGlzLl9zdGFydEVkaXRvciA9IGZ1bmN0aW9uKGxheWVyKXtcbiAgICAvLyBhdnZpbyBsJ2VkaXRvclxuICAgIC8vIHBhc3NhbmRvbGkgaWwgc2VydmljZSBjaGUgbG8gYWNjZXR0YVxuICAgIGlmIChsYXllci5lZGl0b3Iuc3RhcnQodGhpcykpIHtcbiAgICAgIC8vIHJlZ2lzdHJvIGlsIGN1cnJlbnQgbGF5ZXIgaW4gZWRpdGluZ1xuICAgICAgdGhpcy5fc2V0Q3VycmVudEVkaXRpbmdMYXllcihsYXllcik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuICAvL2Z1bnppb25lIGNoZSB2aWVuZSBjaGlhbWF0YSBhbCBjbGljayBzdSB1biB0b29sIGRlbGwnZWRpdGluZyBlIHNlXG4gIC8vbm9uIMOoIHN0YXRvIGFzc2VnbmF0byBhbmNvcmEgbmVzc3VuIGxheWVyIGNvbWUgY3VycmVudCBsYXllciBlZGl0aW5nXG4gIHRoaXMuX3N0YXJ0RWRpdGluZ1Rvb2wgPSBmdW5jdGlvbihsYXllciwgdG9vbFR5cGUsIG9wdGlvbnMpIHtcbiAgICAvL2Fzc2Vnbm8gdHJ1ZSBhbGxvIHN0YXJ0RWRpdGluZ1Rvb2wgYXR0cmlidXRvIGRlbGxsbyBzdGF0ZVxuICAgIHRoaXMuc3RhdGUuc3RhcnRpbmdFZGl0aW5nVG9vbCA9IHRydWU7XG4gICAgdmFyIGNhblN0YXJ0VG9vbCA9IHRydWU7XG4gICAgLy92ZXJpZmljbyBzZSBsJ2VkaXRvciDDqCBwYXJ0aXRvIG8gbWVub1xuICAgIGlmICghbGF5ZXIuZWRpdG9yLmlzU3RhcnRlZCgpKSB7XG4gICAgICAvL3NlIG5vbiDDqCBhbmNvcmEgcGFydGl0byBsbyBmYWNjaW8gcGFydGlyZSBlIG5lIHByZW5kbyBpbCByaXN1bHRhdG9cbiAgICAgIC8vIHRydWUgbyBmYWxzZVxuICAgICAgY2FuU3RhcnRUb29sID0gdGhpcy5fc3RhcnRFZGl0b3IobGF5ZXIpO1xuICAgIH1cbiAgICAvLyB2ZXJpZmljYSBzZSBpbCB0b29sIHB1w7IgZXNzZXJlIGF0dGl2YXRvXG4gICAgLy8gbCdlZGl0b3IgdmVyaWZpY2Egc2UgaWwgdG9vbCByaWNoaWVzdG8gw6ggY29tcGF0aWJpbGVcbiAgICAvLyBjb24gaSB0b29scyBwcmV2aXN0aSBkYWxsJ2VkaXRvci4gQ3JlYSBpc3RhbnphIGRpIHRvb2wgZSBhdnZpYSBpbCB0b29sXG4gICAgLy8gYXR0cmF2ZXJzbyBpbCBtZXRvZG8gcnVuXG4gICAgaWYgKGNhblN0YXJ0VG9vbCAmJiBsYXllci5lZGl0b3Iuc2V0VG9vbCh0b29sVHlwZSwgb3B0aW9ucykpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZUVkaXRpbmdTdGF0ZSgpO1xuICAgICAgdGhpcy5zdGF0ZS5zdGFydGluZ0VkaXRpbmdUb29sID0gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5zdGFydGluZ0VkaXRpbmdUb29sID0gZmFsc2U7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIHRoaXMuX3N0b3BFZGl0b3IgPSBmdW5jdGlvbihyZXNldCl7XG4gICAgdmFyIHJldCA9IHRydWU7XG4gICAgdmFyIGxheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgIGlmIChsYXllcikge1xuICAgICAgcmV0ID0gbGF5ZXIuZWRpdG9yLnN0b3AocmVzZXQpO1xuICAgICAgaWYgKHJldCl7XG4gICAgICAgIHRoaXMuX3NldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIHNpIG9jY3VwYSBkaSBpbnRlcnJvbWVwZXJlIGwnZWR0aW5nIHRvb2xcbiAgdGhpcy5fc3RvcEVkaXRpbmdUb29sID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJldCA9IHRydWU7XG4gICAgLy8gcmVjdXBlcmUgaWwgbGF5ZXIgaW4gY3VycmVudCBlZGl0aW5nXG4gICAgdmFyIGxheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgIC8vIHNlIGVzaXN0ZSBlZCBlcmEgc3RhdG8gc2V0dGF0b1xuICAgIGlmIChsYXllcikge1xuICAgICAgLy8gc2UgYW5kYXRvIGJlbmUgcml0b3JuYSB0cnVlXG4gICAgICByZXQgPSBsYXllci5lZGl0b3Iuc3RvcFRvb2woKTtcbiAgICAgIGlmIChyZXQpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlRWRpdGluZ1N0YXRlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSBhY2NldHRhIGNvbWUgcGFyYW1ldHJvIGlsIHRpcG8gZGlcbiAgLy8gb3BlcmF6aW9uZSBkYSBmYXJlIGEgc2Vjb25kYSBkaWNvc2Egw6ggYXZ2ZW51dG9cbiAgdGhpcy5fY2FuY2VsT3JTYXZlID0gZnVuY3Rpb24odHlwZSl7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIC8vIHBlciBzaWN1cmV6emEgdGVuZ28gdHV0dG8gZGVudHJvIHVuIGdyb3NzbyB0cnkvY2F0Y2gsXG4gICAgLy8gcGVyIG5vbiByaXNjaGlhcmUgZGkgcHJvdm9jYXJlIGluY29uc2lzdGVuemUgbmVpIGRhdGkgZHVyYW50ZSBpbCBzYWx2YXRhZ2dpb1xuICAgIHRyeSB7XG4gICAgICB2YXIgX2Fza1R5cGUgPSAxO1xuICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgX2Fza1R5cGUgPSB0eXBlXG4gICAgICB9XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgY2hvaWNlID0gXCJjYW5jZWxcIjtcbiAgICAgIHZhciBkaXJ0eUVkaXRvcnMgPSB7fTtcbiAgICAgIC8vIHZlcmlmaWNvIHBlciBvZ25pIGxheWVyIHNlIGwnZWRpdG8gYXNzb2NpYXRvIMOoIERpcnR5XG4gICAgICBfLmZvckVhY2godGhpcy5fbGF5ZXJzLCBmdW5jdGlvbihsYXllciwgbGF5ZXJDb2RlKSB7XG4gICAgICAgIGlmIChsYXllci5lZGl0b3IuaXNEaXJ0eSgpKSB7XG4gICAgICAgICAgZGlydHlFZGl0b3JzW2xheWVyQ29kZV0gPSBsYXllci5lZGl0b3I7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgLy8gdmVyaWZpY28gc2UgY2kgc29ubyBvIG1lbm8gZWRpdG9yIHNwb3JjaGlcbiAgICAgIGlmKF8ua2V5cyhkaXJ0eUVkaXRvcnMpLmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9hc2tDYW5jZWxPclNhdmUoX2Fza1R5cGUpLlxuICAgICAgICB0aGVuKGZ1bmN0aW9uKGFjdGlvbikge1xuICAgICAgICAgIC8vIHJpdG9ybmEgaWwgdGlwbyBkaSBhemlvbmUgZGEgZmFyZVxuICAgICAgICAgIC8vIHNhdmUsIGNhbmNlbCwgbm9zYXZlXG4gICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ3NhdmUnKSB7XG4gICAgICAgICAgICAvLyBwYXNzbyBnbGkgZWRpdG9yIHNwb2NoaSBhbGxhIGZ1bnppb25lIF9zYXZlRWRpdHNcbiAgICAgICAgICAgIHNlbGYuX3NhdmVFZGl0cyhkaXJ0eUVkaXRvcnMpLlxuICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09ICdub3NhdmUnKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT0gJ2NhbmNlbCcpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIGluIGJhc2UgYWwgdGlwbyBkaSBhc2tUeXBlXG4gIC8vIHZpc3VhbGl6emEgaWwgbW9kYWxlIGEgY3VpIHJpc3BvbmRlcmUsIHNhbHZhIGV0YyAuLlxuICB0aGlzLl9hc2tDYW5jZWxPclNhdmUgPSBmdW5jdGlvbih0eXBlKXtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgdmFyIGJ1dHRvblR5cGVzID0ge1xuICAgICAgU0FWRToge1xuICAgICAgICBsYWJlbDogXCJTYWx2YVwiLFxuICAgICAgICBjbGFzc05hbWU6IFwiYnRuLXN1Y2Nlc3NcIixcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnc2F2ZScpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgTk9TQVZFOiB7XG4gICAgICAgIGxhYmVsOiBcIlRlcm1pbmEgc2VuemEgc2FsdmFyZVwiLFxuICAgICAgICBjbGFzc05hbWU6IFwiYnRuLWRhbmdlclwiLFxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oKXtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdub3NhdmUnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIENBTkNFTDoge1xuICAgICAgICBsYWJlbDogXCJBbm51bGxhXCIsXG4gICAgICAgIGNsYXNzTmFtZTogXCJidG4tcHJpbWFyeVwiLFxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oKXtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdjYW5jZWwnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgc3dpdGNoICh0eXBlKXtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgYnV0dG9ucyA9IHtcbiAgICAgICAgICBzYXZlOiBidXR0b25UeXBlcy5TQVZFLFxuICAgICAgICAgIG5vc2F2ZTogYnV0dG9uVHlwZXMuTk9TQVZFLFxuICAgICAgICAgIGNhbmNlbDogYnV0dG9uVHlwZXMuQ0FOQ0VMXG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBidXR0b25zID0ge1xuICAgICAgICAgIHNhdmU6IGJ1dHRvblR5cGVzLlNBVkUsXG4gICAgICAgICAgY2FuY2VsOiBidXR0b25UeXBlcy5DQU5DRUxcbiAgICAgICAgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIEdVSS5kaWFsb2cuZGlhbG9nKHtcbiAgICAgIG1lc3NhZ2U6IFwiVnVvaSBzYWx2YXJlIGRlZmluaXRpdmFtZW50ZSBsZSBtb2RpZmljaGU/XCIsXG4gICAgICB0aXRsZTogXCJTYWx2YXRhZ2dpbyBtb2RpZmljYVwiLFxuICAgICAgYnV0dG9uczogYnV0dG9uc1xuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSBzYWx2YSBpIGRhdGkgcmVsYXRpdmkgYWwgbGF5ZXIgdmV0dG9yaWFsZVxuICAvLyBkZWwgZGlydHlFZGl0b3JcbiAgdGhpcy5fc2F2ZUVkaXRzID0gZnVuY3Rpb24oZGlydHlFZGl0b3JzKXtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgdGhpcy5fc2VuZEVkaXRzKGRpcnR5RWRpdG9ycylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgIEdVSS5ub3RpZnkuc3VjY2VzcyhcIkkgZGF0aSBzb25vIHN0YXRpIHNhbHZhdGkgY29ycmV0dGFtZW50ZVwiKTtcbiAgICAgICAgICBzZWxmLl9jb21taXRFZGl0cyhkaXJ0eUVkaXRvcnMsIHJlc3BvbnNlKTtcbiAgICAgICAgICBzZWxmLl9tYXBTZXJ2aWNlLnJlZnJlc2hNYXAoKTtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKGVycm9ycyl7XG4gICAgICAgICAgR1VJLm5vdGlmeS5lcnJvcihcIkVycm9yZSBuZWwgc2FsdmF0YWdnaW8gc3VsIHNlcnZlclwiKTtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSBwcmVuZGUgY29tZSBpbmdyZXNzbyBnbGkgZWRpdG9yIHNwb3JjaGlcbiAgdGhpcy5fc2VuZEVkaXRzID0gZnVuY3Rpb24oZGlydHlFZGl0b3JzKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIHZhciBlZGl0c1RvUHVzaCA9IF8ubWFwKGRpcnR5RWRpdG9ycywgZnVuY3Rpb24oZWRpdG9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsYXllcm5hbWU6IGVkaXRvci5nZXRWZWN0b3JMYXllcigpLm5hbWUsXG4gICAgICAgIGVkaXRzOiBlZGl0b3IuZ2V0RWRpdGVkRmVhdHVyZXMoKVxuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIGVzZWd1ZSBpbCBwb3N0IGRlaSBkYXRpXG4gICAgdGhpcy5fcG9zdERhdGEoZWRpdHNUb1B1c2gpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJldHVybmVkKXtcbiAgICAgICAgICBpZiAocmV0dXJuZWQucmVzdWx0KXtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmV0dXJuZWQucmVzcG9uc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXR1cm5lZC5yZXNwb25zZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbihyZXR1cm5lZCl7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJldHVybmVkLnJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfTtcblxuICB0aGlzLl9jb21taXRFZGl0cyA9IGZ1bmN0aW9uKGVkaXRvcnMscmVzcG9uc2Upe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBfLmZvckVhY2goZWRpdG9ycyxmdW5jdGlvbihlZGl0b3Ipe1xuICAgICAgdmFyIG5ld0F0dHJpYnV0ZXNGcm9tU2VydmVyID0gbnVsbDtcbiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5uZXcpe1xuICAgICAgICBfLmZvckVhY2gocmVzcG9uc2UubmV3LGZ1bmN0aW9uKHVwZGF0ZWRGZWF0dXJlQXR0cmlidXRlcyl7XG4gICAgICAgICAgdmFyIG9sZGZpZCA9IHVwZGF0ZWRGZWF0dXJlQXR0cmlidXRlcy5jbGllbnRpZDtcbiAgICAgICAgICB2YXIgZmlkID0gdXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzLmlkO1xuICAgICAgICAgIGVkaXRvci5nZXRFZGl0VmVjdG9yTGF5ZXIoKS5zZXRGZWF0dXJlRGF0YShvbGRmaWQsZmlkLG51bGwsdXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzKTtcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGVkaXRvci5jb21taXQoKTtcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLl91bmRvRWRpdHMgPSBmdW5jdGlvbihkaXJ0eUVkaXRvcnMpe1xuICAgIHZhciBjdXJyZW50RWRpdGluZ0xheWVyQ29kZSA9IHRoaXMuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKS5sYXllckNvZGU7XG4gICAgdmFyIGVkaXRvciA9IGRpcnR5RWRpdG9yc1tjdXJyZW50RWRpdGluZ0xheWVyQ29kZV07XG4gICAgdGhpcy5fc3RvcEVkaXRpbmcodHJ1ZSk7XG4gIH07XG4gIC8vIGVzZWd1ZSBsJ3VwZGF0ZSBkZWxsbyBzdGF0ZSBuZWwgY2FzbyBhZCBlc2VtcGlvIGRpIHVuIHRvZ2dsZSBkZWwgYm90dG9uZSB0b29sXG4gIHRoaXMuX3VwZGF0ZUVkaXRpbmdTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIHByZW5kZSBpbCBsYXllciBpbiBFZGl0aW5nXG4gICAgdmFyIGxheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgIGlmIChsYXllcikge1xuICAgICAgdGhpcy5zdGF0ZS5lZGl0aW5nLmxheWVyQ29kZSA9IGxheWVyLmxheWVyQ29kZTtcbiAgICAgIHRoaXMuc3RhdGUuZWRpdGluZy50b29sVHlwZSA9IGxheWVyLmVkaXRvci5nZXRBY3RpdmVUb29sKCkuZ2V0VHlwZSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuZWRpdGluZy5sYXllckNvZGUgPSBudWxsO1xuICAgICAgdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xUeXBlID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5fdXBkYXRlVG9vbFN0ZXBzU3RhdGUoKTtcbiAgfTtcblxuICB0aGlzLl91cGRhdGVUb29sU3RlcHNTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgdmFyIGFjdGl2ZVRvb2w7XG4gICAgaWYgKGxheWVyKSB7XG4gICAgICBhY3RpdmVUb29sID0gbGF5ZXIuZWRpdG9yLmdldEFjdGl2ZVRvb2woKTtcbiAgICB9XG4gICAgaWYgKGFjdGl2ZVRvb2wgJiYgYWN0aXZlVG9vbC5nZXRUb29sKCkpIHtcbiAgICAgIHZhciB0b29sSW5zdGFuY2UgPSBhY3RpdmVUb29sLmdldFRvb2woKTtcbiAgICAgIGlmICh0b29sSW5zdGFuY2Uuc3RlcHMpe1xuICAgICAgICB0aGlzLl9zZXRUb29sU3RlcFN0YXRlKGFjdGl2ZVRvb2wpO1xuICAgICAgICB0b29sSW5zdGFuY2Uuc3RlcHMub24oJ3N0ZXAnLCBmdW5jdGlvbihpbmRleCxzdGVwKSB7XG4gICAgICAgICAgc2VsZi5fc2V0VG9vbFN0ZXBTdGF0ZShhY3RpdmVUb29sKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRvb2xJbnN0YW5jZS5zdGVwcy5vbignY29tcGxldGUnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIHNlbGYuX3NldFRvb2xTdGVwU3RhdGUoKTtcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzZWxmLl9zZXRUb29sU3RlcFN0YXRlKCk7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuX3NldFRvb2xTdGVwU3RhdGUgPSBmdW5jdGlvbihhY3RpdmVUb29sKXtcbiAgICB2YXIgaW5kZXgsIHRvdGFsLCBtZXNzYWdlO1xuICAgIGlmIChfLmlzVW5kZWZpbmVkKGFjdGl2ZVRvb2wpKXtcbiAgICAgIGluZGV4ID0gbnVsbDtcbiAgICAgIHRvdGFsID0gbnVsbDtcbiAgICAgIG1lc3NhZ2UgPSBudWxsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHZhciB0b29sID0gYWN0aXZlVG9vbC5nZXRUb29sKCk7XG4gICAgICB2YXIgbWVzc2FnZXMgPSB0b29sU3RlcHNNZXNzYWdlc1thY3RpdmVUb29sLmdldFR5cGUoKV07XG4gICAgICBpbmRleCA9IHRvb2wuc3RlcHMuY3VycmVudFN0ZXBJbmRleCgpO1xuICAgICAgdG90YWwgPSB0b29sLnN0ZXBzLnRvdGFsU3RlcHMoKTtcbiAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlc1tpbmRleF07XG4gICAgICBpZiAoXy5pc1VuZGVmaW5lZChtZXNzYWdlKSkge1xuICAgICAgICBpbmRleCA9IG51bGw7XG4gICAgICAgIHRvdGFsID0gbnVsbDtcbiAgICAgICAgbWVzc2FnZSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC5uID0gaW5kZXggKyAxO1xuICAgIHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC50b3RhbCA9IHRvdGFsO1xuICAgIHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC5tZXNzYWdlID0gbWVzc2FnZTtcbiAgfTtcblxuICB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudEVkaXRpbmdMYXllcjtcbiAgfTtcblxuICB0aGlzLl9zZXRDdXJyZW50RWRpdGluZ0xheWVyID0gZnVuY3Rpb24obGF5ZXIpe1xuICAgIGlmICghbGF5ZXIpe1xuICAgICAgdGhpcy5fY3VycmVudEVkaXRpbmdMYXllciA9IG51bGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5fY3VycmVudEVkaXRpbmdMYXllciA9IGxheWVyO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLl9hZGRUb01hcCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vcmVjdXBlcm8gbCdlbGVtZW50byBtYXAgb2wzXG4gICAgdmFyIG1hcCA9IHRoaXMuX21hcFNlcnZpY2Uudmlld2VyLm1hcDtcbiAgICB2YXIgbGF5ZXJDb2RlcyA9IHRoaXMuZ2V0TGF5ZXJDb2RlcygpO1xuICAgIC8vb2duaSBsYXllciBsbyBhZ2dpdW5nbyBhbGxhIG1hcHBhXG4gICAgLy9jb24gaWwgbWV0b2RvIGFkZFRvTWFwIGRpIHZlY3RvckxheWVyXG4gICAgXy5mb3JFYWNoKGxheWVyQ29kZXMsIGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgICAgc2VsZi5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yLmFkZFRvTWFwKG1hcCk7XG4gICAgfSlcbiAgfTtcblxuICB0aGlzLl9wb3N0RGF0YSA9IGZ1bmN0aW9uKGVkaXRzVG9QdXNoKSB7XG4gICAgLy8gbWFuZG8gdW4gb2dnZXR0byBjb21lIG5lbCBjYXNvIGRlbCBiYXRjaCxcbiAgICAvLyBtYSBpbiBxdWVzdG8gY2FzbyBkZXZvIHByZW5kZXJlIHNvbG8gaWwgcHJpbW8sIGUgdW5pY28sIGVsZW1lbnRvXG4gICAgaWYgKGVkaXRzVG9QdXNoLmxlbmd0aCA+IDEpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wb3N0QmF0Y2hEYXRhKGVkaXRzVG9QdXNoKTtcbiAgICB9XG4gICAgdmFyIGxheWVyTmFtZSA9IGVkaXRzVG9QdXNoWzBdLmxheWVybmFtZTtcbiAgICB2YXIgZWRpdHMgPSBlZGl0c1RvUHVzaFswXS5lZGl0cztcbiAgICB2YXIganNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeShlZGl0cyk7XG4gICAgcmV0dXJuICQucG9zdCh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLmJhc2V1cmwrbGF5ZXJOYW1lK1wiL1wiLFxuICAgICAgZGF0YToganNvbkRhdGEsXG4gICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLl9wb3N0QmF0Y2hEYXRhID0gZnVuY3Rpb24obXVsdGlFZGl0c1RvUHVzaCl7XG4gICAgdmFyIGVkaXRzID0ge307XG4gICAgXy5mb3JFYWNoKG11bHRpRWRpdHNUb1B1c2gsZnVuY3Rpb24oZWRpdHNUb1B1c2gpe1xuICAgICAgZWRpdHNbZWRpdHNUb1B1c2gubGF5ZXJuYW1lXSA9IGVkaXRzVG9QdXNoLmVkaXRzO1xuICAgIH0pO1xuICAgIHZhciBqc29uRGF0YSA9IEpTT04uc3RyaW5naWZ5KGVkaXRzKTtcbiAgICByZXR1cm4gJC5wb3N0KHtcbiAgICAgIHVybDogdGhpcy5jb25maWcuYmFzZXVybCxcbiAgICAgIGRhdGE6IGpzb25EYXRhLFxuICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5fdW5sb2NrID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgbGF5ZXJDb2RlcyA9IHRoaXMuZ2V0TGF5ZXJDb2RlcygpO1xuICAgIC8vIGVzZWd1byBsZSByaWNoaWVzdGUgZGVsbGUgY29uZmlndXJhemlvbmkgZSBtaSB0ZW5nbyBsZSBwcm9tZXNzZVxuICAgIHZhciB1bmxvY2tSZXF1ZXN0cyA9IF8ubWFwKGxheWVyQ29kZXMsZnVuY3Rpb24obGF5ZXJDb2RlKXtcbiAgICAgIHJldHVybiBzZWxmLl91bmxvY2tMYXllcihzZWxmLl9sYXllcnNbbGF5ZXJDb2RlXSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5fdW5sb2NrTGF5ZXIgPSBmdW5jdGlvbihsYXllckNvbmZpZyl7XG4gICAgJC5nZXQodGhpcy5jb25maWcuYmFzZXVybCtsYXllckNvbmZpZy5uYW1lK1wiLz91bmxvY2tcIik7XG4gIH07XG4gIC8vZ2V0IGxvYWRlciBzZXJ2aWNlXG4gIHRoaXMuZ2V0TG9hZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xvYWRlcjtcbiAgfVxufVxuaW5oZXJpdChJdGVybmV0U2VydmljZSxHM1dPYmplY3QpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBJdGVybmV0U2VydmljZTtcbn0se1wiLi9lZGl0b3JzL2FjY2Vzc2llZGl0b3JcIjoxLFwiLi9lZGl0b3JzL2F0dHJpYnV0ZXNmb3JtXCI6MixcIi4vZWRpdG9ycy9naXVuemlvbmllZGl0b3JcIjozLFwiLi9lZGl0b3JzL3N0cmFkZWVkaXRvclwiOjV9XX0se30sWzZdKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
