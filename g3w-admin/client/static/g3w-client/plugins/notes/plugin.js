!function e(t,i,o){function n(r,a){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};t[r][0].call(d.exports,function(e){var i=t[r][1][e];return n(i?i:e)},d,d.exports,e,t,i,o)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({1:[function(t,e,i){function o(t){s(this,t),this._formPanel=l}var n=g3wsdk.core.utils.inherit,s=g3wsdk.core.utils.base,r=g3wsdk.gui.FormPanel,a=g3wsdk.gui.Form,l=r.extend({});n(o,a),e.exports=o},{}],2:[function(t,e,i){function o(t){t.formTools=[],s(this,t);var e=function(){a.saveEdits()};this.onafter("addFeature",e),this.onafter("deleteFeature",e),this.onafter("moveFeature",e),this.onafter("pickFeature",e)}var n=g3wsdk.core.utils.inherit,s=g3wsdk.core.utils.base,r=g3wsdk.core.Editor,a=t("../pluginservice");t("./attributesform");n(o,r),e.exports=o},{"../pluginservice":7,"./attributesform":1}],3:[function(t,e,i){var o=g3wsdk.core.utils.inherit,n=g3wsdk.core.utils.base,s=g3wsdk.core.Plugin,r=g3wsdk.gui.GUI,a=g3wsdk.core.ProjectsRegistry,l=t("pluginconfig"),c=t("./pluginservice"),d=t("./panel"),u=function(){n(this),this.name="notes",this.config=null,this.service=null,this.init=function(){this.setPluginService(c),this.config=this.getPluginConfig(),this.setUpIconsUrl(this.config.layers),this.registerPlugin(this.config.gid)&&(r.ready?this.setupGui():r.on("ready",_.bind(this.setupGui,this)),l.customUrlParameters=this.createPluginCustomUrlParameters(),this.service.init(this.config,l))},this.setupGui=function(){var t=r.getComponent("tools"),e=t.getService(),i=l.tools(this);this.service.setPluginToolsService(e),e.addTools(1,"GEONOTES",i)},this.toolsActions={showHideLayer:function(){this.service.showHideLayer(l.layersCode.GEONOTES)},showEditingPanel:function(){var t=new d;_.forEach(this.config.layers,function(e,i){t.setIconsTool(i,e.icontools)}),this.service.toggleEditing(),r.showPanel(t)},isChecked:function(t){return this.service.isLayerVisible()}},this.createPluginCustomUrlParameters=function(){var t="&",e=a.getCurrentProject();return t+="project_type="+e.getType()+"&project_id="+e.getId()},this.setUpIconsUrl=function(t){_.forEach(t,function(t){l.layers[t.name].icons=t.icons})},this.setupToolsAction=function(t){_.forEach(t,function(t){})}};o(u,s),function(t){t.init()}(new u)},{"./panel":5,"./pluginservice":7,pluginconfig:6}],4:[function(t,e,i){e.exports='<div class="g3w-iternet-editing-panel">\n  <template v-for="toolbar in editorstoolbars">\n    <div class="panel panel-primary">\n      <div class="panel-heading">\n        <h3 class="panel-title">{{ toolbar.name }}</h3>\n      </div>\n      <div class="panel-body">\n        <template v-for="tool in toolbar.tools">\n          <div class="editbtn" :class="{\'enabled\' : (state.editing.on && editingtoolbtnEnabled(tool)), \'toggled\' : editingtoolbtnToggled(toolbar.layercode, tool.tooltype)}">\n            <img height="30px" width="30px" @click="toggleEditTool(toolbar.layercode, tool.tooltype)" :alt.once="tool.title" :title.once="tool.title" :src.once="tool.icon"></img>\n          </div>\n        </template>\n      </div>\n    </div>\n  </template>\n  <div v-show="state.retrievingData" style="color:#ffffff">\n    <span>Caricamento Dati ... </span><img :src="resourcesurl +\'images/loader.svg\'">\n  </div>\n  <div class="message">\n    {{{ message }}}\n  </div>\n</div>\n'},{}],5:[function(t,e,i){function o(){this.id="geonotes-editing-panel",this.name="Gestione dati GEONOTES",this.internalPanel=new c}var n=g3wsdk.core.utils.resolve,s=g3wsdk.core.utils.inherit,r=g3wsdk.gui.GUI,a=g3wsdk.gui.Panel,l=t("./pluginservice"),c=Vue.extend({template:t("./panel.html"),data:function(){var t=r.getResourcesUrl()+"images/";return{state:l.state,resourcesurl:r.getResourcesUrl(),editorstoolbars:[{name:"Geonotes",layercode:l.layerCodes.GEONOTES,tools:[{title:"Aggiungi Geonota",tooltype:"addfeature",icontool:"add",icon:t+"iternetAddPoint.png"},{title:"Sposta Geonota",tooltype:"movefeature",icontool:"move",icon:t+"iternetMovePoint.png"},{title:"Rimuovi Geonota",tooltype:"deletefeature",icontool:"delete",icon:t+"iternetDeletePoint.png"},{title:"Edita geonota",tooltype:"editattributes",icontool:"edit",icon:t+"editAttributes.png"}]}],savebtnlabel:"Salva"}},methods:{toggleEditing:function(){l.toggleEditing()},saveEdits:function(){l.saveEdits()},toggleEditTool:function(t,e){""!=e&&this.state.editing.on&&l.toggleEditTool(t,e)},editingtoolbtnToggled:function(t,e){return this.state.editing.layerCode==t&&this.state.editing.toolType==e},editingtoolbtnEnabled:function(t){return""!=t.tooltype},onClose:function(){l.stop()}},computed:{editingbtnlabel:function(){return this.state.editing.on?"Termina editing":"Avvia editing"},editingbtnEnabled:function(){return this.state.editing.enabled||this.state.editing.on?"":"disabled"},message:function(){var t="";if(this.state.editing.enabled){if(this.state.editing.toolstep.message){var e=this.state.editing.toolstep.n,i=this.state.editing.toolstep.total,o=this.state.editing.toolstep.message;t='<div style="margin-top:20px">GUIDA STRUMENTO:</div><div><span>['+e+"/"+i+'] </span><span style="color: yellow">'+o+"</span></div>"}}else t='<span style="color: red">Aumentare il livello di zoom per abilitare l\'editing';return t}}});s(o,a);var d=a.prototype;d.onShow=function(t){var e=this.internalPanel;return e.$mount().$appendTo(t),n(!0)},d.onClose=function(){console.log("close");var t=this,e=$.Deferred();return l.stop().then(function(){t.internalPanel.$destroy(!0),t.internalPanel=null,e.resolve()}).fail(function(){e.reject()}),e.promise()},d.setIconsTool=function(t,e){var i=this.internalPanel.editorstoolbars;_.forEach(i,function(o,n){t==o.layercode&&_.forEach(o.tools,function(t,o){e[t.icontool]&&(i[n].tools[o].icon=e[t.icontool])})})},e.exports=o},{"./panel.html":4,"./pluginservice":7}],6:[function(t,e,i){function o(t){return o=[{name:"Geonotes",layerName:"note",type:"checkbox",isCheck:!1,action:_.bind(t.toolsActions.showHideLayer,t)},{name:"Edita Geonotes",action:_.bind(t.toolsActions.showEditingPanel,t)}]}var n=t("./editors/geonoteseditor"),s=this.layerCodes={GEONOTES:"note"},r={};r[s.GEONOTES]=n;var a={},l={},c={},d=function(t){var e=t.iconurl;return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,.5],offset:[0,0],src:e})})};l[s.GEONOTES]={url:d,add:d,"delete":d,edit:d,move:d},c[s.GEONOTES]={},a[s.GEONOTES]={layerCode:s.GEONOTES,vector:null,editor:null,iconurl:null,crs:null,style:l[s.GEONOTES]},e.exports={layersCode:s,layers:a,layersStyle:l,layersEditingStyle:c,editorClass:r,tools:o}},{"./editors/geonoteseditor":2}],7:[function(e,i,o){function n(){var e=this;this._mapService=null,this._loadDataOnMapViewChangeListener=null,this._currentEditingLayer=null,this.state={editing:{on:!1,enabled:!1,layerCode:null,toolType:null,startingEditingTool:!1,toolstep:{n:null,total:null,message:null}},retrievingData:!1,hasEdits:!1},this._loader=new l;this.init=function(t,e){var i=this;this.config=t,this._crs=null,this._layers=e.layers,this._editorClass=e.editorClass,this.layerCodes=e.layersCode,this._layersStyle=e.layersStyle,this._layersEditingStyle=e.layersEditingStyle,this._customUrlParameters=e.customUrlParameters||null,this._mapService=a.getComponent("map").getService(),_.forEach(this.config.layers,function(t,e){i._layers[e].infourl=t.infourl,i._layers[e].crs="EPSG:"+t.crs,i.setLayerStyle(e)});var o={layers:this._layers,baseurl:this.config.baseurl,mapService:this._mapService};this._loader.init(o),this._loader.on("loadingvectorlayersstart",function(){i.state.retrievingData=!0}),this._loader.on("loadingvectorlayersend",function(){i.state.retrievingData=!1}),this._loader.on("setmode",function(t){switch(t){case"w":i.state.editing.on=!0,i.emit("editingstarted");break;case"r":i.state.editing.on=!1}}),this._mapService.on("pointerInteractionSet",function(t){var e=i._getCurrentEditingLayer();if(e){var o=e.editor.getActiveTool().instance;o&&!o.ownsInteraction(t)&&i._stopEditingTool()}}),this.state.editing.enabled=!0,_.forEach(this._layers,function(e,o){var n=t.layers[o].id,s=t.layers[o].name,r=i._mapService.getProject().getLayerById(n);r?(e.name=r.getOrigName(),e.id=n):(e.name=s,e.id=n)})},this.setPluginToolsService=function(t){this._pluginToolsService=t},this.setLayerStyle=function(t){var e=this,i=this._layers[t].icons;_.forEach(i,function(i,o){"url"==o&&(e._layers[t].style=e._layersStyle[t][o]({iconurl:i})),e._layersEditingStyle[t][o]=e._layersStyle[t][o]({iconurl:i})})},this.getLayerStyle=function(t){return this._layers[t].style},this._toggleCheckBoxPluginTool=function(t){var e=this,i=0;this._pluginToolsService.getState().toolsGroups.length>1&&(i=1);var o=this._pluginToolsService.getState().toolsGroups[i].tools,n=this._layers[t].vector;_.forEach(o,function(s,r){if(_.has(s,"type")&&s.layerName==t&&"checkbox"==s.type){var a=o[r];a.isCheck=!0,o[r]=a,e._pluginToolsService.updateToolsGroup(i,{name:"GEONOTES",tools:o}),n.setVisible(!0)}})},this.isLayerVisible=function(t){var e=this._layers[t].vector;return e.isVisible()},this.showHideLayer=function(t){var e=this,i=null;this._loader.isReady()?(i=this._layers[t].vector,i.setVisible(!i.isVisible())):this._loader.loadLayers("r",this._customUrlParameters).then(function(){e._addToMap()})},this.stop=function(){var t=$.Deferred();return this.state.editing.on?this._cancelOrSave().then(function(){e._stopEditing(),t.resolve()}).fail(function(){t.reject()}):t.resolve(),t.promise()},this.toggleEditing=function(){var t=$.Deferred();if(this.state.editing.enabled&&!this.state.editing.on)this._startEditing();else if(this.state.editing.on)return this.stop();return t.promise()},this.saveEdits=function(){this._saveWithoutAsk()},this.toggleEditTool=function(t,e){var i=this,o=this._layers[t];if(o){var n=this._getCurrentEditingLayer();n&&t==n.layerCode?e==n.editor.getActiveTool().getType()?this._stopEditingTool():(this._stopEditingTool(),this._startEditingTool(n,e)):n&&n.editor.isStarted()?this._cancelOrSave(2).then(function(){i._stopEditor()&&i._startEditingTool(o,e)}):this._startEditingTool(o,e)}},this.getLayerCodes=function(){return _.values(this.layerCodes)},this._setUpVectorLayer=function(t,e){this._layers[t].vector=e},this._setUpEditor=function(t){var e=this,i={mapService:e._mapService,formClass:c,editingVectorStyle:this._layersEditingStyle[t]},o=this._layers[t].vector,n=new e._editorClass[t](i);return n.setVectorLayer(o),n.on("dirty",function(t){e.state.hasEdits=t}),this._layers[t].editor=n,n},this._startEditing=function(){if(!this.state.editing.on&&!this.state.retrievingData){var e=this;if(this._loader.isReady()){this._loader.setMode("w");var i=this._loader.getVectorLayersCodes();_.forEach(i,function(t){e._loader.lockFeatures(e._layers[t].name).then(function(i){e._setUpEditor(t),e._toggleCheckBoxPluginTool(t)})}),e.state.editing.on=!0}else this._loader.loadLayers("w",this._customUrlParameters).then(function(t){_.forEach(t,function(t){e._setUpEditor(t),e._toggleCheckBoxPluginTool(t)}),e._addToMap()}).fail(function(){a.notify.error(t("could_not_load_vector_layers"))})}},this._stopEditing=function(t){this._stopEditor(t)&&(_.forEach(this._layers,function(t,i){t.vector;t.editor=null,e._unlockLayer(e._layers[i])}),this._updateEditingState(),this._loader.setMode("r"),e._cleanUp(),e.emit("editingstopped"))},this._cleanUp=function(){this._loader.cleanUpLayers()},this._startEditor=function(t){return!!t.editor.start(this)&&(this._setCurrentEditingLayer(t),!0)},this._startEditingTool=function(t,e,i){this.state.startingEditingTool=!0;var o=!0;return t.editor.isStarted()||(o=this._startEditor(t)),o&&t.editor.setTool(e,i)?(this._updateEditingState(),this.state.startingEditingTool=!1,!0):(this.state.startingEditingTool=!1,!1)},this._stopEditor=function(t){var e=!0,i=this._getCurrentEditingLayer();return i&&(e=i.editor.stop(t),e&&this._setCurrentEditingLayer()),e},this._stopEditingTool=function(){var t=!0,e=this._getCurrentEditingLayer();return e&&(t=e.editor.stopTool(),t&&this._updateEditingState()),t},this._saveWithoutAsk=function(){var t=$.Deferred(),e={};_.forEach(this._layers,function(t,i){t.editor.isDirty()&&(e[i]=t.editor)}),this._saveEdits(e).then(function(e){t.resolve()}).fail(function(e){t.reject()})},this._cancelOrSave=function(t){var e=$.Deferred();try{var i=1;t&&(i=t);var o=this,n={};_.forEach(this._layers,function(t,e){t.editor.isDirty()&&(n[e]=t.editor)}),_.keys(n).length?this._askCancelOrSave(i).then(function(t){"save"===t?o._saveEdits(n).then(function(t){e.resolve()}).fail(function(t){e.reject()}):"nosave"==t?e.resolve():"cancel"==t&&e.reject()}):e.resolve()}catch(s){e.reject()}return e.promise()},this._askCancelOrSave=function(t){var e=$.Deferred(),i={SAVE:{label:"Salva",className:"btn-success",callback:function(){e.resolve("save")}},NOSAVE:{label:"Termina senza salvare",className:"btn-danger",callback:function(){e.resolve("nosave")}},CANCEL:{label:"Annulla",className:"btn-primary",callback:function(){e.resolve("cancel")}}};switch(t){case 1:buttons={save:i.SAVE,nosave:i.NOSAVE,cancel:i.CANCEL};break;case 2:buttons={save:i.SAVE,cancel:i.CANCEL}}return a.dialog.dialog({message:"Vuoi salvare definitivamente le modifiche?",title:"Salvataggio modifica",buttons:buttons}),e.promise()},this._saveEdits=function(t){var e=this,i=$.Deferred();return this._sendEdits(t).then(function(o){a.notify.success("I dati sono stati salvati correttamente"),e._commitEdits(t,o),i.resolve()}).fail(function(t){a.notify.error("Errore nel salvataggio sul server"),i.resolve()}),i.promise()},this._sendEdits=function(t){var e=$.Deferred(),i=_.map(t,function(t){return{layername:t.getVectorLayer().name,edits:t.getEditedFeatures()}});return this._postData(i).then(function(t){t.result?e.resolve(t.response):e.reject(t.response)}).fail(function(t){e.reject(t.response)}),e.promise()},this._commitEdits=function(t,e){_.forEach(t,function(t){e&&e["new"]&&_.forEach(e["new"],function(i){var o=i.clientid,n=i.id;t.getEditVectorLayer().setFeatureData(o,n,null,i),_.forEach(e.new_lockids,function(e){t.getVectorLayer().addLockId(e)})}),t.commit()})},this._undoEdits=function(t){var e=this._getCurrentEditingLayer().layerCode;t[e];this._stopEditing(!0)},this._updateEditingState=function(){var t=this._getCurrentEditingLayer();t?(this.state.editing.layerCode=t.layerCode,this.state.editing.toolType=t.editor.getActiveTool().getType()):(this.state.editing.layerCode=null,this.state.editing.toolType=null),this._updateToolStepsState()},this._updateToolStepsState=function(){var t,e=this,i=this._getCurrentEditingLayer();if(i&&(t=i.editor.getActiveTool()),t&&t.getTool()){var o=t.getTool();o.steps&&(this._setToolStepState(t),o.steps.on("step",function(i,o){e._setToolStepState(t)}),o.steps.on("complete",function(){e._setToolStepState()}))}else e._setToolStepState()},this._setToolStepState=function(t){var e,i,o;if(_.isUndefined(t))e=null,i=null,o=null;else{var n=t.getTool(),s=toolStepsMessages[t.getType()];e=n.steps.currentStepIndex(),i=n.steps.totalSteps(),o=s[e],_.isUndefined(o)&&(e=null,i=null,o=null)}this.state.editing.toolstep.n=e+1,this.state.editing.toolstep.total=i,this.state.editing.toolstep.message=o},this._getCurrentEditingLayer=function(){return this._currentEditingLayer},this._setCurrentEditingLayer=function(t){t?this._currentEditingLayer=t:this._currentEditingLayer=null},this._addToMap=function(){var t=this,e=this._mapService.viewer.map,i=this.getLayerCodes();_.forEach(i,function(i){t._layers[i].vector.addToMap(e)}),this._loadDataOnMapViewChangeListener||(this._loadDataOnMapViewChangeListener=this._mapService.onafter("setMapView",function(){t.state.editing.on&&t.state.editing.enabled&&t._loader.loadAllVectorsData()}))},this._postData=function(t){var e=this;if(t.length>1)return this._postBatchData(t);var i=t[0].layername,o=t[0].edits,n=JSON.stringify(o);return $.ajax({type:"POST",url:this.config.baseurl+i+"/?"+e._customUrlParameters,contentType:"application/json",data:n})},this._postBatchData=function(t){var e={};_.forEach(t,function(t){e[t.layername]=t.edits});var i=JSON.stringify(e);return $.post({url:this.config.baseurl,data:i,contentType:"application/json"})},this._unlock=function(){var t=this.getLayerCodes();_.map(t,function(t){return e._unlockLayer(e._layers[t])})},this._unlockLayer=function(t){$.get(this.config.baseurl+t.name+"/?unlock"+this._customUrlParameters)},this.getLoader=function(){return this._loader}}var s=g3wsdk.core.utils.inherit,r=g3wsdk.core.G3WObject,a=g3wsdk.gui.GUI,l=g3wsdk.core.VectorLayerLoader,c=e("./editors/attributesform");s(n,r),i.exports=new n},{"./editors/attributesform":1}]},{},[3]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1aWxkLmpzIl0sIm5hbWVzIjpbImUiLCJ0IiwibiIsInIiLCJzIiwibyIsInUiLCJhIiwicmVxdWlyZSIsImkiLCJmIiwiRXJyb3IiLCJjb2RlIiwibCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIkdlb25vdGVGb3JtIiwib3B0aW9ucyIsImJhc2UiLCJ0aGlzIiwiX2Zvcm1QYW5lbCIsIkdlb25vdGVGb3JtUGFuZWwiLCJpbmhlcml0IiwiZzN3c2RrIiwiY29yZSIsInV0aWxzIiwiRm9ybVBhbmVsIiwiZ3VpIiwiRm9ybSIsImV4dGVuZCIsIjIiLCJHZW9ub3Rlc0VkaXRvciIsImZvcm1Ub29scyIsInNhdmVFZGl0c1RvRGF0YWJhc2UiLCJQbHVnaW5TZXJ2aWNlIiwic2F2ZUVkaXRzIiwib25hZnRlciIsIkVkaXRvciIsIi4uL3BsdWdpbnNlcnZpY2UiLCIuL2F0dHJpYnV0ZXNmb3JtIiwiMyIsIlBsdWdpbiIsIkdVSSIsIlByb2plY3RzUmVnaXN0cnkiLCJwbHVnaW5Db25maWciLCJTZXJ2aWNlIiwiRWRpdGluZ1BhbmVsIiwiX1BsdWdpbiIsIm5hbWUiLCJjb25maWciLCJzZXJ2aWNlIiwiaW5pdCIsInNldFBsdWdpblNlcnZpY2UiLCJnZXRQbHVnaW5Db25maWciLCJzZXRVcEljb25zVXJsIiwibGF5ZXJzIiwicmVnaXN0ZXJQbHVnaW4iLCJnaWQiLCJyZWFkeSIsInNldHVwR3VpIiwib24iLCJfIiwiYmluZCIsImN1c3RvbVVybFBhcmFtZXRlcnMiLCJjcmVhdGVQbHVnaW5DdXN0b21VcmxQYXJhbWV0ZXJzIiwidG9vbHNDb21wb25lbnQiLCJnZXRDb21wb25lbnQiLCJ0b29sc1NlcnZpY2UiLCJnZXRTZXJ2aWNlIiwidG9vbHMiLCJzZXRQbHVnaW5Ub29sc1NlcnZpY2UiLCJhZGRUb29scyIsInRvb2xzQWN0aW9ucyIsInNob3dIaWRlTGF5ZXIiLCJsYXllcnNDb2RlIiwiR0VPTk9URVMiLCJzaG93RWRpdGluZ1BhbmVsIiwicGFuZWwiLCJmb3JFYWNoIiwibGF5ZXJDb25maWciLCJsYXllckNvZGUiLCJzZXRJY29uc1Rvb2wiLCJpY29udG9vbHMiLCJ0b2dnbGVFZGl0aW5nIiwic2hvd1BhbmVsIiwiaXNDaGVja2VkIiwiaXNMYXllclZpc2libGUiLCJjdXJyZW50UHJvamVjdCIsImdldEN1cnJlbnRQcm9qZWN0IiwiZ2V0VHlwZSIsImdldElkIiwibGF5ZXJzQ29uZmlnIiwiaWNvbnMiLCJzZXR1cFRvb2xzQWN0aW9uIiwidG9vbCIsInBsdWdpbiIsIi4vcGFuZWwiLCIuL3BsdWdpbnNlcnZpY2UiLCJwbHVnaW5jb25maWciLCI0IiwiNSIsIkVkaXRvclBhbmVsIiwiaWQiLCJpbnRlcm5hbFBhbmVsIiwiUGFuZWxDb21wb25lbnQiLCJyZXNvbHZlZFZhbHVlIiwicmVzb2x2ZSIsIlBhbmVsIiwiVnVlIiwidGVtcGxhdGUiLCJkYXRhIiwiaW1hZ2VQYXRoIiwiZ2V0UmVzb3VyY2VzVXJsIiwic3RhdGUiLCJyZXNvdXJjZXN1cmwiLCJlZGl0b3JzdG9vbGJhcnMiLCJsYXllcmNvZGUiLCJsYXllckNvZGVzIiwidGl0bGUiLCJ0b29sdHlwZSIsImljb250b29sIiwiaWNvbiIsInNhdmVidG5sYWJlbCIsIm1ldGhvZHMiLCJ0b2dnbGVFZGl0VG9vbCIsInRvb2xUeXBlIiwiZWRpdGluZyIsImVkaXRpbmd0b29sYnRuVG9nZ2xlZCIsImVkaXRpbmd0b29sYnRuRW5hYmxlZCIsIm9uQ2xvc2UiLCJzdG9wIiwiY29tcHV0ZWQiLCJlZGl0aW5nYnRubGFiZWwiLCJlZGl0aW5nYnRuRW5hYmxlZCIsImVuYWJsZWQiLCJtZXNzYWdlIiwidG9vbHN0ZXAiLCJ0b3RhbCIsInN0ZXBtZXNzYWdlIiwicHJvdG8iLCJwcm90b3R5cGUiLCJvblNob3ciLCJjb250YWluZXIiLCIkbW91bnQiLCIkYXBwZW5kVG8iLCJjb25zb2xlIiwibG9nIiwic2VsZiIsImRlZmVycmVkIiwiJCIsIkRlZmVycmVkIiwidGhlbiIsIiRkZXN0cm95IiwiZmFpbCIsInJlamVjdCIsInByb21pc2UiLCJpY29uc0NvbmZpZyIsImVkaXRvclRvb2xzIiwiZWRpdG9yVG9vbEluZGV4IiwidG9vbEluZGV4IiwiLi9wYW5lbC5odG1sIiwiNiIsImxheWVyTmFtZSIsInR5cGUiLCJpc0NoZWNrIiwiYWN0aW9uIiwiZWRpdG9yQ2xhc3MiLCJsYXllcnNTdHlsZSIsImxheWVyc0VkaXRpbmdTdHlsZSIsImNyZWF0ZVN0eWxlIiwic3R5bGVPcHRpb25zIiwiaWNvbnVybCIsIm9sIiwic3R5bGUiLCJTdHlsZSIsImltYWdlIiwiSWNvbiIsImFuY2hvciIsIm9mZnNldCIsInNyYyIsInVybCIsImFkZCIsImRlbGV0ZSIsImVkaXQiLCJtb3ZlIiwidmVjdG9yIiwiZWRpdG9yIiwiY3JzIiwiLi9lZGl0b3JzL2dlb25vdGVzZWRpdG9yIiwiNyIsIkdlb25vdGVzU2VydmljZSIsIl9tYXBTZXJ2aWNlIiwiX2xvYWREYXRhT25NYXBWaWV3Q2hhbmdlTGlzdGVuZXIiLCJfY3VycmVudEVkaXRpbmdMYXllciIsInN0YXJ0aW5nRWRpdGluZ1Rvb2wiLCJyZXRyaWV2aW5nRGF0YSIsImhhc0VkaXRzIiwiX2xvYWRlciIsIlZlY3RvckxvYWRlckxheWVyIiwiX2NycyIsIl9sYXllcnMiLCJfZWRpdG9yQ2xhc3MiLCJfbGF5ZXJzU3R5bGUiLCJfbGF5ZXJzRWRpdGluZ1N0eWxlIiwiX2N1c3RvbVVybFBhcmFtZXRlcnMiLCJpbmZvdXJsIiwic2V0TGF5ZXJTdHlsZSIsIm9wdGlvbnNfbG9hZGVyIiwiYmFzZXVybCIsIm1hcFNlcnZpY2UiLCJtb2RlIiwiZW1pdCIsImludGVyYWN0aW9uIiwiY3VycmVudEVkaXRpbmdMYXllciIsIl9nZXRDdXJyZW50RWRpdGluZ0xheWVyIiwiYWN0aXZlVG9vbCIsImdldEFjdGl2ZVRvb2wiLCJpbnN0YW5jZSIsIm93bnNJbnRlcmFjdGlvbiIsIl9zdG9wRWRpdGluZ1Rvb2wiLCJMYXllciIsImxheWVySWQiLCJsYXllciIsImdldFByb2plY3QiLCJnZXRMYXllckJ5SWQiLCJnZXRPcmlnTmFtZSIsInBsdWdpblRvb2xzU2VydmljZSIsIl9wbHVnaW5Ub29sc1NlcnZpY2UiLCJrZXkiLCJnZXRMYXllclN0eWxlIiwiX3RvZ2dsZUNoZWNrQm94UGx1Z2luVG9vbCIsInBsdWdpbkluZGV4IiwiZ2V0U3RhdGUiLCJ0b29sc0dyb3VwcyIsInBsdWdpblRvb2xzIiwidmVjdG9yTGF5ZXIiLCJwbHVnaW5Ub29sIiwiaW5kZXgiLCJoYXMiLCJ0b29sQ29uZmlnIiwidXBkYXRlVG9vbHNHcm91cCIsInNldFZpc2libGUiLCJpc1Zpc2libGUiLCJpc1JlYWR5IiwibG9hZExheWVycyIsIl9hZGRUb01hcCIsIl9jYW5jZWxPclNhdmUiLCJfc3RvcEVkaXRpbmciLCJfc3RhcnRFZGl0aW5nIiwiX3NhdmVXaXRob3V0QXNrIiwiX3N0YXJ0RWRpdGluZ1Rvb2wiLCJpc1N0YXJ0ZWQiLCJfc3RvcEVkaXRvciIsImdldExheWVyQ29kZXMiLCJ2YWx1ZXMiLCJfc2V0VXBWZWN0b3JMYXllciIsIl9zZXRVcEVkaXRvciIsIm9wdGlvbnNfZWRpdG9yIiwiZm9ybUNsYXNzIiwiRm9ybUNsYXNzIiwiZWRpdGluZ1ZlY3RvclN0eWxlIiwic2V0VmVjdG9yTGF5ZXIiLCJkaXJ0eSIsInNldE1vZGUiLCJ2ZWN0b3JMYXllcnNDb2RlcyIsImdldFZlY3RvckxheWVyc0NvZGVzIiwibG9ja0ZlYXR1cmVzIiwibm90aWZ5IiwiZXJyb3IiLCJyZXNldCIsIl91bmxvY2tMYXllciIsIl91cGRhdGVFZGl0aW5nU3RhdGUiLCJfY2xlYW5VcCIsImNsZWFuVXBMYXllcnMiLCJfc3RhcnRFZGl0b3IiLCJzdGFydCIsIl9zZXRDdXJyZW50RWRpdGluZ0xheWVyIiwiY2FuU3RhcnRUb29sIiwic2V0VG9vbCIsInJldCIsInN0b3BUb29sIiwiZGlydHlFZGl0b3JzIiwiaXNEaXJ0eSIsIl9zYXZlRWRpdHMiLCJyZXN1bHQiLCJfYXNrVHlwZSIsImtleXMiLCJfYXNrQ2FuY2VsT3JTYXZlIiwiYnV0dG9uVHlwZXMiLCJTQVZFIiwibGFiZWwiLCJjbGFzc05hbWUiLCJjYWxsYmFjayIsIk5PU0FWRSIsIkNBTkNFTCIsImJ1dHRvbnMiLCJzYXZlIiwibm9zYXZlIiwiY2FuY2VsIiwiZGlhbG9nIiwiX3NlbmRFZGl0cyIsInJlc3BvbnNlIiwic3VjY2VzcyIsIl9jb21taXRFZGl0cyIsImVycm9ycyIsImVkaXRzVG9QdXNoIiwibWFwIiwibGF5ZXJuYW1lIiwiZ2V0VmVjdG9yTGF5ZXIiLCJlZGl0cyIsImdldEVkaXRlZEZlYXR1cmVzIiwiX3Bvc3REYXRhIiwicmV0dXJuZWQiLCJlZGl0b3JzIiwidXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzIiwib2xkZmlkIiwiY2xpZW50aWQiLCJmaWQiLCJnZXRFZGl0VmVjdG9yTGF5ZXIiLCJzZXRGZWF0dXJlRGF0YSIsIm5ld19sb2NraWRzIiwibmV3bG9ja0lkIiwiYWRkTG9ja0lkIiwiY29tbWl0IiwiX3VuZG9FZGl0cyIsImN1cnJlbnRFZGl0aW5nTGF5ZXJDb2RlIiwiX3VwZGF0ZVRvb2xTdGVwc1N0YXRlIiwiZ2V0VG9vbCIsInRvb2xJbnN0YW5jZSIsInN0ZXBzIiwiX3NldFRvb2xTdGVwU3RhdGUiLCJzdGVwIiwiaXNVbmRlZmluZWQiLCJtZXNzYWdlcyIsInRvb2xTdGVwc01lc3NhZ2VzIiwiY3VycmVudFN0ZXBJbmRleCIsInRvdGFsU3RlcHMiLCJ2aWV3ZXIiLCJhZGRUb01hcCIsImxvYWRBbGxWZWN0b3JzRGF0YSIsIl9wb3N0QmF0Y2hEYXRhIiwianNvbkRhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwiYWpheCIsImNvbnRlbnRUeXBlIiwibXVsdGlFZGl0c1RvUHVzaCIsInBvc3QiLCJfdW5sb2NrIiwiZ2V0IiwiZ2V0TG9hZGVyIiwiRzNXT2JqZWN0IiwiVmVjdG9yTGF5ZXJMb2FkZXIiLCIuL2VkaXRvcnMvYXR0cmlidXRlc2Zvcm0iXSwibWFwcGluZ3MiOiJDQUFBLFFBQVVBLEdBQUVDLEVBQUVDLEVBQUVDLEdBQUcsUUFBU0MsR0FBRUMsRUFB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T21FLEdBQUsySCxhQUFhM0gsRUFBS3FELFFBQVF4SCxPQUkxQzdELEtBQUsyUCxhQUFlLFNBQVMvTCxHQUMzQnNFLEVBQUV3TSxJQUFJMVUsS0FBSzhCLE9BQU8rSixRQUFRakksRUFBWS9CLEtBQUssV0FBYTdCLEtBQUt5TCx1QkFHL0R6TCxLQUFLMlUsVUFBWSxXQUNmLE1BQU8zVSxNQUFLa0wsU0Fwd0JoQixHQUFJL0ssR0FBVUMsT0FBT0MsS0FBS0MsTUFBTUgsUUFDNUJ5VSxFQUFZeFUsT0FBT0MsS0FBS3VVLFVBQ3hCclQsRUFBTW5CLE9BQU9JLElBQUllLElBQ2pCNEosRUFBb0IvSyxPQUFPQyxLQUFLd1Usa0JBQ2hDN0YsRUFBWTlQLEVBQVEsMkJBb3dCeEJpQixHQUFRd0ssRUFBaUJpSyxHQUN6QmhWLEVBQU9KLFFBQVUsR0FBSW1MLEtBQ2xCbUssMkJBQTJCLFNBQVMiLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgYmFzZSA9IGczd3Nkay5jb3JlLnV0aWxzLmJhc2U7XG52YXIgRm9ybVBhbmVsID0gZzN3c2RrLmd1aS5Gb3JtUGFuZWw7XG52YXIgRm9ybSA9IGczd3Nkay5ndWkuRm9ybTtcblxudmFyIEdlb25vdGVGb3JtUGFuZWwgPSBGb3JtUGFuZWwuZXh0ZW5kKHtcbiAgLy90ZW1wbGF0ZTogcmVxdWlyZSgnLi9hdHRyaWJ1dGVzZm9ybS5odG1sJylcbn0pO1xuXG5mdW5jdGlvbiBHZW9ub3RlRm9ybShvcHRpb25zKXtcbiAgYmFzZSh0aGlzLG9wdGlvbnMpO1xuICB0aGlzLl9mb3JtUGFuZWwgPSBHZW9ub3RlRm9ybVBhbmVsO1xufVxuaW5oZXJpdChHZW9ub3RlRm9ybSxGb3JtKTtcblxubW9kdWxlLmV4cG9ydHMgPSBHZW9ub3RlRm9ybTtcblxufSx7fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgYmFzZSA9IGczd3Nkay5jb3JlLnV0aWxzLmJhc2U7XG52YXIgRWRpdG9yID0gZzN3c2RrLmNvcmUuRWRpdG9yO1xudmFyIFBsdWdpblNlcnZpY2UgPSByZXF1aXJlKCcuLi9wbHVnaW5zZXJ2aWNlJyk7XG52YXIgRm9ybSA9IHJlcXVpcmUoJy4vYXR0cmlidXRlc2Zvcm0nKTtcbnZhciBmb3JtID0gbnVsbDsgLy8gYnJ1dHRvIG1hIGRldm8gdGVuZXJsbyBlc3Rlcm5vIHNlbm7DsiBzaSBjcmVhIHVuIGNsaWNvIGRpIHJpZmVyaW1lbnRpIGNoZSBtYW5kYSBpbiBwYWxsYSBWdWVcblxuXG5mdW5jdGlvbiBHZW9ub3Rlc0VkaXRvcihvcHRpb25zKSB7XG5cbiAgLy8gaW4gcXVlc3RvIG1vZG8gcGFzc2lhbW8gaWwgbWFwc2VydmljZSBjb21lIGFyZ29tZW50byBhbCBzdXBlcmNsYXNzIChlZGl0b3IpXG4gIC8vIGRpIGl0ZXJuZXRlZGl0b3IgaW4gbW9kbyBkYSBhc3NlZ25hcmFlIGFuY2hlIGEgaXRlcm5ldGVkaXRvciBpbCBtYXBzZXJ2ZWljZSBjaGUgeHNlcnZpcsOgIGFkIGVzZW1waW8gYWQgYWdnaXVuZ2VyZVxuICAvLyBsJ2ludGVyYWN0aW9uIGFsbGEgbWFwcGEgcXVhbmRvIHZpZW5lIGNsaWNjYXRvIHN1IHVuIHRvb2xcbiAgb3B0aW9ucy5mb3JtVG9vbHMgPSBbXTtcbiAgYmFzZSh0aGlzLCBvcHRpb25zKTtcbiAgdmFyIHNhdmVFZGl0c1RvRGF0YWJhc2UgPSBmdW5jdGlvbigpIHtcbiAgICBQbHVnaW5TZXJ2aWNlLnNhdmVFZGl0cygpO1xuICB9O1xuICAvL3RoaXMuX3NhdmVFZGl0cyA9IF8uYmluZChQbHVnaW5TZXJ2aWNlLnNhdmVFZGl0cywgUGx1Z2luU2VydmljZSk7XG4gIC8vIGFwcmUgZm9ybSBhdHRyaWJ1dGkgcGVyIGkgIG5zZXJpbWVudG9cblxuICB0aGlzLm9uYWZ0ZXIoJ2FkZEZlYXR1cmUnLCBzYXZlRWRpdHNUb0RhdGFiYXNlKTtcbiAgdGhpcy5vbmFmdGVyKCdkZWxldGVGZWF0dXJlJywgc2F2ZUVkaXRzVG9EYXRhYmFzZSk7XG4gIHRoaXMub25hZnRlcignbW92ZUZlYXR1cmUnLCBzYXZlRWRpdHNUb0RhdGFiYXNlKTtcbiAgdGhpcy5vbmFmdGVyKCdwaWNrRmVhdHVyZScsIHNhdmVFZGl0c1RvRGF0YWJhc2UpO1xuXG4gIC8vIGFwcmUgZm9ybSBhdHRyaWJ1dGkgcGVyIGluc2VyaW1lbnRvXG59XG5cbmluaGVyaXQoR2Vvbm90ZXNFZGl0b3IsIEVkaXRvcik7XG5cbm1vZHVsZS5leHBvcnRzID0gR2Vvbm90ZXNFZGl0b3I7XG59LHtcIi4uL3BsdWdpbnNlcnZpY2VcIjo3LFwiLi9hdHRyaWJ1dGVzZm9ybVwiOjF9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vIFNESyAvLy9cbnZhciBpbmhlcml0ID0gZzN3c2RrLmNvcmUudXRpbHMuaW5oZXJpdDtcbnZhciBiYXNlID0gZzN3c2RrLmNvcmUudXRpbHMuYmFzZTtcbnZhciBQbHVnaW4gPSBnM3dzZGsuY29yZS5QbHVnaW47XG52YXIgR1VJID0gZzN3c2RrLmd1aS5HVUk7XG52YXIgUHJvamVjdHNSZWdpc3RyeSA9IGczd3Nkay5jb3JlLlByb2plY3RzUmVnaXN0cnk7XG4vLy8gUExVR0lOIC8vXG52YXIgcGx1Z2luQ29uZmlnID0gcmVxdWlyZSgncGx1Z2luY29uZmlnJyk7XG52YXIgU2VydmljZSA9IHJlcXVpcmUoJy4vcGx1Z2luc2VydmljZScpO1xudmFyIEVkaXRpbmdQYW5lbCA9IHJlcXVpcmUoJy4vcGFuZWwnKTtcblxudmFyIF9QbHVnaW4gPSBmdW5jdGlvbigpIHtcblxuICBiYXNlKHRoaXMpO1xuICB0aGlzLm5hbWUgPSAnbm90ZXMnO1xuICB0aGlzLmNvbmZpZyA9IG51bGw7XG4gIHRoaXMuc2VydmljZSA9IG51bGw7XG4gIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvL3NldHRvIGlsIHNlcnZpemlvXG4gICAgdGhpcy5zZXRQbHVnaW5TZXJ2aWNlKFNlcnZpY2UpO1xuICAgIC8vcmVjdXBlcm8gY29uZmlndXJhemlvbmUgZGVsIHBsdWdpblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5nZXRQbHVnaW5Db25maWcoKTtcbiAgICB0aGlzLnNldFVwSWNvbnNVcmwodGhpcy5jb25maWcubGF5ZXJzKTtcbiAgICAvL3JlZ2l0cm8gaWwgcGx1Z2luXG4gICAgaWYgKHRoaXMucmVnaXN0ZXJQbHVnaW4odGhpcy5jb25maWcuZ2lkKSkge1xuICAgICAgaWYgKCFHVUkucmVhZHkpIHtcbiAgICAgICAgR1VJLm9uKCdyZWFkeScsIF8uYmluZCh0aGlzLnNldHVwR3VpLCB0aGlzKSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXR1cEd1aSgpO1xuICAgICAgfVxuICAgICAgLy9pbml6aWFsaXp6byBpbCBzZXJ2aXppby4gSWwgc2Vydml6aW8gw6ggbCdpc3RhbnphIGRlbGxhIGNsYXNzZSBzZXJ2aXppb1xuICAgICAgcGx1Z2luQ29uZmlnLmN1c3RvbVVybFBhcmFtZXRlcnMgPSB0aGlzLmNyZWF0ZVBsdWdpbkN1c3RvbVVybFBhcmFtZXRlcnMoKTtcbiAgICAgIHRoaXMuc2VydmljZS5pbml0KHRoaXMuY29uZmlnLCBwbHVnaW5Db25maWcpO1xuICAgIH1cbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIHVuYSB2b2x0YSBjaGUgbGEgR1VJIGhhIGVtZXNzbyBsJ2V2ZW50byAncmVhZHknXG4gIC8vIHNlcnZlIGEgbW9udGFyZSBpIGNvbXBvZW50aSBkZWwgcGx1Z2luIHN1bGxhIHNpZGViYXJcbiAgdGhpcy5zZXR1cEd1aSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b29sc0NvbXBvbmVudCA9IEdVSS5nZXRDb21wb25lbnQoJ3Rvb2xzJyk7XG4gICAgdmFyIHRvb2xzU2VydmljZSA9IHRvb2xzQ29tcG9uZW50LmdldFNlcnZpY2UoKTtcbiAgICB2YXIgdG9vbHMgPSBwbHVnaW5Db25maWcudG9vbHModGhpcyk7XG4gICAgdGhpcy5zZXJ2aWNlLnNldFBsdWdpblRvb2xzU2VydmljZSh0b29sc1NlcnZpY2UpO1xuICAgIHRvb2xzU2VydmljZS5hZGRUb29scygxICwnR0VPTk9URVMnLCB0b29scyk7XG5cbiAgfTtcbiAgLy8gYXppb25pIGNoZSBzb25vIGxlZ2F0aSBhaSB0b29sc1xuICB0aGlzLnRvb2xzQWN0aW9ucyA9IHtcbiAgICBzaG93SGlkZUxheWVyOiAgZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnNlcnZpY2Uuc2hvd0hpZGVMYXllcihwbHVnaW5Db25maWcubGF5ZXJzQ29kZS5HRU9OT1RFUyk7XG4gICAgfSxcbiAgICBzaG93RWRpdGluZ1BhbmVsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYW5lbCA9IG5ldyBFZGl0aW5nUGFuZWwoKTtcbiAgICAgIF8uZm9yRWFjaCh0aGlzLmNvbmZpZy5sYXllcnMsIGZ1bmN0aW9uKGxheWVyQ29uZmlnLCBsYXllckNvZGUpIHtcbiAgICAgICAgcGFuZWwuc2V0SWNvbnNUb29sKGxheWVyQ29kZSwgbGF5ZXJDb25maWcuaWNvbnRvb2xzKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zZXJ2aWNlLnRvZ2dsZUVkaXRpbmcoKTtcbiAgICAgIEdVSS5zaG93UGFuZWwocGFuZWwpO1xuICAgIH0sXG4gICAgaXNDaGVja2VkIDogZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLmlzTGF5ZXJWaXNpYmxlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vc2V0dXBQbHVnaW5DdXN0b21QYXJhbWV0ZXJzXG4gIHRoaXMuY3JlYXRlUGx1Z2luQ3VzdG9tVXJsUGFyYW1ldGVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjdXN0b21VcmxQYXJhbWV0ZXJzPScmJztcbiAgICB2YXIgY3VycmVudFByb2plY3QgPSBQcm9qZWN0c1JlZ2lzdHJ5LmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY3VzdG9tVXJsUGFyYW1ldGVycys9J3Byb2plY3RfdHlwZT0nK2N1cnJlbnRQcm9qZWN0LmdldFR5cGUoKSsnJnByb2plY3RfaWQ9JytjdXJyZW50UHJvamVjdC5nZXRJZCgpO1xuICAgIHJldHVybiBjdXN0b21VcmxQYXJhbWV0ZXJzXG4gIH07XG4gIC8vIHNldHVwIGljb25VcmwgZm9yIExheWVyXG4gIHRoaXMuc2V0VXBJY29uc1VybCA9IGZ1bmN0aW9uKGxheWVyc0NvbmZpZykge1xuICAgIF8uZm9yRWFjaChsYXllcnNDb25maWcsIGZ1bmN0aW9uKGxheWVyQ29uZmlnKSB7XG4gICAgICBwbHVnaW5Db25maWcubGF5ZXJzW2xheWVyQ29uZmlnLm5hbWVdLmljb25zID0gbGF5ZXJDb25maWcuaWNvbnM7XG4gICAgfSlcbiAgfTtcblxuICB0aGlzLnNldHVwVG9vbHNBY3Rpb24gPSBmdW5jdGlvbih0b29scykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBfLmZvckVhY2godG9vbHMsIGZ1bmN0aW9uKHRvb2wpe1xuICAgICAgLy9UT0RPXG4gICAgfSlcbiAgfTtcblxufTtcblxuaW5oZXJpdChfUGx1Z2luLCBQbHVnaW4pO1xuXG4oZnVuY3Rpb24ocGx1Z2luKXtcbiAgcGx1Z2luLmluaXQoKTtcbn0pKG5ldyBfUGx1Z2luKTtcblxuXG5cblxufSx7XCIuL3BhbmVsXCI6NSxcIi4vcGx1Z2luc2VydmljZVwiOjcsXCJwbHVnaW5jb25maWdcIjo2fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiZzN3LWl0ZXJuZXQtZWRpdGluZy1wYW5lbFxcXCI+XFxuICA8dGVtcGxhdGUgdi1mb3I9XFxcInRvb2xiYXIgaW4gZWRpdG9yc3Rvb2xiYXJzXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwicGFuZWwgcGFuZWwtcHJpbWFyeVxcXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwicGFuZWwtaGVhZGluZ1xcXCI+XFxuICAgICAgICA8aDMgY2xhc3M9XFxcInBhbmVsLXRpdGxlXFxcIj57eyB0b29sYmFyLm5hbWUgfX08L2gzPlxcbiAgICAgIDwvZGl2PlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcInBhbmVsLWJvZHlcXFwiPlxcbiAgICAgICAgPHRlbXBsYXRlIHYtZm9yPVxcXCJ0b29sIGluIHRvb2xiYXIudG9vbHNcXFwiPlxcbiAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJlZGl0YnRuXFxcIiA6Y2xhc3M9XFxcInsnZW5hYmxlZCcgOiAoc3RhdGUuZWRpdGluZy5vbiAmJiBlZGl0aW5ndG9vbGJ0bkVuYWJsZWQodG9vbCkpLCAndG9nZ2xlZCcgOiBlZGl0aW5ndG9vbGJ0blRvZ2dsZWQodG9vbGJhci5sYXllcmNvZGUsIHRvb2wudG9vbHR5cGUpfVxcXCI+XFxuICAgICAgICAgICAgPGltZyBoZWlnaHQ9XFxcIjMwcHhcXFwiIHdpZHRoPVxcXCIzMHB4XFxcIiBAY2xpY2s9XFxcInRvZ2dsZUVkaXRUb29sKHRvb2xiYXIubGF5ZXJjb2RlLCB0b29sLnRvb2x0eXBlKVxcXCIgOmFsdC5vbmNlPVxcXCJ0b29sLnRpdGxlXFxcIiA6dGl0bGUub25jZT1cXFwidG9vbC50aXRsZVxcXCIgOnNyYy5vbmNlPVxcXCJ0b29sLmljb25cXFwiPjwvaW1nPlxcbiAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvdGVtcGxhdGU+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgPC90ZW1wbGF0ZT5cXG4gIDxkaXYgdi1zaG93PVxcXCJzdGF0ZS5yZXRyaWV2aW5nRGF0YVxcXCIgc3R5bGU9XFxcImNvbG9yOiNmZmZmZmZcXFwiPlxcbiAgICA8c3Bhbj5DYXJpY2FtZW50byBEYXRpIC4uLiA8L3NwYW4+PGltZyA6c3JjPVxcXCJyZXNvdXJjZXN1cmwgKydpbWFnZXMvbG9hZGVyLnN2ZydcXFwiPlxcbiAgPC9kaXY+XFxuICA8ZGl2IGNsYXNzPVxcXCJtZXNzYWdlXFxcIj5cXG4gICAge3t7IG1lc3NhZ2UgfX19XFxuICA8L2Rpdj5cXG48L2Rpdj5cXG5cIjtcblxufSx7fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgcmVzb2x2ZWRWYWx1ZSA9IGczd3Nkay5jb3JlLnV0aWxzLnJlc29sdmU7XG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgR1VJID0gZzN3c2RrLmd1aS5HVUk7XG4vLyBiYXNlIGNsYXNzIFBhbmVsXG52YXIgUGFuZWwgPSAgZzN3c2RrLmd1aS5QYW5lbDtcbnZhciBTZXJ2aWNlID0gcmVxdWlyZSgnLi9wbHVnaW5zZXJ2aWNlJyk7XG5cbnZhciBQYW5lbENvbXBvbmVudCA9IFZ1ZS5leHRlbmQoe1xuICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9wYW5lbC5odG1sJyksXG4gIGRhdGE6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbWFnZVBhdGggPSBHVUkuZ2V0UmVzb3VyY2VzVXJsKCkgKyAnaW1hZ2VzLydcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdGU6IFNlcnZpY2Uuc3RhdGUsXG4gICAgICByZXNvdXJjZXN1cmw6IEdVSS5nZXRSZXNvdXJjZXNVcmwoKSxcbiAgICAgIGVkaXRvcnN0b29sYmFyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJHZW9ub3Rlc1wiLFxuICAgICAgICAgIGxheWVyY29kZTogU2VydmljZS5sYXllckNvZGVzLkdFT05PVEVTLFxuICAgICAgICAgIHRvb2xzOltcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiQWdnaXVuZ2kgR2Vvbm90YVwiLFxuICAgICAgICAgICAgICAvLyB0b29sdHlwZSDDqCBsJ2F0dHJpYnV0byBjaGUgc2VydmVyIHBlciBzY2VnbGllcmUgaWwgdGlwbyBkaSB0b29sXG4gICAgICAgICAgICAgIC8vIGRlbGwnZWRpdG9yIGdlbmVyYWxlIGNoZSBkb3Zyw6AgZXNzZXJlIGltcG9zdGF0b1xuICAgICAgICAgICAgICB0b29sdHlwZTogJ2FkZGZlYXR1cmUnLFxuICAgICAgICAgICAgICBpY29udG9vbDogJ2FkZCcsXG4gICAgICAgICAgICAgIGljb246IGltYWdlUGF0aCArJ2l0ZXJuZXRBZGRQb2ludC5wbmcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJTcG9zdGEgR2Vvbm90YVwiLFxuICAgICAgICAgICAgICB0b29sdHlwZTogJ21vdmVmZWF0dXJlJyxcbiAgICAgICAgICAgICAgaWNvbnRvb2w6ICdtb3ZlJyxcbiAgICAgICAgICAgICAgaWNvbjogaW1hZ2VQYXRoICsgJ2l0ZXJuZXRNb3ZlUG9pbnQucG5nJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiUmltdW92aSBHZW9ub3RhXCIsXG4gICAgICAgICAgICAgIHRvb2x0eXBlOiAnZGVsZXRlZmVhdHVyZScsXG4gICAgICAgICAgICAgIGljb250b29sOiAnZGVsZXRlJyxcbiAgICAgICAgICAgICAgaWNvbjogaW1hZ2VQYXRoICsgJ2l0ZXJuZXREZWxldGVQb2ludC5wbmcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJFZGl0YSBnZW9ub3RhXCIsXG4gICAgICAgICAgICAgIHRvb2x0eXBlOiAnZWRpdGF0dHJpYnV0ZXMnLFxuICAgICAgICAgICAgICBpY29udG9vbDogJ2VkaXQnLFxuICAgICAgICAgICAgICBpY29uOiBpbWFnZVBhdGggKyAnZWRpdEF0dHJpYnV0ZXMucG5nJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHNhdmVidG5sYWJlbDogXCJTYWx2YVwiXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgLy9tZXRvZG8gY2hpYW1hdG8gcXVhbmRvIHNpIGNsaWNjYSBzdSBhdnZpYS90ZXJtaW5hIGVkaXRpbmdcbiAgICB0b2dnbGVFZGl0aW5nOiBmdW5jdGlvbigpIHtcbiAgICAgIFNlcnZpY2UudG9nZ2xlRWRpdGluZygpO1xuICAgIH0sXG4gICAgc2F2ZUVkaXRzOiBmdW5jdGlvbigpe1xuICAgICAgU2VydmljZS5zYXZlRWRpdHMoKTtcbiAgICB9LFxuICAgIC8vIGNoYWltYXRvIHF1YW5kbyBzaSBjbGljY2Egc3VsIHVuIHRvb2wgZGVsbCdlZGl0b3JcbiAgICAvLyBjb21lIGFkIGVzZW1waW8gIGFkZCBtb3ZlIGVkaXQgYXR0cmlidXRlcyBldGMgLi5cbiAgICB0b2dnbGVFZGl0VG9vbDogZnVuY3Rpb24obGF5ZXJDb2RlLCB0b29sVHlwZSkge1xuICAgICAgaWYgKHRvb2xUeXBlID09ICcnKXtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy92ZXJpZmljYSBzZSBsJ2VkaXRvciDDqCBpbiBlZGl0aW5nIG9uIHRydWVcbiAgICAgIGlmICh0aGlzLnN0YXRlLmVkaXRpbmcub24pIHtcbiAgICAgICAgU2VydmljZS50b2dnbGVFZGl0VG9vbChsYXllckNvZGUsIHRvb2xUeXBlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIG1ldG9kbyBjaGUgdmllbmUgY2hpYW1hdG8gcGVyIHZlcmlmaWNhcmUgZSBzZXR0YXJlXG4gICAgLy8gbGEgY2xhc3NlIChwcmVtdXRvIG8gbm8gZGVsIGJvdHRvbmUgdG9vbCBpbiBxdWVzdGlvbmUpXG4gICAgZWRpdGluZ3Rvb2xidG5Ub2dnbGVkOiBmdW5jdGlvbihsYXllckNvZGUsIHRvb2xUeXBlKSB7XG4gICAgICByZXR1cm4gKHRoaXMuc3RhdGUuZWRpdGluZy5sYXllckNvZGUgPT0gbGF5ZXJDb2RlICYmIHRoaXMuc3RhdGUuZWRpdGluZy50b29sVHlwZSA9PSB0b29sVHlwZSk7XG4gICAgfSxcbiAgICAvLyBmdW56aW9uZSBjaGUgdmVyaWZpY2Egc2UgYWJpbGl0YXJlIG8gbWVubyBpIGJvdHRvbmkgZGVpIHRvb2xzXG4gICAgZWRpdGluZ3Rvb2xidG5FbmFibGVkOiBmdW5jdGlvbih0b29sKXtcbiAgICAgIHJldHVybiB0b29sLnRvb2x0eXBlICE9ICcnO1xuICAgIH0sXG4gICAgb25DbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICBTZXJ2aWNlLnN0b3AoKTtcbiAgICB9XG4gIH0sXG4gIGNvbXB1dGVkOiB7XG4gICAgZWRpdGluZ2J0bmxhYmVsOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0YXRlLmVkaXRpbmcub24gPyBcIlRlcm1pbmEgZWRpdGluZ1wiIDogXCJBdnZpYSBlZGl0aW5nXCI7XG4gICAgfSxcbiAgICBlZGl0aW5nYnRuRW5hYmxlZDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gKHRoaXMuc3RhdGUuZWRpdGluZy5lbmFibGVkIHx8IHRoaXMuc3RhdGUuZWRpdGluZy5vbikgPyBcIlwiIDogXCJkaXNhYmxlZFwiO1xuICAgIH0sXG4gICAgbWVzc2FnZTogZnVuY3Rpb24oKXtcbiAgICAgIHZhciBtZXNzYWdlID0gXCJcIjtcbiAgICAgIGlmICghdGhpcy5zdGF0ZS5lZGl0aW5nLmVuYWJsZWQpe1xuICAgICAgICBtZXNzYWdlID0gJzxzcGFuIHN0eWxlPVwiY29sb3I6IHJlZFwiPkF1bWVudGFyZSBpbCBsaXZlbGxvIGRpIHpvb20gcGVyIGFiaWxpdGFyZSBsXFwnZWRpdGluZyc7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0aGlzLnN0YXRlLmVkaXRpbmcudG9vbHN0ZXAubWVzc2FnZSl7XG4gICAgICAgIHZhciBuID0gdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLm47XG4gICAgICAgIHZhciB0b3RhbCA9IHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC50b3RhbDtcbiAgICAgICAgdmFyIHN0ZXBtZXNzYWdlID0gdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLm1lc3NhZ2U7XG4gICAgICAgIG1lc3NhZ2UgPSAnPGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6MjBweFwiPkdVSURBIFNUUlVNRU5UTzo8L2Rpdj4nICtcbiAgICAgICAgICAnPGRpdj48c3Bhbj5bJytuKycvJyt0b3RhbCsnXSA8L3NwYW4+PHNwYW4gc3R5bGU9XCJjb2xvcjogeWVsbG93XCI+JytzdGVwbWVzc2FnZSsnPC9zcGFuPjwvZGl2Pic7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBFZGl0b3JQYW5lbCgpIHtcbiAgLy8gcHJvcHJpZXTDoCBuZWNlc3NhcmllLiBJbiBmdXR1cm8gbGUgbWV0dGVybW8gaW4gdW5hXG4gIC8vIGNsYXNzZSBQYW5lbCBkYSBjdWkgZGVyaXZlcmFubm8gdHV0dGkgaSBwYW5uZWxsaSBjaGUgdm9nbGlvbm8gZXNzZXJlIG1vc3RyYXRpIG5lbGxhIHNpZGViYXJcbiAgdGhpcy5pZCA9IFwiZ2Vvbm90ZXMtZWRpdGluZy1wYW5lbFwiO1xuICB0aGlzLm5hbWUgPSBcIkdlc3Rpb25lIGRhdGkgR0VPTk9URVNcIjtcbiAgdGhpcy5pbnRlcm5hbFBhbmVsID0gbmV3IFBhbmVsQ29tcG9uZW50KCk7XG59XG5cbmluaGVyaXQoRWRpdG9yUGFuZWwsIFBhbmVsKTtcblxudmFyIHByb3RvID0gUGFuZWwucHJvdG90eXBlO1xuXG4vLyB2aWVuZSByaWNoaWFtYXRvIGRhbGxhIHRvb2xiYXJcbi8vIHF1YW5kbyBpbCBwbHVnaW4gY2hpZWRlIGRpIG1vc3RyYXJlIHVuIHByb3ByaW8gcGFubmVsbG8gbmVsbGEgR1VJIChHVUkuc2hvd1BhbmVsKVxucHJvdG8ub25TaG93ID0gZnVuY3Rpb24oY29udGFpbmVyKSB7XG4gIHZhciBwYW5lbCA9IHRoaXMuaW50ZXJuYWxQYW5lbDtcbiAgcGFuZWwuJG1vdW50KCkuJGFwcGVuZFRvKGNvbnRhaW5lcik7XG4gIHJldHVybiByZXNvbHZlZFZhbHVlKHRydWUpO1xufTtcblxuLy8gcmljaGlhbWF0byBxdWFuZG8gbGEgR1VJIGNoaWVkZSBkaSBjaGl1ZGVyZSBpbCBwYW5uZWxsby4gU2Ugcml0b3JuYSBmYWxzZSBpbCBwYW5uZWxsbyBub24gdmllbmUgY2hpdXNvXG5wcm90by5vbkNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIGNvbnNvbGUubG9nKCdjbG9zZScpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgU2VydmljZS5zdG9wKClcbiAgLnRoZW4oZnVuY3Rpb24oKXtcbiAgICBzZWxmLmludGVybmFsUGFuZWwuJGRlc3Ryb3kodHJ1ZSk7XG4gICAgc2VsZi5pbnRlcm5hbFBhbmVsID0gbnVsbDtcbiAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gIH0pXG4gIC5mYWlsKGZ1bmN0aW9uKCl7XG4gICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gIH0pO1xuICBcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbn07XG5cbnByb3RvLnNldEljb25zVG9vbCA9IGZ1bmN0aW9uKGxheWVyQ29kZSwgaWNvbnNDb25maWcpIHtcbiAgdmFyIGVkaXRvclRvb2xzID0gdGhpcy5pbnRlcm5hbFBhbmVsLmVkaXRvcnN0b29sYmFycztcbiAgXy5mb3JFYWNoKGVkaXRvclRvb2xzLCBmdW5jdGlvbih0b29sLCBlZGl0b3JUb29sSW5kZXgpIHtcbiAgICBpZiAobGF5ZXJDb2RlID09IHRvb2wubGF5ZXJjb2RlKSB7XG4gICAgICBfLmZvckVhY2godG9vbC50b29scywgZnVuY3Rpb24odG9vbCwgdG9vbEluZGV4KSB7XG4gICAgICAgIGlmIChpY29uc0NvbmZpZ1t0b29sLmljb250b29sXSkge1xuICAgICAgICAgIGVkaXRvclRvb2xzW2VkaXRvclRvb2xJbmRleF0udG9vbHNbdG9vbEluZGV4XS5pY29uID0gaWNvbnNDb25maWdbdG9vbC5pY29udG9vbF07XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9KVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFZGl0b3JQYW5lbDtcblxufSx7XCIuL3BhbmVsLmh0bWxcIjo0LFwiLi9wbHVnaW5zZXJ2aWNlXCI6N31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy9RdWkgY2kgc29ubyBnbGkgZWRpdG9yIChjbGFzc2kpIHVzYXRpIGRhaSB2YXJpIGxheWVyXG52YXIgR2Vvbm90ZXNFZGl0b3IgPSByZXF1aXJlKCcuL2VkaXRvcnMvZ2Vvbm90ZXNlZGl0b3InKTtcblxuLy9kZWZpbmlzY28gaSBjb2RpY2kgbGF5ZXJcbnZhciBsYXllckNvZGVzID0gdGhpcy5sYXllckNvZGVzID0ge1xuICAgIEdFT05PVEVTOiAnbm90ZSdcbn07XG4vLyBjbGFzc2kgZWRpdG9yXG52YXIgZWRpdG9yQ2xhc3MgPSB7fTtcbmVkaXRvckNsYXNzW2xheWVyQ29kZXMuR0VPTk9URVNdID0gR2Vvbm90ZXNFZGl0b3I7XG5cbi8vZGVmaW5pc2NvIGxheWVyIGRlbCBwbHVnaW4gY29tZSBvZ2dldHRvXG52YXIgbGF5ZXJzID0ge307XG52YXIgbGF5ZXJzU3R5bGUgPSB7fTtcbi8vc3R5bGUgZWRpdGluZ1xudmFyIGxheWVyc0VkaXRpbmdTdHlsZSA9IHt9O1xuLy9sYXllclxuLy9sYXllciBTdHlsZVxudmFyIGNyZWF0ZVN0eWxlID0gZnVuY3Rpb24oc3R5bGVPcHRpb25zKSB7XG4gIHZhciBpY29udXJsID0gc3R5bGVPcHRpb25zLmljb251cmw7XG4gIHJldHVybiBuZXcgb2wuc3R5bGUuU3R5bGUoe1xuICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuSWNvbigoe1xuICAgICAgYW5jaG9yOiBbMC41LCAwLjVdLFxuICAgICAgb2Zmc2V0OiBbMCwgMF0sXG4gICAgICBzcmM6IGljb251cmxcbiAgICB9KSlcbiAgfSk7XG59O1xuXG5sYXllcnNTdHlsZVtsYXllckNvZGVzLkdFT05PVEVTXSA9IHtcblxuICB1cmw6IGNyZWF0ZVN0eWxlLFxuICBhZGQ6IGNyZWF0ZVN0eWxlLFxuICBkZWxldGU6IGNyZWF0ZVN0eWxlLFxuICBlZGl0OiBjcmVhdGVTdHlsZSxcbiAgbW92ZTogY3JlYXRlU3R5bGVcblxufTtcblxubGF5ZXJzRWRpdGluZ1N0eWxlW2xheWVyQ29kZXMuR0VPTk9URVNdID0ge307XG5cbmxheWVyc1tsYXllckNvZGVzLkdFT05PVEVTXSA9IHtcbiAgbGF5ZXJDb2RlOiBsYXllckNvZGVzLkdFT05PVEVTLFxuICB2ZWN0b3I6IG51bGwsXG4gIGVkaXRvcjogbnVsbCxcbiAgaWNvbnVybDogbnVsbCxcbiAgY3JzOiBudWxsLFxuICAvL2RlZmluaXNjbyBsbyBzdGlsZVxuICBzdHlsZTogbGF5ZXJzU3R5bGVbbGF5ZXJDb2Rlcy5HRU9OT1RFU11cbn07XG5cblxuXG4vLyBkZWZpbmlzY28gaSB0b29sc1xuZnVuY3Rpb24gdG9vbHMocGx1Z2luKSB7XG4gIHJldHVybiB0b29scyA9IFtcbiAgICB7XG4gICAgICBuYW1lOiBcIkdlb25vdGVzXCIsXG4gICAgICBsYXllck5hbWU6ICdub3RlJyxcbiAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICBpc0NoZWNrOiBmYWxzZSxcbiAgICAgIGFjdGlvbjogXy5iaW5kKHBsdWdpbi50b29sc0FjdGlvbnMuc2hvd0hpZGVMYXllciwgcGx1Z2luKVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJFZGl0YSBHZW9ub3Rlc1wiLFxuICAgICAgYWN0aW9uOiBfLmJpbmQocGx1Z2luLnRvb2xzQWN0aW9ucy5zaG93RWRpdGluZ1BhbmVsLCBwbHVnaW4pXG4gICAgfVxuICBdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBsYXllcnNDb2RlOiBsYXllckNvZGVzLFxuICAgIGxheWVyczogbGF5ZXJzLFxuICAgIGxheWVyc1N0eWxlOiBsYXllcnNTdHlsZSxcbiAgICBsYXllcnNFZGl0aW5nU3R5bGU6IGxheWVyc0VkaXRpbmdTdHlsZSxcbiAgICBlZGl0b3JDbGFzczogZWRpdG9yQ2xhc3MsXG4gICAgdG9vbHM6IHRvb2xzXG59O1xuXG59LHtcIi4vZWRpdG9ycy9nZW9ub3Rlc2VkaXRvclwiOjJ9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBpbmhlcml0ID0gZzN3c2RrLmNvcmUudXRpbHMuaW5oZXJpdDtcbnZhciBHM1dPYmplY3QgPSBnM3dzZGsuY29yZS5HM1dPYmplY3Q7XG52YXIgR1VJID0gZzN3c2RrLmd1aS5HVUk7XG52YXIgVmVjdG9yTG9hZGVyTGF5ZXIgPSBnM3dzZGsuY29yZS5WZWN0b3JMYXllckxvYWRlcjtcbnZhciBGb3JtQ2xhc3MgPSByZXF1aXJlKCcuL2VkaXRvcnMvYXR0cmlidXRlc2Zvcm0nKTtcblxuZnVuY3Rpb24gR2Vvbm90ZXNTZXJ2aWNlKCkge1xuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgLy9xdWkgdmFkbyAgYSBzZXR0YXJlIGlsIG1hcHNlcnZpY2VcbiAgdGhpcy5fbWFwU2VydmljZSA9IG51bGw7XG4gIHRoaXMuX2xvYWREYXRhT25NYXBWaWV3Q2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICB0aGlzLl9jdXJyZW50RWRpdGluZ0xheWVyID0gbnVsbDtcbiAgdGhpcy5zdGF0ZSA9IHtcbiAgICBlZGl0aW5nOiB7XG4gICAgICBvbjogZmFsc2UsXG4gICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgIGxheWVyQ29kZTogbnVsbCxcbiAgICAgIHRvb2xUeXBlOiBudWxsLFxuICAgICAgc3RhcnRpbmdFZGl0aW5nVG9vbDogZmFsc2UsXG4gICAgICB0b29sc3RlcDoge1xuICAgICAgICBuOiBudWxsLFxuICAgICAgICB0b3RhbDogbnVsbCxcbiAgICAgICAgbWVzc2FnZTogbnVsbFxuICAgICAgfVxuICAgIH0sXG4gICAgcmV0cmlldmluZ0RhdGE6IGZhbHNlLFxuICAgIGhhc0VkaXRzOiBmYWxzZVxuICB9O1xuXG4gIC8vZGVmaW5pc2NvIGlsIGxvYWRlciBkZWwgcGx1Z2luXG4gIHRoaXMuX2xvYWRlciA9IG5ldyBWZWN0b3JMb2FkZXJMYXllcjtcbiAgLy8gdmluY29saSBhbGxhIHBvc3NpYmlsaXTDoCAgZGkgYXR0aXZhcmUgbCdlZGl0aW5nXG4gIHZhciBlZGl0aW5nQ29uc3RyYWludHMgPSB7XG4gICAgLy9yZXNvbHV0aW9uOiAxIC8vIHZpbmNvbG8gZGkgcmlzb2x1emlvbmUgbWFzc2ltYVxuICB9O1xuICAvLyBpbml6aWFsaXp6YXppb25lIGRlbCBwbHVnaW5cbiAgLy8gY2hpYW10byBkYWxsICRzY3JpcHQodXJsKSBkZWwgcGx1Z2luIHJlZ2lzdHJ5XG4gIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKGNvbmZpZywgcGx1Z2luQ29uZmlnKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2NycyA9IG51bGw7XG4gICAgdGhpcy5fbGF5ZXJzID0gcGx1Z2luQ29uZmlnLmxheWVycztcbiAgICB0aGlzLl9lZGl0b3JDbGFzcyA9IHBsdWdpbkNvbmZpZy5lZGl0b3JDbGFzcztcbiAgICB0aGlzLmxheWVyQ29kZXMgPSBwbHVnaW5Db25maWcubGF5ZXJzQ29kZTtcbiAgICAvLyBzdGlsaSBkZWkgbGF5ZXJcbiAgICB0aGlzLl9sYXllcnNTdHlsZSA9IHBsdWdpbkNvbmZpZy5sYXllcnNTdHlsZTtcbiAgICAvLyBzdGlsaSBkZWwgbGF5ZXIgaW4gZWRpdGluZyAoaW4gZnV0dXJvIGRhIGRpc3Rpbmd1ZXJlIGRlbGV0ZSwgbW92ZSwgZWRpdGluZy4uKVxuICAgIHRoaXMuX2xheWVyc0VkaXRpbmdTdHlsZSA9IHBsdWdpbkNvbmZpZy5sYXllcnNFZGl0aW5nU3R5bGU7XG4gICAgdGhpcy5fY3VzdG9tVXJsUGFyYW1ldGVycyA9IHBsdWdpbkNvbmZpZy5jdXN0b21VcmxQYXJhbWV0ZXJzIHx8IG51bGw7XG4gICAgLy8gc2V0dG8gaWwgbWFwc2VydmljZSBjaGUgbWkgcGVybWV0dGUgZGkgaW5lcmFnaXJlIGNvbiBsYSBtYXBwYVxuICAgIHRoaXMuX21hcFNlcnZpY2UgPSBHVUkuZ2V0Q29tcG9uZW50KCdtYXAnKS5nZXRTZXJ2aWNlKCk7XG4gICAgLy92YWRvIGEgc2V0dGFyZSBsZSBpY29uIHVybHMgZSBpbCBjcnMgc2UgZXNpc3RlIGNpIHNvbm86XG4gICAgXy5mb3JFYWNoKHRoaXMuY29uZmlnLmxheWVycywgZnVuY3Rpb24obGF5ZXJDb25maWcsIGxheWVyTmFtZSApIHtcbiAgICAgIHNlbGYuX2xheWVyc1tsYXllck5hbWVdLmluZm91cmwgPSBsYXllckNvbmZpZy5pbmZvdXJsO1xuICAgICAgc2VsZi5fbGF5ZXJzW2xheWVyTmFtZV0uY3JzID0gXCJFUFNHOlwiK2xheWVyQ29uZmlnLmNycztcbiAgICAgIHNlbGYuc2V0TGF5ZXJTdHlsZShsYXllck5hbWUpO1xuICAgIH0pO1xuICAgIC8vaW5pemlhbGl6em8gaWwgbG9hZGVyXG4gICAgLy8gcGFzc2FuZG9nbGk6XG4gICAgLy8gMSAtIGxheWVycyBkZWwgcGx1Z2luIChzdHlsZSBldGMuLilcbiAgICAvLyAyIC0gbGEgYmFzZXVybCBjaGUgbWkgc2VydmVyIHBlciBpbnRlcmFnaXJlIGNvbiBpbCBzZXJ2ZXIgcGVyIGZhcmUgdHV0dGUgbGUgbW9kaWZpY2hlXG4gICAgdmFyIG9wdGlvbnNfbG9hZGVyID0ge1xuICAgICAgJ2xheWVycyc6IHRoaXMuX2xheWVycyxcbiAgICAgICdiYXNldXJsJzogdGhpcy5jb25maWcuYmFzZXVybCxcbiAgICAgICdtYXBTZXJ2aWNlJzogdGhpcy5fbWFwU2VydmljZVxuICAgIH07XG4gICAgLy9pbml6aWFsaXp6byBpbCBsb2FkZXJcbiAgICB0aGlzLl9sb2FkZXIuaW5pdChvcHRpb25zX2xvYWRlcik7XG4gICAgLy9jYXNvIGRpIGxvYWRpbmcgZGF0YVxuICAgIHRoaXMuX2xvYWRlci5vbignbG9hZGluZ3ZlY3RvcmxheWVyc3N0YXJ0JywgZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLnN0YXRlLnJldHJpZXZpbmdEYXRhID0gdHJ1ZTtcbiAgICB9KTtcbiAgICB0aGlzLl9sb2FkZXIub24oJ2xvYWRpbmd2ZWN0b3JsYXllcnNlbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuc3RhdGUucmV0cmlldmluZ0RhdGEgPSBmYWxzZTtcbiAgICB9KTtcbiAgICB0aGlzLl9sb2FkZXIub24oJ3NldG1vZGUnLCBmdW5jdGlvbihtb2RlKSB7XG4gICAgICBzd2l0Y2gobW9kZSkge1xuICAgICAgICBjYXNlICd3JzpcbiAgICAgICAgICBzZWxmLnN0YXRlLmVkaXRpbmcub24gPSB0cnVlO1xuICAgICAgICAgIHNlbGYuZW1pdChcImVkaXRpbmdzdGFydGVkXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdyJzpcbiAgICAgICAgICBzZWxmLnN0YXRlLmVkaXRpbmcub24gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGRpc2FiaWxpdG8gbCdldmVudHVhbGUgdG9vbCBhdHRpdm8gc2UgdmllbmUgYXR0aXZhdGFcbiAgICAvLyB1bidpbnRlcmF6aW9uZSBkaSB0aXBvIHBvaW50ZXJJbnRlcmFjdGlvblNldCBzdWxsYSBtYXBwYVxuICAgIHRoaXMuX21hcFNlcnZpY2Uub24oJ3BvaW50ZXJJbnRlcmFjdGlvblNldCcsIGZ1bmN0aW9uKGludGVyYWN0aW9uKSB7XG4gICAgICB2YXIgY3VycmVudEVkaXRpbmdMYXllciA9IHNlbGYuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICAgIGlmIChjdXJyZW50RWRpdGluZ0xheWVyKSB7XG4gICAgICAgIHZhciBhY3RpdmVUb29sID0gY3VycmVudEVkaXRpbmdMYXllci5lZGl0b3IuZ2V0QWN0aXZlVG9vbCgpLmluc3RhbmNlO1xuICAgICAgICAvLyBkZXZvIHZlcmlmaWNhcmUgY2hlIG5vbiBzaWEgdW4naW50ZXJhemlvbmUgYXR0aXZhdGEgZGEgdW5vIGRlaSB0b29sIGRpIGVkaXRpbmcgZGVsIHBsdWdpblxuICAgICAgICBpZiAoYWN0aXZlVG9vbCAmJiAhYWN0aXZlVG9vbC5vd25zSW50ZXJhY3Rpb24oaW50ZXJhY3Rpb24pKSB7XG4gICAgICAgICAgc2VsZi5fc3RvcEVkaXRpbmdUb29sKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICAvLyAgYWJpbGl0byBvIG1lbm8gbCdlZGl0aW5nIGluIGJhc2UgYWxsYSByaXNvbHV6aW9uZSBkZWxsYSBtYXBwYVxuICAgIC8qdGhpcy5fbWFwU2VydmljZS5vbmFmdGVyKCdzZXRNYXBWaWV3JyxmdW5jdGlvbihiYm94LCByZXNvbHV0aW9uLCBjZW50ZXIpe1xuICAgICAgc2VsZi5zdGF0ZS5lZGl0aW5nLmVuYWJsZWQgPSAocmVzb2x1dGlvbiA8IGVkaXRpbmdDb25zdHJhaW50cy5yZXNvbHV0aW9uKSA/IHRydWUgOiBmYWxzZTtcbiAgICB9KTsqL1xuICAgIC8vIGF0dHJpYnV0byBkZWxsbyBzdGF0byBkZWwgc3Jldml6aW8gY2hlIG1pIHBlcm1ldHRlIGRpIGFjY2VuZGVyZSBvIHNwZW5nZXJlIGwnZWRpdGluZ1xuICAgIC8vIHNlcnZlIGFuY2hlIHBlciBwb3RlciBpbiBmYXNlIGRpIHRvZ2dsZUVkaXRpbmcoYm90dG9uZSBkaSBhdnZpbyBlZGl0aW5nKSBkaSB2ZWRlcmUgc2UgcG9zc28gaW56aWFyZSBvIG1lbm9cbiAgICAvLyBjYXJpY2FyZSBpIHZldHRvcmlhbGkgZXRjLi5cbiAgICB0aGlzLnN0YXRlLmVkaXRpbmcuZW5hYmxlZCA9IHRydWU7Ly8odGhpcy5fbWFwU2VydmljZS5nZXRSZXNvbHV0aW9uKCkgPCBlZGl0aW5nQ29uc3RyYWludHMucmVzb2x1dGlvbikgPyB0cnVlIDogZmFsc2U7XG4gICAgLy8gcGVyIG9nbmkgbGF5ZXIgZGVmaW5pdGkgbmVsIHBsdWdpbiBzZXR0byBuYW1lIGUgaWRcbiAgICAvLyByZWN1cGVyYXRpIGdyYXppZSBhbCBtYXBzZXJ2aWNlXG4gICAgXy5mb3JFYWNoKHRoaXMuX2xheWVycywgZnVuY3Rpb24oTGF5ZXIsIGxheWVyQ29kZSkge1xuICAgICAgLy9yZWN1cGVybyBsJ2lkIGRhbGxhIGNvbmZpZ3VyYXppb25lIGRlbCBwbHVnaW5cbiAgICAgIC8vIGkgbGF5ZXJzIG5lbGxhIGNvbmZpZ3VyYXppb25lIHBhc3NhdGEgaSBsYXllcnMgaGFubm8gZHVlIGF0dHJpYnV0aTogaWQgZSBuYW1lXG4gICAgICB2YXIgbGF5ZXJJZCA9IGNvbmZpZy5sYXllcnNbbGF5ZXJDb2RlXS5pZDtcbiAgICAgIHZhciBsYXllck5hbWUgPSBjb25maWcubGF5ZXJzW2xheWVyQ29kZV0ubmFtZTtcbiAgICAgIC8vIHJlY3VwZXJhIGlsIGxheWVyIGRhbCBtYXBzZXJ2aWNlXG4gICAgICB2YXIgbGF5ZXIgPSBzZWxmLl9tYXBTZXJ2aWNlLmdldFByb2plY3QoKS5nZXRMYXllckJ5SWQobGF5ZXJJZCk7XG4gICAgICAvLyBtZXNzbyBhbCBtb21lbnRvIGdlbmVyaWNvIHBlciByaXByZW5kZXJlIHN0ZXNzbyBjb25tcG9ydGFtZW50byBJdGVybmV0XG4gICAgICBpZiAobGF5ZXIpIHtcbiAgICAgICAgLy8gcmVjdXBlcm8gbCdvcmlnaW4gbmFtZSBkYWwgcHJvamVjdGxheWVyXG4gICAgICAgIExheWVyLm5hbWUgPSBsYXllci5nZXRPcmlnTmFtZSgpO1xuICAgICAgICBMYXllci5pZCA9IGxheWVySWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBMYXllci5uYW1lID0gbGF5ZXJOYW1lO1xuICAgICAgICBMYXllci5pZCA9IGxheWVySWQ7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIC8vIGZpbmUgZGVsIG1ldG9kbyBJTklUXG4gIHRoaXMuc2V0UGx1Z2luVG9vbHNTZXJ2aWNlID0gZnVuY3Rpb24ocGx1Z2luVG9vbHNTZXJ2aWNlKSB7XG4gICAgdGhpcy5fcGx1Z2luVG9vbHNTZXJ2aWNlID0gcGx1Z2luVG9vbHNTZXJ2aWNlO1xuICB9O1xuICB0aGlzLnNldExheWVyU3R5bGUgPSBmdW5jdGlvbihsYXllckNvZGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGljb25zID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0uaWNvbnM7XG5cbiAgICBfLmZvckVhY2goaWNvbnMsIGZ1bmN0aW9uKGljb251cmwsIGtleSkge1xuICAgICAgaWYgKGtleSA9PSAndXJsJykge1xuICAgICAgICBzZWxmLl9sYXllcnNbbGF5ZXJDb2RlXS5zdHlsZSA9IHNlbGYuX2xheWVyc1N0eWxlW2xheWVyQ29kZV1ba2V5XSh7XG4gICAgICAgICAgaWNvbnVybDogaWNvbnVybFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHNlbGYuX2xheWVyc0VkaXRpbmdTdHlsZVtsYXllckNvZGVdW2tleV0gPSBzZWxmLl9sYXllcnNTdHlsZVtsYXllckNvZGVdW2tleV0oe1xuICAgICAgICAgIGljb251cmw6IGljb251cmxcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIC8vIHNldHRvIHRlbXBvcmFuZWFtZW50ZSBsJ2VkaXRuZyBzdHlsZVxuXG4gIH07XG5cbiAgdGhpcy5nZXRMYXllclN0eWxlID0gZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xheWVyc1tsYXllckNvZGVdLnN0eWxlO1xuICB9O1xuXG4gIHRoaXMuX3RvZ2dsZUNoZWNrQm94UGx1Z2luVG9vbCA9IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcGx1Z2luSW5kZXggPSAwO1xuICAgIC8vIGFsIG1vbWVudG8gMSBoYXJkY29kZWRcbiAgICBpZiAodGhpcy5fcGx1Z2luVG9vbHNTZXJ2aWNlLmdldFN0YXRlKCkudG9vbHNHcm91cHMubGVuZ3RoID4gMSkge1xuICAgICAgcGx1Z2luSW5kZXggPSAxO1xuICAgIH1cbiAgICB2YXIgcGx1Z2luVG9vbHMgPSB0aGlzLl9wbHVnaW5Ub29sc1NlcnZpY2UuZ2V0U3RhdGUoKS50b29sc0dyb3Vwc1twbHVnaW5JbmRleF0udG9vbHM7XG4gICAgdmFyIHZlY3RvckxheWVyID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yO1xuICAgIF8uZm9yRWFjaChwbHVnaW5Ub29scywgZnVuY3Rpb24ocGx1Z2luVG9vbCwgaW5kZXgpIHtcbiAgICAgIGlmIChfLmhhcyhwbHVnaW5Ub29sLCAndHlwZScpICYmIHBsdWdpblRvb2wubGF5ZXJOYW1lID09IGxheWVyQ29kZSAmJiBwbHVnaW5Ub29sLnR5cGUgPT0gJ2NoZWNrYm94Jykge1xuICAgICAgICB2YXIgdG9vbENvbmZpZyAgPSBwbHVnaW5Ub29sc1tpbmRleF07XG4gICAgICAgIHRvb2xDb25maWcuaXNDaGVjayA9IHRydWU7XG4gICAgICAgIHBsdWdpblRvb2xzW2luZGV4XSA9IHRvb2xDb25maWc7XG4gICAgICAgIHNlbGYuX3BsdWdpblRvb2xzU2VydmljZS51cGRhdGVUb29sc0dyb3VwKHBsdWdpbkluZGV4LCB7bmFtZTonR0VPTk9URVMnLCB0b29sczpwbHVnaW5Ub29sc30pO1xuICAgICAgICB2ZWN0b3JMYXllci5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuaXNMYXllclZpc2libGUgPSBmdW5jdGlvbihsYXllckNvZGUpIHtcbiAgICB2YXIgdmVjdG9yTGF5ZXIgPSB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS52ZWN0b3I7XG4gICAgcmV0dXJuIHZlY3RvckxheWVyLmlzVmlzaWJsZSgpO1xuICB9O1xuXG4gIHRoaXMuc2hvd0hpZGVMYXllciA9IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdmVjdG9yTGF5ZXIgPSBudWxsO1xuICAgIGlmICh0aGlzLl9sb2FkZXIuaXNSZWFkeSgpKSB7XG4gICAgICB2ZWN0b3JMYXllciA9IHRoaXMuX2xheWVyc1tsYXllckNvZGVdLnZlY3RvcjtcbiAgICAgIHZlY3RvckxheWVyLnNldFZpc2libGUoIXZlY3RvckxheWVyLmlzVmlzaWJsZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbG9hZGVyLmxvYWRMYXllcnMoJ3InLCB0aGlzLl9jdXN0b21VcmxQYXJhbWV0ZXJzKVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgc2VsZi5fYWRkVG9NYXAoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvL3N0b3BcbiAgdGhpcy5zdG9wID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy5vbikge1xuICAgICAgdGhpcy5fY2FuY2VsT3JTYXZlKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgc2VsZi5fc3RvcEVkaXRpbmcoKTtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICB9KVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfTtcblxuICAvLyBhdnZpbyBvIHRlcm1pbm8gbGEgc2Vzc2lvbmUgZGkgZWRpdGluZyBnZW5lcmFsZVxuICAvLyB1bnRvIGRpIHBhcnRlbnphIGRlbGwnYXZ2aW8gZGVsbCdlZGl0aW5nXG4gIHRoaXMudG9nZ2xlRWRpdGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIGNyZW8gb2dnZXR0byBkZWZlcnJlZCBwZXIgcmVzdGl0dWlyZSB1bmEgcHJvbWlzZVxuICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICAvLyBxdWkgZGljZSBjaGUgc2UgbmVsIGNhc28gbGEgcmlzb2x1emlvbmUgZGVsbGEgbWFwcGEgdmEgYmVuZSAoc3RhdGUuZWRpdGluZy5lbmFibGVkKVxuICAgIC8vIGUgbm9uIMOoIGFuY29yYSBzdGF0byBhdHRpdmF0byBsJ2VkaXRpbmdcbiAgICAvLyBxdWluZGkgY2FzbyBwcmltYSB2b2x0YVxuICAgIGlmICh0aGlzLnN0YXRlLmVkaXRpbmcuZW5hYmxlZCAmJiAhdGhpcy5zdGF0ZS5lZGl0aW5nLm9uKSB7XG4gICAgICAvLyBmYWNjaW8gcGFydGlyZSBlZGl0aW5nXG4gICAgICB0aGlzLl9zdGFydEVkaXRpbmcoKTtcbiAgICB9XG4gICAgLy8gYWx0cmltZW50aSBzZSDDqCBnacOgIGluIGVkaXRpbmcgY2hpYW1vIGxvIHN0b3AgZGVsIHBsdWdpblxuICAgIC8vIGNoZSBub24gw6ggYWx0cm8gY2hlIGxvcyB0b3BvIGRlbGwnZWRpdGluZ1xuICAgIGVsc2UgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy5vbikge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcCgpO1xuICAgIH1cbiAgICAvLyByZXN0aXR1aXNjbyB1bmEgcHJvbWVzc2FcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuXG4gIHRoaXMuc2F2ZUVkaXRzID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLl9zYXZlV2l0aG91dEFzaygpO1xuICAgIC8vdGhpcy5fY2FuY2VsT3JTYXZlKDIpO1xuICB9O1xuXG4gIC8vIGF2dmlhIHVubyBkZWkgdG9vbCBkaSBlZGl0aW5nIHRyYSBxdWVsbGkgc3VwcG9ydGF0aSBkYSBFZGl0b3IgKGFkZGZlYXR1cmUsIGVjYy4pXG4gIC8vIGZ1bnppb25lIGRlbGwnZWxlbWVudG8gcGFuZWwgdnVlXG4gIHRoaXMudG9nZ2xlRWRpdFRvb2wgPSBmdW5jdGlvbihsYXllckNvZGUsIHRvb2xUeXBlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vcHJlbmRvIGlsIGxheWVyIGluIGJhc2UgYWwgY29kaWNlIHBhc3NhdG8gZGFsbCBjb21wb25lbnRlIHZ1ZVxuICAgIHZhciBsYXllciA9IHRoaXMuX2xheWVyc1tsYXllckNvZGVdO1xuICAgIGlmIChsYXllcikge1xuICAgICAgLy9yZWN1cHJlcm8gaWwgY3VycmVudCBsYXllciBpbiBlZGl0aW5nXG4gICAgICB2YXIgY3VycmVudEVkaXRpbmdMYXllciA9IHRoaXMuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICAgIC8vIHNlIHNpIHN0YSB1c2FuZG8gdW4gdG9vbCBjaGUgcHJldmVkZSBsbyBzdGVzc28gbGF5ZXIgaW4gZWRpdGF6aW9uZVxuICAgICAgaWYgKGN1cnJlbnRFZGl0aW5nTGF5ZXIgJiYgbGF5ZXJDb2RlID09IGN1cnJlbnRFZGl0aW5nTGF5ZXIubGF5ZXJDb2RlKSB7XG4gICAgICAgIC8vIGUgbG8gc3Rlc3NvIHRvb2wgYWxsb3JhIGRpc2F0dGl2byBpbCB0b29sIChpbiBxdWFudG8gw6hcbiAgICAgICAgLy8gcHJlbXV0byBzdWxsbyBzdGVzc28gYm90dG9uZSlcbiAgICAgICAgaWYgKHRvb2xUeXBlID09IGN1cnJlbnRFZGl0aW5nTGF5ZXIuZWRpdG9yLmdldEFjdGl2ZVRvb2woKS5nZXRUeXBlKCkpIHtcbiAgICAgICAgICAvLyBzdGVzc28gdGlwbyBkaSB0b29sIHF1aW5kaSBzaSDDqCB2ZXJpZmljYXRvIHVuIHRvZ2dsZSBuZWwgYm90dG9uZVxuICAgICAgICAgIC8vIGFsbG9yYSBzdGlwcG8gbCdlZGl0aW5nIFRvb2xcbiAgICAgICAgICB0aGlzLl9zdG9wRWRpdGluZ1Rvb2woKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhbHRyaW1lbnRpIGF0dGl2byBpbCB0b29sIHJpY2hpZXN0b1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvL3N0b3BwbyBwcmV2ZW50aXZhbWVudGUgbCdlZGl0aW5nIHRvb2wgYXR0aXZvXG4gICAgICAgICAgdGhpcy5fc3RvcEVkaXRpbmdUb29sKCk7XG4gICAgICAgICAgLy9mYWNjaW8gcGFydGlyZSBsJ2VkaXRuZyB0b29sIHBhc3NhbmRvIGN1cnJlbnQgRWRpdGluZyBMYXllciBlIGlsIHRpcG8gZGkgdG9vbFxuICAgICAgICAgIHRoaXMuX3N0YXJ0RWRpdGluZ1Rvb2woY3VycmVudEVkaXRpbmdMYXllciwgdG9vbFR5cGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBhbHRyaW1lbnRpIGNhc28gaW4gY3VpIG5vbiDDqCBzdGF0byBzZXR0YXRvIGlsIGN1cnJlbnQgZWRpdGluZyBsYXllciBvXG4gICAgICAgIC8vIGlsIGxheWVyIGNoZSBzaSBzdGEgY2VyY2FuZG8gZGkgZWRpdGFyZSDDqCBkaXZlcnNvIGRhIHF1ZWxsbyBpbiBlZGl0aW5nIGluIHByZWNlZGVuemFcbiAgICAgICAgLy8gbmVsIGNhc28gc2lhIGdpw6AgIGF0dGl2byB1biBlZGl0b3IgdmVyaWZpY28gZGkgcG90ZXJsbyBzdG9wcGFyZVxuICAgICAgICBpZiAoY3VycmVudEVkaXRpbmdMYXllciAmJiBjdXJyZW50RWRpdGluZ0xheWVyLmVkaXRvci5pc1N0YXJ0ZWQoKSkge1xuICAgICAgICAgIC8vIHNlIGxhIHRlcm1pbmF6aW9uZSBkZWxsJ2VkaXRpbmcgc2Fyw6AgIGFuZGF0YSBhIGJ1b24gZmluZSwgc2V0dG8gaWwgdG9vbFxuICAgICAgICAgIC8vIHByb3ZvIGEgc3RvcHBhcmVcbiAgICAgICAgICB0aGlzLl9jYW5jZWxPclNhdmUoMilcbiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5fc3RvcEVkaXRvcigpKSB7XG4gICAgICAgICAgICAgICAgICBzZWxmLl9zdGFydEVkaXRpbmdUb29sKGxheWVyLCB0b29sVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy9uZWwgY2FzbyBzaWEgbGEgcHJpbWEgdm9sdGEgY2hlIGludGVyYWdpc2NvIGNvbiB1biB0b29sXG4gICAgICAgICAgLy8gZSBxdWluZGkgbm9uIMOoIHN0YXRvIHNldHRhdG8gbmVzc3VuIGxheWVyIGluIGVkaXRpbmdcbiAgICAgICAgICB0aGlzLl9zdGFydEVkaXRpbmdUb29sKGxheWVyLCB0b29sVHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy9mdW56aW9uZSBjaGUgcmVzdGl0dWlzY2UgbCdhcnJheSBkZWkgY29kaWNpIGRlaSBsYXllcnNcbiAgdGhpcy5nZXRMYXllckNvZGVzID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gXy52YWx1ZXModGhpcy5sYXllckNvZGVzKTtcbiAgfTtcblxuICAvKiBNRVRPREkgUFJJVkFUSSAqL1xuICAvLyBmdW56aW9uZSBwZXIgc2V0dGFyZSBpbCB2ZWN0b3JsYXllciBhbGxhIHByb3JpZXTDoCB2ZWN0b3IgZGVsIGxheWVyXG4gIHRoaXMuX3NldFVwVmVjdG9yTGF5ZXIgPSBmdW5jdGlvbihsYXllckNvZGUsIHZlY3RvckxheWVyKSB7XG4gICAgdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yID0gdmVjdG9yTGF5ZXI7XG4gIH07XG5cbiAgLy9mdW56aW9uZSBjaGUgcGVybWV0dGUgZGkgZmFyZSBpbCBzZXR1cCBkZWxsJ2VkaXRvciBlIGFzc2VnYW5ybG8gYWwgbGF5ZXJcbiAgdGhpcy5fc2V0VXBFZGl0b3IgPSBmdW5jdGlvbihsYXllckNvZGUpIHtcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvL29wdGlvbiBlZGl0b3JcbiAgICB2YXIgb3B0aW9uc19lZGl0b3IgPSB7XG4gICAgICAnbWFwU2VydmljZSc6IHNlbGYuX21hcFNlcnZpY2UsXG4gICAgICAnZm9ybUNsYXNzJzogRm9ybUNsYXNzLFxuICAgICAgJ2VkaXRpbmdWZWN0b3JTdHlsZSc6IHRoaXMuX2xheWVyc0VkaXRpbmdTdHlsZVtsYXllckNvZGVdXG4gICAgfTtcbiAgICAvLyBwcmVuZG8gaWwgdmVjdG9yIGxheWVyIGRlbCBsYXllclxuICAgIHZhciB2ZWN0b3JMYXllciA9IHRoaXMuX2xheWVyc1tsYXllckNvZGVdLnZlY3RvcjtcbiAgICAvL0dFU1RJT05FIEUgSU5JWklBTElaWkFaSU9ORSBERUxMJ0VESVRPUiBSRUxBVElWTyBBTCBMQVlFUiBWRVRUT1JJQUxFXG4gICAgLy9jcmVvIGwnaXN0YW56YSBkZWxsJ2VkaXRvciBjaGUgZ2VzdGlyw6AgaWwgbGF5ZXJcbiAgICB2YXIgZWRpdG9yID0gbmV3IHNlbGYuX2VkaXRvckNsYXNzW2xheWVyQ29kZV0ob3B0aW9uc19lZGl0b3IpO1xuICAgIC8vc2V0dG8gaWwgbGF5ZXIgdmV0dG9yaWFsZSBhc3NvY2lhdG8gYWxsJ2VkaXRvclxuICAgIC8vIGUgaSB0aXBpIGRpIHRvb2xzIGFzc29jaWF0aSBhZCBlc3NvXG4gICAgZWRpdG9yLnNldFZlY3RvckxheWVyKHZlY3RvckxheWVyKTtcbiAgICAvL2VtZXR0ZSBldmVudG8gY2hlIMOoIHN0YXRhIGdlbmVyYXRhIHVuYSBtb2RpZmljYSBsYSBsYXllclxuICAgIGVkaXRvci5vbihcImRpcnR5XCIsIGZ1bmN0aW9uIChkaXJ0eSkge1xuICAgICAgc2VsZi5zdGF0ZS5oYXNFZGl0cyA9IGRpcnR5O1xuICAgIH0pO1xuICAgIC8vYXNzZWdubyBsJ2lzdGFuemEgZWRpdG9yIGFsIGxheWVyIHRyYW1pdGUgbGEgcHJvcHJpZXTDoCBlZGl0b3JcbiAgICB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS5lZGl0b3IgPSBlZGl0b3I7XG4gICAgcmV0dXJuIGVkaXRvclxuICAgIC8vLy8gRklORSBHRVNUSU9ORSBFRElUT1JcbiAgfTtcbiAgLy9mYSBwYXJ0aXJlIGwnZWRpdGluZ1xuICB0aGlzLl9zdGFydEVkaXRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBtaSBhc3NpY3VybyBjaGUgc2UgcGVyIHF1YWxzaXNpIG1vdGl2b1xuICAgIC8vIGZhY2NpbyB1bm8gc3RhcmVkaXRpbmcgZGkgdW4gZWRpdGluZyBnacOgIGF2dmlhdG9cbiAgICAvLyByaXRvcm5vIHBlcmNow6ggaG8gZ2nDoCB0dXR0byAobG8gZmFjY2lvIHBlciBzaWN1cmVubnphIG5vbiBzaSBzYSBtYWkpXG4gICAgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy5vbiB8fCB0aGlzLnN0YXRlLnJldHJpZXZpbmdEYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvLyBjaGllZG8gYWwgbG9hZGVyIGRpIGNhcmljYXJlIGkgZGF0aVxuICAgIGlmICghdGhpcy5fbG9hZGVyLmlzUmVhZHkoKSkge1xuICAgICAgdGhpcy5fbG9hZGVyLmxvYWRMYXllcnMoJ3cnLCB0aGlzLl9jdXN0b21VcmxQYXJhbWV0ZXJzKSAvLyBjYXJpY28gaSBsYXllciBpbiBtb2RhbGl0w6AgZWRpdGluZyAoc2NyaXR0dXJhKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAodmVjdG9yTGF5ZXJzQ29kZXMpIHtcbiAgICAgICAgICAvL3VuYSB2b2x0YSBjaGUgaWwgbG9hZGVyIGhhIGZpbml0byBkaSBjYXJpY2FyZSBpIGxheWVyIHZldHRvcmlhbGlcbiAgICAgICAgICAvL3F1ZXN0byBtaSByZXN0aXR1aXNjZSBpIGNvZGljZSBkZWkgbGF5ZXIgY2hlIHNvbm8gc3RhdGkgY2FyaWNhdGkoYXJyYXkpXG4gICAgICAgICAgXy5mb3JFYWNoKHZlY3RvckxheWVyc0NvZGVzLCBmdW5jdGlvbiAobGF5ZXJDb2RlKSB7XG4gICAgICAgICAgICAvLyBwZXIgb2duaSBsYXllciBmYWNjaW8gaWwgc2V0dXAgZGVsbCdlZGl0b3JcbiAgICAgICAgICAgIHNlbGYuX3NldFVwRWRpdG9yKGxheWVyQ29kZSk7XG4gICAgICAgICAgICBzZWxmLl90b2dnbGVDaGVja0JveFBsdWdpblRvb2wobGF5ZXJDb2RlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvLyBzZSB0dXR0byAgw6ggYW5kYXRvIGEgYnVvbiBmaW5lIGFnZ2l1bmdvIGkgVmVjdG9yTGF5ZXIgYWxsYSBtYXBwYVxuICAgICAgICAgIHNlbGYuX2FkZFRvTWFwKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBHVUkubm90aWZ5LmVycm9yKHQoJ2NvdWxkX25vdF9sb2FkX3ZlY3Rvcl9sYXllcnMnKSk7XG4gICAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xvYWRlci5zZXRNb2RlKCd3Jyk7XG4gICAgICB2YXIgdmVjdG9yTGF5ZXJzQ29kZXMgPSB0aGlzLl9sb2FkZXIuZ2V0VmVjdG9yTGF5ZXJzQ29kZXMoKTtcbiAgICAgIF8uZm9yRWFjaCh2ZWN0b3JMYXllcnNDb2RlcywgZnVuY3Rpb24gKGxheWVyQ29kZSkge1xuICAgICAgICAvLyBwZXIgb2duaSBsYXllciBmYWNjaW8gaWwgc2V0dXAgZGVsbCdlZGl0b3JcbiAgICAgICAgc2VsZi5fbG9hZGVyLmxvY2tGZWF0dXJlcyhzZWxmLl9sYXllcnNbbGF5ZXJDb2RlXS5uYW1lKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgc2VsZi5fc2V0VXBFZGl0b3IobGF5ZXJDb2RlKTtcbiAgICAgICAgICBzZWxmLl90b2dnbGVDaGVja0JveFBsdWdpblRvb2wobGF5ZXJDb2RlKTtcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgICAgc2VsZi5zdGF0ZS5lZGl0aW5nLm9uID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgdGhpcy5fc3RvcEVkaXRpbmcgPSBmdW5jdGlvbihyZXNldCkge1xuICAgIC8vIHNlIHBvc3NvIHN0b3BwYXJlIHR1dHRpIGdsaSBlZGl0b3IuLi5cbiAgICBpZiAodGhpcy5fc3RvcEVkaXRvcihyZXNldCkpe1xuICAgICAgXy5mb3JFYWNoKHRoaXMuX2xheWVycywgZnVuY3Rpb24obGF5ZXIsIGxheWVyQ29kZSkge1xuICAgICAgICB2YXIgdmVjdG9yID0gbGF5ZXIudmVjdG9yO1xuICAgICAgICAvL3NlbGYuX21hcFNlcnZpY2Uudmlld2VyLnJlbW92ZUxheWVyQnlOYW1lKHZlY3Rvci5uYW1lKTtcbiAgICAgICAgLy9sYXllci52ZWN0b3I9IG51bGw7XG4gICAgICAgIGxheWVyLmVkaXRvcj0gbnVsbDtcbiAgICAgICAgc2VsZi5fdW5sb2NrTGF5ZXIoc2VsZi5fbGF5ZXJzW2xheWVyQ29kZV0pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl91cGRhdGVFZGl0aW5nU3RhdGUoKTtcbiAgICAgIHRoaXMuX2xvYWRlci5zZXRNb2RlKCdyJyk7XG4gICAgICBzZWxmLl9jbGVhblVwKCk7XG4gICAgICBzZWxmLmVtaXQoXCJlZGl0aW5nc3RvcHBlZFwiKTtcbiAgICB9XG4gIH07XG5cbiAgdGhpcy5fY2xlYW5VcCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vdmFkbyBhZCBhbm51bGFyZSBsJ2VzdGVuemlvbmUgZGVsIGxvYWRlciBwZXIgcG90ZXIgcmljYXJpY2FyZSBpIGRhdGkgdmV0dHRvcmlhbGlcbiAgICAvL2RhIHJpdmVkZXJlO1xuICAgIHRoaXMuX2xvYWRlci5jbGVhblVwTGF5ZXJzKCk7XG5cbiAgfTtcbiAgLy9zZSBub24gw6ggYW5jb3JhIHBhcnRpdG8gZmFjY2lvIHBhcnRpcmUgbG8gc3RhcnQgZWRpdG9yXG4gIHRoaXMuX3N0YXJ0RWRpdG9yID0gZnVuY3Rpb24obGF5ZXIpe1xuICAgIC8vIGF2dmlvIGwnZWRpdG9yXG4gICAgLy8gcGFzc2FuZG9saSBpbCBzZXJ2aWNlIGNoZSBsbyBhY2NldHRhXG4gICAgaWYgKGxheWVyLmVkaXRvci5zdGFydCh0aGlzKSkge1xuICAgICAgLy8gcmVnaXN0cm8gaWwgY3VycmVudCBsYXllciBpbiBlZGl0aW5nXG4gICAgICB0aGlzLl9zZXRDdXJyZW50RWRpdGluZ0xheWVyKGxheWVyKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG4gIC8vZnVuemlvbmUgY2hlIHZpZW5lIGNoaWFtYXRhIGFsIGNsaWNrIHN1IHVuIHRvb2wgZGVsbCdlZGl0aW5nIGUgc2VcbiAgLy9ub24gw6ggc3RhdG8gYXNzZWduYXRvIGFuY29yYSBuZXNzdW4gbGF5ZXIgY29tZSBjdXJyZW50IGxheWVyIGVkaXRpbmdcbiAgdGhpcy5fc3RhcnRFZGl0aW5nVG9vbCA9IGZ1bmN0aW9uKGxheWVyLCB0b29sVHlwZSwgb3B0aW9ucykge1xuICAgIC8vYXNzZWdubyB0cnVlIGFsbG8gc3RhcnRFZGl0aW5nVG9vbCBhdHRyaWJ1dG8gZGVsbGxvIHN0YXRlXG4gICAgdGhpcy5zdGF0ZS5zdGFydGluZ0VkaXRpbmdUb29sID0gdHJ1ZTtcbiAgICB2YXIgY2FuU3RhcnRUb29sID0gdHJ1ZTtcbiAgICAvL3ZlcmlmaWNvIHNlIGwnZWRpdG9yIMOoIHBhcnRpdG8gbyBtZW5vXG4gICAgaWYgKCFsYXllci5lZGl0b3IuaXNTdGFydGVkKCkpIHtcbiAgICAgIC8vc2Ugbm9uIMOoIGFuY29yYSBwYXJ0aXRvIGxvIGZhY2NpbyBwYXJ0aXJlIGUgbmUgcHJlbmRvIGlsIHJpc3VsdGF0b1xuICAgICAgLy8gdHJ1ZSBvIGZhbHNlXG4gICAgICBjYW5TdGFydFRvb2wgPSB0aGlzLl9zdGFydEVkaXRvcihsYXllcik7XG4gICAgfVxuICAgIC8vIHZlcmlmaWNhIHNlIGlsIHRvb2wgcHXDsiBlc3NlcmUgYXR0aXZhdG9cbiAgICAvLyBsJ2VkaXRvciB2ZXJpZmljYSBzZSBpbCB0b29sIHJpY2hpZXN0byDDqCBjb21wYXRpYmlsZVxuICAgIC8vIGNvbiBpIHRvb2xzIHByZXZpc3RpIGRhbGwnZWRpdG9yLiBDcmVhIGlzdGFuemEgZGkgdG9vbCBlIGF2dmlhIGlsIHRvb2xcbiAgICAvLyBhdHRyYXZlcnNvIGlsIG1ldG9kbyBydW5cbiAgICBpZiAoY2FuU3RhcnRUb29sICYmIGxheWVyLmVkaXRvci5zZXRUb29sKHRvb2xUeXBlLCBvcHRpb25zKSkge1xuICAgICAgdGhpcy5fdXBkYXRlRWRpdGluZ1N0YXRlKCk7XG4gICAgICB0aGlzLnN0YXRlLnN0YXJ0aW5nRWRpdGluZ1Rvb2wgPSBmYWxzZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aGlzLnN0YXRlLnN0YXJ0aW5nRWRpdGluZ1Rvb2wgPSBmYWxzZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgdGhpcy5fc3RvcEVkaXRvciA9IGZ1bmN0aW9uKHJlc2V0KXtcbiAgICB2YXIgcmV0ID0gdHJ1ZTtcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgaWYgKGxheWVyKSB7XG4gICAgICByZXQgPSBsYXllci5lZGl0b3Iuc3RvcChyZXNldCk7XG4gICAgICBpZiAocmV0KXtcbiAgICAgICAgdGhpcy5fc2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9O1xuICAvLyBmdW56aW9uZSBjaGUgc2kgb2NjdXBhIGRpIGludGVycm9tZXBlcmUgbCdlZHRpbmcgdG9vbFxuICB0aGlzLl9zdG9wRWRpdGluZ1Rvb2wgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmV0ID0gdHJ1ZTtcbiAgICAvLyByZWN1cGVyZSBpbCBsYXllciBpbiBjdXJyZW50IGVkaXRpbmdcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgLy8gc2UgZXNpc3RlIGVkIGVyYSBzdGF0byBzZXR0YXRvXG4gICAgaWYgKGxheWVyKSB7XG4gICAgICAvLyBzZSBhbmRhdG8gYmVuZSByaXRvcm5hIHRydWVcbiAgICAgIHJldCA9IGxheWVyLmVkaXRvci5zdG9wVG9vbCgpO1xuICAgICAgaWYgKHJldCkge1xuICAgICAgICB0aGlzLl91cGRhdGVFZGl0aW5nU3RhdGUoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIGFjY2V0dGEgY29tZSBwYXJhbWV0cm8gaWwgdGlwbyBkaVxuICAvLyBvcGVyYXppb25lIGRhIGZhcmUgYSBzZWNvbmRhIGRpY29zYSDDqCBhdnZlbnV0b1xuICB0aGlzLl9zYXZlV2l0aG91dEFzayA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICB2YXIgZGlydHlFZGl0b3JzID0ge307XG4gICAgLy8gdmVyaWZpY28gcGVyIG9nbmkgbGF5ZXIgc2UgbCdlZGl0byBhc3NvY2lhdG8gw6ggRGlydHlcbiAgICBfLmZvckVhY2godGhpcy5fbGF5ZXJzLCBmdW5jdGlvbihsYXllciwgbGF5ZXJDb2RlKSB7XG4gICAgICBpZiAobGF5ZXIuZWRpdG9yLmlzRGlydHkoKSkge1xuICAgICAgICBkaXJ0eUVkaXRvcnNbbGF5ZXJDb2RlXSA9IGxheWVyLmVkaXRvcjtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9zYXZlRWRpdHMoZGlydHlFZGl0b3JzKS5cbiAgICB0aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgfSkuZmFpbChmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgfSlcblxuICB9O1xuICB0aGlzLl9jYW5jZWxPclNhdmUgPSBmdW5jdGlvbih0eXBlKXtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgLy8gcGVyIHNpY3VyZXp6YSB0ZW5nbyB0dXR0byBkZW50cm8gdW4gZ3Jvc3NvIHRyeS9jYXRjaCxcbiAgICAvLyBwZXIgbm9uIHJpc2NoaWFyZSBkaSBwcm92b2NhcmUgaW5jb25zaXN0ZW56ZSBuZWkgZGF0aSBkdXJhbnRlIGlsIHNhbHZhdGFnZ2lvXG4gICAgdHJ5IHtcbiAgICAgIHZhciBfYXNrVHlwZSA9IDE7XG4gICAgICBpZiAodHlwZSkge1xuICAgICAgICBfYXNrVHlwZSA9IHR5cGVcbiAgICAgIH1cbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBjaG9pY2UgPSBcImNhbmNlbFwiO1xuICAgICAgdmFyIGRpcnR5RWRpdG9ycyA9IHt9O1xuICAgICAgLy8gdmVyaWZpY28gcGVyIG9nbmkgbGF5ZXIgc2UgbCdlZGl0byBhc3NvY2lhdG8gw6ggRGlydHlcbiAgICAgIF8uZm9yRWFjaCh0aGlzLl9sYXllcnMsIGZ1bmN0aW9uKGxheWVyLCBsYXllckNvZGUpIHtcbiAgICAgICAgaWYgKGxheWVyLmVkaXRvci5pc0RpcnR5KCkpIHtcbiAgICAgICAgICBkaXJ0eUVkaXRvcnNbbGF5ZXJDb2RlXSA9IGxheWVyLmVkaXRvcjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyB2ZXJpZmljbyBzZSBjaSBzb25vIG8gbWVubyBlZGl0b3Igc3BvcmNoaVxuICAgICAgaWYoXy5rZXlzKGRpcnR5RWRpdG9ycykubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX2Fza0NhbmNlbE9yU2F2ZShfYXNrVHlwZSkuXG4gICAgICAgIHRoZW4oZnVuY3Rpb24oYWN0aW9uKSB7XG4gICAgICAgICAgLy8gcml0b3JuYSBpbCB0aXBvIGRpIGF6aW9uZSBkYSBmYXJlXG4gICAgICAgICAgLy8gc2F2ZSwgY2FuY2VsLCBub3NhdmVcbiAgICAgICAgICBpZiAoYWN0aW9uID09PSAnc2F2ZScpIHtcbiAgICAgICAgICAgIC8vIHBhc3NvIGdsaSBlZGl0b3Igc3BvY2hpIGFsbGEgZnVuemlvbmUgX3NhdmVFZGl0c1xuICAgICAgICAgICAgc2VsZi5fc2F2ZUVkaXRzKGRpcnR5RWRpdG9ycykuXG4gICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09ICdub3NhdmUnKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT0gJ2NhbmNlbCcpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIGluIGJhc2UgYWwgdGlwbyBkaSBhc2tUeXBlXG4gIC8vIHZpc3VhbGl6emEgaWwgbW9kYWxlIGEgY3VpIHJpc3BvbmRlcmUsIHNhbHZhIGV0YyAuLlxuICB0aGlzLl9hc2tDYW5jZWxPclNhdmUgPSBmdW5jdGlvbih0eXBlKXtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgdmFyIGJ1dHRvblR5cGVzID0ge1xuICAgICAgU0FWRToge1xuICAgICAgICBsYWJlbDogXCJTYWx2YVwiLFxuICAgICAgICBjbGFzc05hbWU6IFwiYnRuLXN1Y2Nlc3NcIixcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnc2F2ZScpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgTk9TQVZFOiB7XG4gICAgICAgIGxhYmVsOiBcIlRlcm1pbmEgc2VuemEgc2FsdmFyZVwiLFxuICAgICAgICBjbGFzc05hbWU6IFwiYnRuLWRhbmdlclwiLFxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oKXtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdub3NhdmUnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIENBTkNFTDoge1xuICAgICAgICBsYWJlbDogXCJBbm51bGxhXCIsXG4gICAgICAgIGNsYXNzTmFtZTogXCJidG4tcHJpbWFyeVwiLFxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnY2FuY2VsJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHN3aXRjaCAodHlwZSl7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGJ1dHRvbnMgPSB7XG4gICAgICAgICAgc2F2ZTogYnV0dG9uVHlwZXMuU0FWRSxcbiAgICAgICAgICBub3NhdmU6IGJ1dHRvblR5cGVzLk5PU0FWRSxcbiAgICAgICAgICBjYW5jZWw6IGJ1dHRvblR5cGVzLkNBTkNFTFxuICAgICAgICB9O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgYnV0dG9ucyA9IHtcbiAgICAgICAgICBzYXZlOiBidXR0b25UeXBlcy5TQVZFLFxuICAgICAgICAgIGNhbmNlbDogYnV0dG9uVHlwZXMuQ0FOQ0VMXG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBHVUkuZGlhbG9nLmRpYWxvZyh7XG4gICAgICBtZXNzYWdlOiBcIlZ1b2kgc2FsdmFyZSBkZWZpbml0aXZhbWVudGUgbGUgbW9kaWZpY2hlP1wiLFxuICAgICAgdGl0bGU6IFwiU2FsdmF0YWdnaW8gbW9kaWZpY2FcIixcbiAgICAgIGJ1dHRvbnM6IGJ1dHRvbnNcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuICAvLyBmdW56aW9uZSBjaGUgc2FsdmEgaSBkYXRpIHJlbGF0aXZpIGFsIGxheWVyIHZldHRvcmlhbGVcbiAgLy8gZGVsIGRpcnR5RWRpdG9yXG4gIHRoaXMuX3NhdmVFZGl0cyA9IGZ1bmN0aW9uKGRpcnR5RWRpdG9ycykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgdGhpcy5fc2VuZEVkaXRzKGRpcnR5RWRpdG9ycylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgIEdVSS5ub3RpZnkuc3VjY2VzcyhcIkkgZGF0aSBzb25vIHN0YXRpIHNhbHZhdGkgY29ycmV0dGFtZW50ZVwiKTtcbiAgICAgICAgICBzZWxmLl9jb21taXRFZGl0cyhkaXJ0eUVkaXRvcnMsIHJlc3BvbnNlKTtcbiAgICAgICAgICAvL3NlbGYuX21hcFNlcnZpY2UucmVmcmVzaE1hcCgpO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oZXJyb3JzKXtcbiAgICAgICAgICBHVUkubm90aWZ5LmVycm9yKFwiRXJyb3JlIG5lbCBzYWx2YXRhZ2dpbyBzdWwgc2VydmVyXCIpO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIHByZW5kZSBjb21lIGluZ3Jlc3NvIGdsaSBlZGl0b3Igc3BvcmNoaVxuICB0aGlzLl9zZW5kRWRpdHMgPSBmdW5jdGlvbihkaXJ0eUVkaXRvcnMpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgdmFyIGVkaXRzVG9QdXNoID0gXy5tYXAoZGlydHlFZGl0b3JzLCBmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxheWVybmFtZTogZWRpdG9yLmdldFZlY3RvckxheWVyKCkubmFtZSxcbiAgICAgICAgZWRpdHM6IGVkaXRvci5nZXRFZGl0ZWRGZWF0dXJlcygpXG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gZXNlZ3VlIGlsIHBvc3QgZGVpIGRhdGlcbiAgICB0aGlzLl9wb3N0RGF0YShlZGl0c1RvUHVzaClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmV0dXJuZWQpe1xuICAgICAgICAgIGlmIChyZXR1cm5lZC5yZXN1bHQpe1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXR1cm5lZC5yZXNwb25zZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJldHVybmVkLnJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKHJldHVybmVkKXtcbiAgICAgICAgICBkZWZlcnJlZC5yZWplY3QocmV0dXJuZWQucmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuXG4gIHRoaXMuX2NvbW1pdEVkaXRzID0gZnVuY3Rpb24oZWRpdG9ycywgcmVzcG9uc2Upe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBfLmZvckVhY2goZWRpdG9ycyxmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgIHZhciBuZXdBdHRyaWJ1dGVzRnJvbVNlcnZlciA9IG51bGw7XG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UubmV3KXtcbiAgICAgICAgXy5mb3JFYWNoKHJlc3BvbnNlLm5ldywgZnVuY3Rpb24odXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzKXtcbiAgICAgICAgICB2YXIgb2xkZmlkID0gdXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzLmNsaWVudGlkO1xuICAgICAgICAgIHZhciBmaWQgPSB1cGRhdGVkRmVhdHVyZUF0dHJpYnV0ZXMuaWQ7XG4gICAgICAgICAgZWRpdG9yLmdldEVkaXRWZWN0b3JMYXllcigpLnNldEZlYXR1cmVEYXRhKG9sZGZpZCxmaWQsbnVsbCx1cGRhdGVkRmVhdHVyZUF0dHJpYnV0ZXMpO1xuICAgICAgICAgIF8uZm9yRWFjaChyZXNwb25zZS5uZXdfbG9ja2lkcywgZnVuY3Rpb24obmV3bG9ja0lkKXtcbiAgICAgICAgICAgIGVkaXRvci5nZXRWZWN0b3JMYXllcigpLmFkZExvY2tJZChuZXdsb2NrSWQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgZWRpdG9yLmNvbW1pdCgpO1xuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuX3VuZG9FZGl0cyA9IGZ1bmN0aW9uKGRpcnR5RWRpdG9ycyl7XG4gICAgdmFyIGN1cnJlbnRFZGl0aW5nTGF5ZXJDb2RlID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpLmxheWVyQ29kZTtcbiAgICB2YXIgZWRpdG9yID0gZGlydHlFZGl0b3JzW2N1cnJlbnRFZGl0aW5nTGF5ZXJDb2RlXTtcbiAgICB0aGlzLl9zdG9wRWRpdGluZyh0cnVlKTtcbiAgfTtcbiAgLy8gZXNlZ3VlIGwndXBkYXRlIGRlbGxvIHN0YXRlIG5lbCBjYXNvIGFkIGVzZW1waW8gZGkgdW4gdG9nZ2xlIGRlbCBib3R0b25lIHRvb2xcbiAgdGhpcy5fdXBkYXRlRWRpdGluZ1N0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gcHJlbmRlIGlsIGxheWVyIGluIEVkaXRpbmdcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgaWYgKGxheWVyKSB7XG4gICAgICB0aGlzLnN0YXRlLmVkaXRpbmcubGF5ZXJDb2RlID0gbGF5ZXIubGF5ZXJDb2RlO1xuICAgICAgdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xUeXBlID0gbGF5ZXIuZWRpdG9yLmdldEFjdGl2ZVRvb2woKS5nZXRUeXBlKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5zdGF0ZS5lZGl0aW5nLmxheWVyQ29kZSA9IG51bGw7XG4gICAgICB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbFR5cGUgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLl91cGRhdGVUb29sU3RlcHNTdGF0ZSgpO1xuICB9O1xuXG4gIHRoaXMuX3VwZGF0ZVRvb2xTdGVwc1N0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBsYXllciA9IHRoaXMuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICB2YXIgYWN0aXZlVG9vbDtcbiAgICBpZiAobGF5ZXIpIHtcbiAgICAgIGFjdGl2ZVRvb2wgPSBsYXllci5lZGl0b3IuZ2V0QWN0aXZlVG9vbCgpO1xuICAgIH1cbiAgICBpZiAoYWN0aXZlVG9vbCAmJiBhY3RpdmVUb29sLmdldFRvb2woKSkge1xuICAgICAgdmFyIHRvb2xJbnN0YW5jZSA9IGFjdGl2ZVRvb2wuZ2V0VG9vbCgpO1xuICAgICAgaWYgKHRvb2xJbnN0YW5jZS5zdGVwcyl7XG4gICAgICAgIHRoaXMuX3NldFRvb2xTdGVwU3RhdGUoYWN0aXZlVG9vbCk7XG4gICAgICAgIHRvb2xJbnN0YW5jZS5zdGVwcy5vbignc3RlcCcsIGZ1bmN0aW9uKGluZGV4LHN0ZXApIHtcbiAgICAgICAgICBzZWxmLl9zZXRUb29sU3RlcFN0YXRlKGFjdGl2ZVRvb2wpO1xuICAgICAgICB9KTtcbiAgICAgICAgdG9vbEluc3RhbmNlLnN0ZXBzLm9uKCdjb21wbGV0ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgc2VsZi5fc2V0VG9vbFN0ZXBTdGF0ZSgpO1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHNlbGYuX3NldFRvb2xTdGVwU3RhdGUoKTtcbiAgICB9XG4gIH07XG5cbiAgdGhpcy5fc2V0VG9vbFN0ZXBTdGF0ZSA9IGZ1bmN0aW9uKGFjdGl2ZVRvb2wpe1xuICAgIHZhciBpbmRleCwgdG90YWwsIG1lc3NhZ2U7XG4gICAgaWYgKF8uaXNVbmRlZmluZWQoYWN0aXZlVG9vbCkpe1xuICAgICAgaW5kZXggPSBudWxsO1xuICAgICAgdG90YWwgPSBudWxsO1xuICAgICAgbWVzc2FnZSA9IG51bGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdmFyIHRvb2wgPSBhY3RpdmVUb29sLmdldFRvb2woKTtcbiAgICAgIHZhciBtZXNzYWdlcyA9IHRvb2xTdGVwc01lc3NhZ2VzW2FjdGl2ZVRvb2wuZ2V0VHlwZSgpXTtcbiAgICAgIGluZGV4ID0gdG9vbC5zdGVwcy5jdXJyZW50U3RlcEluZGV4KCk7XG4gICAgICB0b3RhbCA9IHRvb2wuc3RlcHMudG90YWxTdGVwcygpO1xuICAgICAgbWVzc2FnZSA9IG1lc3NhZ2VzW2luZGV4XTtcbiAgICAgIGlmIChfLmlzVW5kZWZpbmVkKG1lc3NhZ2UpKSB7XG4gICAgICAgIGluZGV4ID0gbnVsbDtcbiAgICAgICAgdG90YWwgPSBudWxsO1xuICAgICAgICBtZXNzYWdlID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLm4gPSBpbmRleCArIDE7XG4gICAgdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLnRvdGFsID0gdG90YWw7XG4gICAgdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICB9O1xuXG4gIHRoaXMuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudEVkaXRpbmdMYXllcjtcbiAgfTtcblxuICB0aGlzLl9zZXRDdXJyZW50RWRpdGluZ0xheWVyID0gZnVuY3Rpb24obGF5ZXIpe1xuICAgIGlmICghbGF5ZXIpe1xuICAgICAgdGhpcy5fY3VycmVudEVkaXRpbmdMYXllciA9IG51bGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5fY3VycmVudEVkaXRpbmdMYXllciA9IGxheWVyO1xuICAgIH1cbiAgfTtcbiAgdGhpcy5fYWRkVG9NYXAgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy9yZWN1cGVybyBsJ2VsZW1lbnRvIG1hcCBvbDNcbiAgICB2YXIgbWFwID0gdGhpcy5fbWFwU2VydmljZS52aWV3ZXIubWFwO1xuICAgIHZhciBsYXllckNvZGVzID0gdGhpcy5nZXRMYXllckNvZGVzKCk7XG4gICAgLy9vZ25pIGxheWVyIGxvIGFnZ2l1bmdvIGFsbGEgbWFwcGFcbiAgICAvL2NvbiBpbCBtZXRvZG8gYWRkVG9NYXAgZGkgdmVjdG9yTGF5ZXJcbiAgICBfLmZvckVhY2gobGF5ZXJDb2RlcywgZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgICBzZWxmLl9sYXllcnNbbGF5ZXJDb2RlXS52ZWN0b3IuYWRkVG9NYXAobWFwKTtcbiAgICB9KTtcbiAgICAvL2FnZ2l1bmdvIGlsIGxpc3RlbmVyXG4gICAgaWYgKCF0aGlzLl9sb2FkRGF0YU9uTWFwVmlld0NoYW5nZUxpc3RlbmVyKSB7XG4gICAgICAvL3ZpZW5lIHJpdG9ybmF0YSBsYSBsaXN0ZW5lciBrZXlcbiAgICAgIHRoaXMuX2xvYWREYXRhT25NYXBWaWV3Q2hhbmdlTGlzdGVuZXIgPSB0aGlzLl9tYXBTZXJ2aWNlLm9uYWZ0ZXIoJ3NldE1hcFZpZXcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLnN0YXRlLmVkaXRpbmcub24gJiYgc2VsZi5zdGF0ZS5lZGl0aW5nLmVuYWJsZWQpIHtcbiAgICAgICAgICBzZWxmLl9sb2FkZXIubG9hZEFsbFZlY3RvcnNEYXRhKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLl9wb3N0RGF0YSA9IGZ1bmN0aW9uKGVkaXRzVG9QdXNoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIG1hbmRvIHVuIG9nZ2V0dG8gY29tZSBuZWwgY2FzbyBkZWwgYmF0Y2gsXG4gICAgLy8gbWEgaW4gcXVlc3RvIGNhc28gZGV2byBwcmVuZGVyZSBzb2xvIGlsIHByaW1vLCBlIHVuaWNvLCBlbGVtZW50b1xuICAgIGlmIChlZGl0c1RvUHVzaC5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcG9zdEJhdGNoRGF0YShlZGl0c1RvUHVzaCk7XG4gICAgfVxuICAgIHZhciBsYXllck5hbWUgPSBlZGl0c1RvUHVzaFswXS5sYXllcm5hbWU7XG4gICAgLy9vZ2dldHRvIGNvbnRlbmV0ZW50ZSBhZGQgZGVsZXRlIHJlbGF0aW9ucyBsb2NraWRzXG4gICAgdmFyIGVkaXRzID0gZWRpdHNUb1B1c2hbMF0uZWRpdHM7XG4gICAgdmFyIGpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoZWRpdHMpO1xuICAgIHJldHVybiAkLmFqYXgoe1xuICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgdXJsOiB0aGlzLmNvbmZpZy5iYXNldXJsK2xheWVyTmFtZStcIi8/XCIrc2VsZi5fY3VzdG9tVXJsUGFyYW1ldGVycyxcbiAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIGRhdGE6IGpzb25EYXRhXG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5fcG9zdEJhdGNoRGF0YSA9IGZ1bmN0aW9uKG11bHRpRWRpdHNUb1B1c2gpe1xuICAgIHZhciBlZGl0cyA9IHt9O1xuICAgIF8uZm9yRWFjaChtdWx0aUVkaXRzVG9QdXNoLGZ1bmN0aW9uKGVkaXRzVG9QdXNoKXtcbiAgICAgIGVkaXRzW2VkaXRzVG9QdXNoLmxheWVybmFtZV0gPSBlZGl0c1RvUHVzaC5lZGl0cztcbiAgICB9KTtcbiAgICB2YXIganNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeShlZGl0cyk7XG4gICAgcmV0dXJuICQucG9zdCh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLmJhc2V1cmwsXG4gICAgICBkYXRhOiBqc29uRGF0YSxcbiAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuX3VubG9jayA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsYXllckNvZGVzID0gdGhpcy5nZXRMYXllckNvZGVzKCk7XG4gICAgLy8gZXNlZ3VvIGxlIHJpY2hpZXN0ZSBkZWxsZSBjb25maWd1cmF6aW9uaSBlIG1pIHRlbmdvIGxlIHByb21lc3NlXG4gICAgXy5tYXAobGF5ZXJDb2RlcyxmdW5jdGlvbihsYXllckNvZGUpe1xuICAgICAgcmV0dXJuIHNlbGYuX3VubG9ja0xheWVyKHNlbGYuX2xheWVyc1tsYXllckNvZGVdKTtcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLl91bmxvY2tMYXllciA9IGZ1bmN0aW9uKGxheWVyQ29uZmlnKXtcbiAgICAkLmdldCh0aGlzLmNvbmZpZy5iYXNldXJsK2xheWVyQ29uZmlnLm5hbWUrXCIvP3VubG9ja1wiICsgdGhpcy5fY3VzdG9tVXJsUGFyYW1ldGVycyk7XG4gIH07XG4gIC8vZ2V0IGxvYWRlciBzZXJ2aWNlXG4gIHRoaXMuZ2V0TG9hZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xvYWRlcjtcbiAgfVxufVxuXG5pbmhlcml0KEdlb25vdGVzU2VydmljZSwgRzNXT2JqZWN0KTtcbm1vZHVsZS5leHBvcnRzID0gbmV3IEdlb25vdGVzU2VydmljZTtcbn0se1wiLi9lZGl0b3JzL2F0dHJpYnV0ZXNmb3JtXCI6MX1dfSx7fSxbM10pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
