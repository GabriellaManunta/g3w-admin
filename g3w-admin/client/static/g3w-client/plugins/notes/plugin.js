!function e(t,i,o){function n(r,a){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};t[r][0].call(d.exports,function(e){var i=t[r][1][e];return n(i?i:e)},d,d.exports,e,t,i,o)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({1:[function(t,e,i){function o(t){s(this,t),this._formPanel=l}var n=g3wsdk.core.utils.inherit,s=g3wsdk.core.utils.base,r=g3wsdk.gui.FormPanel,a=g3wsdk.gui.Form,l=r.extend({});n(o,a),e.exports=o},{}],2:[function(t,e,i){function o(t){t.formTools=[],s(this,t);var e=function(){a.saveEdits()};this.onafter("addFeature",e),this.onafter("deleteFeature",e),this.onafter("moveFeature",e),this.onafter("pickFeature",e)}var n=g3wsdk.core.utils.inherit,s=g3wsdk.core.utils.base,r=g3wsdk.core.Editor,a=t("../pluginservice");t("./attributesform");n(o,r),e.exports=o},{"../pluginservice":7,"./attributesform":1}],3:[function(t,e,i){var o=g3wsdk.core.utils.inherit,n=g3wsdk.core.utils.base,s=g3wsdk.core.Plugin,r=g3wsdk.gui.GUI,a=g3wsdk.core.ProjectsRegistry,l=t("pluginconfig"),c=t("./pluginservice"),d=t("./panel"),u=function(){n(this),this.name="notes",this.config=null,this.service=null,this.init=function(){this.setPluginService(c),this.config=this.getPluginConfig(),this.setUpIconsUrl(this.config.layers),this.registerPlugin(this.config.gid)&&(r.ready?this.setupGui():r.on("ready",_.bind(this.setupGui,this)),l.customUrlParameters=this.createPluginCustomUrlParameters(),this.service.init(this.config,l))},this.setupGui=function(){var t=r.getComponent("tools"),e=t.getService(),i=l.tools(this);this.service.setPluginTools(i),this.service.setPluginToolsService(e),e.addTools(1,"GEONOTES",i)},this.toolsActions={showHideLayer:function(){this.service.showHideLayer(l.layersCode.GEONOTES)},showEditingPanel:function(){var t=new d;_.forEach(this.config.layers,function(e,i){t.setIconsTool(i,e.icontools)}),this.service.toggleEditing(),r.showPanel(t)},isChecked:function(t){return this.service.isLayerVisible()}},this.createPluginCustomUrlParameters=function(){var t="&",e=a.getCurrentProject();return t+="project_type="+e.getType()+"&project_id="+e.getId()},this.setUpIconsUrl=function(t){_.forEach(t,function(t){l.layers[t.name].icons=t.icons})},this.setupToolsAction=function(t){_.forEach(t,function(t){})}};o(u,s),function(t){t.init()}(new u)},{"./panel":5,"./pluginservice":7,pluginconfig:6}],4:[function(t,e,i){e.exports='<div class="g3w-iternet-editing-panel">\n  <template v-for="toolbar in editorstoolbars">\n    <div class="panel panel-primary">\n      <div class="panel-heading">\n        <h3 class="panel-title">{{ toolbar.name }}</h3>\n      </div>\n      <div class="panel-body">\n        <template v-for="tool in toolbar.tools">\n          <div class="editbtn" :class="{\'enabled\' : (state.editing.on && editingtoolbtnEnabled(tool)), \'toggled\' : editingtoolbtnToggled(toolbar.layercode, tool.tooltype)}">\n            <img height="30px" width="30px" @click="toggleEditTool(toolbar.layercode, tool.tooltype)" :alt.once="tool.title" :title.once="tool.title" :src.once="tool.icon"></img>\n          </div>\n        </template>\n      </div>\n    </div>\n  </template>\n  <div v-show="state.retrievingData" style="color:#ffffff">\n    <span>Caricamento Dati ... </span><img :src="resourcesurl +\'images/loader.svg\'">\n  </div>\n  <div class="message">\n    {{{ message }}}\n  </div>\n</div>\n'},{}],5:[function(t,e,i){function o(){this.id="geonotes-editing-panel",this.name="Gestione dati GEONOTES",this.internalPanel=new c}var n=g3wsdk.core.utils.resolve,s=g3wsdk.core.utils.inherit,r=g3wsdk.gui.GUI,a=g3wsdk.gui.Panel,l=t("./pluginservice"),c=Vue.extend({template:t("./panel.html"),data:function(){var t=r.getResourcesUrl()+"images/";return{state:l.state,resourcesurl:r.getResourcesUrl(),editorstoolbars:[{name:"Geonotes",layercode:l.layerCodes.GEONOTES,tools:[{title:"Aggiungi Geonota",tooltype:"addfeature",icontool:"add",icon:t+"iternetAddPoint.png"},{title:"Sposta Geonota",tooltype:"movefeature",icontool:"move",icon:t+"iternetMovePoint.png"},{title:"Rimuovi Geonota",tooltype:"deletefeature",icontool:"delete",icon:t+"iternetDeletePoint.png"},{title:"Edita geonota",tooltype:"editattributes",icontool:"edit",icon:t+"editAttributes.png"}]}],savebtnlabel:"Salva"}},methods:{toggleEditing:function(){l.toggleEditing()},saveEdits:function(){l.saveEdits()},toggleEditTool:function(t,e){""!=e&&this.state.editing.on&&l.toggleEditTool(t,e)},editingtoolbtnToggled:function(t,e){return this.state.editing.layerCode==t&&this.state.editing.toolType==e},editingtoolbtnEnabled:function(t){return""!=t.tooltype},onClose:function(){l.stop()}},computed:{editingbtnlabel:function(){return this.state.editing.on?"Termina editing":"Avvia editing"},editingbtnEnabled:function(){return this.state.editing.enabled||this.state.editing.on?"":"disabled"},message:function(){var t="";if(this.state.editing.enabled){if(this.state.editing.toolstep.message){var e=this.state.editing.toolstep.n,i=this.state.editing.toolstep.total,o=this.state.editing.toolstep.message;t='<div style="margin-top:20px">GUIDA STRUMENTO:</div><div><span>['+e+"/"+i+'] </span><span style="color: yellow">'+o+"</span></div>"}}else t='<span style="color: red">Aumentare il livello di zoom per abilitare l\'editing';return t}}});s(o,a);var d=a.prototype;d.onShow=function(t){var e=this.internalPanel;return e.$mount().$appendTo(t),n(!0)},d.onClose=function(){console.log("close");var t=this,e=$.Deferred();return l.stop().then(function(){t.internalPanel.$destroy(!0),t.internalPanel=null,e.resolve()}).fail(function(){e.reject()}),e.promise()},d.setIconsTool=function(t,e){var i=this.internalPanel.editorstoolbars;_.forEach(i,function(o,n){t==o.layercode&&_.forEach(o.tools,function(t,o){e[t.icontool]&&(i[n].tools[o].icon=e[t.icontool])})})},e.exports=o},{"./panel.html":4,"./pluginservice":7}],6:[function(t,e,i){function o(t){return o=[{name:"Geonotes",layerName:"note",type:"checkbox",isCheck:!1,action:_.bind(t.toolsActions.showHideLayer,t)},{name:"Edita Geonotes",action:_.bind(t.toolsActions.showEditingPanel,t)}]}var n=t("./editors/geonoteseditor"),s=this.layerCodes={GEONOTES:"note"},r={};r[s.GEONOTES]=n;var a={},l={},c={},d=function(t){var e=t.iconurl;return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,.5],offset:[0,0],src:e})})};l[s.GEONOTES]={url:d,add:d,"delete":d,edit:d,move:d},c[s.GEONOTES]={},a[s.GEONOTES]={layerCode:s.GEONOTES,vector:null,editor:null,iconurl:null,crs:null,style:l[s.GEONOTES]},e.exports={layersCode:s,layers:a,layersStyle:l,layersEditingStyle:c,editorClass:r,tools:o}},{"./editors/geonoteseditor":2}],7:[function(e,i,o){function n(){var e=this;this._mapService=null,this._loadDataOnMapViewChangeListener=null,this._currentEditingLayer=null,this._pluginTools=null,this.state={editing:{on:!1,enabled:!1,layerCode:null,toolType:null,startingEditingTool:!1,toolstep:{n:null,total:null,message:null}},retrievingData:!1,hasEdits:!1},this._loader=new l;this.init=function(t,e){var i=this;this.config=t,this._crs=null,this._layers=e.layers,this._editorClass=e.editorClass,this.layerCodes=e.layersCode,this._layersStyle=e.layersStyle,this._layersEditingStyle=e.layersEditingStyle,this._customUrlParameters=e.customUrlParameters||null,this._mapService=a.getComponent("map").getService(),_.forEach(this.config.layers,function(t,e){i._layers[e].infourl=t.infourl,i._layers[e].crs="EPSG:"+t.crs,i.setLayerStyle(e)});var o={layers:this._layers,baseurl:this.config.baseurl,mapService:this._mapService};this._loader.init(o),this._loader.on("loadingvectorlayersstart",function(){i.state.retrievingData=!0}),this._loader.on("loadingvectorlayersend",function(){i.state.retrievingData=!1}),this._loader.on("setmode",function(t){switch(t){case"w":i.state.editing.on=!0,i.emit("editingstarted");break;case"r":i.state.editing.on=!1}}),this._mapService.on("pointerInteractionSet",function(t){var e=i._getCurrentEditingLayer();if(e){var o=e.editor.getActiveTool().instance;o&&!o.ownsInteraction(t)&&i._stopEditingTool()}}),this.state.editing.enabled=!0,_.forEach(this._layers,function(e,o){var n=t.layers[o].id,s=t.layers[o].name,r=i._mapService.getProject().getLayerById(n);r?(e.name=r.getOrigName(),e.id=n):(e.name=s,e.id=n)})},this.setPluginToolsService=function(t){this._pluginToolsService=t},this.setPluginTools=function(t){this._pluginTools=t},this.getPluginTools=function(){return this._pluginTools},this.setLayerStyle=function(t){var e=this,i=this._layers[t].icons;_.forEach(i,function(i,o){"url"==o&&(e._layers[t].style=e._layersStyle[t][o]({iconurl:i})),e._layersEditingStyle[t][o]=e._layersStyle[t][o]({iconurl:i})})},this.getLayerStyle=function(t){return this._layers[t].style},this._toggleCheckBoxPluginTool=function(t){var e=this,i=this._pluginToolsService.getState().toolsGroups[1].tools,o=this._layers[t].vector;_.forEach(i,function(n,s){if(_.has(n,"type")&&n.layerName==t&&"checkbox"==n.type){var r=i[s];r.isCheck=!0,i[s]=r,e._pluginToolsService.updateToolsGroup(1,{name:"GEONOTES",tools:i}),o.setVisible(!0)}})},this.isLayerVisible=function(t){var e=this._layers[t].vector;return e.isVisible()},this.showHideLayer=function(t){var e=this,i=null;this._loader.isReady()?(i=this._layers[t].vector,i.setVisible(!i.isVisible())):this._loader.loadLayers("r",this._customUrlParameters).then(function(){e._addToMap()})},this.stop=function(){var t=$.Deferred();return this.state.editing.on?this._cancelOrSave().then(function(){e._stopEditing(),t.resolve()}).fail(function(){t.reject()}):t.resolve(),t.promise()},this.toggleEditing=function(){var t=$.Deferred();if(this.state.editing.enabled&&!this.state.editing.on)this._startEditing();else if(this.state.editing.on)return this.stop();return t.promise()},this.saveEdits=function(){this._saveWithoutAsk()},this.toggleEditTool=function(t,e){var i=this,o=this._layers[t];if(o){var n=this._getCurrentEditingLayer();n&&t==n.layerCode?e==n.editor.getActiveTool().getType()?this._stopEditingTool():(this._stopEditingTool(),this._startEditingTool(n,e)):n&&n.editor.isStarted()?this._cancelOrSave(2).then(function(){i._stopEditor()&&i._startEditingTool(o,e)}):this._startEditingTool(o,e)}},this.getLayerCodes=function(){return _.values(this.layerCodes)},this._setUpVectorLayer=function(t,e){this._layers[t].vector=e},this._setUpEditor=function(t){var e=this,i={mapService:e._mapService,formClass:c,editingVectorStyle:this._layersEditingStyle[t]},o=this._layers[t].vector,n=new e._editorClass[t](i);n.setVectorLayer(o),n.on("dirty",function(t){e.state.hasEdits=t}),this._layers[t].editor=n},this._startEditing=function(){if(!this.state.editing.on&&!this.state.retrievingData){var e=this;if(this._loader.isReady()){this._loader.setMode("w");var i=this._loader.getVectorLayersCodes();_.forEach(i,function(t){e._loader.lockFeatures(e._layers[t].name).then(function(i){e._setUpEditor(t),e._toggleCheckBoxPluginTool(t)})}),e.state.editing.on=!0}else this._loader.loadLayers("w",this._customUrlParameters).then(function(t){_.forEach(t,function(t){e._setUpEditor(t),e._toggleCheckBoxPluginTool(t)}),e._addToMap()}).fail(function(){a.notify.error(t("could_not_load_vector_layers"))})}},this._stopEditing=function(t){this._stopEditor(t)&&(_.forEach(this._layers,function(t,i){t.vector;t.editor=null,e._unlockLayer(e._layers[i])}),this._updateEditingState(),this._loader.setMode("r"),e._cleanUp(),e.emit("editingstopped"))},this._cleanUp=function(){this._loader.cleanUpLayers()},this._startEditor=function(t){return!!t.editor.start(this)&&(this._setCurrentEditingLayer(t),!0)},this._startEditingTool=function(t,e,i){this.state.startingEditingTool=!0;var o=!0;return t.editor.isStarted()||(o=this._startEditor(t)),o&&t.editor.setTool(e,i)?(this._updateEditingState(),this.state.startingEditingTool=!1,!0):(this.state.startingEditingTool=!1,!1)},this._stopEditor=function(t){var e=!0,i=this._getCurrentEditingLayer();return i&&(e=i.editor.stop(t),e&&this._setCurrentEditingLayer()),e},this._stopEditingTool=function(){var t=!0,e=this._getCurrentEditingLayer();return e&&(t=e.editor.stopTool(),t&&this._updateEditingState()),t},this._saveWithoutAsk=function(){var t=$.Deferred(),e={};_.forEach(this._layers,function(t,i){t.editor.isDirty()&&(e[i]=t.editor)}),this._saveEdits(e).then(function(e){t.resolve()}).fail(function(e){t.reject()})},this._cancelOrSave=function(t){var e=$.Deferred();try{var i=1;t&&(i=t);var o=this,n={};_.forEach(this._layers,function(t,e){t.editor.isDirty()&&(n[e]=t.editor)}),_.keys(n).length?this._askCancelOrSave(i).then(function(t){"save"===t?o._saveEdits(n).then(function(t){e.resolve()}).fail(function(t){e.reject()}):"nosave"==t?e.resolve():"cancel"==t&&e.reject()}):e.resolve()}catch(s){e.reject()}return e.promise()},this._askCancelOrSave=function(t){var e=$.Deferred(),i={SAVE:{label:"Salva",className:"btn-success",callback:function(){e.resolve("save")}},NOSAVE:{label:"Termina senza salvare",className:"btn-danger",callback:function(){e.resolve("nosave")}},CANCEL:{label:"Annulla",className:"btn-primary",callback:function(){e.resolve("cancel")}}};switch(t){case 1:buttons={save:i.SAVE,nosave:i.NOSAVE,cancel:i.CANCEL};break;case 2:buttons={save:i.SAVE,cancel:i.CANCEL}}return a.dialog.dialog({message:"Vuoi salvare definitivamente le modifiche?",title:"Salvataggio modifica",buttons:buttons}),e.promise()},this._saveEdits=function(t){var e=this,i=$.Deferred();return this._sendEdits(t).then(function(o){a.notify.success("I dati sono stati salvati correttamente"),e._commitEdits(t,o),i.resolve()}).fail(function(t){a.notify.error("Errore nel salvataggio sul server"),i.resolve()}),i.promise()},this._sendEdits=function(t){var e=$.Deferred(),i=_.map(t,function(t){return{layername:t.getVectorLayer().name,edits:t.getEditedFeatures()}});return this._postData(i).then(function(t){t.result?e.resolve(t.response):e.reject(t.response)}).fail(function(t){e.reject(t.response)}),e.promise()},this._commitEdits=function(t,e){_.forEach(t,function(t){e&&e["new"]&&_.forEach(e["new"],function(i){var o=i.clientid,n=i.id;t.getEditVectorLayer().setFeatureData(o,n,null,i),_.forEach(e.new_lockids,function(e){t.getVectorLayer().addLockId(e)})}),console.log("editor commit"),t.commit()})},this._undoEdits=function(t){var e=this._getCurrentEditingLayer().layerCode;t[e];this._stopEditing(!0)},this._updateEditingState=function(){var t=this._getCurrentEditingLayer();t?(this.state.editing.layerCode=t.layerCode,this.state.editing.toolType=t.editor.getActiveTool().getType()):(this.state.editing.layerCode=null,this.state.editing.toolType=null),this._updateToolStepsState()},this._updateToolStepsState=function(){var t,e=this,i=this._getCurrentEditingLayer();if(i&&(t=i.editor.getActiveTool()),t&&t.getTool()){var o=t.getTool();o.steps&&(this._setToolStepState(t),o.steps.on("step",function(i,o){e._setToolStepState(t)}),o.steps.on("complete",function(){e._setToolStepState()}))}else e._setToolStepState()},this._setToolStepState=function(t){var e,i,o;if(_.isUndefined(t))e=null,i=null,o=null;else{var n=t.getTool(),s=toolStepsMessages[t.getType()];e=n.steps.currentStepIndex(),i=n.steps.totalSteps(),o=s[e],_.isUndefined(o)&&(e=null,i=null,o=null)}this.state.editing.toolstep.n=e+1,this.state.editing.toolstep.total=i,this.state.editing.toolstep.message=o},this._getCurrentEditingLayer=function(){return this._currentEditingLayer},this._setCurrentEditingLayer=function(t){t?this._currentEditingLayer=t:this._currentEditingLayer=null},this._addToMap=function(){var t=this,e=this._mapService.viewer.map,i=this.getLayerCodes();_.forEach(i,function(i){t._layers[i].vector.addToMap(e)}),this._loadDataOnMapViewChangeListener||(this._loadDataOnMapViewChangeListener=this._mapService.onafter("setMapView",function(){t.state.editing.on&&t.state.editing.enabled&&t._loader.loadAllVectorsData()}))},this._postData=function(t){var e=this;if(t.length>1)return this._postBatchData(t);var i=t[0].layername,o=t[0].edits,n=(JSON.stringify(o),new FormData);return _.forEach(o,function(t,e){n.append(e,t)}),$.ajax({type:"POST",url:this.config.baseurl+i+"/?"+e._customUrlParameters,dataType:"json",data:n,contentType:!1,processData:!1})},this._postBatchData=function(t){var e={};_.forEach(t,function(t){e[t.layername]=t.edits});var i=JSON.stringify(e);return $.post({url:this.config.baseurl,data:i,contentType:"application/json"})},this._unlock=function(){var t=this.getLayerCodes();_.map(t,function(t){return e._unlockLayer(e._layers[t])})},this._lockLayer=function(t){var e=this._loader._vectorLayersData[t.name].featurelocks,i=JSON.stringify(e);return $.post({url:this.config.baseurl+t.name+"/?lock"+this._customUrlParameters,data:i,contentType:"application/json"})},this._lockLayers=function(){var t=this.getLayerCodes();_.map(t,function(t){return e._lockLayer(e._layers[t])})},this._unlockLayer=function(t){$.get(this.config.baseurl+t.name+"/?unlock"+this._customUrlParameters)},this.getLoader=function(){return this._loader}}var s=g3wsdk.core.utils.inherit,r=g3wsdk.core.G3WObject,a=g3wsdk.gui.GUI,l=g3wsdk.core.VectorLayerLoader,c=e("./editors/attributesform");s(n,r),i.exports=new n},{"./editors/attributesform":1}]},{},[3]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1aWxkLmpzIl0sIm5hbWVzIjpbImUiLCJ0IiwibiIsInIiLCJzIiwibyIsInUiLCJhIiwicmVxdWlyZSIsImkiLCJmIiwiRXJyb3IiLCJjb2RlIiwibCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIkdlb25vdGVGb3JtIiwib3B0aW9ucyIsImJhc2UiLCJ0aGlzIiwiX2Zvcm1QYW5lbCIsIkdlb25vdGVGb3JtUGFuZWwiLCJpbmhlcml0IiwiZzN3c2RrIiwiY29yZSIsInV0aWxzIiwiRm9ybVBhbmVsIiwiZ3VpIiwiRm9ybSIsImV4dGVuZCIsIjIiLCJHZW9ub3Rlc0VkaXRvciIsImZvcm1Ub29scyIsInNhdmVFZGl0c1RvRGF0YWJhc2UiLCJQbHVnaW5TZXJ2aWNlIiwic2F2ZUVkaXRzIiwib25hZnRlciIsIkVkaXRvciIsIi4uL3BsdWdpbnNlcnZpY2UiLCIuL2F0dHJpYnV0ZXNmb3JtIiwiMyIsIlBsdWdpbiIsIkdVSSIsIlByb2plY3RzUmVnaXN0cnkiLCJwbHVnaW5Db25maWciLCJTZXJ2aWNlIiwiRWRpdGluZ1BhbmVsIiwiX1BsdWdpbiIsIm5hbWUiLCJjb25maWciLCJzZXJ2aWNlIiwiaW5pdCIsInNldFBsdWdpblNlcnZpY2UiLCJnZXRQbHVnaW5Db25maWciLCJzZXRVcEljb25zVXJsIiwibGF5ZXJzIiwicmVnaXN0ZXJQbHVnaW4iLCJnaWQiLCJyZWFkeSIsInNldHVwR3VpIiwib24iLCJfIiwiYmluZCIsImN1c3RvbVVybFBhcmFtZXRlcnMiLCJjcmVhdGVQbHVnaW5DdXN0b21VcmxQYXJhbWV0ZXJzIiwidG9vbHNDb21wb25lbnQiLCJnZXRDb21wb25lbnQiLCJ0b29sc1NlcnZpY2UiLCJnZXRTZXJ2aWNlIiwidG9vbHMiLCJzZXRQbHVnaW5Ub29scyIsInNldFBsdWdpblRvb2xzU2VydmljZSIsImFkZFRvb2xzIiwidG9vbHNBY3Rpb25zIiwic2hvd0hpZGVMYXllciIsImxheWVyc0NvZGUiLCJHRU9OT1RFUyIsInNob3dFZGl0aW5nUGFuZWwiLCJwYW5lbCIsImZvckVhY2giLCJsYXllckNvbmZpZyIsImxheWVyQ29kZSIsInNldEljb25zVG9vbCIsImljb250b29scyIsInRvZ2dsZUVkaXRpbmciLCJzaG93UGFuZWwiLCJpc0NoZWNrZWQiLCJpc0xheWVyVmlzaWJsZSIsImN1cnJlbnRQcm9qZWN0IiwiZ2V0Q3VycmVudFByb2plY3QiLCJnZXRUeXBlIiwiZ2V0SWQiLCJsYXllcnNDb25maWciLCJpY29ucyIsInNldHVwVG9vbHNBY3Rpb24iLCJ0b29sIiwicGx1Z2luIiwiLi9wYW5lbCIsIi4vcGx1Z2luc2VydmljZSIsInBsdWdpbmNvbmZpZyIsIjQiLCI1IiwiRWRpdG9yUGFuZWwiLCJpZCIsImludGVybmFsUGFuZWwiLCJQYW5lbENvbXBvbmVudCIsInJlc29sdmVkVmFsdWUiLCJyZXNvbHZlIiwiUGFuZWwiLCJWdWUiLCJ0ZW1wbGF0ZSIsImRhdGEiLCJpbWFnZVBhdGgiLCJnZXRSZXNvdXJjZXNVcmwiLCJzdGF0ZSIsInJlc291cmNlc3VybCIsImVkaXRvcnN0b29sYmFycyIsImxheWVyY29kZSIsImxheWVyQ29kZXMiLCJ0aXRsZSIsInRvb2x0eXBlIiwiaWNvbnRvb2wiLCJpY29uIiwic2F2ZWJ0bmxhYmVsIiwibWV0aG9kcyIsInRvZ2dsZUVkaXRUb29sIiwidG9vbFR5cGUiLCJlZGl0aW5nIiwiZWRpdGluZ3Rvb2xidG5Ub2dnbGVkIiwiZWRpdGluZ3Rvb2xidG5FbmFibGVkIiwib25DbG9zZSIsInN0b3AiLCJjb21wdXRlZCIsImVkaXRpbmdidG5sYWJlbCIsImVkaXRpbmdidG5FbmFibGVkIiwiZW5hYmxlZCIsIm1lc3NhZ2UiLCJ0b29sc3RlcCIsInRvdGFsIiwic3RlcG1lc3NhZ2UiLCJwcm90byIsInByb3RvdHlwZSIsIm9uU2hvdyIsImNvbnRhaW5lciIsIiRtb3VudCIsIiRhcHBlbmRUbyIsImNvbnNvbGUiLCJsb2ciLCJzZWxmIiwiZGVmZXJyZWQiLCIkIiwiRGVmZXJyZWQiLCJ0aGVuIiwiJGRlc3Ryb3kiLCJmYWlsIiwicmVqZWN0IiwicHJvbWlzZSIsImljb25zQ29uZmlnIiwiZWRpdG9yVG9vbHMiLCJlZGl0b3JUb29sSW5kZXgiLCJ0b29sSW5kZXgiLCIuL3BhbmVsLmh0bWwiLCI2IiwibGF5ZXJOYW1lIiwidHlwZSIsImlzQ2hlY2siLCJhY3Rpb24iLCJlZGl0b3JDbGFzcyIsImxheWVyc1N0eWxlIiwibGF5ZXJzRWRpdGluZ1N0eWxlIiwiY3JlYXRlU3R5bGUiLCJzdHlsZU9wdGlvbnMiLCJpY29udXJsIiwib2wiLCJzdHlsZSIsIlN0eWxlIiwiaW1hZ2UiLCJJY29uIiwiYW5jaG9yIiwib2Zmc2V0Iiwic3JjIiwidXJsIiwiYWRkIiwiZGVsZXRlIiwiZWRpdCIsIm1vdmUiLCJ2ZWN0b3IiLCJlZGl0b3IiLCJjcnMiLCIuL2VkaXRvcnMvZ2Vvbm90ZXNlZGl0b3IiLCI3IiwiR2Vvbm90ZXNTZXJ2aWNlIiwiX21hcFNlcnZpY2UiLCJfbG9hZERhdGFPbk1hcFZpZXdDaGFuZ2VMaXN0ZW5lciIsIl9jdXJyZW50RWRpdGluZ0xheWVyIiwiX3BsdWdpblRvb2xzIiwic3RhcnRpbmdFZGl0aW5nVG9vbCIsInJldHJpZXZpbmdEYXRhIiwiaGFzRWRpdHMiLCJfbG9hZGVyIiwiVmVjdG9yTG9hZGVyTGF5ZXIiLCJfY3JzIiwiX2xheWVycyIsIl9lZGl0b3JDbGFzcyIsIl9sYXllcnNTdHlsZSIsIl9sYXllcnNFZGl0aW5nU3R5bGUiLCJfY3VzdG9tVXJsUGFyYW1ldGVycyIsImluZm91cmwiLCJzZXRMYXllclN0eWxlIiwib3B0aW9uc19sb2FkZXIiLCJiYXNldXJsIiwibWFwU2VydmljZSIsIm1vZGUiLCJlbWl0IiwiaW50ZXJhY3Rpb24iLCJjdXJyZW50RWRpdGluZ0xheWVyIiwiX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIiLCJhY3RpdmVUb29sIiwiZ2V0QWN0aXZlVG9vbCIsImluc3RhbmNlIiwib3duc0ludGVyYWN0aW9uIiwiX3N0b3BFZGl0aW5nVG9vbCIsIkxheWVyIiwibGF5ZXJJZCIsImxheWVyIiwiZ2V0UHJvamVjdCIsImdldExheWVyQnlJZCIsImdldE9yaWdOYW1lIiwicGx1Z2luVG9vbHNTZXJ2aWNlIiwiX3BsdWdpblRvb2xzU2VydmljZSIsImdldFBsdWdpblRvb2xzIiwia2V5IiwiZ2V0TGF5ZXJTdHlsZSIsIl90b2dnbGVDaGVja0JveFBsdWdpblRvb2wiLCJwbHVnaW5Ub29scyIsImdldFN0YXRlIiwidG9vbHNHcm91cHMiLCJ2ZWN0b3JMYXllciIsInBsdWdpblRvb2wiLCJpbmRleCIsImhhcyIsInRvb2xDb25maWciLCJ1cGRhdGVUb29sc0dyb3VwIiwic2V0VmlzaWJsZSIsImlzVmlzaWJsZSIsImlzUmVhZHkiLCJsb2FkTGF5ZXJzIiwiX2FkZFRvTWFwIiwiX2NhbmNlbE9yU2F2ZSIsIl9zdG9wRWRpdGluZyIsIl9zdGFydEVkaXRpbmciLCJfc2F2ZVdpdGhvdXRBc2siLCJfc3RhcnRFZGl0aW5nVG9vbCIsImlzU3RhcnRlZCIsIl9zdG9wRWRpdG9yIiwiZ2V0TGF5ZXJDb2RlcyIsInZhbHVlcyIsIl9zZXRVcFZlY3RvckxheWVyIiwiX3NldFVwRWRpdG9yIiwib3B0aW9uc19lZGl0b3IiLCJmb3JtQ2xhc3MiLCJGb3JtQ2xhc3MiLCJlZGl0aW5nVmVjdG9yU3R5bGUiLCJzZXRWZWN0b3JMYXllciIsImRpcnR5Iiwic2V0TW9kZSIsInZlY3RvckxheWVyc0NvZGVzIiwiZ2V0VmVjdG9yTGF5ZXJzQ29kZXMiLCJsb2NrRmVhdHVyZXMiLCJub3RpZnkiLCJlcnJvciIsInJlc2V0IiwiX3VubG9ja0xheWVyIiwiX3VwZGF0ZUVkaXRpbmdTdGF0ZSIsIl9jbGVhblVwIiwiY2xlYW5VcExheWVycyIsIl9zdGFydEVkaXRvciIsInN0YXJ0IiwiX3NldEN1cnJlbnRFZGl0aW5nTGF5ZXIiLCJjYW5TdGFydFRvb2wiLCJzZXRUb29sIiwicmV0Iiwic3RvcFRvb2wiLCJkaXJ0eUVkaXRvcnMiLCJpc0RpcnR5IiwiX3NhdmVFZGl0cyIsInJlc3VsdCIsIl9hc2tUeXBlIiwia2V5cyIsIl9hc2tDYW5jZWxPclNhdmUiLCJidXR0b25UeXBlcyIsIlNBVkUiLCJsYWJlbCIsImNsYXNzTmFtZSIsImNhbGxiYWNrIiwiTk9TQVZFIiwiQ0FOQ0VMIiwiYnV0dG9ucyIsInNhdmUiLCJub3NhdmUiLCJjYW5jZWwiLCJkaWFsb2ciLCJfc2VuZEVkaXRzIiwicmVzcG9uc2UiLCJzdWNjZXNzIiwiX2NvbW1pdEVkaXRzIiwiZXJyb3JzIiwiZWRpdHNUb1B1c2giLCJtYXAiLCJsYXllcm5hbWUiLCJnZXRWZWN0b3JMYXllciIsImVkaXRzIiwiZ2V0RWRpdGVkRmVhdHVyZXMiLCJfcG9zdERhdGEiLCJyZXR1cm5lZCIsImVkaXRvcnMiLCJ1cGRhdGVkRmVhdHVyZUF0dHJpYnV0ZXMiLCJvbGRmaWQiLCJjbGllbnRpZCIsImZpZCIsImdldEVkaXRWZWN0b3JMYXllciIsInNldEZlYXR1cmVEYXRhIiwibmV3X2xvY2tpZHMiLCJuZXdsb2NrSWQiLCJhZGRMb2NrSWQiLCJjb21taXQiLCJfdW5kb0VkaXRzIiwiY3VycmVudEVkaXRpbmdMYXllckNvZGUiLCJfdXBkYXRlVG9vbFN0ZXBzU3RhdGUiLCJnZXRUb29sIiwidG9vbEluc3RhbmNlIiwic3RlcHMiLCJfc2V0VG9vbFN0ZXBTdGF0ZSIsInN0ZXAiLCJpc1VuZGVmaW5lZCIsIm1lc3NhZ2VzIiwidG9vbFN0ZXBzTWVzc2FnZXMiLCJjdXJyZW50U3RlcEluZGV4IiwidG90YWxTdGVwcyIsInZpZXdlciIsImFkZFRvTWFwIiwibG9hZEFsbFZlY3RvcnNEYXRhIiwiX3Bvc3RCYXRjaERhdGEiLCJmb3JtIiwiSlNPTiIsInN0cmluZ2lmeSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiYWpheCIsImRhdGFUeXBlIiwiY29udGVudFR5cGUiLCJwcm9jZXNzRGF0YSIsIm11bHRpRWRpdHNUb1B1c2giLCJqc29uRGF0YSIsInBvc3QiLCJfdW5sb2NrIiwiX2xvY2tMYXllciIsImZlYXR1cmVMb2NrcyIsIl92ZWN0b3JMYXllcnNEYXRhIiwiZmVhdHVyZWxvY2tzIiwiX2xvY2tMYXllcnMiLCJnZXQiLCJnZXRMb2FkZXIiLCJHM1dPYmplY3QiLCJWZWN0b3JMYXllckxvYWRlciIsIi4vZWRpdG9ycy9hdHRyaWJ1dGVzZm9ybSJdLCJtYXBwaW5ncyI6IkNBQUEsUUFBVUEsR0FBRUMsRUFBRUMsRUFBRUMsR0FBRyxRQUFTQyxHQUFFQyxFQUFFQyxHQUFHLElBQUlKLEVBQUVHLEdBQUcsQ0FBQyxJQUFJSixFQUFFSSxHQUFHLENBQUMsR0FBSUUsR0FBa0Isa0JBQVRDLFVBQXFCQSxPQUFRLEtBQUlGLEdBQUdDLEVBQUUsTUFBT0EsR0FBRUYsR0FBRSxFQUFJLElBQUdJLEVBQUUsTUFBT0EsR0FBRUosR0FBRSxFQUFJLElBQUlLLEdBQUUsR0FBSUMsT0FBTSx1QkFBdUJOLEVBQUUsSUFBSyxNQUFNSyxHQUFFRSxLQUFLLG1CQUFtQkYsRUFBRSxHQUFJRyxHQUFFWCxFQUFFRyxJQUFJUyxXQUFZYixHQUFFSSxHQUFHLEdBQUdVLEtBQUtGLEVBQUVDLFFBQVEsU0FBU2QsR0FBRyxHQUFJRSxHQUFFRCxFQUFFSSxHQUFHLEdBQUdMLEVBQUcsT0FBT0ksR0FBRUYsRUFBRUEsRUFBRUYsSUFBSWEsRUFBRUEsRUFBRUMsUUFBUWQsRUFBRUMsRUFBRUMsRUFBRUMsR0FBRyxNQUFPRCxHQUFFRyxHQUFHUyxRQUFrRCxJQUFJLEdBQTFDTCxHQUFrQixrQkFBVEQsVUFBcUJBLFFBQWdCSCxFQUFFLEVBQUVBLEVBQUVGLEVBQUVhLE9BQU9YLElBQUlELEVBQUVELEVBQUVFLEdBQUksT0FBT0QsS0FBS2EsR0FBRyxTQUFTVCxFQUFRVSxFQUFPSixHQVV2ZCxRQUFTSyxHQUFZQyxHQUNuQkMsRUFBS0MsS0FBS0YsR0FDVkUsS0FBS0MsV0FBYUMsRUFYcEIsR0FBSUMsR0FBVUMsT0FBT0MsS0FBS0MsTUFBTUgsUUFDNUJKLEVBQU9LLE9BQU9DLEtBQUtDLE1BQU1QLEtBQ3pCUSxFQUFZSCxPQUFPSSxJQUFJRCxVQUN2QkUsRUFBT0wsT0FBT0ksSUFBSUMsS0FFbEJQLEVB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LE9BQU9DLEtBQUttVixVQUN4QmpVLEVBQU1uQixPQUFPSSxJQUFJZSxJQUNqQjhKLEVBQW9CakwsT0FBT0MsS0FBS29WLGtCQUNoQ3ZHLEVBQVloUSxFQUFRLDJCQXF5QnhCaUIsR0FBUXlLLEVBQWlCNEssR0FDekI1VixFQUFPSixRQUFVLEdBQUlvTCxLQUNsQjhLLDJCQUEyQixTQUFTIiwiZmlsZSI6ImJ1aWxkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIGluaGVyaXQgPSBnM3dzZGsuY29yZS51dGlscy5pbmhlcml0O1xudmFyIGJhc2UgPSBnM3dzZGsuY29yZS51dGlscy5iYXNlO1xudmFyIEZvcm1QYW5lbCA9IGczd3Nkay5ndWkuRm9ybVBhbmVsO1xudmFyIEZvcm0gPSBnM3dzZGsuZ3VpLkZvcm07XG5cbnZhciBHZW9ub3RlRm9ybVBhbmVsID0gRm9ybVBhbmVsLmV4dGVuZCh7XG4gIC8vdGVtcGxhdGU6IHJlcXVpcmUoJy4vYXR0cmlidXRlc2Zvcm0uaHRtbCcpXG59KTtcblxuZnVuY3Rpb24gR2Vvbm90ZUZvcm0ob3B0aW9ucyl7XG4gIGJhc2UodGhpcyxvcHRpb25zKTtcbiAgdGhpcy5fZm9ybVBhbmVsID0gR2Vvbm90ZUZvcm1QYW5lbDtcbn1cbmluaGVyaXQoR2Vvbm90ZUZvcm0sRm9ybSk7XG5cbm1vZHVsZS5leHBvcnRzID0gR2Vvbm90ZUZvcm07XG5cbn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIGluaGVyaXQgPSBnM3dzZGsuY29yZS51dGlscy5pbmhlcml0O1xudmFyIGJhc2UgPSBnM3dzZGsuY29yZS51dGlscy5iYXNlO1xudmFyIEVkaXRvciA9IGczd3Nkay5jb3JlLkVkaXRvcjtcbnZhciBQbHVnaW5TZXJ2aWNlID0gcmVxdWlyZSgnLi4vcGx1Z2luc2VydmljZScpO1xudmFyIEZvcm0gPSByZXF1aXJlKCcuL2F0dHJpYnV0ZXNmb3JtJyk7XG52YXIgZm9ybSA9IG51bGw7IC8vIGJydXR0byBtYSBkZXZvIHRlbmVybG8gZXN0ZXJubyBzZW5uw7Igc2kgY3JlYSB1biBjbGljbyBkaSByaWZlcmltZW50aSBjaGUgbWFuZGEgaW4gcGFsbGEgVnVlXG5cblxuZnVuY3Rpb24gR2Vvbm90ZXNFZGl0b3Iob3B0aW9ucykge1xuXG4gIC8vIGluIHF1ZXN0byBtb2RvIHBhc3NpYW1vIGlsIG1hcHNlcnZpY2UgY29tZSBhcmdvbWVudG8gYWwgc3VwZXJjbGFzcyAoZWRpdG9yKVxuICAvLyBkaSBpdGVybmV0ZWRpdG9yIGluIG1vZG8gZGEgYXNzZWduYXJhZSBhbmNoZSBhIGl0ZXJuZXRlZGl0b3IgaWwgbWFwc2VydmVpY2UgY2hlIHhzZXJ2aXLDoCBhZCBlc2VtcGlvIGFkIGFnZ2l1bmdlcmVcbiAgLy8gbCdpbnRlcmFjdGlvbiBhbGxhIG1hcHBhIHF1YW5kbyB2aWVuZSBjbGljY2F0byBzdSB1biB0b29sXG4gIG9wdGlvbnMuZm9ybVRvb2xzID0gW107XG4gIGJhc2UodGhpcywgb3B0aW9ucyk7XG4gIHZhciBzYXZlRWRpdHNUb0RhdGFiYXNlID0gZnVuY3Rpb24oKSB7XG4gICAgUGx1Z2luU2VydmljZS5zYXZlRWRpdHMoKTtcbiAgfTtcbiAgLy90aGlzLl9zYXZlRWRpdHMgPSBfLmJpbmQoUGx1Z2luU2VydmljZS5zYXZlRWRpdHMsIFBsdWdpblNlcnZpY2UpO1xuICAvLyBhcHJlIGZvcm0gYXR0cmlidXRpIHBlciBpICBuc2VyaW1lbnRvXG5cbiAgdGhpcy5vbmFmdGVyKCdhZGRGZWF0dXJlJywgc2F2ZUVkaXRzVG9EYXRhYmFzZSk7XG4gIHRoaXMub25hZnRlcignZGVsZXRlRmVhdHVyZScsIHNhdmVFZGl0c1RvRGF0YWJhc2UpO1xuICB0aGlzLm9uYWZ0ZXIoJ21vdmVGZWF0dXJlJywgc2F2ZUVkaXRzVG9EYXRhYmFzZSk7XG4gIHRoaXMub25hZnRlcigncGlja0ZlYXR1cmUnLCBzYXZlRWRpdHNUb0RhdGFiYXNlKTtcblxuICAvLyBhcHJlIGZvcm0gYXR0cmlidXRpIHBlciBpbnNlcmltZW50b1xufVxuXG5pbmhlcml0KEdlb25vdGVzRWRpdG9yLCBFZGl0b3IpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdlb25vdGVzRWRpdG9yO1xufSx7XCIuLi9wbHVnaW5zZXJ2aWNlXCI6NyxcIi4vYXR0cmlidXRlc2Zvcm1cIjoxfV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vLyBTREsgLy8vXG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgYmFzZSA9IGczd3Nkay5jb3JlLnV0aWxzLmJhc2U7XG52YXIgUGx1Z2luID0gZzN3c2RrLmNvcmUuUGx1Z2luO1xudmFyIEdVSSA9IGczd3Nkay5ndWkuR1VJO1xudmFyIFByb2plY3RzUmVnaXN0cnkgPSBnM3dzZGsuY29yZS5Qcm9qZWN0c1JlZ2lzdHJ5O1xuLy8vIFBMVUdJTiAvL1xudmFyIHBsdWdpbkNvbmZpZyA9IHJlcXVpcmUoJ3BsdWdpbmNvbmZpZycpO1xudmFyIFNlcnZpY2UgPSByZXF1aXJlKCcuL3BsdWdpbnNlcnZpY2UnKTtcbnZhciBFZGl0aW5nUGFuZWwgPSByZXF1aXJlKCcuL3BhbmVsJyk7XG5cbnZhciBfUGx1Z2luID0gZnVuY3Rpb24oKSB7XG5cbiAgYmFzZSh0aGlzKTtcbiAgdGhpcy5uYW1lID0gJ25vdGVzJztcbiAgdGhpcy5jb25maWcgPSBudWxsO1xuICB0aGlzLnNlcnZpY2UgPSBudWxsO1xuICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy9zZXR0byBpbCBzZXJ2aXppb1xuICAgIHRoaXMuc2V0UGx1Z2luU2VydmljZShTZXJ2aWNlKTtcbiAgICAvL3JlY3VwZXJvIGNvbmZpZ3VyYXppb25lIGRlbCBwbHVnaW5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMuZ2V0UGx1Z2luQ29uZmlnKCk7XG4gICAgdGhpcy5zZXRVcEljb25zVXJsKHRoaXMuY29uZmlnLmxheWVycyk7XG4gICAgLy9yZWdpdHJvIGlsIHBsdWdpblxuICAgIGlmICh0aGlzLnJlZ2lzdGVyUGx1Z2luKHRoaXMuY29uZmlnLmdpZCkpIHtcbiAgICAgIGlmICghR1VJLnJlYWR5KSB7XG4gICAgICAgIEdVSS5vbigncmVhZHknLCBfLmJpbmQodGhpcy5zZXR1cEd1aSwgdGhpcykpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0dXBHdWkoKTtcbiAgICAgIH1cbiAgICAgIC8vaW5pemlhbGl6em8gaWwgc2Vydml6aW8uIElsIHNlcnZpemlvIMOoIGwnaXN0YW56YSBkZWxsYSBjbGFzc2Ugc2Vydml6aW9cbiAgICAgIHBsdWdpbkNvbmZpZy5jdXN0b21VcmxQYXJhbWV0ZXJzID0gdGhpcy5jcmVhdGVQbHVnaW5DdXN0b21VcmxQYXJhbWV0ZXJzKCk7XG4gICAgICB0aGlzLnNlcnZpY2UuaW5pdCh0aGlzLmNvbmZpZywgcGx1Z2luQ29uZmlnKTtcbiAgICB9XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSB1bmEgdm9sdGEgY2hlIGxhIEdVSSBoYSBlbWVzc28gbCdldmVudG8gJ3JlYWR5J1xuICAvLyBzZXJ2ZSBhIG1vbnRhcmUgaSBjb21wb2VudGkgZGVsIHBsdWdpbiBzdWxsYSBzaWRlYmFyXG4gIHRoaXMuc2V0dXBHdWkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdG9vbHNDb21wb25lbnQgPSBHVUkuZ2V0Q29tcG9uZW50KCd0b29scycpO1xuICAgIHZhciB0b29sc1NlcnZpY2UgPSB0b29sc0NvbXBvbmVudC5nZXRTZXJ2aWNlKCk7XG4gICAgdmFyIHRvb2xzID0gcGx1Z2luQ29uZmlnLnRvb2xzKHRoaXMpO1xuICAgIHRoaXMuc2VydmljZS5zZXRQbHVnaW5Ub29scyh0b29scyk7XG4gICAgdGhpcy5zZXJ2aWNlLnNldFBsdWdpblRvb2xzU2VydmljZSh0b29sc1NlcnZpY2UpO1xuICAgIHRvb2xzU2VydmljZS5hZGRUb29scygxICwnR0VPTk9URVMnLCB0b29scyk7XG5cbiAgfTtcbiAgLy8gYXppb25pIGNoZSBzb25vIGxlZ2F0aSBhaSB0b29sc1xuICB0aGlzLnRvb2xzQWN0aW9ucyA9IHtcbiAgICBzaG93SGlkZUxheWVyOiAgZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnNlcnZpY2Uuc2hvd0hpZGVMYXllcihwbHVnaW5Db25maWcubGF5ZXJzQ29kZS5HRU9OT1RFUyk7XG4gICAgfSxcbiAgICBzaG93RWRpdGluZ1BhbmVsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYW5lbCA9IG5ldyBFZGl0aW5nUGFuZWwoKTtcbiAgICAgIF8uZm9yRWFjaCh0aGlzLmNvbmZpZy5sYXllcnMsIGZ1bmN0aW9uKGxheWVyQ29uZmlnLCBsYXllckNvZGUpIHtcbiAgICAgICAgcGFuZWwuc2V0SWNvbnNUb29sKGxheWVyQ29kZSwgbGF5ZXJDb25maWcuaWNvbnRvb2xzKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zZXJ2aWNlLnRvZ2dsZUVkaXRpbmcoKTtcbiAgICAgIEdVSS5zaG93UGFuZWwocGFuZWwpO1xuICAgIH0sXG4gICAgaXNDaGVja2VkIDogZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLmlzTGF5ZXJWaXNpYmxlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vc2V0dXBQbHVnaW5DdXN0b21QYXJhbWV0ZXJzXG4gIHRoaXMuY3JlYXRlUGx1Z2luQ3VzdG9tVXJsUGFyYW1ldGVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjdXN0b21VcmxQYXJhbWV0ZXJzPScmJztcbiAgICB2YXIgY3VycmVudFByb2plY3QgPSBQcm9qZWN0c1JlZ2lzdHJ5LmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY3VzdG9tVXJsUGFyYW1ldGVycys9J3Byb2plY3RfdHlwZT0nK2N1cnJlbnRQcm9qZWN0LmdldFR5cGUoKSsnJnByb2plY3RfaWQ9JytjdXJyZW50UHJvamVjdC5nZXRJZCgpO1xuICAgIHJldHVybiBjdXN0b21VcmxQYXJhbWV0ZXJzXG4gIH07XG4gIC8vIHNldHVwIGljb25VcmwgZm9yIExheWVyXG4gIHRoaXMuc2V0VXBJY29uc1VybCA9IGZ1bmN0aW9uKGxheWVyc0NvbmZpZykge1xuICAgIF8uZm9yRWFjaChsYXllcnNDb25maWcsIGZ1bmN0aW9uKGxheWVyQ29uZmlnKSB7XG4gICAgICBwbHVnaW5Db25maWcubGF5ZXJzW2xheWVyQ29uZmlnLm5hbWVdLmljb25zID0gbGF5ZXJDb25maWcuaWNvbnM7XG4gICAgfSlcbiAgfTtcblxuICB0aGlzLnNldHVwVG9vbHNBY3Rpb24gPSBmdW5jdGlvbih0b29scykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBfLmZvckVhY2godG9vbHMsIGZ1bmN0aW9uKHRvb2wpe1xuICAgICAgLy9UT0RPXG4gICAgfSlcbiAgfTtcblxufTtcblxuaW5oZXJpdChfUGx1Z2luLCBQbHVnaW4pO1xuXG4oZnVuY3Rpb24ocGx1Z2luKXtcbiAgcGx1Z2luLmluaXQoKTtcbn0pKG5ldyBfUGx1Z2luKTtcblxuXG5cblxufSx7XCIuL3BhbmVsXCI6NSxcIi4vcGx1Z2luc2VydmljZVwiOjcsXCJwbHVnaW5jb25maWdcIjo2fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiZzN3LWl0ZXJuZXQtZWRpdGluZy1wYW5lbFxcXCI+XFxuICA8dGVtcGxhdGUgdi1mb3I9XFxcInRvb2xiYXIgaW4gZWRpdG9yc3Rvb2xiYXJzXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwicGFuZWwgcGFuZWwtcHJpbWFyeVxcXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwicGFuZWwtaGVhZGluZ1xcXCI+XFxuICAgICAgICA8aDMgY2xhc3M9XFxcInBhbmVsLXRpdGxlXFxcIj57eyB0b29sYmFyLm5hbWUgfX08L2gzPlxcbiAgICAgIDwvZGl2PlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcInBhbmVsLWJvZHlcXFwiPlxcbiAgICAgICAgPHRlbXBsYXRlIHYtZm9yPVxcXCJ0b29sIGluIHRvb2xiYXIudG9vbHNcXFwiPlxcbiAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJlZGl0YnRuXFxcIiA6Y2xhc3M9XFxcInsnZW5hYmxlZCcgOiAoc3RhdGUuZWRpdGluZy5vbiAmJiBlZGl0aW5ndG9vbGJ0bkVuYWJsZWQodG9vbCkpLCAndG9nZ2xlZCcgOiBlZGl0aW5ndG9vbGJ0blRvZ2dsZWQodG9vbGJhci5sYXllcmNvZGUsIHRvb2wudG9vbHR5cGUpfVxcXCI+XFxuICAgICAgICAgICAgPGltZyBoZWlnaHQ9XFxcIjMwcHhcXFwiIHdpZHRoPVxcXCIzMHB4XFxcIiBAY2xpY2s9XFxcInRvZ2dsZUVkaXRUb29sKHRvb2xiYXIubGF5ZXJjb2RlLCB0b29sLnRvb2x0eXBlKVxcXCIgOmFsdC5vbmNlPVxcXCJ0b29sLnRpdGxlXFxcIiA6dGl0bGUub25jZT1cXFwidG9vbC50aXRsZVxcXCIgOnNyYy5vbmNlPVxcXCJ0b29sLmljb25cXFwiPjwvaW1nPlxcbiAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvdGVtcGxhdGU+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgPC90ZW1wbGF0ZT5cXG4gIDxkaXYgdi1zaG93PVxcXCJzdGF0ZS5yZXRyaWV2aW5nRGF0YVxcXCIgc3R5bGU9XFxcImNvbG9yOiNmZmZmZmZcXFwiPlxcbiAgICA8c3Bhbj5DYXJpY2FtZW50byBEYXRpIC4uLiA8L3NwYW4+PGltZyA6c3JjPVxcXCJyZXNvdXJjZXN1cmwgKydpbWFnZXMvbG9hZGVyLnN2ZydcXFwiPlxcbiAgPC9kaXY+XFxuICA8ZGl2IGNsYXNzPVxcXCJtZXNzYWdlXFxcIj5cXG4gICAge3t7IG1lc3NhZ2UgfX19XFxuICA8L2Rpdj5cXG48L2Rpdj5cXG5cIjtcblxufSx7fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgcmVzb2x2ZWRWYWx1ZSA9IGczd3Nkay5jb3JlLnV0aWxzLnJlc29sdmU7XG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgR1VJID0gZzN3c2RrLmd1aS5HVUk7XG4vLyBiYXNlIGNsYXNzIFBhbmVsXG52YXIgUGFuZWwgPSAgZzN3c2RrLmd1aS5QYW5lbDtcbnZhciBTZXJ2aWNlID0gcmVxdWlyZSgnLi9wbHVnaW5zZXJ2aWNlJyk7XG5cbnZhciBQYW5lbENvbXBvbmVudCA9IFZ1ZS5leHRlbmQoe1xuICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9wYW5lbC5odG1sJyksXG4gIGRhdGE6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbWFnZVBhdGggPSBHVUkuZ2V0UmVzb3VyY2VzVXJsKCkgKyAnaW1hZ2VzLydcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdGU6IFNlcnZpY2Uuc3RhdGUsXG4gICAgICByZXNvdXJjZXN1cmw6IEdVSS5nZXRSZXNvdXJjZXNVcmwoKSxcbiAgICAgIGVkaXRvcnN0b29sYmFyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJHZW9ub3Rlc1wiLFxuICAgICAgICAgIGxheWVyY29kZTogU2VydmljZS5sYXllckNvZGVzLkdFT05PVEVTLFxuICAgICAgICAgIHRvb2xzOltcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiQWdnaXVuZ2kgR2Vvbm90YVwiLFxuICAgICAgICAgICAgICAvLyB0b29sdHlwZSDDqCBsJ2F0dHJpYnV0byBjaGUgc2VydmVyIHBlciBzY2VnbGllcmUgaWwgdGlwbyBkaSB0b29sXG4gICAgICAgICAgICAgIC8vIGRlbGwnZWRpdG9yIGdlbmVyYWxlIGNoZSBkb3Zyw6AgZXNzZXJlIGltcG9zdGF0b1xuICAgICAgICAgICAgICB0b29sdHlwZTogJ2FkZGZlYXR1cmUnLFxuICAgICAgICAgICAgICBpY29udG9vbDogJ2FkZCcsXG4gICAgICAgICAgICAgIGljb246IGltYWdlUGF0aCArJ2l0ZXJuZXRBZGRQb2ludC5wbmcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJTcG9zdGEgR2Vvbm90YVwiLFxuICAgICAgICAgICAgICB0b29sdHlwZTogJ21vdmVmZWF0dXJlJyxcbiAgICAgICAgICAgICAgaWNvbnRvb2w6ICdtb3ZlJyxcbiAgICAgICAgICAgICAgaWNvbjogaW1hZ2VQYXRoICsgJ2l0ZXJuZXRNb3ZlUG9pbnQucG5nJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiUmltdW92aSBHZW9ub3RhXCIsXG4gICAgICAgICAgICAgIHRvb2x0eXBlOiAnZGVsZXRlZmVhdHVyZScsXG4gICAgICAgICAgICAgIGljb250b29sOiAnZGVsZXRlJyxcbiAgICAgICAgICAgICAgaWNvbjogaW1hZ2VQYXRoICsgJ2l0ZXJuZXREZWxldGVQb2ludC5wbmcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJFZGl0YSBnZW9ub3RhXCIsXG4gICAgICAgICAgICAgIHRvb2x0eXBlOiAnZWRpdGF0dHJpYnV0ZXMnLFxuICAgICAgICAgICAgICBpY29udG9vbDogJ2VkaXQnLFxuICAgICAgICAgICAgICBpY29uOiBpbWFnZVBhdGggKyAnZWRpdEF0dHJpYnV0ZXMucG5nJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHNhdmVidG5sYWJlbDogXCJTYWx2YVwiXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgLy9tZXRvZG8gY2hpYW1hdG8gcXVhbmRvIHNpIGNsaWNjYSBzdSBhdnZpYS90ZXJtaW5hIGVkaXRpbmdcbiAgICB0b2dnbGVFZGl0aW5nOiBmdW5jdGlvbigpIHtcbiAgICAgIFNlcnZpY2UudG9nZ2xlRWRpdGluZygpO1xuICAgIH0sXG4gICAgc2F2ZUVkaXRzOiBmdW5jdGlvbigpe1xuICAgICAgU2VydmljZS5zYXZlRWRpdHMoKTtcbiAgICB9LFxuICAgIC8vIGNoYWltYXRvIHF1YW5kbyBzaSBjbGljY2Egc3VsIHVuIHRvb2wgZGVsbCdlZGl0b3JcbiAgICAvLyBjb21lIGFkIGVzZW1waW8gIGFkZCBtb3ZlIGVkaXQgYXR0cmlidXRlcyBldGMgLi5cbiAgICB0b2dnbGVFZGl0VG9vbDogZnVuY3Rpb24obGF5ZXJDb2RlLCB0b29sVHlwZSkge1xuICAgICAgaWYgKHRvb2xUeXBlID09ICcnKXtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy92ZXJpZmljYSBzZSBsJ2VkaXRvciDDqCBpbiBlZGl0aW5nIG9uIHRydWVcbiAgICAgIGlmICh0aGlzLnN0YXRlLmVkaXRpbmcub24pIHtcbiAgICAgICAgU2VydmljZS50b2dnbGVFZGl0VG9vbChsYXllckNvZGUsIHRvb2xUeXBlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIG1ldG9kbyBjaGUgdmllbmUgY2hpYW1hdG8gcGVyIHZlcmlmaWNhcmUgZSBzZXR0YXJlXG4gICAgLy8gbGEgY2xhc3NlIChwcmVtdXRvIG8gbm8gZGVsIGJvdHRvbmUgdG9vbCBpbiBxdWVzdGlvbmUpXG4gICAgZWRpdGluZ3Rvb2xidG5Ub2dnbGVkOiBmdW5jdGlvbihsYXllckNvZGUsIHRvb2xUeXBlKSB7XG4gICAgICByZXR1cm4gKHRoaXMuc3RhdGUuZWRpdGluZy5sYXllckNvZGUgPT0gbGF5ZXJDb2RlICYmIHRoaXMuc3RhdGUuZWRpdGluZy50b29sVHlwZSA9PSB0b29sVHlwZSk7XG4gICAgfSxcbiAgICAvLyBmdW56aW9uZSBjaGUgdmVyaWZpY2Egc2UgYWJpbGl0YXJlIG8gbWVubyBpIGJvdHRvbmkgZGVpIHRvb2xzXG4gICAgZWRpdGluZ3Rvb2xidG5FbmFibGVkOiBmdW5jdGlvbih0b29sKXtcbiAgICAgIHJldHVybiB0b29sLnRvb2x0eXBlICE9ICcnO1xuICAgIH0sXG4gICAgb25DbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICBTZXJ2aWNlLnN0b3AoKTtcbiAgICB9XG4gIH0sXG4gIGNvbXB1dGVkOiB7XG4gICAgZWRpdGluZ2J0bmxhYmVsOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0YXRlLmVkaXRpbmcub24gPyBcIlRlcm1pbmEgZWRpdGluZ1wiIDogXCJBdnZpYSBlZGl0aW5nXCI7XG4gICAgfSxcbiAgICBlZGl0aW5nYnRuRW5hYmxlZDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gKHRoaXMuc3RhdGUuZWRpdGluZy5lbmFibGVkIHx8IHRoaXMuc3RhdGUuZWRpdGluZy5vbikgPyBcIlwiIDogXCJkaXNhYmxlZFwiO1xuICAgIH0sXG4gICAgbWVzc2FnZTogZnVuY3Rpb24oKXtcbiAgICAgIHZhciBtZXNzYWdlID0gXCJcIjtcbiAgICAgIGlmICghdGhpcy5zdGF0ZS5lZGl0aW5nLmVuYWJsZWQpe1xuICAgICAgICBtZXNzYWdlID0gJzxzcGFuIHN0eWxlPVwiY29sb3I6IHJlZFwiPkF1bWVudGFyZSBpbCBsaXZlbGxvIGRpIHpvb20gcGVyIGFiaWxpdGFyZSBsXFwnZWRpdGluZyc7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0aGlzLnN0YXRlLmVkaXRpbmcudG9vbHN0ZXAubWVzc2FnZSl7XG4gICAgICAgIHZhciBuID0gdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLm47XG4gICAgICAgIHZhciB0b3RhbCA9IHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC50b3RhbDtcbiAgICAgICAgdmFyIHN0ZXBtZXNzYWdlID0gdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLm1lc3NhZ2U7XG4gICAgICAgIG1lc3NhZ2UgPSAnPGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6MjBweFwiPkdVSURBIFNUUlVNRU5UTzo8L2Rpdj4nICtcbiAgICAgICAgICAnPGRpdj48c3Bhbj5bJytuKycvJyt0b3RhbCsnXSA8L3NwYW4+PHNwYW4gc3R5bGU9XCJjb2xvcjogeWVsbG93XCI+JytzdGVwbWVzc2FnZSsnPC9zcGFuPjwvZGl2Pic7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBFZGl0b3JQYW5lbCgpIHtcbiAgLy8gcHJvcHJpZXTDoCBuZWNlc3NhcmllLiBJbiBmdXR1cm8gbGUgbWV0dGVybW8gaW4gdW5hXG4gIC8vIGNsYXNzZSBQYW5lbCBkYSBjdWkgZGVyaXZlcmFubm8gdHV0dGkgaSBwYW5uZWxsaSBjaGUgdm9nbGlvbm8gZXNzZXJlIG1vc3RyYXRpIG5lbGxhIHNpZGViYXJcbiAgdGhpcy5pZCA9IFwiZ2Vvbm90ZXMtZWRpdGluZy1wYW5lbFwiO1xuICB0aGlzLm5hbWUgPSBcIkdlc3Rpb25lIGRhdGkgR0VPTk9URVNcIjtcbiAgdGhpcy5pbnRlcm5hbFBhbmVsID0gbmV3IFBhbmVsQ29tcG9uZW50KCk7XG59XG5cbmluaGVyaXQoRWRpdG9yUGFuZWwsIFBhbmVsKTtcblxudmFyIHByb3RvID0gUGFuZWwucHJvdG90eXBlO1xuXG4vLyB2aWVuZSByaWNoaWFtYXRvIGRhbGxhIHRvb2xiYXJcbi8vIHF1YW5kbyBpbCBwbHVnaW4gY2hpZWRlIGRpIG1vc3RyYXJlIHVuIHByb3ByaW8gcGFubmVsbG8gbmVsbGEgR1VJIChHVUkuc2hvd1BhbmVsKVxucHJvdG8ub25TaG93ID0gZnVuY3Rpb24oY29udGFpbmVyKSB7XG4gIHZhciBwYW5lbCA9IHRoaXMuaW50ZXJuYWxQYW5lbDtcbiAgcGFuZWwuJG1vdW50KCkuJGFwcGVuZFRvKGNvbnRhaW5lcik7XG4gIHJldHVybiByZXNvbHZlZFZhbHVlKHRydWUpO1xufTtcblxuLy8gcmljaGlhbWF0byBxdWFuZG8gbGEgR1VJIGNoaWVkZSBkaSBjaGl1ZGVyZSBpbCBwYW5uZWxsby4gU2Ugcml0b3JuYSBmYWxzZSBpbCBwYW5uZWxsbyBub24gdmllbmUgY2hpdXNvXG5wcm90by5vbkNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIGNvbnNvbGUubG9nKCdjbG9zZScpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgU2VydmljZS5zdG9wKClcbiAgLnRoZW4oZnVuY3Rpb24oKXtcbiAgICBzZWxmLmludGVybmFsUGFuZWwuJGRlc3Ryb3kodHJ1ZSk7XG4gICAgc2VsZi5pbnRlcm5hbFBhbmVsID0gbnVsbDtcbiAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gIH0pXG4gIC5mYWlsKGZ1bmN0aW9uKCl7XG4gICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gIH0pO1xuICBcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbn07XG5cbnByb3RvLnNldEljb25zVG9vbCA9IGZ1bmN0aW9uKGxheWVyQ29kZSwgaWNvbnNDb25maWcpIHtcbiAgdmFyIGVkaXRvclRvb2xzID0gdGhpcy5pbnRlcm5hbFBhbmVsLmVkaXRvcnN0b29sYmFycztcbiAgXy5mb3JFYWNoKGVkaXRvclRvb2xzLCBmdW5jdGlvbih0b29sLCBlZGl0b3JUb29sSW5kZXgpIHtcbiAgICBpZiAobGF5ZXJDb2RlID09IHRvb2wubGF5ZXJjb2RlKSB7XG4gICAgICBfLmZvckVhY2godG9vbC50b29scywgZnVuY3Rpb24odG9vbCwgdG9vbEluZGV4KSB7XG4gICAgICAgIGlmIChpY29uc0NvbmZpZ1t0b29sLmljb250b29sXSkge1xuICAgICAgICAgIGVkaXRvclRvb2xzW2VkaXRvclRvb2xJbmRleF0udG9vbHNbdG9vbEluZGV4XS5pY29uID0gaWNvbnNDb25maWdbdG9vbC5pY29udG9vbF07XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9KVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFZGl0b3JQYW5lbDtcblxufSx7XCIuL3BhbmVsLmh0bWxcIjo0LFwiLi9wbHVnaW5zZXJ2aWNlXCI6N31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy9RdWkgY2kgc29ubyBnbGkgZWRpdG9yIChjbGFzc2kpIHVzYXRpIGRhaSB2YXJpIGxheWVyXG52YXIgR2Vvbm90ZXNFZGl0b3IgPSByZXF1aXJlKCcuL2VkaXRvcnMvZ2Vvbm90ZXNlZGl0b3InKTtcblxuLy9kZWZpbmlzY28gaSBjb2RpY2kgbGF5ZXJcbnZhciBsYXllckNvZGVzID0gdGhpcy5sYXllckNvZGVzID0ge1xuICAgIEdFT05PVEVTOiAnbm90ZSdcbn07XG4vLyBjbGFzc2kgZWRpdG9yXG52YXIgZWRpdG9yQ2xhc3MgPSB7fTtcbmVkaXRvckNsYXNzW2xheWVyQ29kZXMuR0VPTk9URVNdID0gR2Vvbm90ZXNFZGl0b3I7XG5cbi8vZGVmaW5pc2NvIGxheWVyIGRlbCBwbHVnaW4gY29tZSBvZ2dldHRvXG52YXIgbGF5ZXJzID0ge307XG52YXIgbGF5ZXJzU3R5bGUgPSB7fTtcbi8vc3R5bGUgZWRpdGluZ1xudmFyIGxheWVyc0VkaXRpbmdTdHlsZSA9IHt9O1xuLy9sYXllclxuLy9sYXllciBTdHlsZVxudmFyIGNyZWF0ZVN0eWxlID0gZnVuY3Rpb24oc3R5bGVPcHRpb25zKSB7XG4gIHZhciBpY29udXJsID0gc3R5bGVPcHRpb25zLmljb251cmw7XG4gIHJldHVybiBuZXcgb2wuc3R5bGUuU3R5bGUoe1xuICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuSWNvbigoe1xuICAgICAgYW5jaG9yOiBbMC41LCAwLjVdLFxuICAgICAgb2Zmc2V0OiBbMCwgMF0sXG4gICAgICBzcmM6IGljb251cmxcbiAgICB9KSlcbiAgfSk7XG59O1xuXG5sYXllcnNTdHlsZVtsYXllckNvZGVzLkdFT05PVEVTXSA9IHtcblxuICB1cmw6IGNyZWF0ZVN0eWxlLFxuICBhZGQ6IGNyZWF0ZVN0eWxlLFxuICBkZWxldGU6IGNyZWF0ZVN0eWxlLFxuICBlZGl0OiBjcmVhdGVTdHlsZSxcbiAgbW92ZTogY3JlYXRlU3R5bGVcblxufTtcblxubGF5ZXJzRWRpdGluZ1N0eWxlW2xheWVyQ29kZXMuR0VPTk9URVNdID0ge307XG5cbmxheWVyc1tsYXllckNvZGVzLkdFT05PVEVTXSA9IHtcbiAgbGF5ZXJDb2RlOiBsYXllckNvZGVzLkdFT05PVEVTLFxuICB2ZWN0b3I6IG51bGwsXG4gIGVkaXRvcjogbnVsbCxcbiAgaWNvbnVybDogbnVsbCxcbiAgY3JzOiBudWxsLFxuICAvL2RlZmluaXNjbyBsbyBzdGlsZVxuICBzdHlsZTogbGF5ZXJzU3R5bGVbbGF5ZXJDb2Rlcy5HRU9OT1RFU11cbn07XG5cblxuXG4vLyBkZWZpbmlzY28gaSB0b29sc1xuZnVuY3Rpb24gdG9vbHMocGx1Z2luKSB7XG4gIHJldHVybiB0b29scyA9IFtcbiAgICB7XG4gICAgICBuYW1lOiBcIkdlb25vdGVzXCIsXG4gICAgICBsYXllck5hbWU6ICdub3RlJyxcbiAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICBpc0NoZWNrOiBmYWxzZSxcbiAgICAgIGFjdGlvbjogXy5iaW5kKHBsdWdpbi50b29sc0FjdGlvbnMuc2hvd0hpZGVMYXllciwgcGx1Z2luKVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJFZGl0YSBHZW9ub3Rlc1wiLFxuICAgICAgYWN0aW9uOiBfLmJpbmQocGx1Z2luLnRvb2xzQWN0aW9ucy5zaG93RWRpdGluZ1BhbmVsLCBwbHVnaW4pXG4gICAgfVxuICBdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBsYXllcnNDb2RlOiBsYXllckNvZGVzLFxuICAgIGxheWVyczogbGF5ZXJzLFxuICAgIGxheWVyc1N0eWxlOiBsYXllcnNTdHlsZSxcbiAgICBsYXllcnNFZGl0aW5nU3R5bGU6IGxheWVyc0VkaXRpbmdTdHlsZSxcbiAgICBlZGl0b3JDbGFzczogZWRpdG9yQ2xhc3MsXG4gICAgdG9vbHM6IHRvb2xzXG59O1xuXG59LHtcIi4vZWRpdG9ycy9nZW9ub3Rlc2VkaXRvclwiOjJ9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBpbmhlcml0ID0gZzN3c2RrLmNvcmUudXRpbHMuaW5oZXJpdDtcbnZhciBHM1dPYmplY3QgPSBnM3dzZGsuY29yZS5HM1dPYmplY3Q7XG52YXIgR1VJID0gZzN3c2RrLmd1aS5HVUk7XG52YXIgVmVjdG9yTG9hZGVyTGF5ZXIgPSBnM3dzZGsuY29yZS5WZWN0b3JMYXllckxvYWRlcjtcbnZhciBGb3JtQ2xhc3MgPSByZXF1aXJlKCcuL2VkaXRvcnMvYXR0cmlidXRlc2Zvcm0nKTtcblxuZnVuY3Rpb24gR2Vvbm90ZXNTZXJ2aWNlKCkge1xuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgLy9xdWkgdmFkbyAgYSBzZXR0YXJlIGlsIG1hcHNlcnZpY2VcbiAgdGhpcy5fbWFwU2VydmljZSA9IG51bGw7XG4gIHRoaXMuX2xvYWREYXRhT25NYXBWaWV3Q2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICB0aGlzLl9jdXJyZW50RWRpdGluZ0xheWVyID0gbnVsbDtcbiAgdGhpcy5fcGx1Z2luVG9vbHMgPSBudWxsO1xuXG4gIHRoaXMuc3RhdGUgPSB7XG4gICAgZWRpdGluZzoge1xuICAgICAgb246IGZhbHNlLFxuICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICBsYXllckNvZGU6IG51bGwsXG4gICAgICB0b29sVHlwZTogbnVsbCxcbiAgICAgIHN0YXJ0aW5nRWRpdGluZ1Rvb2w6IGZhbHNlLFxuICAgICAgdG9vbHN0ZXA6IHtcbiAgICAgICAgbjogbnVsbCxcbiAgICAgICAgdG90YWw6IG51bGwsXG4gICAgICAgIG1lc3NhZ2U6IG51bGxcbiAgICAgIH1cbiAgICB9LFxuICAgIHJldHJpZXZpbmdEYXRhOiBmYWxzZSxcbiAgICBoYXNFZGl0czogZmFsc2VcbiAgfTtcblxuICAvL2RlZmluaXNjbyBpbCBsb2FkZXIgZGVsIHBsdWdpblxuICB0aGlzLl9sb2FkZXIgPSBuZXcgVmVjdG9yTG9hZGVyTGF5ZXI7XG4gIC8vIHZpbmNvbGkgYWxsYSBwb3NzaWJpbGl0w6AgIGRpIGF0dGl2YXJlIGwnZWRpdGluZ1xuICB2YXIgZWRpdGluZ0NvbnN0cmFpbnRzID0ge1xuICAgIC8vcmVzb2x1dGlvbjogMSAvLyB2aW5jb2xvIGRpIHJpc29sdXppb25lIG1hc3NpbWFcbiAgfTtcbiAgLy8gaW5pemlhbGl6emF6aW9uZSBkZWwgcGx1Z2luXG4gIC8vIGNoaWFtdG8gZGFsbCAkc2NyaXB0KHVybCkgZGVsIHBsdWdpbiByZWdpc3RyeVxuICB0aGlzLmluaXQgPSBmdW5jdGlvbihjb25maWcsIHBsdWdpbkNvbmZpZykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9jcnMgPSBudWxsO1xuICAgIHRoaXMuX2xheWVycyA9IHBsdWdpbkNvbmZpZy5sYXllcnM7XG4gICAgdGhpcy5fZWRpdG9yQ2xhc3MgPSBwbHVnaW5Db25maWcuZWRpdG9yQ2xhc3M7XG4gICAgdGhpcy5sYXllckNvZGVzID0gcGx1Z2luQ29uZmlnLmxheWVyc0NvZGU7XG4gICAgLy8gc3RpbGkgZGVpIGxheWVyXG4gICAgdGhpcy5fbGF5ZXJzU3R5bGUgPSBwbHVnaW5Db25maWcubGF5ZXJzU3R5bGU7XG4gICAgLy8gc3RpbGkgZGVsIGxheWVyIGluIGVkaXRpbmcgKGluIGZ1dHVybyBkYSBkaXN0aW5ndWVyZSBkZWxldGUsIG1vdmUsIGVkaXRpbmcuLilcbiAgICB0aGlzLl9sYXllcnNFZGl0aW5nU3R5bGUgPSBwbHVnaW5Db25maWcubGF5ZXJzRWRpdGluZ1N0eWxlO1xuICAgIHRoaXMuX2N1c3RvbVVybFBhcmFtZXRlcnMgPSBwbHVnaW5Db25maWcuY3VzdG9tVXJsUGFyYW1ldGVycyB8fCBudWxsO1xuICAgIC8vIHNldHRvIGlsIG1hcHNlcnZpY2UgY2hlIG1pIHBlcm1ldHRlIGRpIGluZXJhZ2lyZSBjb24gbGEgbWFwcGFcbiAgICB0aGlzLl9tYXBTZXJ2aWNlID0gR1VJLmdldENvbXBvbmVudCgnbWFwJykuZ2V0U2VydmljZSgpO1xuICAgIC8vdmFkbyBhIHNldHRhcmUgbGUgaWNvbiB1cmxzIGUgaWwgY3JzIHNlIGVzaXN0ZSBjaSBzb25vOlxuICAgIF8uZm9yRWFjaCh0aGlzLmNvbmZpZy5sYXllcnMsIGZ1bmN0aW9uKGxheWVyQ29uZmlnLCBsYXllck5hbWUgKSB7XG4gICAgICBzZWxmLl9sYXllcnNbbGF5ZXJOYW1lXS5pbmZvdXJsID0gbGF5ZXJDb25maWcuaW5mb3VybDtcbiAgICAgIHNlbGYuX2xheWVyc1tsYXllck5hbWVdLmNycyA9IFwiRVBTRzpcIitsYXllckNvbmZpZy5jcnM7XG4gICAgICBzZWxmLnNldExheWVyU3R5bGUobGF5ZXJOYW1lKTtcbiAgICB9KTtcbiAgICAvL2luaXppYWxpenpvIGlsIGxvYWRlclxuICAgIC8vIHBhc3NhbmRvZ2xpOlxuICAgIC8vIDEgLSBsYXllcnMgZGVsIHBsdWdpbiAoc3R5bGUgZXRjLi4pXG4gICAgLy8gMiAtIGxhIGJhc2V1cmwgY2hlIG1pIHNlcnZlciBwZXIgaW50ZXJhZ2lyZSBjb24gaWwgc2VydmVyIHBlciBmYXJlIHR1dHRlIGxlIG1vZGlmaWNoZVxuICAgIHZhciBvcHRpb25zX2xvYWRlciA9IHtcbiAgICAgICdsYXllcnMnOiB0aGlzLl9sYXllcnMsXG4gICAgICAnYmFzZXVybCc6IHRoaXMuY29uZmlnLmJhc2V1cmwsXG4gICAgICAnbWFwU2VydmljZSc6IHRoaXMuX21hcFNlcnZpY2VcbiAgICB9O1xuICAgIC8vaW5pemlhbGl6em8gaWwgbG9hZGVyXG4gICAgdGhpcy5fbG9hZGVyLmluaXQob3B0aW9uc19sb2FkZXIpO1xuICAgIC8vY2FzbyBkaSBsb2FkaW5nIGRhdGFcbiAgICB0aGlzLl9sb2FkZXIub24oJ2xvYWRpbmd2ZWN0b3JsYXllcnNzdGFydCcsIGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5zdGF0ZS5yZXRyaWV2aW5nRGF0YSA9IHRydWU7XG4gICAgfSk7XG4gICAgdGhpcy5fbG9hZGVyLm9uKCdsb2FkaW5ndmVjdG9ybGF5ZXJzZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLnN0YXRlLnJldHJpZXZpbmdEYXRhID0gZmFsc2U7XG4gICAgfSk7XG4gICAgdGhpcy5fbG9hZGVyLm9uKCdzZXRtb2RlJywgZnVuY3Rpb24obW9kZSkge1xuICAgICAgc3dpdGNoKG1vZGUpIHtcbiAgICAgICAgY2FzZSAndyc6XG4gICAgICAgICAgc2VsZi5zdGF0ZS5lZGl0aW5nLm9uID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLmVtaXQoXCJlZGl0aW5nc3RhcnRlZFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncic6XG4gICAgICAgICAgc2VsZi5zdGF0ZS5lZGl0aW5nLm9uID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBkaXNhYmlsaXRvIGwnZXZlbnR1YWxlIHRvb2wgYXR0aXZvIHNlIHZpZW5lIGF0dGl2YXRhXG4gICAgLy8gdW4naW50ZXJhemlvbmUgZGkgdGlwbyBwb2ludGVySW50ZXJhY3Rpb25TZXQgc3VsbGEgbWFwcGFcbiAgICB0aGlzLl9tYXBTZXJ2aWNlLm9uKCdwb2ludGVySW50ZXJhY3Rpb25TZXQnLCBmdW5jdGlvbihpbnRlcmFjdGlvbikge1xuICAgICAgdmFyIGN1cnJlbnRFZGl0aW5nTGF5ZXIgPSBzZWxmLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgICBpZiAoY3VycmVudEVkaXRpbmdMYXllcikge1xuICAgICAgICB2YXIgYWN0aXZlVG9vbCA9IGN1cnJlbnRFZGl0aW5nTGF5ZXIuZWRpdG9yLmdldEFjdGl2ZVRvb2woKS5pbnN0YW5jZTtcbiAgICAgICAgLy8gZGV2byB2ZXJpZmljYXJlIGNoZSBub24gc2lhIHVuJ2ludGVyYXppb25lIGF0dGl2YXRhIGRhIHVubyBkZWkgdG9vbCBkaSBlZGl0aW5nIGRlbCBwbHVnaW5cbiAgICAgICAgaWYgKGFjdGl2ZVRvb2wgJiYgIWFjdGl2ZVRvb2wub3duc0ludGVyYWN0aW9uKGludGVyYWN0aW9uKSkge1xuICAgICAgICAgIHNlbGYuX3N0b3BFZGl0aW5nVG9vbCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gIGFiaWxpdG8gbyBtZW5vIGwnZWRpdGluZyBpbiBiYXNlIGFsbGEgcmlzb2x1emlvbmUgZGVsbGEgbWFwcGFcbiAgICAvKnRoaXMuX21hcFNlcnZpY2Uub25hZnRlcignc2V0TWFwVmlldycsZnVuY3Rpb24oYmJveCwgcmVzb2x1dGlvbiwgY2VudGVyKXtcbiAgICAgIHNlbGYuc3RhdGUuZWRpdGluZy5lbmFibGVkID0gKHJlc29sdXRpb24gPCBlZGl0aW5nQ29uc3RyYWludHMucmVzb2x1dGlvbikgPyB0cnVlIDogZmFsc2U7XG4gICAgfSk7Ki9cbiAgICAvLyBhdHRyaWJ1dG8gZGVsbG8gc3RhdG8gZGVsIHNyZXZpemlvIGNoZSBtaSBwZXJtZXR0ZSBkaSBhY2NlbmRlcmUgbyBzcGVuZ2VyZSBsJ2VkaXRpbmdcbiAgICAvLyBzZXJ2ZSBhbmNoZSBwZXIgcG90ZXIgaW4gZmFzZSBkaSB0b2dnbGVFZGl0aW5nKGJvdHRvbmUgZGkgYXZ2aW8gZWRpdGluZykgZGkgdmVkZXJlIHNlIHBvc3NvIGluemlhcmUgbyBtZW5vXG4gICAgLy8gY2FyaWNhcmUgaSB2ZXR0b3JpYWxpIGV0Yy4uXG4gICAgdGhpcy5zdGF0ZS5lZGl0aW5nLmVuYWJsZWQgPSB0cnVlOy8vKHRoaXMuX21hcFNlcnZpY2UuZ2V0UmVzb2x1dGlvbigpIDwgZWRpdGluZ0NvbnN0cmFpbnRzLnJlc29sdXRpb24pID8gdHJ1ZSA6IGZhbHNlO1xuICAgIC8vIHBlciBvZ25pIGxheWVyIGRlZmluaXRpIG5lbCBwbHVnaW4gc2V0dG8gbmFtZSBlIGlkXG4gICAgLy8gcmVjdXBlcmF0aSBncmF6aWUgYWwgbWFwc2VydmljZVxuICAgIF8uZm9yRWFjaCh0aGlzLl9sYXllcnMsIGZ1bmN0aW9uKExheWVyLCBsYXllckNvZGUpIHtcbiAgICAgIC8vcmVjdXBlcm8gbCdpZCBkYWxsYSBjb25maWd1cmF6aW9uZSBkZWwgcGx1Z2luXG4gICAgICAvLyBpIGxheWVycyBuZWxsYSBjb25maWd1cmF6aW9uZSBwYXNzYXRhIGkgbGF5ZXJzIGhhbm5vIGR1ZSBhdHRyaWJ1dGk6IGlkIGUgbmFtZVxuICAgICAgdmFyIGxheWVySWQgPSBjb25maWcubGF5ZXJzW2xheWVyQ29kZV0uaWQ7XG4gICAgICB2YXIgbGF5ZXJOYW1lID0gY29uZmlnLmxheWVyc1tsYXllckNvZGVdLm5hbWU7XG4gICAgICAvLyByZWN1cGVyYSBpbCBsYXllciBkYWwgbWFwc2VydmljZVxuICAgICAgdmFyIGxheWVyID0gc2VsZi5fbWFwU2VydmljZS5nZXRQcm9qZWN0KCkuZ2V0TGF5ZXJCeUlkKGxheWVySWQpO1xuICAgICAgLy8gbWVzc28gYWwgbW9tZW50byBnZW5lcmljbyBwZXIgcmlwcmVuZGVyZSBzdGVzc28gY29ubXBvcnRhbWVudG8gSXRlcm5ldFxuICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgIC8vIHJlY3VwZXJvIGwnb3JpZ2luIG5hbWUgZGFsIHByb2plY3RsYXllclxuICAgICAgICBMYXllci5uYW1lID0gbGF5ZXIuZ2V0T3JpZ05hbWUoKTtcbiAgICAgICAgTGF5ZXIuaWQgPSBsYXllcklkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgTGF5ZXIubmFtZSA9IGxheWVyTmFtZTtcbiAgICAgICAgTGF5ZXIuaWQgPSBsYXllcklkO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICAvLyBmaW5lIGRlbCBtZXRvZG8gSU5JVFxuICB0aGlzLnNldFBsdWdpblRvb2xzU2VydmljZSA9IGZ1bmN0aW9uKHBsdWdpblRvb2xzU2VydmljZSkge1xuICAgIHRoaXMuX3BsdWdpblRvb2xzU2VydmljZSA9IHBsdWdpblRvb2xzU2VydmljZTtcbiAgfTtcbiAgdGhpcy5zZXRQbHVnaW5Ub29scyA9IGZ1bmN0aW9uKHRvb2xzKSB7XG5cbiAgICB0aGlzLl9wbHVnaW5Ub29scyA9IHRvb2xzO1xuICB9O1xuICB0aGlzLmdldFBsdWdpblRvb2xzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BsdWdpblRvb2xzO1xuICB9O1xuICB0aGlzLnNldExheWVyU3R5bGUgPSBmdW5jdGlvbihsYXllckNvZGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGljb25zID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0uaWNvbnM7XG5cbiAgICBfLmZvckVhY2goaWNvbnMsIGZ1bmN0aW9uKGljb251cmwsIGtleSkge1xuICAgICAgaWYgKGtleSA9PSAndXJsJykge1xuICAgICAgICBzZWxmLl9sYXllcnNbbGF5ZXJDb2RlXS5zdHlsZSA9IHNlbGYuX2xheWVyc1N0eWxlW2xheWVyQ29kZV1ba2V5XSh7XG4gICAgICAgICAgaWNvbnVybDogaWNvbnVybFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHNlbGYuX2xheWVyc0VkaXRpbmdTdHlsZVtsYXllckNvZGVdW2tleV0gPSBzZWxmLl9sYXllcnNTdHlsZVtsYXllckNvZGVdW2tleV0oe1xuICAgICAgICAgIGljb251cmw6IGljb251cmxcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIC8vIHNldHRvIHRlbXBvcmFuZWFtZW50ZSBsJ2VkaXRuZyBzdHlsZVxuXG4gIH07XG5cbiAgdGhpcy5nZXRMYXllclN0eWxlID0gZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xheWVyc1tsYXllckNvZGVdLnN0eWxlO1xuICB9O1xuXG4gIHRoaXMuX3RvZ2dsZUNoZWNrQm94UGx1Z2luVG9vbCA9IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvLyBhbCBtb21lbnRvIDEgaGFyZGNvZGVkXG4gICAgdmFyIHBsdWdpblRvb2xzID0gdGhpcy5fcGx1Z2luVG9vbHNTZXJ2aWNlLmdldFN0YXRlKCkudG9vbHNHcm91cHNbMV0udG9vbHM7XG4gICAgdmFyIHZlY3RvckxheWVyID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yO1xuICAgIF8uZm9yRWFjaChwbHVnaW5Ub29scywgZnVuY3Rpb24ocGx1Z2luVG9vbCwgaW5kZXgpIHtcbiAgICAgIGlmIChfLmhhcyhwbHVnaW5Ub29sLCAndHlwZScpICYmIHBsdWdpblRvb2wubGF5ZXJOYW1lID09IGxheWVyQ29kZSAmJiBwbHVnaW5Ub29sLnR5cGUgPT0gJ2NoZWNrYm94Jykge1xuICAgICAgICB2YXIgdG9vbENvbmZpZyAgPSBwbHVnaW5Ub29sc1tpbmRleF07XG4gICAgICAgIHRvb2xDb25maWcuaXNDaGVjayA9IHRydWU7XG4gICAgICAgIHBsdWdpblRvb2xzW2luZGV4XSA9IHRvb2xDb25maWc7XG4gICAgICAgIHNlbGYuX3BsdWdpblRvb2xzU2VydmljZS51cGRhdGVUb29sc0dyb3VwKDEsIHtuYW1lOidHRU9OT1RFUycsIHRvb2xzOnBsdWdpblRvb2xzfSk7XG4gICAgICAgIHZlY3RvckxheWVyLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5pc0xheWVyVmlzaWJsZSA9IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgIHZhciB2ZWN0b3JMYXllciA9IHRoaXMuX2xheWVyc1tsYXllckNvZGVdLnZlY3RvcjtcbiAgICByZXR1cm4gdmVjdG9yTGF5ZXIuaXNWaXNpYmxlKCk7XG4gIH07XG5cbiAgdGhpcy5zaG93SGlkZUxheWVyID0gZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB2ZWN0b3JMYXllciA9IG51bGw7XG4gICAgaWYgKHRoaXMuX2xvYWRlci5pc1JlYWR5KCkpIHtcbiAgICAgIHZlY3RvckxheWVyID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yO1xuICAgICAgdmVjdG9yTGF5ZXIuc2V0VmlzaWJsZSghdmVjdG9yTGF5ZXIuaXNWaXNpYmxlKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sb2FkZXIubG9hZExheWVycygncicsIHRoaXMuX2N1c3RvbVVybFBhcmFtZXRlcnMpXG4gICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICBzZWxmLl9hZGRUb01hcCgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIC8vc3RvcFxuICB0aGlzLnN0b3AgPSBmdW5jdGlvbigpe1xuICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICBpZiAodGhpcy5zdGF0ZS5lZGl0aW5nLm9uKSB7XG4gICAgICB0aGlzLl9jYW5jZWxPclNhdmUoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzZWxmLl9zdG9wRWRpdGluZygpO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmZhaWwoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgIH0pXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuXG4gIC8vIGF2dmlvIG8gdGVybWlubyBsYSBzZXNzaW9uZSBkaSBlZGl0aW5nIGdlbmVyYWxlXG4gIC8vIHVudG8gZGkgcGFydGVuemEgZGVsbCdhdnZpbyBkZWxsJ2VkaXRpbmdcbiAgdGhpcy50b2dnbGVFZGl0aW5nID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gY3JlbyBvZ2dldHRvIGRlZmVycmVkIHBlciByZXN0aXR1aXJlIHVuYSBwcm9taXNlXG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIC8vIHF1aSBkaWNlIGNoZSBzZSBuZWwgY2FzbyBsYSByaXNvbHV6aW9uZSBkZWxsYSBtYXBwYSB2YSBiZW5lIChzdGF0ZS5lZGl0aW5nLmVuYWJsZWQpXG4gICAgLy8gZSBub24gw6ggYW5jb3JhIHN0YXRvIGF0dGl2YXRvIGwnZWRpdGluZ1xuICAgIC8vIHF1aW5kaSBjYXNvIHByaW1hIHZvbHRhXG4gICAgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy5lbmFibGVkICYmICF0aGlzLnN0YXRlLmVkaXRpbmcub24pIHtcbiAgICAgIC8vIGZhY2NpbyBwYXJ0aXJlIGVkaXRpbmdcbiAgICAgIHRoaXMuX3N0YXJ0RWRpdGluZygpO1xuICAgIH1cbiAgICAvLyBhbHRyaW1lbnRpIHNlIMOoIGdpw6AgaW4gZWRpdGluZyBjaGlhbW8gbG8gc3RvcCBkZWwgcGx1Z2luXG4gICAgLy8gY2hlIG5vbiDDqCBhbHRybyBjaGUgbG9zIHRvcG8gZGVsbCdlZGl0aW5nXG4gICAgZWxzZSBpZiAodGhpcy5zdGF0ZS5lZGl0aW5nLm9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9wKCk7XG4gICAgfVxuICAgIC8vIHJlc3RpdHVpc2NvIHVuYSBwcm9tZXNzYVxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH07XG5cbiAgdGhpcy5zYXZlRWRpdHMgPSBmdW5jdGlvbigpe1xuICAgIHRoaXMuX3NhdmVXaXRob3V0QXNrKCk7XG4gICAgLy90aGlzLl9jYW5jZWxPclNhdmUoMik7XG4gIH07XG5cbiAgLy8gYXZ2aWEgdW5vIGRlaSB0b29sIGRpIGVkaXRpbmcgdHJhIHF1ZWxsaSBzdXBwb3J0YXRpIGRhIEVkaXRvciAoYWRkZmVhdHVyZSwgZWNjLilcbiAgLy8gZnVuemlvbmUgZGVsbCdlbGVtZW50byBwYW5lbCB2dWVcbiAgdGhpcy50b2dnbGVFZGl0VG9vbCA9IGZ1bmN0aW9uKGxheWVyQ29kZSwgdG9vbFR5cGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy9wcmVuZG8gaWwgbGF5ZXIgaW4gYmFzZSBhbCBjb2RpY2UgcGFzc2F0byBkYWxsIGNvbXBvbmVudGUgdnVlXG4gICAgdmFyIGxheWVyID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV07XG4gICAgaWYgKGxheWVyKSB7XG4gICAgICAvL3JlY3VwcmVybyBpbCBjdXJyZW50IGxheWVyIGluIGVkaXRpbmdcbiAgICAgIHZhciBjdXJyZW50RWRpdGluZ0xheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgICAgLy8gc2Ugc2kgc3RhIHVzYW5kbyB1biB0b29sIGNoZSBwcmV2ZWRlIGxvIHN0ZXNzbyBsYXllciBpbiBlZGl0YXppb25lXG4gICAgICBpZiAoY3VycmVudEVkaXRpbmdMYXllciAmJiBsYXllckNvZGUgPT0gY3VycmVudEVkaXRpbmdMYXllci5sYXllckNvZGUpIHtcbiAgICAgICAgLy8gZSBsbyBzdGVzc28gdG9vbCBhbGxvcmEgZGlzYXR0aXZvIGlsIHRvb2wgKGluIHF1YW50byDDqFxuICAgICAgICAvLyBwcmVtdXRvIHN1bGxvIHN0ZXNzbyBib3R0b25lKVxuICAgICAgICBpZiAodG9vbFR5cGUgPT0gY3VycmVudEVkaXRpbmdMYXllci5lZGl0b3IuZ2V0QWN0aXZlVG9vbCgpLmdldFR5cGUoKSkge1xuICAgICAgICAgIC8vIHN0ZXNzbyB0aXBvIGRpIHRvb2wgcXVpbmRpIHNpIMOoIHZlcmlmaWNhdG8gdW4gdG9nZ2xlIG5lbCBib3R0b25lXG4gICAgICAgICAgLy8gYWxsb3JhIHN0aXBwbyBsJ2VkaXRpbmcgVG9vbFxuICAgICAgICAgIHRoaXMuX3N0b3BFZGl0aW5nVG9vbCgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFsdHJpbWVudGkgYXR0aXZvIGlsIHRvb2wgcmljaGllc3RvXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vc3RvcHBvIHByZXZlbnRpdmFtZW50ZSBsJ2VkaXRpbmcgdG9vbCBhdHRpdm9cbiAgICAgICAgICB0aGlzLl9zdG9wRWRpdGluZ1Rvb2woKTtcbiAgICAgICAgICAvL2ZhY2NpbyBwYXJ0aXJlIGwnZWRpdG5nIHRvb2wgcGFzc2FuZG8gY3VycmVudCBFZGl0aW5nIExheWVyIGUgaWwgdGlwbyBkaSB0b29sXG4gICAgICAgICAgdGhpcy5fc3RhcnRFZGl0aW5nVG9vbChjdXJyZW50RWRpdGluZ0xheWVyLCB0b29sVHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGFsdHJpbWVudGkgY2FzbyBpbiBjdWkgbm9uIMOoIHN0YXRvIHNldHRhdG8gaWwgY3VycmVudCBlZGl0aW5nIGxheWVyIG9cbiAgICAgICAgLy8gaWwgbGF5ZXIgY2hlIHNpIHN0YSBjZXJjYW5kbyBkaSBlZGl0YXJlIMOoIGRpdmVyc28gZGEgcXVlbGxvIGluIGVkaXRpbmcgaW4gcHJlY2VkZW56YVxuICAgICAgICAvLyBuZWwgY2FzbyBzaWEgZ2nDoCAgYXR0aXZvIHVuIGVkaXRvciB2ZXJpZmljbyBkaSBwb3RlcmxvIHN0b3BwYXJlXG4gICAgICAgIGlmIChjdXJyZW50RWRpdGluZ0xheWVyICYmIGN1cnJlbnRFZGl0aW5nTGF5ZXIuZWRpdG9yLmlzU3RhcnRlZCgpKSB7XG4gICAgICAgICAgLy8gc2UgbGEgdGVybWluYXppb25lIGRlbGwnZWRpdGluZyBzYXLDoCAgYW5kYXRhIGEgYnVvbiBmaW5lLCBzZXR0byBpbCB0b29sXG4gICAgICAgICAgLy8gcHJvdm8gYSBzdG9wcGFyZVxuICAgICAgICAgIHRoaXMuX2NhbmNlbE9yU2F2ZSgyKVxuICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLl9zdG9wRWRpdG9yKCkpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYuX3N0YXJ0RWRpdGluZ1Rvb2wobGF5ZXIsIHRvb2xUeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvL25lbCBjYXNvIHNpYSBsYSBwcmltYSB2b2x0YSBjaGUgaW50ZXJhZ2lzY28gY29uIHVuIHRvb2xcbiAgICAgICAgICAvLyBlIHF1aW5kaSBub24gw6ggc3RhdG8gc2V0dGF0byBuZXNzdW4gbGF5ZXIgaW4gZWRpdGluZ1xuICAgICAgICAgIHRoaXMuX3N0YXJ0RWRpdGluZ1Rvb2wobGF5ZXIsIHRvb2xUeXBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvL2Z1bnppb25lIGNoZSByZXN0aXR1aXNjZSBsJ2FycmF5IGRlaSBjb2RpY2kgZGVpIGxheWVyc1xuICB0aGlzLmdldExheWVyQ29kZXMgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiBfLnZhbHVlcyh0aGlzLmxheWVyQ29kZXMpO1xuICB9O1xuXG4gIC8qIE1FVE9ESSBQUklWQVRJICovXG4gIC8vIGZ1bnppb25lIHBlciBzZXR0YXJlIGlsIHZlY3RvcmxheWVyIGFsbGEgcHJvcmlldMOgIHZlY3RvciBkZWwgbGF5ZXJcbiAgdGhpcy5fc2V0VXBWZWN0b3JMYXllciA9IGZ1bmN0aW9uKGxheWVyQ29kZSwgdmVjdG9yTGF5ZXIpIHtcbiAgICB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS52ZWN0b3IgPSB2ZWN0b3JMYXllcjtcbiAgfTtcblxuICAvL2Z1bnppb25lIGNoZSBwZXJtZXR0ZSBkaSBmYXJlIGlsIHNldHVwIGRlbGwnZWRpdG9yIGUgYXNzZWdhbnJsbyBhbCBsYXllclxuICB0aGlzLl9zZXRVcEVkaXRvciA9IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vb3B0aW9uIGVkaXRvclxuICAgIHZhciBvcHRpb25zX2VkaXRvciA9IHtcbiAgICAgICdtYXBTZXJ2aWNlJzogc2VsZi5fbWFwU2VydmljZSxcbiAgICAgICdmb3JtQ2xhc3MnOiBGb3JtQ2xhc3MsXG4gICAgICAnZWRpdGluZ1ZlY3RvclN0eWxlJzogdGhpcy5fbGF5ZXJzRWRpdGluZ1N0eWxlW2xheWVyQ29kZV1cbiAgICB9O1xuICAgIC8vIHByZW5kbyBpbCB2ZWN0b3IgbGF5ZXIgZGVsIGxheWVyXG4gICAgdmFyIHZlY3RvckxheWVyID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yO1xuICAgIC8vR0VTVElPTkUgRSBJTklaSUFMSVpaQVpJT05FIERFTEwnRURJVE9SIFJFTEFUSVZPIEFMIExBWUVSIFZFVFRPUklBTEVcbiAgICAvL2NyZW8gbCdpc3RhbnphIGRlbGwnZWRpdG9yIGNoZSBnZXN0aXLDoCBpbCBsYXllclxuICAgIHZhciBlZGl0b3IgPSBuZXcgc2VsZi5fZWRpdG9yQ2xhc3NbbGF5ZXJDb2RlXShvcHRpb25zX2VkaXRvcik7XG4gICAgLy9zZXR0byBpbCBsYXllciB2ZXR0b3JpYWxlIGFzc29jaWF0byBhbGwnZWRpdG9yXG4gICAgLy8gZSBpIHRpcGkgZGkgdG9vbHMgYXNzb2NpYXRpIGFkIGVzc29cbiAgICBlZGl0b3Iuc2V0VmVjdG9yTGF5ZXIodmVjdG9yTGF5ZXIpO1xuICAgIC8vZW1ldHRlIGV2ZW50byBjaGUgw6ggc3RhdGEgZ2VuZXJhdGEgdW5hIG1vZGlmaWNhIGxhIGxheWVyXG4gICAgZWRpdG9yLm9uKFwiZGlydHlcIiwgZnVuY3Rpb24gKGRpcnR5KSB7XG4gICAgICBzZWxmLnN0YXRlLmhhc0VkaXRzID0gZGlydHk7XG4gICAgfSk7XG4gICAgLy9hc3NlZ25vIGwnaXN0YW56YSBlZGl0b3IgYWwgbGF5ZXIgdHJhbWl0ZSBsYSBwcm9wcmlldMOgIGVkaXRvclxuICAgIHRoaXMuX2xheWVyc1tsYXllckNvZGVdLmVkaXRvciA9IGVkaXRvcjtcbiAgICAvLy8vIEZJTkUgR0VTVElPTkUgRURJVE9SXG4gIH07XG4gIC8vZmEgcGFydGlyZSBsJ2VkaXRpbmdcbiAgdGhpcy5fc3RhcnRFZGl0aW5nID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gbWkgYXNzaWN1cm8gY2hlIHNlIHBlciBxdWFsc2lzaSBtb3Rpdm9cbiAgICAvLyBmYWNjaW8gdW5vIHN0YXJlZGl0aW5nIGRpIHVuIGVkaXRpbmcgZ2nDoCBhdnZpYXRvXG4gICAgLy8gcml0b3JubyBwZXJjaMOoIGhvIGdpw6AgdHV0dG8gKGxvIGZhY2NpbyBwZXIgc2ljdXJlbm56YSBub24gc2kgc2EgbWFpKVxuICAgIGlmICh0aGlzLnN0YXRlLmVkaXRpbmcub24gfHwgdGhpcy5zdGF0ZS5yZXRyaWV2aW5nRGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy8gY2hpZWRvIGFsIGxvYWRlciBkaSBjYXJpY2FyZSBpIGRhdGlcbiAgICBpZiAoIXRoaXMuX2xvYWRlci5pc1JlYWR5KCkpIHtcbiAgICAgIHRoaXMuX2xvYWRlci5sb2FkTGF5ZXJzKCd3JywgdGhpcy5fY3VzdG9tVXJsUGFyYW1ldGVycykgLy8gY2FyaWNvIGkgbGF5ZXIgaW4gbW9kYWxpdMOgIGVkaXRpbmcgKHNjcml0dHVyYSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHZlY3RvckxheWVyc0NvZGVzKSB7XG4gICAgICAgICAgLy91bmEgdm9sdGEgY2hlIGlsIGxvYWRlciBoYSBmaW5pdG8gZGkgY2FyaWNhcmUgaSBsYXllciB2ZXR0b3JpYWxpXG4gICAgICAgICAgLy9xdWVzdG8gbWkgcmVzdGl0dWlzY2UgaSBjb2RpY2UgZGVpIGxheWVyIGNoZSBzb25vIHN0YXRpIGNhcmljYXRpKGFycmF5KVxuICAgICAgICAgIF8uZm9yRWFjaCh2ZWN0b3JMYXllcnNDb2RlcywgZnVuY3Rpb24gKGxheWVyQ29kZSkge1xuICAgICAgICAgICAgLy8gcGVyIG9nbmkgbGF5ZXIgZmFjY2lvIGlsIHNldHVwIGRlbGwnZWRpdG9yXG4gICAgICAgICAgICBzZWxmLl9zZXRVcEVkaXRvcihsYXllckNvZGUpO1xuICAgICAgICAgICAgc2VsZi5fdG9nZ2xlQ2hlY2tCb3hQbHVnaW5Ub29sKGxheWVyQ29kZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gc2UgdHV0dG8gIMOoIGFuZGF0byBhIGJ1b24gZmluZSBhZ2dpdW5nbyBpIFZlY3RvckxheWVyIGFsbGEgbWFwcGFcbiAgICAgICAgICBzZWxmLl9hZGRUb01hcCgpO1xuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgR1VJLm5vdGlmeS5lcnJvcih0KCdjb3VsZF9ub3RfbG9hZF92ZWN0b3JfbGF5ZXJzJykpO1xuICAgICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sb2FkZXIuc2V0TW9kZSgndycpO1xuICAgICAgdmFyIHZlY3RvckxheWVyc0NvZGVzID0gdGhpcy5fbG9hZGVyLmdldFZlY3RvckxheWVyc0NvZGVzKCk7XG4gICAgICBfLmZvckVhY2godmVjdG9yTGF5ZXJzQ29kZXMsIGZ1bmN0aW9uIChsYXllckNvZGUpIHtcbiAgICAgICAgLy8gcGVyIG9nbmkgbGF5ZXIgZmFjY2lvIGlsIHNldHVwIGRlbGwnZWRpdG9yXG4gICAgICAgIHNlbGYuX2xvYWRlci5sb2NrRmVhdHVyZXMoc2VsZi5fbGF5ZXJzW2xheWVyQ29kZV0ubmFtZSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHNlbGYuX3NldFVwRWRpdG9yKGxheWVyQ29kZSk7XG4gICAgICAgICAgc2VsZi5fdG9nZ2xlQ2hlY2tCb3hQbHVnaW5Ub29sKGxheWVyQ29kZSk7XG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICAgIHNlbGYuc3RhdGUuZWRpdGluZy5vbiA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuX3N0b3BFZGl0aW5nID0gZnVuY3Rpb24ocmVzZXQpIHtcbiAgICAvLyBzZSBwb3NzbyBzdG9wcGFyZSB0dXR0aSBnbGkgZWRpdG9yLi4uXG4gICAgaWYgKHRoaXMuX3N0b3BFZGl0b3IocmVzZXQpKXtcbiAgICAgIF8uZm9yRWFjaCh0aGlzLl9sYXllcnMsIGZ1bmN0aW9uKGxheWVyLCBsYXllckNvZGUpIHtcbiAgICAgICAgdmFyIHZlY3RvciA9IGxheWVyLnZlY3RvcjtcbiAgICAgICAgLy9zZWxmLl9tYXBTZXJ2aWNlLnZpZXdlci5yZW1vdmVMYXllckJ5TmFtZSh2ZWN0b3IubmFtZSk7XG4gICAgICAgIC8vbGF5ZXIudmVjdG9yPSBudWxsO1xuICAgICAgICBsYXllci5lZGl0b3I9IG51bGw7XG4gICAgICAgIHNlbGYuX3VubG9ja0xheWVyKHNlbGYuX2xheWVyc1tsYXllckNvZGVdKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fdXBkYXRlRWRpdGluZ1N0YXRlKCk7XG4gICAgICB0aGlzLl9sb2FkZXIuc2V0TW9kZSgncicpO1xuICAgICAgc2VsZi5fY2xlYW5VcCgpO1xuICAgICAgc2VsZi5lbWl0KFwiZWRpdGluZ3N0b3BwZWRcIik7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuX2NsZWFuVXAgPSBmdW5jdGlvbigpIHtcbiAgICAvL3ZhZG8gYWQgYW5udWxhcmUgbCdlc3Rlbnppb25lIGRlbCBsb2FkZXIgcGVyIHBvdGVyIHJpY2FyaWNhcmUgaSBkYXRpIHZldHR0b3JpYWxpXG4gICAgLy9kYSByaXZlZGVyZTtcbiAgICB0aGlzLl9sb2FkZXIuY2xlYW5VcExheWVycygpO1xuXG4gIH07XG4gIC8vc2Ugbm9uIMOoIGFuY29yYSBwYXJ0aXRvIGZhY2NpbyBwYXJ0aXJlIGxvIHN0YXJ0IGVkaXRvclxuICB0aGlzLl9zdGFydEVkaXRvciA9IGZ1bmN0aW9uKGxheWVyKXtcbiAgICAvLyBhdnZpbyBsJ2VkaXRvclxuICAgIC8vIHBhc3NhbmRvbGkgaWwgc2VydmljZSBjaGUgbG8gYWNjZXR0YVxuICAgIGlmIChsYXllci5lZGl0b3Iuc3RhcnQodGhpcykpIHtcbiAgICAgIC8vIHJlZ2lzdHJvIGlsIGN1cnJlbnQgbGF5ZXIgaW4gZWRpdGluZ1xuICAgICAgdGhpcy5fc2V0Q3VycmVudEVkaXRpbmdMYXllcihsYXllcik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuICAvL2Z1bnppb25lIGNoZSB2aWVuZSBjaGlhbWF0YSBhbCBjbGljayBzdSB1biB0b29sIGRlbGwnZWRpdGluZyBlIHNlXG4gIC8vbm9uIMOoIHN0YXRvIGFzc2VnbmF0byBhbmNvcmEgbmVzc3VuIGxheWVyIGNvbWUgY3VycmVudCBsYXllciBlZGl0aW5nXG4gIHRoaXMuX3N0YXJ0RWRpdGluZ1Rvb2wgPSBmdW5jdGlvbihsYXllciwgdG9vbFR5cGUsIG9wdGlvbnMpIHtcbiAgICAvL2Fzc2Vnbm8gdHJ1ZSBhbGxvIHN0YXJ0RWRpdGluZ1Rvb2wgYXR0cmlidXRvIGRlbGxsbyBzdGF0ZVxuICAgIHRoaXMuc3RhdGUuc3RhcnRpbmdFZGl0aW5nVG9vbCA9IHRydWU7XG4gICAgdmFyIGNhblN0YXJ0VG9vbCA9IHRydWU7XG4gICAgLy92ZXJpZmljbyBzZSBsJ2VkaXRvciDDqCBwYXJ0aXRvIG8gbWVub1xuICAgIGlmICghbGF5ZXIuZWRpdG9yLmlzU3RhcnRlZCgpKSB7XG4gICAgICAvL3NlIG5vbiDDqCBhbmNvcmEgcGFydGl0byBsbyBmYWNjaW8gcGFydGlyZSBlIG5lIHByZW5kbyBpbCByaXN1bHRhdG9cbiAgICAgIC8vIHRydWUgbyBmYWxzZVxuICAgICAgY2FuU3RhcnRUb29sID0gdGhpcy5fc3RhcnRFZGl0b3IobGF5ZXIpO1xuICAgIH1cbiAgICAvLyB2ZXJpZmljYSBzZSBpbCB0b29sIHB1w7IgZXNzZXJlIGF0dGl2YXRvXG4gICAgLy8gbCdlZGl0b3IgdmVyaWZpY2Egc2UgaWwgdG9vbCByaWNoaWVzdG8gw6ggY29tcGF0aWJpbGVcbiAgICAvLyBjb24gaSB0b29scyBwcmV2aXN0aSBkYWxsJ2VkaXRvci4gQ3JlYSBpc3RhbnphIGRpIHRvb2wgZSBhdnZpYSBpbCB0b29sXG4gICAgLy8gYXR0cmF2ZXJzbyBpbCBtZXRvZG8gcnVuXG4gICAgaWYgKGNhblN0YXJ0VG9vbCAmJiBsYXllci5lZGl0b3Iuc2V0VG9vbCh0b29sVHlwZSwgb3B0aW9ucykpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZUVkaXRpbmdTdGF0ZSgpO1xuICAgICAgdGhpcy5zdGF0ZS5zdGFydGluZ0VkaXRpbmdUb29sID0gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5zdGFydGluZ0VkaXRpbmdUb29sID0gZmFsc2U7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIHRoaXMuX3N0b3BFZGl0b3IgPSBmdW5jdGlvbihyZXNldCl7XG4gICAgdmFyIHJldCA9IHRydWU7XG4gICAgdmFyIGxheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgIGlmIChsYXllcikge1xuICAgICAgcmV0ID0gbGF5ZXIuZWRpdG9yLnN0b3AocmVzZXQpO1xuICAgICAgaWYgKHJldCl7XG4gICAgICAgIHRoaXMuX3NldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIHNpIG9jY3VwYSBkaSBpbnRlcnJvbWVwZXJlIGwnZWR0aW5nIHRvb2xcbiAgdGhpcy5fc3RvcEVkaXRpbmdUb29sID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJldCA9IHRydWU7XG4gICAgLy8gcmVjdXBlcmUgaWwgbGF5ZXIgaW4gY3VycmVudCBlZGl0aW5nXG4gICAgdmFyIGxheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgIC8vIHNlIGVzaXN0ZSBlZCBlcmEgc3RhdG8gc2V0dGF0b1xuICAgIGlmIChsYXllcikge1xuICAgICAgLy8gc2UgYW5kYXRvIGJlbmUgcml0b3JuYSB0cnVlXG4gICAgICByZXQgPSBsYXllci5lZGl0b3Iuc3RvcFRvb2woKTtcbiAgICAgIGlmIChyZXQpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlRWRpdGluZ1N0YXRlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSBhY2NldHRhIGNvbWUgcGFyYW1ldHJvIGlsIHRpcG8gZGlcbiAgLy8gb3BlcmF6aW9uZSBkYSBmYXJlIGEgc2Vjb25kYSBkaWNvc2Egw6ggYXZ2ZW51dG9cbiAgdGhpcy5fc2F2ZVdpdGhvdXRBc2sgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgdmFyIGRpcnR5RWRpdG9ycyA9IHt9O1xuICAgIC8vIHZlcmlmaWNvIHBlciBvZ25pIGxheWVyIHNlIGwnZWRpdG8gYXNzb2NpYXRvIMOoIERpcnR5XG4gICAgXy5mb3JFYWNoKHRoaXMuX2xheWVycywgZnVuY3Rpb24obGF5ZXIsIGxheWVyQ29kZSkge1xuICAgICAgaWYgKGxheWVyLmVkaXRvci5pc0RpcnR5KCkpIHtcbiAgICAgICAgZGlydHlFZGl0b3JzW2xheWVyQ29kZV0gPSBsYXllci5lZGl0b3I7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fc2F2ZUVkaXRzKGRpcnR5RWRpdG9ycykuXG4gICAgdGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH0pLmZhaWwoZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgIH0pXG5cbiAgfTtcbiAgdGhpcy5fY2FuY2VsT3JTYXZlID0gZnVuY3Rpb24odHlwZSl7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIC8vIHBlciBzaWN1cmV6emEgdGVuZ28gdHV0dG8gZGVudHJvIHVuIGdyb3NzbyB0cnkvY2F0Y2gsXG4gICAgLy8gcGVyIG5vbiByaXNjaGlhcmUgZGkgcHJvdm9jYXJlIGluY29uc2lzdGVuemUgbmVpIGRhdGkgZHVyYW50ZSBpbCBzYWx2YXRhZ2dpb1xuICAgIHRyeSB7XG4gICAgICB2YXIgX2Fza1R5cGUgPSAxO1xuICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgX2Fza1R5cGUgPSB0eXBlXG4gICAgICB9XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgY2hvaWNlID0gXCJjYW5jZWxcIjtcbiAgICAgIHZhciBkaXJ0eUVkaXRvcnMgPSB7fTtcbiAgICAgIC8vIHZlcmlmaWNvIHBlciBvZ25pIGxheWVyIHNlIGwnZWRpdG8gYXNzb2NpYXRvIMOoIERpcnR5XG4gICAgICBfLmZvckVhY2godGhpcy5fbGF5ZXJzLCBmdW5jdGlvbihsYXllciwgbGF5ZXJDb2RlKSB7XG4gICAgICAgIGlmIChsYXllci5lZGl0b3IuaXNEaXJ0eSgpKSB7XG4gICAgICAgICAgZGlydHlFZGl0b3JzW2xheWVyQ29kZV0gPSBsYXllci5lZGl0b3I7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgLy8gdmVyaWZpY28gc2UgY2kgc29ubyBvIG1lbm8gZWRpdG9yIHNwb3JjaGlcbiAgICAgIGlmKF8ua2V5cyhkaXJ0eUVkaXRvcnMpLmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9hc2tDYW5jZWxPclNhdmUoX2Fza1R5cGUpLlxuICAgICAgICB0aGVuKGZ1bmN0aW9uKGFjdGlvbikge1xuICAgICAgICAgIC8vIHJpdG9ybmEgaWwgdGlwbyBkaSBhemlvbmUgZGEgZmFyZVxuICAgICAgICAgIC8vIHNhdmUsIGNhbmNlbCwgbm9zYXZlXG4gICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ3NhdmUnKSB7XG4gICAgICAgICAgICAvLyBwYXNzbyBnbGkgZWRpdG9yIHNwb2NoaSBhbGxhIGZ1bnppb25lIF9zYXZlRWRpdHNcbiAgICAgICAgICAgIHNlbGYuX3NhdmVFZGl0cyhkaXJ0eUVkaXRvcnMpLlxuICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PSAnbm9zYXZlJykge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09ICdjYW5jZWwnKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSBpbiBiYXNlIGFsIHRpcG8gZGkgYXNrVHlwZVxuICAvLyB2aXN1YWxpenphIGlsIG1vZGFsZSBhIGN1aSByaXNwb25kZXJlLCBzYWx2YSBldGMgLi5cbiAgdGhpcy5fYXNrQ2FuY2VsT3JTYXZlID0gZnVuY3Rpb24odHlwZSl7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIHZhciBidXR0b25UeXBlcyA9IHtcbiAgICAgIFNBVkU6IHtcbiAgICAgICAgbGFiZWw6IFwiU2FsdmFcIixcbiAgICAgICAgY2xhc3NOYW1lOiBcImJ0bi1zdWNjZXNzXCIsXG4gICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ3NhdmUnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIE5PU0FWRToge1xuICAgICAgICBsYWJlbDogXCJUZXJtaW5hIHNlbnphIHNhbHZhcmVcIixcbiAgICAgICAgY2xhc3NOYW1lOiBcImJ0bi1kYW5nZXJcIixcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnbm9zYXZlJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBDQU5DRUw6IHtcbiAgICAgICAgbGFiZWw6IFwiQW5udWxsYVwiLFxuICAgICAgICBjbGFzc05hbWU6IFwiYnRuLXByaW1hcnlcIixcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ2NhbmNlbCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBzd2l0Y2ggKHR5cGUpe1xuICAgICAgY2FzZSAxOlxuICAgICAgICBidXR0b25zID0ge1xuICAgICAgICAgIHNhdmU6IGJ1dHRvblR5cGVzLlNBVkUsXG4gICAgICAgICAgbm9zYXZlOiBidXR0b25UeXBlcy5OT1NBVkUsXG4gICAgICAgICAgY2FuY2VsOiBidXR0b25UeXBlcy5DQU5DRUxcbiAgICAgICAgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGJ1dHRvbnMgPSB7XG4gICAgICAgICAgc2F2ZTogYnV0dG9uVHlwZXMuU0FWRSxcbiAgICAgICAgICBjYW5jZWw6IGJ1dHRvblR5cGVzLkNBTkNFTFxuICAgICAgICB9O1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgR1VJLmRpYWxvZy5kaWFsb2coe1xuICAgICAgbWVzc2FnZTogXCJWdW9pIHNhbHZhcmUgZGVmaW5pdGl2YW1lbnRlIGxlIG1vZGlmaWNoZT9cIixcbiAgICAgIHRpdGxlOiBcIlNhbHZhdGFnZ2lvIG1vZGlmaWNhXCIsXG4gICAgICBidXR0b25zOiBidXR0b25zXG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIHNhbHZhIGkgZGF0aSByZWxhdGl2aSBhbCBsYXllciB2ZXR0b3JpYWxlXG4gIC8vIGRlbCBkaXJ0eUVkaXRvclxuICB0aGlzLl9zYXZlRWRpdHMgPSBmdW5jdGlvbihkaXJ0eUVkaXRvcnMpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIHRoaXMuX3NlbmRFZGl0cyhkaXJ0eUVkaXRvcnMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICBHVUkubm90aWZ5LnN1Y2Nlc3MoXCJJIGRhdGkgc29ubyBzdGF0aSBzYWx2YXRpIGNvcnJldHRhbWVudGVcIik7XG4gICAgICAgICAgc2VsZi5fY29tbWl0RWRpdHMoZGlydHlFZGl0b3JzLCByZXNwb25zZSk7XG4gICAgICAgICAgLy9zZWxmLl9tYXBTZXJ2aWNlLnJlZnJlc2hNYXAoKTtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKGVycm9ycyl7XG4gICAgICAgICAgR1VJLm5vdGlmeS5lcnJvcihcIkVycm9yZSBuZWwgc2FsdmF0YWdnaW8gc3VsIHNlcnZlclwiKTtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSBwcmVuZGUgY29tZSBpbmdyZXNzbyBnbGkgZWRpdG9yIHNwb3JjaGlcbiAgdGhpcy5fc2VuZEVkaXRzID0gZnVuY3Rpb24oZGlydHlFZGl0b3JzKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIHZhciBlZGl0c1RvUHVzaCA9IF8ubWFwKGRpcnR5RWRpdG9ycywgZnVuY3Rpb24oZWRpdG9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsYXllcm5hbWU6IGVkaXRvci5nZXRWZWN0b3JMYXllcigpLm5hbWUsXG4gICAgICAgIGVkaXRzOiBlZGl0b3IuZ2V0RWRpdGVkRmVhdHVyZXMoKVxuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIGVzZWd1ZSBpbCBwb3N0IGRlaSBkYXRpXG4gICAgdGhpcy5fcG9zdERhdGEoZWRpdHNUb1B1c2gpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJldHVybmVkKXtcbiAgICAgICAgICBpZiAocmV0dXJuZWQucmVzdWx0KXtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmV0dXJuZWQucmVzcG9uc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXR1cm5lZC5yZXNwb25zZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbihyZXR1cm5lZCl7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJldHVybmVkLnJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfTtcblxuICB0aGlzLl9jb21taXRFZGl0cyA9IGZ1bmN0aW9uKGVkaXRvcnMsIHJlc3BvbnNlKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgXy5mb3JFYWNoKGVkaXRvcnMsZnVuY3Rpb24oZWRpdG9yKSB7XG4gICAgICB2YXIgbmV3QXR0cmlidXRlc0Zyb21TZXJ2ZXIgPSBudWxsO1xuICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLm5ldyl7XG4gICAgICAgIF8uZm9yRWFjaChyZXNwb25zZS5uZXcsIGZ1bmN0aW9uKHVwZGF0ZWRGZWF0dXJlQXR0cmlidXRlcyl7XG4gICAgICAgICAgdmFyIG9sZGZpZCA9IHVwZGF0ZWRGZWF0dXJlQXR0cmlidXRlcy5jbGllbnRpZDtcbiAgICAgICAgICB2YXIgZmlkID0gdXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzLmlkO1xuICAgICAgICAgIGVkaXRvci5nZXRFZGl0VmVjdG9yTGF5ZXIoKS5zZXRGZWF0dXJlRGF0YShvbGRmaWQsZmlkLG51bGwsdXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzKTtcbiAgICAgICAgICBfLmZvckVhY2gocmVzcG9uc2UubmV3X2xvY2tpZHMsIGZ1bmN0aW9uKG5ld2xvY2tJZCl7XG4gICAgICAgICAgICBlZGl0b3IuZ2V0VmVjdG9yTGF5ZXIoKS5hZGRMb2NrSWQobmV3bG9ja0lkKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKCdlZGl0b3IgY29tbWl0Jyk7XG4gICAgICBlZGl0b3IuY29tbWl0KCk7XG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5fdW5kb0VkaXRzID0gZnVuY3Rpb24oZGlydHlFZGl0b3JzKXtcbiAgICB2YXIgY3VycmVudEVkaXRpbmdMYXllckNvZGUgPSB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCkubGF5ZXJDb2RlO1xuICAgIHZhciBlZGl0b3IgPSBkaXJ0eUVkaXRvcnNbY3VycmVudEVkaXRpbmdMYXllckNvZGVdO1xuICAgIHRoaXMuX3N0b3BFZGl0aW5nKHRydWUpO1xuICB9O1xuICAvLyBlc2VndWUgbCd1cGRhdGUgZGVsbG8gc3RhdGUgbmVsIGNhc28gYWQgZXNlbXBpbyBkaSB1biB0b2dnbGUgZGVsIGJvdHRvbmUgdG9vbFxuICB0aGlzLl91cGRhdGVFZGl0aW5nU3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBwcmVuZGUgaWwgbGF5ZXIgaW4gRWRpdGluZ1xuICAgIHZhciBsYXllciA9IHRoaXMuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICBpZiAobGF5ZXIpIHtcbiAgICAgIHRoaXMuc3RhdGUuZWRpdGluZy5sYXllckNvZGUgPSBsYXllci5sYXllckNvZGU7XG4gICAgICB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbFR5cGUgPSBsYXllci5lZGl0b3IuZ2V0QWN0aXZlVG9vbCgpLmdldFR5cGUoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnN0YXRlLmVkaXRpbmcubGF5ZXJDb2RlID0gbnVsbDtcbiAgICAgIHRoaXMuc3RhdGUuZWRpdGluZy50b29sVHlwZSA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuX3VwZGF0ZVRvb2xTdGVwc1N0YXRlKCk7XG4gIH07XG5cbiAgdGhpcy5fdXBkYXRlVG9vbFN0ZXBzU3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGxheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgIHZhciBhY3RpdmVUb29sO1xuICAgIGlmIChsYXllcikge1xuICAgICAgYWN0aXZlVG9vbCA9IGxheWVyLmVkaXRvci5nZXRBY3RpdmVUb29sKCk7XG4gICAgfVxuICAgIGlmIChhY3RpdmVUb29sICYmIGFjdGl2ZVRvb2wuZ2V0VG9vbCgpKSB7XG4gICAgICB2YXIgdG9vbEluc3RhbmNlID0gYWN0aXZlVG9vbC5nZXRUb29sKCk7XG4gICAgICBpZiAodG9vbEluc3RhbmNlLnN0ZXBzKXtcbiAgICAgICAgdGhpcy5fc2V0VG9vbFN0ZXBTdGF0ZShhY3RpdmVUb29sKTtcbiAgICAgICAgdG9vbEluc3RhbmNlLnN0ZXBzLm9uKCdzdGVwJywgZnVuY3Rpb24oaW5kZXgsc3RlcCkge1xuICAgICAgICAgIHNlbGYuX3NldFRvb2xTdGVwU3RhdGUoYWN0aXZlVG9vbCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0b29sSW5zdGFuY2Uuc3RlcHMub24oJ2NvbXBsZXRlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBzZWxmLl9zZXRUb29sU3RlcFN0YXRlKCk7XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgc2VsZi5fc2V0VG9vbFN0ZXBTdGF0ZSgpO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLl9zZXRUb29sU3RlcFN0YXRlID0gZnVuY3Rpb24oYWN0aXZlVG9vbCl7XG4gICAgdmFyIGluZGV4LCB0b3RhbCwgbWVzc2FnZTtcbiAgICBpZiAoXy5pc1VuZGVmaW5lZChhY3RpdmVUb29sKSl7XG4gICAgICBpbmRleCA9IG51bGw7XG4gICAgICB0b3RhbCA9IG51bGw7XG4gICAgICBtZXNzYWdlID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB2YXIgdG9vbCA9IGFjdGl2ZVRvb2wuZ2V0VG9vbCgpO1xuICAgICAgdmFyIG1lc3NhZ2VzID0gdG9vbFN0ZXBzTWVzc2FnZXNbYWN0aXZlVG9vbC5nZXRUeXBlKCldO1xuICAgICAgaW5kZXggPSB0b29sLnN0ZXBzLmN1cnJlbnRTdGVwSW5kZXgoKTtcbiAgICAgIHRvdGFsID0gdG9vbC5zdGVwcy50b3RhbFN0ZXBzKCk7XG4gICAgICBtZXNzYWdlID0gbWVzc2FnZXNbaW5kZXhdO1xuICAgICAgaWYgKF8uaXNVbmRlZmluZWQobWVzc2FnZSkpIHtcbiAgICAgICAgaW5kZXggPSBudWxsO1xuICAgICAgICB0b3RhbCA9IG51bGw7XG4gICAgICAgIG1lc3NhZ2UgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbHN0ZXAubiA9IGluZGV4ICsgMTtcbiAgICB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbHN0ZXAudG90YWwgPSB0b3RhbDtcbiAgICB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbHN0ZXAubWVzc2FnZSA9IG1lc3NhZ2U7XG4gIH07XG5cbiAgdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50RWRpdGluZ0xheWVyO1xuICB9O1xuXG4gIHRoaXMuX3NldEN1cnJlbnRFZGl0aW5nTGF5ZXIgPSBmdW5jdGlvbihsYXllcil7XG4gICAgaWYgKCFsYXllcil7XG4gICAgICB0aGlzLl9jdXJyZW50RWRpdGluZ0xheWVyID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLl9jdXJyZW50RWRpdGluZ0xheWVyID0gbGF5ZXI7XG4gICAgfVxuICB9O1xuICB0aGlzLl9hZGRUb01hcCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvL3JlY3VwZXJvIGwnZWxlbWVudG8gbWFwIG9sM1xuICAgIHZhciBtYXAgPSB0aGlzLl9tYXBTZXJ2aWNlLnZpZXdlci5tYXA7XG4gICAgdmFyIGxheWVyQ29kZXMgPSB0aGlzLmdldExheWVyQ29kZXMoKTtcbiAgICAvL29nbmkgbGF5ZXIgbG8gYWdnaXVuZ28gYWxsYSBtYXBwYVxuICAgIC8vY29uIGlsIG1ldG9kbyBhZGRUb01hcCBkaSB2ZWN0b3JMYXllclxuICAgIF8uZm9yRWFjaChsYXllckNvZGVzLCBmdW5jdGlvbihsYXllckNvZGUpIHtcbiAgICAgIHNlbGYuX2xheWVyc1tsYXllckNvZGVdLnZlY3Rvci5hZGRUb01hcChtYXApO1xuICAgIH0pO1xuICAgIC8vYWdnaXVuZ28gaWwgbGlzdGVuZXJcbiAgICBpZiAoIXRoaXMuX2xvYWREYXRhT25NYXBWaWV3Q2hhbmdlTGlzdGVuZXIpIHtcbiAgICAgIC8vdmllbmUgcml0b3JuYXRhIGxhIGxpc3RlbmVyIGtleVxuICAgICAgdGhpcy5fbG9hZERhdGFPbk1hcFZpZXdDaGFuZ2VMaXN0ZW5lciA9IHRoaXMuX21hcFNlcnZpY2Uub25hZnRlcignc2V0TWFwVmlldycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuc3RhdGUuZWRpdGluZy5vbiAmJiBzZWxmLnN0YXRlLmVkaXRpbmcuZW5hYmxlZCkge1xuICAgICAgICAgIHNlbGYuX2xvYWRlci5sb2FkQWxsVmVjdG9yc0RhdGEoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuX3Bvc3REYXRhID0gZnVuY3Rpb24oZWRpdHNUb1B1c2gpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy8gbWFuZG8gdW4gb2dnZXR0byBjb21lIG5lbCBjYXNvIGRlbCBiYXRjaCxcbiAgICAvLyBtYSBpbiBxdWVzdG8gY2FzbyBkZXZvIHByZW5kZXJlIHNvbG8gaWwgcHJpbW8sIGUgdW5pY28sIGVsZW1lbnRvXG4gICAgaWYgKGVkaXRzVG9QdXNoLmxlbmd0aCA+IDEpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wb3N0QmF0Y2hEYXRhKGVkaXRzVG9QdXNoKTtcbiAgICB9XG4gICAgdmFyIGxheWVyTmFtZSA9IGVkaXRzVG9QdXNoWzBdLmxheWVybmFtZTtcbiAgICAvL29nZ2V0dG8gY29udGVuZXRlbnRlIGFkZCBkZWxldGUgcmVsYXRpb25zIGxvY2tpZHNcbiAgICB2YXIgZWRpdHMgPSBlZGl0c1RvUHVzaFswXS5lZGl0cztcbiAgICB2YXIganNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeShlZGl0cyk7XG4gICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcbiAgICBfLmZvckVhY2goZWRpdHMsIGZ1bmN0aW9uKHZhbHVlcywga2V5KSB7XG4gICAgICBmb3JtLmFwcGVuZChrZXksIHZhbHVlcyk7XG4gICAgfSk7XG4gICAgcmV0dXJuICQuYWpheCh7XG4gICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICB1cmw6IHRoaXMuY29uZmlnLmJhc2V1cmwrbGF5ZXJOYW1lK1wiLz9cIitzZWxmLl9jdXN0b21VcmxQYXJhbWV0ZXJzLFxuICAgICAgLypjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBkYXRhOiBqc29uRGF0YVxuICAgICAgKi9cbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICBkYXRhOiBmb3JtLFxuICAgICAgY29udGVudFR5cGU6IGZhbHNlLFxuICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlXG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5fcG9zdEJhdGNoRGF0YSA9IGZ1bmN0aW9uKG11bHRpRWRpdHNUb1B1c2gpe1xuICAgIHZhciBlZGl0cyA9IHt9O1xuICAgIF8uZm9yRWFjaChtdWx0aUVkaXRzVG9QdXNoLGZ1bmN0aW9uKGVkaXRzVG9QdXNoKXtcbiAgICAgIGVkaXRzW2VkaXRzVG9QdXNoLmxheWVybmFtZV0gPSBlZGl0c1RvUHVzaC5lZGl0cztcbiAgICB9KTtcbiAgICB2YXIganNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeShlZGl0cyk7XG4gICAgcmV0dXJuICQucG9zdCh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLmJhc2V1cmwsXG4gICAgICBkYXRhOiBqc29uRGF0YSxcbiAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuX3VubG9jayA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsYXllckNvZGVzID0gdGhpcy5nZXRMYXllckNvZGVzKCk7XG4gICAgLy8gZXNlZ3VvIGxlIHJpY2hpZXN0ZSBkZWxsZSBjb25maWd1cmF6aW9uaSBlIG1pIHRlbmdvIGxlIHByb21lc3NlXG4gICAgXy5tYXAobGF5ZXJDb2RlcyxmdW5jdGlvbihsYXllckNvZGUpe1xuICAgICAgcmV0dXJuIHNlbGYuX3VubG9ja0xheWVyKHNlbGYuX2xheWVyc1tsYXllckNvZGVdKTtcbiAgICB9KTtcbiAgfTtcbiAgLy8gZnVuemlvbmUgaW52aW8gbG9ja3NcbiAgdGhpcy5fbG9ja0xheWVyID0gZnVuY3Rpb24obGF5ZXJDb25maWcpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGZlYXR1cmVMb2NrcyA9IHRoaXMuX2xvYWRlci5fdmVjdG9yTGF5ZXJzRGF0YVtsYXllckNvbmZpZy5uYW1lXS5mZWF0dXJlbG9ja3M7XG4gICAgdmFyIGpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoZmVhdHVyZUxvY2tzKTtcbiAgICByZXR1cm4gJC5wb3N0KHtcbiAgICAgIHVybDogdGhpcy5jb25maWcuYmFzZXVybCtsYXllckNvbmZpZy5uYW1lK1wiLz9sb2NrXCIgKyB0aGlzLl9jdXN0b21VcmxQYXJhbWV0ZXJzLFxuICAgICAgZGF0YToganNvbkRhdGEsXG4gICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLl9sb2NrTGF5ZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxheWVyQ29kZXMgPSB0aGlzLmdldExheWVyQ29kZXMoKTtcbiAgICAvLyBlc2VndW8gbGUgcmljaGllc3RlIGRlbGxlIGNvbmZpZ3VyYXppb25pIGUgbWkgdGVuZ28gbGUgcHJvbWVzc2VcbiAgICBfLm1hcChsYXllckNvZGVzLGZ1bmN0aW9uKGxheWVyQ29kZSl7XG4gICAgICByZXR1cm4gc2VsZi5fbG9ja0xheWVyKHNlbGYuX2xheWVyc1tsYXllckNvZGVdKTtcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLl91bmxvY2tMYXllciA9IGZ1bmN0aW9uKGxheWVyQ29uZmlnKXtcbiAgICAkLmdldCh0aGlzLmNvbmZpZy5iYXNldXJsK2xheWVyQ29uZmlnLm5hbWUrXCIvP3VubG9ja1wiICsgdGhpcy5fY3VzdG9tVXJsUGFyYW1ldGVycyk7XG4gIH07XG4gIC8vZ2V0IGxvYWRlciBzZXJ2aWNlXG4gIHRoaXMuZ2V0TG9hZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xvYWRlcjtcbiAgfVxufVxuXG5pbmhlcml0KEdlb25vdGVzU2VydmljZSwgRzNXT2JqZWN0KTtcbm1vZHVsZS5leHBvcnRzID0gbmV3IEdlb25vdGVzU2VydmljZTtcbn0se1wiLi9lZGl0b3JzL2F0dHJpYnV0ZXNmb3JtXCI6MX1dfSx7fSxbM10pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
