!function e(t,i,o){function n(r,a){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};t[r][0].call(d.exports,function(e){var i=t[r][1][e];return n(i?i:e)},d,d.exports,e,t,i,o)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({1:[function(t,e,i){function o(t){s(this,t),this._formPanel=l}var n=g3wsdk.core.utils.inherit,s=g3wsdk.core.utils.base,r=g3wsdk.gui.FormPanel,a=g3wsdk.gui.Form,l=r.extend({});n(o,a),e.exports=o},{}],2:[function(t,e,i){function o(t){t.formTools=[],s(this,t);var e=function(){a.saveEdits()};this.onafter("addFeature",e),this.onafter("deleteFeature",e),this.onafter("moveFeature",e),this.onafter("pickFeature",e)}var n=g3wsdk.core.utils.inherit,s=g3wsdk.core.utils.base,r=g3wsdk.core.Editor,a=t("../pluginservice");t("./attributesform");n(o,r),e.exports=o},{"../pluginservice":7,"./attributesform":1}],3:[function(t,e,i){var o=g3wsdk.core.utils.inherit,n=g3wsdk.core.utils.base,s=g3wsdk.core.Plugin,r=g3wsdk.gui.GUI,a=g3wsdk.core.ProjectsRegistry,l=t("pluginconfig"),c=t("./pluginservice"),d=t("./panel"),u=function(){n(this),this.name="notes",this.config=null,this.service=null,this.init=function(){this.setPluginService(c),this.config=this.getPluginConfig(),this.setUpIconsUrl(this.config.layers),this.registerPlugin(this.config.gid)&&(r.ready?this.setupGui():r.on("ready",_.bind(this.setupGui,this)),l.customUrlParameters=this.createPluginCustomUrlParameters(),this.service.init(this.config,l))},this.setupGui=function(){var t=r.getComponent("tools"),e=t.getService(),i=l.tools(this);this.service.setPluginTools(i),this.service.setPluginToolsService(e),e.addTools(1,"GEONOTES",i)},this.toolsActions={showHideLayer:function(){this.service.showHideLayer(l.layersCode.GEONOTES)},showEditingPanel:function(){var t=new d;_.forEach(this.config.layers,function(e,i){t.setIconsTool(i,e.icontools)}),this.service.toggleEditing(),r.showPanel(t)},isChecked:function(t){return this.service.isLayerVisible()}},this.createPluginCustomUrlParameters=function(){var t="&",e=a.getCurrentProject();return t+="project_type="+e.getType()+"&project_id="+e.getId()},this.setUpIconsUrl=function(t){_.forEach(t,function(t){l.layers[t.name].icons=t.icons})},this.setupToolsAction=function(t){_.forEach(t,function(t){})}};o(u,s),function(t){t.init()}(new u)},{"./panel":5,"./pluginservice":7,pluginconfig:6}],4:[function(t,e,i){e.exports='<div class="g3w-iternet-editing-panel">\n  <template v-for="toolbar in editorstoolbars">\n    <div class="panel panel-primary">\n      <div class="panel-heading">\n        <h3 class="panel-title">{{ toolbar.name }}</h3>\n      </div>\n      <div class="panel-body">\n        <template v-for="tool in toolbar.tools">\n          <div class="editbtn" :class="{\'enabled\' : (state.editing.on && editingtoolbtnEnabled(tool)), \'toggled\' : editingtoolbtnToggled(toolbar.layercode, tool.tooltype)}">\n            <img height="30px" width="30px" @click="toggleEditTool(toolbar.layercode, tool.tooltype)" :alt.once="tool.title" :title.once="tool.title" :src.once="tool.icon"></img>\n          </div>\n        </template>\n      </div>\n    </div>\n  </template>\n  <div v-show="state.retrievingData" style="color:#ffffff">\n    <span>Caricamento Dati ... </span><img :src="resourcesurl +\'images/loader.svg\'">\n  </div>\n  <div class="message">\n    {{{ message }}}\n  </div>\n</div>\n'},{}],5:[function(t,e,i){function o(){this.id="geonotes-editing-panel",this.name="Gestione dati GEONOTES",this.internalPanel=new c}var n=g3wsdk.core.utils.resolve,s=g3wsdk.core.utils.inherit,r=g3wsdk.gui.GUI,a=g3wsdk.gui.Panel,l=t("./pluginservice"),c=Vue.extend({template:t("./panel.html"),data:function(){var t=r.getResourcesUrl()+"images/";return{state:l.state,resourcesurl:r.getResourcesUrl(),editorstoolbars:[{name:"Geonotes",layercode:l.layerCodes.GEONOTES,tools:[{title:"Aggiungi Geonota",tooltype:"addfeature",icontool:"add",icon:t+"iternetAddPoint.png"},{title:"Sposta Geonota",tooltype:"movefeature",icontool:"move",icon:t+"iternetMovePoint.png"},{title:"Rimuovi Geonota",tooltype:"deletefeature",icontool:"delete",icon:t+"iternetDeletePoint.png"},{title:"Edita geonota",tooltype:"editattributes",icontool:"edit",icon:t+"editAttributes.png"}]}],savebtnlabel:"Salva"}},methods:{toggleEditing:function(){l.toggleEditing()},saveEdits:function(){l.saveEdits()},toggleEditTool:function(t,e){""!=e&&this.state.editing.on&&l.toggleEditTool(t,e)},editingtoolbtnToggled:function(t,e){return this.state.editing.layerCode==t&&this.state.editing.toolType==e},editingtoolbtnEnabled:function(t){return""!=t.tooltype},onClose:function(){l.stop()}},computed:{editingbtnlabel:function(){return this.state.editing.on?"Termina editing":"Avvia editing"},editingbtnEnabled:function(){return this.state.editing.enabled||this.state.editing.on?"":"disabled"},message:function(){var t="";if(this.state.editing.enabled){if(this.state.editing.toolstep.message){var e=this.state.editing.toolstep.n,i=this.state.editing.toolstep.total,o=this.state.editing.toolstep.message;t='<div style="margin-top:20px">GUIDA STRUMENTO:</div><div><span>['+e+"/"+i+'] </span><span style="color: yellow">'+o+"</span></div>"}}else t='<span style="color: red">Aumentare il livello di zoom per abilitare l\'editing';return t}}});s(o,a);var d=a.prototype;d.onShow=function(t){var e=this.internalPanel;return e.$mount().$appendTo(t),n(!0)},d.onClose=function(){console.log("close");var t=this,e=$.Deferred();return l.stop().then(function(){t.internalPanel.$destroy(!0),t.internalPanel=null,e.resolve()}).fail(function(){e.reject()}),e.promise()},d.setIconsTool=function(t,e){var i=this.internalPanel.editorstoolbars;_.forEach(i,function(o,n){t==o.layercode&&_.forEach(o.tools,function(t,o){e[t.icontool]&&(i[n].tools[o].icon=e[t.icontool])})})},e.exports=o},{"./panel.html":4,"./pluginservice":7}],6:[function(t,e,i){function o(t){return o=[{name:"Geonotes",layerName:"note",type:"checkbox",isCheck:!1,action:_.bind(t.toolsActions.showHideLayer,t)},{name:"Edita Geonotes",action:_.bind(t.toolsActions.showEditingPanel,t)}]}var n=t("./editors/geonoteseditor"),s=this.layerCodes={GEONOTES:"note"},r={};r[s.GEONOTES]=n;var a={},l={},c={},d=function(t){var e=t.iconurl;return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,.5],offset:[0,0],src:e})})};l[s.GEONOTES]={url:d,add:d,"delete":d,edit:d,move:d},c[s.GEONOTES]={},a[s.GEONOTES]={layerCode:s.GEONOTES,vector:null,editor:null,iconurl:null,crs:null,style:l[s.GEONOTES]},e.exports={layersCode:s,layers:a,layersStyle:l,layersEditingStyle:c,editorClass:r,tools:o}},{"./editors/geonoteseditor":2}],7:[function(e,i,o){function n(){var e=this;this._mapService=null,this._loadDataOnMapViewChangeListener=null,this._currentEditingLayer=null,this._pluginTools=null,this.state={editing:{on:!1,enabled:!1,layerCode:null,toolType:null,startingEditingTool:!1,toolstep:{n:null,total:null,message:null}},retrievingData:!1,hasEdits:!1},this._loader=new l;this.init=function(t,e){var i=this;this.config=t,this._crs=null,this._layers=e.layers,this._editorClass=e.editorClass,this.layerCodes=e.layersCode,this._layersStyle=e.layersStyle,this._layersEditingStyle=e.layersEditingStyle,this._customUrlParameters=e.customUrlParameters||null,this._mapService=a.getComponent("map").getService(),_.forEach(this.config.layers,function(t,e){i._layers[e].infourl=t.infourl,i._layers[e].crs="EPSG:"+t.crs,i.setLayerStyle(e)});var o={layers:this._layers,baseurl:this.config.baseurl,mapService:this._mapService};this._loader.init(o),this._loader.on("loadingvectorlayersstart",function(){i.state.retrievingData=!0}),this._loader.on("loadingvectorlayersend",function(){i.state.retrievingData=!1}),this._loader.on("setmode",function(t){switch(t){case"w":i.state.editing.on=!0,i.emit("editingstarted");break;case"r":i.state.editing.on=!1}}),this._mapService.on("pointerInteractionSet",function(t){var e=i._getCurrentEditingLayer();if(e){var o=e.editor.getActiveTool().instance;o&&!o.ownsInteraction(t)&&i._stopEditingTool()}}),this.state.editing.enabled=!0,_.forEach(this._layers,function(e,o){var n=t.layers[o].id,s=t.layers[o].name,r=i._mapService.getProject().getLayerById(n);r?(e.name=r.getOrigName(),e.id=n):(e.name=s,e.id=n)})},this.setPluginToolsService=function(t){this._pluginToolsService=t},this.setPluginTools=function(t){this._pluginTools=t},this.getPluginTools=function(){return this._pluginTools},this.setLayerStyle=function(t){var e=this,i=this._layers[t].icons;_.forEach(i,function(i,o){"url"==o&&(e._layers[t].style=e._layersStyle[t][o]({iconurl:i})),e._layersEditingStyle[t][o]=e._layersStyle[t][o]({iconurl:i})})},this.getLayerStyle=function(t){return this._layers[t].style},this._toggleCheckBoxPluginTool=function(t){var e=this,i=0;this._pluginToolsService.getState().toolsGroups.length>1&&(i=1);var o=this._pluginToolsService.getState().toolsGroups[i].tools,n=this._layers[t].vector;_.forEach(o,function(s,r){if(_.has(s,"type")&&s.layerName==t&&"checkbox"==s.type){var a=o[r];a.isCheck=!0,o[r]=a,e._pluginToolsService.updateToolsGroup(i,{name:"GEONOTES",tools:o}),n.setVisible(!0)}})},this.isLayerVisible=function(t){var e=this._layers[t].vector;return e.isVisible()},this.showHideLayer=function(t){var e=this,i=null;this._loader.isReady()?(i=this._layers[t].vector,i.setVisible(!i.isVisible())):this._loader.loadLayers("r",this._customUrlParameters).then(function(){e._addToMap()})},this.stop=function(){var t=$.Deferred();return this.state.editing.on?this._cancelOrSave().then(function(){e._stopEditing(),t.resolve()}).fail(function(){t.reject()}):t.resolve(),t.promise()},this.toggleEditing=function(){var t=$.Deferred();if(this.state.editing.enabled&&!this.state.editing.on)this._startEditing();else if(this.state.editing.on)return this.stop();return t.promise()},this.saveEdits=function(){this._saveWithoutAsk()},this.toggleEditTool=function(t,e){var i=this,o=this._layers[t];if(o){var n=this._getCurrentEditingLayer();n&&t==n.layerCode?e==n.editor.getActiveTool().getType()?this._stopEditingTool():(this._stopEditingTool(),this._startEditingTool(n,e)):n&&n.editor.isStarted()?this._cancelOrSave(2).then(function(){i._stopEditor()&&i._startEditingTool(o,e)}):this._startEditingTool(o,e)}},this.getLayerCodes=function(){return _.values(this.layerCodes)},this._setUpVectorLayer=function(t,e){this._layers[t].vector=e},this._setUpEditor=function(t){var e=this,i={mapService:e._mapService,formClass:c,editingVectorStyle:this._layersEditingStyle[t]},o=this._layers[t].vector,n=new e._editorClass[t](i);n.setVectorLayer(o),n.on("dirty",function(t){e.state.hasEdits=t}),this._layers[t].editor=n},this._startEditing=function(){if(!this.state.editing.on&&!this.state.retrievingData){var e=this;if(this._loader.isReady()){this._loader.setMode("w");var i=this._loader.getVectorLayersCodes();_.forEach(i,function(t){e._loader.lockFeatures(e._layers[t].name).then(function(i){e._setUpEditor(t),e._toggleCheckBoxPluginTool(t)})}),e.state.editing.on=!0}else this._loader.loadLayers("w",this._customUrlParameters).then(function(t){_.forEach(t,function(t){e._setUpEditor(t),e._toggleCheckBoxPluginTool(t)}),e._addToMap()}).fail(function(){a.notify.error(t("could_not_load_vector_layers"))})}},this._stopEditing=function(t){this._stopEditor(t)&&(_.forEach(this._layers,function(t,i){t.vector;t.editor=null,e._unlockLayer(e._layers[i])}),this._updateEditingState(),this._loader.setMode("r"),e._cleanUp(),e.emit("editingstopped"))},this._cleanUp=function(){this._loader.cleanUpLayers()},this._startEditor=function(t){return!!t.editor.start(this)&&(this._setCurrentEditingLayer(t),!0)},this._startEditingTool=function(t,e,i){this.state.startingEditingTool=!0;var o=!0;return t.editor.isStarted()||(o=this._startEditor(t)),o&&t.editor.setTool(e,i)?(this._updateEditingState(),this.state.startingEditingTool=!1,!0):(this.state.startingEditingTool=!1,!1)},this._stopEditor=function(t){var e=!0,i=this._getCurrentEditingLayer();return i&&(e=i.editor.stop(t),e&&this._setCurrentEditingLayer()),e},this._stopEditingTool=function(){var t=!0,e=this._getCurrentEditingLayer();return e&&(t=e.editor.stopTool(),t&&this._updateEditingState()),t},this._saveWithoutAsk=function(){var t=$.Deferred(),e={};_.forEach(this._layers,function(t,i){t.editor.isDirty()&&(e[i]=t.editor)}),this._saveEdits(e).then(function(e){t.resolve()}).fail(function(e){t.reject()})},this._cancelOrSave=function(t){var e=$.Deferred();try{var i=1;t&&(i=t);var o=this,n={};_.forEach(this._layers,function(t,e){t.editor.isDirty()&&(n[e]=t.editor)}),_.keys(n).length?this._askCancelOrSave(i).then(function(t){"save"===t?o._saveEdits(n).then(function(t){e.resolve()}).fail(function(t){e.reject()}):"nosave"==t?e.resolve():"cancel"==t&&e.reject()}):e.resolve()}catch(s){e.reject()}return e.promise()},this._askCancelOrSave=function(t){var e=$.Deferred(),i={SAVE:{label:"Salva",className:"btn-success",callback:function(){e.resolve("save")}},NOSAVE:{label:"Termina senza salvare",className:"btn-danger",callback:function(){e.resolve("nosave")}},CANCEL:{label:"Annulla",className:"btn-primary",callback:function(){e.resolve("cancel")}}};switch(t){case 1:buttons={save:i.SAVE,nosave:i.NOSAVE,cancel:i.CANCEL};break;case 2:buttons={save:i.SAVE,cancel:i.CANCEL}}return a.dialog.dialog({message:"Vuoi salvare definitivamente le modifiche?",title:"Salvataggio modifica",buttons:buttons}),e.promise()},this._saveEdits=function(t){var e=this,i=$.Deferred();return this._sendEdits(t).then(function(o){a.notify.success("I dati sono stati salvati correttamente"),e._commitEdits(t,o),i.resolve()}).fail(function(t){a.notify.error("Errore nel salvataggio sul server"),i.resolve()}),i.promise()},this._sendEdits=function(t){var e=$.Deferred(),i=_.map(t,function(t){return{layername:t.getVectorLayer().name,edits:t.getEditedFeatures()}});return this._postData(i).then(function(t){t.result?e.resolve(t.response):e.reject(t.response)}).fail(function(t){e.reject(t.response)}),e.promise()},this._commitEdits=function(t,e){_.forEach(t,function(t){e&&e["new"]&&_.forEach(e["new"],function(i){var o=i.clientid,n=i.id;t.getEditVectorLayer().setFeatureData(o,n,null,i),_.forEach(e.new_lockids,function(e){t.getVectorLayer().addLockId(e)})}),console.log("editor commit"),t.commit()})},this._undoEdits=function(t){var e=this._getCurrentEditingLayer().layerCode;t[e];this._stopEditing(!0)},this._updateEditingState=function(){var t=this._getCurrentEditingLayer();t?(this.state.editing.layerCode=t.layerCode,this.state.editing.toolType=t.editor.getActiveTool().getType()):(this.state.editing.layerCode=null,this.state.editing.toolType=null),this._updateToolStepsState()},this._updateToolStepsState=function(){var t,e=this,i=this._getCurrentEditingLayer();if(i&&(t=i.editor.getActiveTool()),t&&t.getTool()){var o=t.getTool();o.steps&&(this._setToolStepState(t),o.steps.on("step",function(i,o){e._setToolStepState(t)}),o.steps.on("complete",function(){e._setToolStepState()}))}else e._setToolStepState()},this._setToolStepState=function(t){var e,i,o;if(_.isUndefined(t))e=null,i=null,o=null;else{var n=t.getTool(),s=toolStepsMessages[t.getType()];e=n.steps.currentStepIndex(),i=n.steps.totalSteps(),o=s[e],_.isUndefined(o)&&(e=null,i=null,o=null)}this.state.editing.toolstep.n=e+1,this.state.editing.toolstep.total=i,this.state.editing.toolstep.message=o},this._getCurrentEditingLayer=function(){return this._currentEditingLayer},this._setCurrentEditingLayer=function(t){t?this._currentEditingLayer=t:this._currentEditingLayer=null},this._addToMap=function(){var t=this,e=this._mapService.viewer.map,i=this.getLayerCodes();_.forEach(i,function(i){t._layers[i].vector.addToMap(e)}),this._loadDataOnMapViewChangeListener||(this._loadDataOnMapViewChangeListener=this._mapService.onafter("setMapView",function(){t.state.editing.on&&t.state.editing.enabled&&t._loader.loadAllVectorsData()}))},this._postData=function(t){var e=this;if(t.length>1)return this._postBatchData(t);var i=t[0].layername,o=t[0].edits,n=(JSON.stringify(o),new FormData);return _.forEach(o,function(t,e){n.append(e,t)}),$.ajax({type:"POST",url:this.config.baseurl+i+"/?"+e._customUrlParameters,dataType:"json",data:n,contentType:!1,processData:!1})},this._postBatchData=function(t){var e={};_.forEach(t,function(t){e[t.layername]=t.edits});var i=JSON.stringify(e);return $.post({url:this.config.baseurl,data:i,contentType:"application/json"})},this._unlock=function(){var t=this.getLayerCodes();_.map(t,function(t){return e._unlockLayer(e._layers[t])})},this._lockLayer=function(t){var e=this._loader._vectorLayersData[t.name].featurelocks,i=JSON.stringify(e);return $.post({url:this.config.baseurl+t.name+"/?lock"+this._customUrlParameters,data:i,contentType:"application/json"})},this._lockLayers=function(){var t=this.getLayerCodes();_.map(t,function(t){return e._lockLayer(e._layers[t])})},this._unlockLayer=function(t){$.get(this.config.baseurl+t.name+"/?unlock"+this._customUrlParameters)},this.getLoader=function(){return this._loader}}var s=g3wsdk.core.utils.inherit,r=g3wsdk.core.G3WObject,a=g3wsdk.gui.GUI,l=g3wsdk.core.VectorLayerLoader,c=e("./editors/attributesform");s(n,r),i.exports=new n},{"./editors/attributesform":1}]},{},[3]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1aWxkLmpzIl0sIm5hbWVzIjpbImUiLCJ0IiwibiIsInIiLCJzIiwibyIsInUiLCJhIiwicmVxdWlyZSIsImkiLCJmIiwiRXJyb3IiLCJjb2RlIiwibCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIkdlb25vdGVGb3JtIiwib3B0aW9ucyIsImJhc2UiLCJ0aGlzIiwiX2Zvcm1QYW5lbCIsIkdlb25vdGVGb3JtUGFuZWwiLCJpbmhlcml0IiwiZzN3c2RrIiwiY29yZSIsInV0aWxzIiwiRm9ybVBhbmVsIiwiZ3VpIiwiRm9ybSIsImV4dGVuZCIsIjIiLCJHZW9ub3Rlc0VkaXRvciIsImZvcm1Ub29scyIsInNhdmVFZGl0c1RvRGF0YWJhc2UiLCJQbHVnaW5TZXJ2aWNlIiwic2F2ZUVkaXRzIiwib25hZnRlciIsIkVkaXRvciIsIi4uL3BsdWdpbnNlcnZpY2UiLCIuL2F0dHJpYnV0ZXNmb3JtIiwiMyIsIlBsdWdpbiIsIkdVSSIsIlByb2plY3RzUmVnaXN0cnkiLCJwbHVnaW5Db25maWciLCJTZXJ2aWNlIiwiRWRpdGluZ1BhbmVsIiwiX1BsdWdpbiIsIm5hbWUiLCJjb25maWciLCJzZXJ2aWNlIiwiaW5pdCIsInNldFBsdWdpblNlcnZpY2UiLCJnZXRQbHVnaW5Db25maWciLCJzZXRVcEljb25zVXJsIiwibGF5ZXJzIiwicmVnaXN0ZXJQbHVnaW4iLCJnaWQiLCJyZWFkeSIsInNldHVwR3VpIiwib24iLCJfIiwiYmluZCIsImN1c3RvbVVybFBhcmFtZXRlcnMiLCJjcmVhdGVQbHVnaW5DdXN0b21VcmxQYXJhbWV0ZXJzIiwidG9vbHNDb21wb25lbnQiLCJnZXRDb21wb25lbnQiLCJ0b29sc1NlcnZpY2UiLCJnZXRTZXJ2aWNlIiwidG9vbHMiLCJzZXRQbHVnaW5Ub29scyIsInNldFBsdWdpblRvb2xzU2VydmljZSIsImFkZFRvb2xzIiwidG9vbHNBY3Rpb25zIiwic2hvd0hpZGVMYXllciIsImxheWVyc0NvZGUiLCJHRU9OT1RFUyIsInNob3dFZGl0aW5nUGFuZWwiLCJwYW5lbCIsImZvckVhY2giLCJsYXllckNvbmZpZyIsImxheWVyQ29kZSIsInNldEljb25zVG9vbCIsImljb250b29scyIsInRvZ2dsZUVkaXRpbmciLCJzaG93UGFuZWwiLCJpc0NoZWNrZWQiLCJpc0xheWVyVmlzaWJsZSIsImN1cnJlbnRQcm9qZWN0IiwiZ2V0Q3VycmVudFByb2plY3QiLCJnZXRUeXBlIiwiZ2V0SWQiLCJsYXllcnNDb25maWciLCJpY29ucyIsInNldHVwVG9vbHNBY3Rpb24iLCJ0b29sIiwicGx1Z2luIiwiLi9wYW5lbCIsIi4vcGx1Z2luc2VydmljZSIsInBsdWdpbmNvbmZpZyIsIjQiLCI1IiwiRWRpdG9yUGFuZWwiLCJpZCIsImludGVybmFsUGFuZWwiLCJQYW5lbENvbXBvbmVudCIsInJlc29sdmVkVmFsdWUiLCJyZXNvbHZlIiwiUGFuZWwiLCJWdWUiLCJ0ZW1wbGF0ZSIsImRhdGEiLCJpbWFnZVBhdGgiLCJnZXRSZXNvdXJjZXNVcmwiLCJzdGF0ZSIsInJlc291cmNlc3VybCIsImVkaXRvcnN0b29sYmFycyIsImxheWVyY29kZSIsImxheWVyQ29kZXMiLCJ0aXRsZSIsInRvb2x0eXBlIiwiaWNvbnRvb2wiLCJpY29uIiwic2F2ZWJ0bmxhYmVsIiwibWV0aG9kcyIsInRvZ2dsZUVkaXRUb29sIiwidG9vbFR5cGUiLCJlZGl0aW5nIiwiZWRpdGluZ3Rvb2xidG5Ub2dnbGVkIiwiZWRpdGluZ3Rvb2xidG5FbmFibGVkIiwib25DbG9zZSIsInN0b3AiLCJjb21wdXRlZCIsImVkaXRpbmdidG5sYWJlbCIsImVkaXRpbmdidG5FbmFibGVkIiwiZW5hYmxlZCIsIm1lc3NhZ2UiLCJ0b29sc3RlcCIsInRvdGFsIiwic3RlcG1lc3NhZ2UiLCJwcm90byIsInByb3RvdHlwZSIsIm9uU2hvdyIsImNvbnRhaW5lciIsIiRtb3VudCIsIiRhcHBlbmRUbyIsImNvbnNvbGUiLCJsb2ciLCJzZWxmIiwiZGVmZXJyZWQiLCIkIiwiRGVmZXJyZWQiLCJ0aGVuIiwiJGRlc3Ryb3kiLCJmYWlsIiwicmVqZWN0IiwicHJvbWlzZSIsImljb25zQ29uZmlnIiwiZWRpdG9yVG9vbHMiLCJlZGl0b3JUb29sSW5kZXgiLCJ0b29sSW5kZXgiLCIuL3BhbmVsLmh0bWwiLCI2IiwibGF5ZXJOYW1lIiwidHlwZSIsImlzQ2hlY2siLCJhY3Rpb24iLCJlZGl0b3JDbGFzcyIsImxheWVyc1N0eWxlIiwibGF5ZXJzRWRpdGluZ1N0eWxlIiwiY3JlYXRlU3R5bGUiLCJzdHlsZU9wdGlvbnMiLCJpY29udXJsIiwib2wiLCJzdHlsZSIsIlN0eWxlIiwiaW1hZ2UiLCJJY29uIiwiYW5jaG9yIiwib2Zmc2V0Iiwic3JjIiwidXJsIiwiYWRkIiwiZGVsZXRlIiwiZWRpdCIsIm1vdmUiLCJ2ZWN0b3IiLCJlZGl0b3IiLCJjcnMiLCIuL2VkaXRvcnMvZ2Vvbm90ZXNlZGl0b3IiLCI3IiwiR2Vvbm90ZXNTZXJ2aWNlIiwiX21hcFNlcnZpY2UiLCJfbG9hZERhdGFPbk1hcFZpZXdDaGFuZ2VMaXN0ZW5lciIsIl9jdXJyZW50RWRpdGluZ0xheWVyIiwiX3BsdWdpblRvb2xzIiwic3RhcnRpbmdFZGl0aW5nVG9vbCIsInJldHJpZXZpbmdEYXRhIiwiaGFzRWRpdHMiLCJfbG9hZGVyIiwiVmVjdG9yTG9hZGVyTGF5ZXIiLCJfY3JzIiwiX2xheWVycyIsIl9lZGl0b3JDbGFzcyIsIl9sYXllcnNTdHlsZSIsIl9sYXllcnNFZGl0aW5nU3R5bGUiLCJfY3VzdG9tVXJsUGFyYW1ldGVycyIsImluZm91cmwiLCJzZXRMYXllclN0eWxlIiwib3B0aW9uc19sb2FkZXIiLCJiYXNldXJsIiwibWFwU2VydmljZSIsIm1vZGUiLCJlbWl0IiwiaW50ZXJhY3Rpb24iLCJjdXJyZW50RWRpdGluZ0xheWVyIiwiX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIiLCJhY3RpdmVUb29sIiwiZ2V0QWN0aXZlVG9vbCIsImluc3RhbmNlIiwib3duc0ludGVyYWN0aW9uIiwiX3N0b3BFZGl0aW5nVG9vbCIsIkxheWVyIiwibGF5ZXJJZCIsImxheWVyIiwiZ2V0UHJvamVjdCIsImdldExheWVyQnlJZCIsImdldE9yaWdOYW1lIiwicGx1Z2luVG9vbHNTZXJ2aWNlIiwiX3BsdWdpblRvb2xzU2VydmljZSIsImdldFBsdWdpblRvb2xzIiwia2V5IiwiZ2V0TGF5ZXJTdHlsZSIsIl90b2dnbGVDaGVja0JveFBsdWdpblRvb2wiLCJwbHVnaW5JbmRleCIsImdldFN0YXRlIiwidG9vbHNHcm91cHMiLCJwbHVnaW5Ub29scyIsInZlY3RvckxheWVyIiwicGx1Z2luVG9vbCIsImluZGV4IiwiaGFzIiwidG9vbENvbmZpZyIsInVwZGF0ZVRvb2xzR3JvdXAiLCJzZXRWaXNpYmxlIiwiaXNWaXNpYmxlIiwiaXNSZWFkeSIsImxvYWRMYXllcnMiLCJfYWRkVG9NYXAiLCJfY2FuY2VsT3JTYXZlIiwiX3N0b3BFZGl0aW5nIiwiX3N0YXJ0RWRpdGluZyIsIl9zYXZlV2l0aG91dEFzayIsIl9zdGFydEVkaXRpbmdUb29sIiwiaXNTdGFydGVkIiwiX3N0b3BFZGl0b3IiLCJnZXRMYXllckNvZGVzIiwidmFsdWVzIiwiX3NldFVwVmVjdG9yTGF5ZXIiLCJfc2V0VXBFZGl0b3IiLCJvcHRpb25zX2VkaXRvciIsImZvcm1DbGFzcyIsIkZvcm1DbGFzcyIsImVkaXRpbmdWZWN0b3JTdHlsZSIsInNldFZlY3RvckxheWVyIiwiZGlydHkiLCJzZXRNb2RlIiwidmVjdG9yTGF5ZXJzQ29kZXMiLCJnZXRWZWN0b3JMYXllcnNDb2RlcyIsImxvY2tGZWF0dXJlcyIsIm5vdGlmeSIsImVycm9yIiwicmVzZXQiLCJfdW5sb2NrTGF5ZXIiLCJfdXBkYXRlRWRpdGluZ1N0YXRlIiwiX2NsZWFuVXAiLCJjbGVhblVwTGF5ZXJzIiwiX3N0YXJ0RWRpdG9yIiwic3RhcnQiLCJfc2V0Q3VycmVudEVkaXRpbmdMYXllciIsImNhblN0YXJ0VG9vbCIsInNldFRvb2wiLCJyZXQiLCJzdG9wVG9vbCIsImRpcnR5RWRpdG9ycyIsImlzRGlydHkiLCJfc2F2ZUVkaXRzIiwicmVzdWx0IiwiX2Fza1R5cGUiLCJrZXlzIiwiX2Fza0NhbmNlbE9yU2F2ZSIsImJ1dHRvblR5cGVzIiwiU0FWRSIsImxhYmVsIiwiY2xhc3NOYW1lIiwiY2FsbGJhY2siLCJOT1NBVkUiLCJDQU5DRUwiLCJidXR0b25zIiwic2F2ZSIsIm5vc2F2ZSIsImNhbmNlbCIsImRpYWxvZyIsIl9zZW5kRWRpdHMiLCJyZXNwb25zZSIsInN1Y2Nlc3MiLCJfY29tbWl0RWRpdHMiLCJlcnJvcnMiLCJlZGl0c1RvUHVzaCIsIm1hcCIsImxheWVybmFtZSIsImdldFZlY3RvckxheWVyIiwiZWRpdHMiLCJnZXRFZGl0ZWRGZWF0dXJlcyIsIl9wb3N0RGF0YSIsInJldHVybmVkIiwiZWRpdG9ycyIsInVwZGF0ZWRGZWF0dXJlQXR0cmlidXRlcyIsIm9sZGZpZCIsImNsaWVudGlkIiwiZmlkIiwiZ2V0RWRpdFZlY3RvckxheWVyIiwic2V0RmVhdHVyZURhdGEiLCJuZXdfbG9ja2lkcyIsIm5ld2xvY2tJZCIsImFkZExvY2tJZCIsImNvbW1pdCIsIl91bmRvRWRpdHMiLCJjdXJyZW50RWRpdGluZ0xheWVyQ29kZSIsIl91cGRhdGVUb29sU3RlcHNTdGF0ZSIsImdldFRvb2wiLCJ0b29sSW5zdGFuY2UiLCJzdGVwcyIsIl9zZXRUb29sU3RlcFN0YXRlIiwic3RlcCIsImlzVW5kZWZpbmVkIiwibWVzc2FnZXMiLCJ0b29sU3RlcHNNZXNzYWdlcyIsImN1cnJlbnRTdGVwSW5kZXgiLCJ0b3RhbFN0ZXBzIiwidmlld2VyIiwiYWRkVG9NYXAiLCJsb2FkQWxsVmVjdG9yc0RhdGEiLCJfcG9zdEJhdGNoRGF0YSIsImZvcm0iLCJKU09OIiwic3RyaW5naWZ5IiwiRm9ybURhdGEiLCJhcHBlbmQiLCJhamF4IiwiZGF0YVR5cGUiLCJjb250ZW50VHlwZSIsInByb2Nlc3NEYXRhIiwibXVsdGlFZGl0c1RvUHVzaCIsImpzb25EYXRhIiwicG9zdCIsIl91bmxvY2siLCJfbG9ja0xheWVyIiwiZmVhdHVyZUxvY2tzIiwiX3ZlY3RvckxheWVyc0RhdGEiLCJmZWF0dXJlbG9ja3MiLCJfbG9ja0xheWVycyIsImdldCIsImdldExvYWRlciIsIkczV09iamVjdCIsIlZlY3RvckxheWVyTG9hZGVyIiwiLi9lZGl0b3JzL2F0dHJpYnV0ZXNmb3JtIl0sIm1hcHBpbmdzIjoiQ0FBQSxRQUFVQSxHQUFFQyxFQUFFQyxFQUFFQyxHQUFHLFFBQVNDLEdBQUVDLEVBQUVDLEdBQUcsSUFBSUosRUFBRUcsR0FBRyxDQUFDLElBQUlKLEVBQUVJLEdBQUcsQ0FBQyxHQUFJRSxHQUFrQixrQkFBVEMsVUFBcUJBLE9BQVEsS0FBSUYsR0FBR0MsRUFBRSxNQUFPQSxHQUFFRixHQUFFLEVBQUksSUFBR0ksRUFBRSxNQUFPQSxHQUFFSixHQUFFLEVBQUksSUFBSUssR0FBRSxHQUFJQyxPQUFNLHVCQUF1Qk4sRUFBRSxJQUFLLE1BQU1LLEdBQUVFLEtBQUssbUJBQW1CRixFQUFFLEdBQUlHLEdBQUVYLEVBQUVHLElBQUlTLFdBQVliLEdBQUVJLEdBQUcsR0FBR1UsS0FBS0YsRUFBRUMsUUFBUSxTQUFTZCxHQUFHLEdBQUlFLEdBQUVELEVBQUVJLEdBQUcsR0FBR0wsRUFBRyxPQUFPSSxHQUFFRixFQUFFQSxFQUFFRixJQUFJYSxFQUFFQSxFQUFFQyxRQUFRZCxFQUFFQyxFQUFFQyxFQUFFQyxHQUFHLE1BQU9ELEdBQUVHLEdBQUdTLFFBQWtELElBQUksR0FBMUNMLEdBQWtCLGtCQUFURCxVQUFxQkEsUUFBZ0JILEVBQUUsRUFBRUEsRUFBRUYsRUFBRWEsT0FBT1gsSUFBSUQsRUFBRUQsRUFBRUUsR0FBSSxPQUFPRCxLQUFLYSxHQUFHLFNBQVNULEVBQVFVLEVBQU9KLEdBVXZkLFFBQVNLLEdBQVlDLEdBQ25CQyxFQUFLQyxLQUFLRixHQUNWRSxLQUFLQyxXQUFhQyxFQVhwQixHQUFJQyxHQUFVQyxPQUFPQyxLQUFLQyxNQUFNSCxRQUM1QkosRUFBT0ssT0FBT0MsS0FBS0MsTUFBTVAsS0FDekJRLEVBQVlILE9BQU9JLElBQUlELFVBQ3ZCRSxFQUFPTCxPQUFPSSxJ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TCxLQUFLd1YsVUFBWSxXQUNmLE1BQU94VixNQUFLb0wsU0F6eUJoQixHQUFJakwsR0FBVUMsT0FBT0MsS0FBS0MsTUFBTUgsUUFDNUJzVixFQUFZclYsT0FBT0MsS0FBS29WLFVBQ3hCbFUsRUFBTW5CLE9BQU9JLElBQUllLElBQ2pCOEosRUFBb0JqTCxPQUFPQyxLQUFLcVYsa0JBQ2hDdkcsRUFBWWpRLEVBQVEsMkJBeXlCeEJpQixHQUFReUssRUFBaUI2SyxHQUN6QjdWLEVBQU9KLFFBQVUsR0FBSW9MLEtBQ2xCK0ssMkJBQTJCLFNBQVMiLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgYmFzZSA9IGczd3Nkay5jb3JlLnV0aWxzLmJhc2U7XG52YXIgRm9ybVBhbmVsID0gZzN3c2RrLmd1aS5Gb3JtUGFuZWw7XG52YXIgRm9ybSA9IGczd3Nkay5ndWkuRm9ybTtcblxudmFyIEdlb25vdGVGb3JtUGFuZWwgPSBGb3JtUGFuZWwuZXh0ZW5kKHtcbiAgLy90ZW1wbGF0ZTogcmVxdWlyZSgnLi9hdHRyaWJ1dGVzZm9ybS5odG1sJylcbn0pO1xuXG5mdW5jdGlvbiBHZW9ub3RlRm9ybShvcHRpb25zKXtcbiAgYmFzZSh0aGlzLG9wdGlvbnMpO1xuICB0aGlzLl9mb3JtUGFuZWwgPSBHZW9ub3RlRm9ybVBhbmVsO1xufVxuaW5oZXJpdChHZW9ub3RlRm9ybSxGb3JtKTtcblxubW9kdWxlLmV4cG9ydHMgPSBHZW9ub3RlRm9ybTtcblxufSx7fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgYmFzZSA9IGczd3Nkay5jb3JlLnV0aWxzLmJhc2U7XG52YXIgRWRpdG9yID0gZzN3c2RrLmNvcmUuRWRpdG9yO1xudmFyIFBsdWdpblNlcnZpY2UgPSByZXF1aXJlKCcuLi9wbHVnaW5zZXJ2aWNlJyk7XG52YXIgRm9ybSA9IHJlcXVpcmUoJy4vYXR0cmlidXRlc2Zvcm0nKTtcbnZhciBmb3JtID0gbnVsbDsgLy8gYnJ1dHRvIG1hIGRldm8gdGVuZXJsbyBlc3Rlcm5vIHNlbm7DsiBzaSBjcmVhIHVuIGNsaWNvIGRpIHJpZmVyaW1lbnRpIGNoZSBtYW5kYSBpbiBwYWxsYSBWdWVcblxuXG5mdW5jdGlvbiBHZW9ub3Rlc0VkaXRvcihvcHRpb25zKSB7XG5cbiAgLy8gaW4gcXVlc3RvIG1vZG8gcGFzc2lhbW8gaWwgbWFwc2VydmljZSBjb21lIGFyZ29tZW50byBhbCBzdXBlcmNsYXNzIChlZGl0b3IpXG4gIC8vIGRpIGl0ZXJuZXRlZGl0b3IgaW4gbW9kbyBkYSBhc3NlZ25hcmFlIGFuY2hlIGEgaXRlcm5ldGVkaXRvciBpbCBtYXBzZXJ2ZWljZSBjaGUgeHNlcnZpcsOgIGFkIGVzZW1waW8gYWQgYWdnaXVuZ2VyZVxuICAvLyBsJ2ludGVyYWN0aW9uIGFsbGEgbWFwcGEgcXVhbmRvIHZpZW5lIGNsaWNjYXRvIHN1IHVuIHRvb2xcbiAgb3B0aW9ucy5mb3JtVG9vbHMgPSBbXTtcbiAgYmFzZSh0aGlzLCBvcHRpb25zKTtcbiAgdmFyIHNhdmVFZGl0c1RvRGF0YWJhc2UgPSBmdW5jdGlvbigpIHtcbiAgICBQbHVnaW5TZXJ2aWNlLnNhdmVFZGl0cygpO1xuICB9O1xuICAvL3RoaXMuX3NhdmVFZGl0cyA9IF8uYmluZChQbHVnaW5TZXJ2aWNlLnNhdmVFZGl0cywgUGx1Z2luU2VydmljZSk7XG4gIC8vIGFwcmUgZm9ybSBhdHRyaWJ1dGkgcGVyIGkgIG5zZXJpbWVudG9cblxuICB0aGlzLm9uYWZ0ZXIoJ2FkZEZlYXR1cmUnLCBzYXZlRWRpdHNUb0RhdGFiYXNlKTtcbiAgdGhpcy5vbmFmdGVyKCdkZWxldGVGZWF0dXJlJywgc2F2ZUVkaXRzVG9EYXRhYmFzZSk7XG4gIHRoaXMub25hZnRlcignbW92ZUZlYXR1cmUnLCBzYXZlRWRpdHNUb0RhdGFiYXNlKTtcbiAgdGhpcy5vbmFmdGVyKCdwaWNrRmVhdHVyZScsIHNhdmVFZGl0c1RvRGF0YWJhc2UpO1xuXG4gIC8vIGFwcmUgZm9ybSBhdHRyaWJ1dGkgcGVyIGluc2VyaW1lbnRvXG59XG5cbmluaGVyaXQoR2Vvbm90ZXNFZGl0b3IsIEVkaXRvcik7XG5cbm1vZHVsZS5leHBvcnRzID0gR2Vvbm90ZXNFZGl0b3I7XG59LHtcIi4uL3BsdWdpbnNlcnZpY2VcIjo3LFwiLi9hdHRyaWJ1dGVzZm9ybVwiOjF9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vIFNESyAvLy9cbnZhciBpbmhlcml0ID0gZzN3c2RrLmNvcmUudXRpbHMuaW5oZXJpdDtcbnZhciBiYXNlID0gZzN3c2RrLmNvcmUudXRpbHMuYmFzZTtcbnZhciBQbHVnaW4gPSBnM3dzZGsuY29yZS5QbHVnaW47XG52YXIgR1VJID0gZzN3c2RrLmd1aS5HVUk7XG52YXIgUHJvamVjdHNSZWdpc3RyeSA9IGczd3Nkay5jb3JlLlByb2plY3RzUmVnaXN0cnk7XG4vLy8gUExVR0lOIC8vXG52YXIgcGx1Z2luQ29uZmlnID0gcmVxdWlyZSgncGx1Z2luY29uZmlnJyk7XG52YXIgU2VydmljZSA9IHJlcXVpcmUoJy4vcGx1Z2luc2VydmljZScpO1xudmFyIEVkaXRpbmdQYW5lbCA9IHJlcXVpcmUoJy4vcGFuZWwnKTtcblxudmFyIF9QbHVnaW4gPSBmdW5jdGlvbigpIHtcblxuICBiYXNlKHRoaXMpO1xuICB0aGlzLm5hbWUgPSAnbm90ZXMnO1xuICB0aGlzLmNvbmZpZyA9IG51bGw7XG4gIHRoaXMuc2VydmljZSA9IG51bGw7XG4gIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvL3NldHRvIGlsIHNlcnZpemlvXG4gICAgdGhpcy5zZXRQbHVnaW5TZXJ2aWNlKFNlcnZpY2UpO1xuICAgIC8vcmVjdXBlcm8gY29uZmlndXJhemlvbmUgZGVsIHBsdWdpblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5nZXRQbHVnaW5Db25maWcoKTtcbiAgICB0aGlzLnNldFVwSWNvbnNVcmwodGhpcy5jb25maWcubGF5ZXJzKTtcbiAgICAvL3JlZ2l0cm8gaWwgcGx1Z2luXG4gICAgaWYgKHRoaXMucmVnaXN0ZXJQbHVnaW4odGhpcy5jb25maWcuZ2lkKSkge1xuICAgICAgaWYgKCFHVUkucmVhZHkpIHtcbiAgICAgICAgR1VJLm9uKCdyZWFkeScsIF8uYmluZCh0aGlzLnNldHVwR3VpLCB0aGlzKSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXR1cEd1aSgpO1xuICAgICAgfVxuICAgICAgLy9pbml6aWFsaXp6byBpbCBzZXJ2aXppby4gSWwgc2Vydml6aW8gw6ggbCdpc3RhbnphIGRlbGxhIGNsYXNzZSBzZXJ2aXppb1xuICAgICAgcGx1Z2luQ29uZmlnLmN1c3RvbVVybFBhcmFtZXRlcnMgPSB0aGlzLmNyZWF0ZVBsdWdpbkN1c3RvbVVybFBhcmFtZXRlcnMoKTtcbiAgICAgIHRoaXMuc2VydmljZS5pbml0KHRoaXMuY29uZmlnLCBwbHVnaW5Db25maWcpO1xuICAgIH1cbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIHVuYSB2b2x0YSBjaGUgbGEgR1VJIGhhIGVtZXNzbyBsJ2V2ZW50byAncmVhZHknXG4gIC8vIHNlcnZlIGEgbW9udGFyZSBpIGNvbXBvZW50aSBkZWwgcGx1Z2luIHN1bGxhIHNpZGViYXJcbiAgdGhpcy5zZXR1cEd1aSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b29sc0NvbXBvbmVudCA9IEdVSS5nZXRDb21wb25lbnQoJ3Rvb2xzJyk7XG4gICAgdmFyIHRvb2xzU2VydmljZSA9IHRvb2xzQ29tcG9uZW50LmdldFNlcnZpY2UoKTtcbiAgICB2YXIgdG9vbHMgPSBwbHVnaW5Db25maWcudG9vbHModGhpcyk7XG4gICAgdGhpcy5zZXJ2aWNlLnNldFBsdWdpblRvb2xzKHRvb2xzKTtcbiAgICB0aGlzLnNlcnZpY2Uuc2V0UGx1Z2luVG9vbHNTZXJ2aWNlKHRvb2xzU2VydmljZSk7XG4gICAgdG9vbHNTZXJ2aWNlLmFkZFRvb2xzKDEgLCdHRU9OT1RFUycsIHRvb2xzKTtcblxuICB9O1xuICAvLyBhemlvbmkgY2hlIHNvbm8gbGVnYXRpIGFpIHRvb2xzXG4gIHRoaXMudG9vbHNBY3Rpb25zID0ge1xuICAgIHNob3dIaWRlTGF5ZXI6ICBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuc2VydmljZS5zaG93SGlkZUxheWVyKHBsdWdpbkNvbmZpZy5sYXllcnNDb2RlLkdFT05PVEVTKTtcbiAgICB9LFxuICAgIHNob3dFZGl0aW5nUGFuZWw6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhbmVsID0gbmV3IEVkaXRpbmdQYW5lbCgpO1xuICAgICAgXy5mb3JFYWNoKHRoaXMuY29uZmlnLmxheWVycywgZnVuY3Rpb24obGF5ZXJDb25maWcsIGxheWVyQ29kZSkge1xuICAgICAgICBwYW5lbC5zZXRJY29uc1Rvb2wobGF5ZXJDb2RlLCBsYXllckNvbmZpZy5pY29udG9vbHMpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnNlcnZpY2UudG9nZ2xlRWRpdGluZygpO1xuICAgICAgR1VJLnNob3dQYW5lbChwYW5lbCk7XG4gICAgfSxcbiAgICBpc0NoZWNrZWQgOiBmdW5jdGlvbihsYXllckNvZGUpIHtcbiAgICAgIHJldHVybiB0aGlzLnNlcnZpY2UuaXNMYXllclZpc2libGUoKTtcbiAgICB9XG4gIH07XG5cbiAgLy9zZXR1cFBsdWdpbkN1c3RvbVBhcmFtZXRlcnNcbiAgdGhpcy5jcmVhdGVQbHVnaW5DdXN0b21VcmxQYXJhbWV0ZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGN1c3RvbVVybFBhcmFtZXRlcnM9JyYnO1xuICAgIHZhciBjdXJyZW50UHJvamVjdCA9IFByb2plY3RzUmVnaXN0cnkuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBjdXN0b21VcmxQYXJhbWV0ZXJzKz0ncHJvamVjdF90eXBlPScrY3VycmVudFByb2plY3QuZ2V0VHlwZSgpKycmcHJvamVjdF9pZD0nK2N1cnJlbnRQcm9qZWN0LmdldElkKCk7XG4gICAgcmV0dXJuIGN1c3RvbVVybFBhcmFtZXRlcnNcbiAgfTtcbiAgLy8gc2V0dXAgaWNvblVybCBmb3IgTGF5ZXJcbiAgdGhpcy5zZXRVcEljb25zVXJsID0gZnVuY3Rpb24obGF5ZXJzQ29uZmlnKSB7XG4gICAgXy5mb3JFYWNoKGxheWVyc0NvbmZpZywgZnVuY3Rpb24obGF5ZXJDb25maWcpIHtcbiAgICAgIHBsdWdpbkNvbmZpZy5sYXllcnNbbGF5ZXJDb25maWcubmFtZV0uaWNvbnMgPSBsYXllckNvbmZpZy5pY29ucztcbiAgICB9KVxuICB9O1xuXG4gIHRoaXMuc2V0dXBUb29sc0FjdGlvbiA9IGZ1bmN0aW9uKHRvb2xzKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIF8uZm9yRWFjaCh0b29scywgZnVuY3Rpb24odG9vbCl7XG4gICAgICAvL1RPRE9cbiAgICB9KVxuICB9O1xuXG59O1xuXG5pbmhlcml0KF9QbHVnaW4sIFBsdWdpbik7XG5cbihmdW5jdGlvbihwbHVnaW4pe1xuICBwbHVnaW4uaW5pdCgpO1xufSkobmV3IF9QbHVnaW4pO1xuXG5cblxuXG59LHtcIi4vcGFuZWxcIjo1LFwiLi9wbHVnaW5zZXJ2aWNlXCI6NyxcInBsdWdpbmNvbmZpZ1wiOjZ9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJnM3ctaXRlcm5ldC1lZGl0aW5nLXBhbmVsXFxcIj5cXG4gIDx0ZW1wbGF0ZSB2LWZvcj1cXFwidG9vbGJhciBpbiBlZGl0b3JzdG9vbGJhcnNcXFwiPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJwYW5lbCBwYW5lbC1wcmltYXJ5XFxcIj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJwYW5lbC1oZWFkaW5nXFxcIj5cXG4gICAgICAgIDxoMyBjbGFzcz1cXFwicGFuZWwtdGl0bGVcXFwiPnt7IHRvb2xiYXIubmFtZSB9fTwvaDM+XFxuICAgICAgPC9kaXY+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwicGFuZWwtYm9keVxcXCI+XFxuICAgICAgICA8dGVtcGxhdGUgdi1mb3I9XFxcInRvb2wgaW4gdG9vbGJhci50b29sc1xcXCI+XFxuICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVkaXRidG5cXFwiIDpjbGFzcz1cXFwieydlbmFibGVkJyA6IChzdGF0ZS5lZGl0aW5nLm9uICYmIGVkaXRpbmd0b29sYnRuRW5hYmxlZCh0b29sKSksICd0b2dnbGVkJyA6IGVkaXRpbmd0b29sYnRuVG9nZ2xlZCh0b29sYmFyLmxheWVyY29kZSwgdG9vbC50b29sdHlwZSl9XFxcIj5cXG4gICAgICAgICAgICA8aW1nIGhlaWdodD1cXFwiMzBweFxcXCIgd2lkdGg9XFxcIjMwcHhcXFwiIEBjbGljaz1cXFwidG9nZ2xlRWRpdFRvb2wodG9vbGJhci5sYXllcmNvZGUsIHRvb2wudG9vbHR5cGUpXFxcIiA6YWx0Lm9uY2U9XFxcInRvb2wudGl0bGVcXFwiIDp0aXRsZS5vbmNlPVxcXCJ0b29sLnRpdGxlXFxcIiA6c3JjLm9uY2U9XFxcInRvb2wuaWNvblxcXCI+PC9pbWc+XFxuICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC90ZW1wbGF0ZT5cXG4gICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuICA8L3RlbXBsYXRlPlxcbiAgPGRpdiB2LXNob3c9XFxcInN0YXRlLnJldHJpZXZpbmdEYXRhXFxcIiBzdHlsZT1cXFwiY29sb3I6I2ZmZmZmZlxcXCI+XFxuICAgIDxzcGFuPkNhcmljYW1lbnRvIERhdGkgLi4uIDwvc3Bhbj48aW1nIDpzcmM9XFxcInJlc291cmNlc3VybCArJ2ltYWdlcy9sb2FkZXIuc3ZnJ1xcXCI+XFxuICA8L2Rpdj5cXG4gIDxkaXYgY2xhc3M9XFxcIm1lc3NhZ2VcXFwiPlxcbiAgICB7e3sgbWVzc2FnZSB9fX1cXG4gIDwvZGl2PlxcbjwvZGl2PlxcblwiO1xuXG59LHt9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciByZXNvbHZlZFZhbHVlID0gZzN3c2RrLmNvcmUudXRpbHMucmVzb2x2ZTtcbnZhciBpbmhlcml0ID0gZzN3c2RrLmNvcmUudXRpbHMuaW5oZXJpdDtcbnZhciBHVUkgPSBnM3dzZGsuZ3VpLkdVSTtcbi8vIGJhc2UgY2xhc3MgUGFuZWxcbnZhciBQYW5lbCA9ICBnM3dzZGsuZ3VpLlBhbmVsO1xudmFyIFNlcnZpY2UgPSByZXF1aXJlKCcuL3BsdWdpbnNlcnZpY2UnKTtcblxudmFyIFBhbmVsQ29tcG9uZW50ID0gVnVlLmV4dGVuZCh7XG4gIHRlbXBsYXRlOiByZXF1aXJlKCcuL3BhbmVsLmh0bWwnKSxcbiAgZGF0YTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGltYWdlUGF0aCA9IEdVSS5nZXRSZXNvdXJjZXNVcmwoKSArICdpbWFnZXMvJ1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0ZTogU2VydmljZS5zdGF0ZSxcbiAgICAgIHJlc291cmNlc3VybDogR1VJLmdldFJlc291cmNlc1VybCgpLFxuICAgICAgZWRpdG9yc3Rvb2xiYXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiBcIkdlb25vdGVzXCIsXG4gICAgICAgICAgbGF5ZXJjb2RlOiBTZXJ2aWNlLmxheWVyQ29kZXMuR0VPTk9URVMsXG4gICAgICAgICAgdG9vbHM6W1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJBZ2dpdW5naSBHZW9ub3RhXCIsXG4gICAgICAgICAgICAgIC8vIHRvb2x0eXBlIMOoIGwnYXR0cmlidXRvIGNoZSBzZXJ2ZXIgcGVyIHNjZWdsaWVyZSBpbCB0aXBvIGRpIHRvb2xcbiAgICAgICAgICAgICAgLy8gZGVsbCdlZGl0b3IgZ2VuZXJhbGUgY2hlIGRvdnLDoCBlc3NlcmUgaW1wb3N0YXRvXG4gICAgICAgICAgICAgIHRvb2x0eXBlOiAnYWRkZmVhdHVyZScsXG4gICAgICAgICAgICAgIGljb250b29sOiAnYWRkJyxcbiAgICAgICAgICAgICAgaWNvbjogaW1hZ2VQYXRoICsnaXRlcm5ldEFkZFBvaW50LnBuZydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRpdGxlOiBcIlNwb3N0YSBHZW9ub3RhXCIsXG4gICAgICAgICAgICAgIHRvb2x0eXBlOiAnbW92ZWZlYXR1cmUnLFxuICAgICAgICAgICAgICBpY29udG9vbDogJ21vdmUnLFxuICAgICAgICAgICAgICBpY29uOiBpbWFnZVBhdGggKyAnaXRlcm5ldE1vdmVQb2ludC5wbmcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJSaW11b3ZpIEdlb25vdGFcIixcbiAgICAgICAgICAgICAgdG9vbHR5cGU6ICdkZWxldGVmZWF0dXJlJyxcbiAgICAgICAgICAgICAgaWNvbnRvb2w6ICdkZWxldGUnLFxuICAgICAgICAgICAgICBpY29uOiBpbWFnZVBhdGggKyAnaXRlcm5ldERlbGV0ZVBvaW50LnBuZydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRpdGxlOiBcIkVkaXRhIGdlb25vdGFcIixcbiAgICAgICAgICAgICAgdG9vbHR5cGU6ICdlZGl0YXR0cmlidXRlcycsXG4gICAgICAgICAgICAgIGljb250b29sOiAnZWRpdCcsXG4gICAgICAgICAgICAgIGljb246IGltYWdlUGF0aCArICdlZGl0QXR0cmlidXRlcy5wbmcnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgc2F2ZWJ0bmxhYmVsOiBcIlNhbHZhXCJcbiAgICB9XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICAvL21ldG9kbyBjaGlhbWF0byBxdWFuZG8gc2kgY2xpY2NhIHN1IGF2dmlhL3Rlcm1pbmEgZWRpdGluZ1xuICAgIHRvZ2dsZUVkaXRpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgU2VydmljZS50b2dnbGVFZGl0aW5nKCk7XG4gICAgfSxcbiAgICBzYXZlRWRpdHM6IGZ1bmN0aW9uKCl7XG4gICAgICBTZXJ2aWNlLnNhdmVFZGl0cygpO1xuICAgIH0sXG4gICAgLy8gY2hhaW1hdG8gcXVhbmRvIHNpIGNsaWNjYSBzdWwgdW4gdG9vbCBkZWxsJ2VkaXRvclxuICAgIC8vIGNvbWUgYWQgZXNlbXBpbyAgYWRkIG1vdmUgZWRpdCBhdHRyaWJ1dGVzIGV0YyAuLlxuICAgIHRvZ2dsZUVkaXRUb29sOiBmdW5jdGlvbihsYXllckNvZGUsIHRvb2xUeXBlKSB7XG4gICAgICBpZiAodG9vbFR5cGUgPT0gJycpe1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvL3ZlcmlmaWNhIHNlIGwnZWRpdG9yIMOoIGluIGVkaXRpbmcgb24gdHJ1ZVxuICAgICAgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy5vbikge1xuICAgICAgICBTZXJ2aWNlLnRvZ2dsZUVkaXRUb29sKGxheWVyQ29kZSwgdG9vbFR5cGUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gbWV0b2RvIGNoZSB2aWVuZSBjaGlhbWF0byBwZXIgdmVyaWZpY2FyZSBlIHNldHRhcmVcbiAgICAvLyBsYSBjbGFzc2UgKHByZW11dG8gbyBubyBkZWwgYm90dG9uZSB0b29sIGluIHF1ZXN0aW9uZSlcbiAgICBlZGl0aW5ndG9vbGJ0blRvZ2dsZWQ6IGZ1bmN0aW9uKGxheWVyQ29kZSwgdG9vbFR5cGUpIHtcbiAgICAgIHJldHVybiAodGhpcy5zdGF0ZS5lZGl0aW5nLmxheWVyQ29kZSA9PSBsYXllckNvZGUgJiYgdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xUeXBlID09IHRvb2xUeXBlKTtcbiAgICB9LFxuICAgIC8vIGZ1bnppb25lIGNoZSB2ZXJpZmljYSBzZSBhYmlsaXRhcmUgbyBtZW5vIGkgYm90dG9uaSBkZWkgdG9vbHNcbiAgICBlZGl0aW5ndG9vbGJ0bkVuYWJsZWQ6IGZ1bmN0aW9uKHRvb2wpe1xuICAgICAgcmV0dXJuIHRvb2wudG9vbHR5cGUgIT0gJyc7XG4gICAgfSxcbiAgICBvbkNsb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgIFNlcnZpY2Uuc3RvcCgpO1xuICAgIH1cbiAgfSxcbiAgY29tcHV0ZWQ6IHtcbiAgICBlZGl0aW5nYnRubGFiZWw6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuZWRpdGluZy5vbiA/IFwiVGVybWluYSBlZGl0aW5nXCIgOiBcIkF2dmlhIGVkaXRpbmdcIjtcbiAgICB9LFxuICAgIGVkaXRpbmdidG5FbmFibGVkOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAodGhpcy5zdGF0ZS5lZGl0aW5nLmVuYWJsZWQgfHwgdGhpcy5zdGF0ZS5lZGl0aW5nLm9uKSA/IFwiXCIgOiBcImRpc2FibGVkXCI7XG4gICAgfSxcbiAgICBtZXNzYWdlOiBmdW5jdGlvbigpe1xuICAgICAgdmFyIG1lc3NhZ2UgPSBcIlwiO1xuICAgICAgaWYgKCF0aGlzLnN0YXRlLmVkaXRpbmcuZW5hYmxlZCl7XG4gICAgICAgIG1lc3NhZ2UgPSAnPHNwYW4gc3R5bGU9XCJjb2xvcjogcmVkXCI+QXVtZW50YXJlIGlsIGxpdmVsbG8gZGkgem9vbSBwZXIgYWJpbGl0YXJlIGxcXCdlZGl0aW5nJztcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC5tZXNzYWdlKXtcbiAgICAgICAgdmFyIG4gPSB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbHN0ZXAubjtcbiAgICAgICAgdmFyIHRvdGFsID0gdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLnRvdGFsO1xuICAgICAgICB2YXIgc3RlcG1lc3NhZ2UgPSB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbHN0ZXAubWVzc2FnZTtcbiAgICAgICAgbWVzc2FnZSA9ICc8ZGl2IHN0eWxlPVwibWFyZ2luLXRvcDoyMHB4XCI+R1VJREEgU1RSVU1FTlRPOjwvZGl2PicgK1xuICAgICAgICAgICc8ZGl2PjxzcGFuPlsnK24rJy8nK3RvdGFsKyddIDwvc3Bhbj48c3BhbiBzdHlsZT1cImNvbG9yOiB5ZWxsb3dcIj4nK3N0ZXBtZXNzYWdlKyc8L3NwYW4+PC9kaXY+JztcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH1cbiAgfVxufSk7XG5cbmZ1bmN0aW9uIEVkaXRvclBhbmVsKCkge1xuICAvLyBwcm9wcmlldMOgIG5lY2Vzc2FyaWUuIEluIGZ1dHVybyBsZSBtZXR0ZXJtbyBpbiB1bmFcbiAgLy8gY2xhc3NlIFBhbmVsIGRhIGN1aSBkZXJpdmVyYW5ubyB0dXR0aSBpIHBhbm5lbGxpIGNoZSB2b2dsaW9ubyBlc3NlcmUgbW9zdHJhdGkgbmVsbGEgc2lkZWJhclxuICB0aGlzLmlkID0gXCJnZW9ub3Rlcy1lZGl0aW5nLXBhbmVsXCI7XG4gIHRoaXMubmFtZSA9IFwiR2VzdGlvbmUgZGF0aSBHRU9OT1RFU1wiO1xuICB0aGlzLmludGVybmFsUGFuZWwgPSBuZXcgUGFuZWxDb21wb25lbnQoKTtcbn1cblxuaW5oZXJpdChFZGl0b3JQYW5lbCwgUGFuZWwpO1xuXG52YXIgcHJvdG8gPSBQYW5lbC5wcm90b3R5cGU7XG5cbi8vIHZpZW5lIHJpY2hpYW1hdG8gZGFsbGEgdG9vbGJhclxuLy8gcXVhbmRvIGlsIHBsdWdpbiBjaGllZGUgZGkgbW9zdHJhcmUgdW4gcHJvcHJpbyBwYW5uZWxsbyBuZWxsYSBHVUkgKEdVSS5zaG93UGFuZWwpXG5wcm90by5vblNob3cgPSBmdW5jdGlvbihjb250YWluZXIpIHtcbiAgdmFyIHBhbmVsID0gdGhpcy5pbnRlcm5hbFBhbmVsO1xuICBwYW5lbC4kbW91bnQoKS4kYXBwZW5kVG8oY29udGFpbmVyKTtcbiAgcmV0dXJuIHJlc29sdmVkVmFsdWUodHJ1ZSk7XG59O1xuXG4vLyByaWNoaWFtYXRvIHF1YW5kbyBsYSBHVUkgY2hpZWRlIGRpIGNoaXVkZXJlIGlsIHBhbm5lbGxvLiBTZSByaXRvcm5hIGZhbHNlIGlsIHBhbm5lbGxvIG5vbiB2aWVuZSBjaGl1c29cbnByb3RvLm9uQ2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5sb2coJ2Nsb3NlJyk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICBTZXJ2aWNlLnN0b3AoKVxuICAudGhlbihmdW5jdGlvbigpe1xuICAgIHNlbGYuaW50ZXJuYWxQYW5lbC4kZGVzdHJveSh0cnVlKTtcbiAgICBzZWxmLmludGVybmFsUGFuZWwgPSBudWxsO1xuICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgfSlcbiAgLmZhaWwoZnVuY3Rpb24oKXtcbiAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgfSk7XG4gIFxuICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xufTtcblxucHJvdG8uc2V0SWNvbnNUb29sID0gZnVuY3Rpb24obGF5ZXJDb2RlLCBpY29uc0NvbmZpZykge1xuICB2YXIgZWRpdG9yVG9vbHMgPSB0aGlzLmludGVybmFsUGFuZWwuZWRpdG9yc3Rvb2xiYXJzO1xuICBfLmZvckVhY2goZWRpdG9yVG9vbHMsIGZ1bmN0aW9uKHRvb2wsIGVkaXRvclRvb2xJbmRleCkge1xuICAgIGlmIChsYXllckNvZGUgPT0gdG9vbC5sYXllcmNvZGUpIHtcbiAgICAgIF8uZm9yRWFjaCh0b29sLnRvb2xzLCBmdW5jdGlvbih0b29sLCB0b29sSW5kZXgpIHtcbiAgICAgICAgaWYgKGljb25zQ29uZmlnW3Rvb2wuaWNvbnRvb2xdKSB7XG4gICAgICAgICAgZWRpdG9yVG9vbHNbZWRpdG9yVG9vbEluZGV4XS50b29sc1t0b29sSW5kZXhdLmljb24gPSBpY29uc0NvbmZpZ1t0b29sLmljb250b29sXTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEVkaXRvclBhbmVsO1xuXG59LHtcIi4vcGFuZWwuaHRtbFwiOjQsXCIuL3BsdWdpbnNlcnZpY2VcIjo3fV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vL1F1aSBjaSBzb25vIGdsaSBlZGl0b3IgKGNsYXNzaSkgdXNhdGkgZGFpIHZhcmkgbGF5ZXJcbnZhciBHZW9ub3Rlc0VkaXRvciA9IHJlcXVpcmUoJy4vZWRpdG9ycy9nZW9ub3Rlc2VkaXRvcicpO1xuXG4vL2RlZmluaXNjbyBpIGNvZGljaSBsYXllclxudmFyIGxheWVyQ29kZXMgPSB0aGlzLmxheWVyQ29kZXMgPSB7XG4gICAgR0VPTk9URVM6ICdub3RlJ1xufTtcbi8vIGNsYXNzaSBlZGl0b3JcbnZhciBlZGl0b3JDbGFzcyA9IHt9O1xuZWRpdG9yQ2xhc3NbbGF5ZXJDb2Rlcy5HRU9OT1RFU10gPSBHZW9ub3Rlc0VkaXRvcjtcblxuLy9kZWZpbmlzY28gbGF5ZXIgZGVsIHBsdWdpbiBjb21lIG9nZ2V0dG9cbnZhciBsYXllcnMgPSB7fTtcbnZhciBsYXllcnNTdHlsZSA9IHt9O1xuLy9zdHlsZSBlZGl0aW5nXG52YXIgbGF5ZXJzRWRpdGluZ1N0eWxlID0ge307XG4vL2xheWVyXG4vL2xheWVyIFN0eWxlXG52YXIgY3JlYXRlU3R5bGUgPSBmdW5jdGlvbihzdHlsZU9wdGlvbnMpIHtcbiAgdmFyIGljb251cmwgPSBzdHlsZU9wdGlvbnMuaWNvbnVybDtcbiAgcmV0dXJuIG5ldyBvbC5zdHlsZS5TdHlsZSh7XG4gICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5JY29uKCh7XG4gICAgICBhbmNob3I6IFswLjUsIDAuNV0sXG4gICAgICBvZmZzZXQ6IFswLCAwXSxcbiAgICAgIHNyYzogaWNvbnVybFxuICAgIH0pKVxuICB9KTtcbn07XG5cbmxheWVyc1N0eWxlW2xheWVyQ29kZXMuR0VPTk9URVNdID0ge1xuXG4gIHVybDogY3JlYXRlU3R5bGUsXG4gIGFkZDogY3JlYXRlU3R5bGUsXG4gIGRlbGV0ZTogY3JlYXRlU3R5bGUsXG4gIGVkaXQ6IGNyZWF0ZVN0eWxlLFxuICBtb3ZlOiBjcmVhdGVTdHlsZVxuXG59O1xuXG5sYXllcnNFZGl0aW5nU3R5bGVbbGF5ZXJDb2Rlcy5HRU9OT1RFU10gPSB7fTtcblxubGF5ZXJzW2xheWVyQ29kZXMuR0VPTk9URVNdID0ge1xuICBsYXllckNvZGU6IGxheWVyQ29kZXMuR0VPTk9URVMsXG4gIHZlY3RvcjogbnVsbCxcbiAgZWRpdG9yOiBudWxsLFxuICBpY29udXJsOiBudWxsLFxuICBjcnM6IG51bGwsXG4gIC8vZGVmaW5pc2NvIGxvIHN0aWxlXG4gIHN0eWxlOiBsYXllcnNTdHlsZVtsYXllckNvZGVzLkdFT05PVEVTXVxufTtcblxuXG5cbi8vIGRlZmluaXNjbyBpIHRvb2xzXG5mdW5jdGlvbiB0b29scyhwbHVnaW4pIHtcbiAgcmV0dXJuIHRvb2xzID0gW1xuICAgIHtcbiAgICAgIG5hbWU6IFwiR2Vvbm90ZXNcIixcbiAgICAgIGxheWVyTmFtZTogJ25vdGUnLFxuICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgIGlzQ2hlY2s6IGZhbHNlLFxuICAgICAgYWN0aW9uOiBfLmJpbmQocGx1Z2luLnRvb2xzQWN0aW9ucy5zaG93SGlkZUxheWVyLCBwbHVnaW4pXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkVkaXRhIEdlb25vdGVzXCIsXG4gICAgICBhY3Rpb246IF8uYmluZChwbHVnaW4udG9vbHNBY3Rpb25zLnNob3dFZGl0aW5nUGFuZWwsIHBsdWdpbilcbiAgICB9XG4gIF07XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGxheWVyc0NvZGU6IGxheWVyQ29kZXMsXG4gICAgbGF5ZXJzOiBsYXllcnMsXG4gICAgbGF5ZXJzU3R5bGU6IGxheWVyc1N0eWxlLFxuICAgIGxheWVyc0VkaXRpbmdTdHlsZTogbGF5ZXJzRWRpdGluZ1N0eWxlLFxuICAgIGVkaXRvckNsYXNzOiBlZGl0b3JDbGFzcyxcbiAgICB0b29sczogdG9vbHNcbn07XG5cbn0se1wiLi9lZGl0b3JzL2dlb25vdGVzZWRpdG9yXCI6Mn1dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIGluaGVyaXQgPSBnM3dzZGsuY29yZS51dGlscy5pbmhlcml0O1xudmFyIEczV09iamVjdCA9IGczd3Nkay5jb3JlLkczV09iamVjdDtcbnZhciBHVUkgPSBnM3dzZGsuZ3VpLkdVSTtcbnZhciBWZWN0b3JMb2FkZXJMYXllciA9IGczd3Nkay5jb3JlLlZlY3RvckxheWVyTG9hZGVyO1xudmFyIEZvcm1DbGFzcyA9IHJlcXVpcmUoJy4vZWRpdG9ycy9hdHRyaWJ1dGVzZm9ybScpO1xuXG5mdW5jdGlvbiBHZW9ub3Rlc1NlcnZpY2UoKSB7XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICAvL3F1aSB2YWRvICBhIHNldHRhcmUgaWwgbWFwc2VydmljZVxuICB0aGlzLl9tYXBTZXJ2aWNlID0gbnVsbDtcbiAgdGhpcy5fbG9hZERhdGFPbk1hcFZpZXdDaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gIHRoaXMuX2N1cnJlbnRFZGl0aW5nTGF5ZXIgPSBudWxsO1xuICB0aGlzLl9wbHVnaW5Ub29scyA9IG51bGw7XG5cbiAgdGhpcy5zdGF0ZSA9IHtcbiAgICBlZGl0aW5nOiB7XG4gICAgICBvbjogZmFsc2UsXG4gICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgIGxheWVyQ29kZTogbnVsbCxcbiAgICAgIHRvb2xUeXBlOiBudWxsLFxuICAgICAgc3RhcnRpbmdFZGl0aW5nVG9vbDogZmFsc2UsXG4gICAgICB0b29sc3RlcDoge1xuICAgICAgICBuOiBudWxsLFxuICAgICAgICB0b3RhbDogbnVsbCxcbiAgICAgICAgbWVzc2FnZTogbnVsbFxuICAgICAgfVxuICAgIH0sXG4gICAgcmV0cmlldmluZ0RhdGE6IGZhbHNlLFxuICAgIGhhc0VkaXRzOiBmYWxzZVxuICB9O1xuXG4gIC8vZGVmaW5pc2NvIGlsIGxvYWRlciBkZWwgcGx1Z2luXG4gIHRoaXMuX2xvYWRlciA9IG5ldyBWZWN0b3JMb2FkZXJMYXllcjtcbiAgLy8gdmluY29saSBhbGxhIHBvc3NpYmlsaXTDoCAgZGkgYXR0aXZhcmUgbCdlZGl0aW5nXG4gIHZhciBlZGl0aW5nQ29uc3RyYWludHMgPSB7XG4gICAgLy9yZXNvbHV0aW9uOiAxIC8vIHZpbmNvbG8gZGkgcmlzb2x1emlvbmUgbWFzc2ltYVxuICB9O1xuICAvLyBpbml6aWFsaXp6YXppb25lIGRlbCBwbHVnaW5cbiAgLy8gY2hpYW10byBkYWxsICRzY3JpcHQodXJsKSBkZWwgcGx1Z2luIHJlZ2lzdHJ5XG4gIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKGNvbmZpZywgcGx1Z2luQ29uZmlnKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2NycyA9IG51bGw7XG4gICAgdGhpcy5fbGF5ZXJzID0gcGx1Z2luQ29uZmlnLmxheWVycztcbiAgICB0aGlzLl9lZGl0b3JDbGFzcyA9IHBsdWdpbkNvbmZpZy5lZGl0b3JDbGFzcztcbiAgICB0aGlzLmxheWVyQ29kZXMgPSBwbHVnaW5Db25maWcubGF5ZXJzQ29kZTtcbiAgICAvLyBzdGlsaSBkZWkgbGF5ZXJcbiAgICB0aGlzLl9sYXllcnNTdHlsZSA9IHBsdWdpbkNvbmZpZy5sYXllcnNTdHlsZTtcbiAgICAvLyBzdGlsaSBkZWwgbGF5ZXIgaW4gZWRpdGluZyAoaW4gZnV0dXJvIGRhIGRpc3Rpbmd1ZXJlIGRlbGV0ZSwgbW92ZSwgZWRpdGluZy4uKVxuICAgIHRoaXMuX2xheWVyc0VkaXRpbmdTdHlsZSA9IHBsdWdpbkNvbmZpZy5sYXllcnNFZGl0aW5nU3R5bGU7XG4gICAgdGhpcy5fY3VzdG9tVXJsUGFyYW1ldGVycyA9IHBsdWdpbkNvbmZpZy5jdXN0b21VcmxQYXJhbWV0ZXJzIHx8IG51bGw7XG4gICAgLy8gc2V0dG8gaWwgbWFwc2VydmljZSBjaGUgbWkgcGVybWV0dGUgZGkgaW5lcmFnaXJlIGNvbiBsYSBtYXBwYVxuICAgIHRoaXMuX21hcFNlcnZpY2UgPSBHVUkuZ2V0Q29tcG9uZW50KCdtYXAnKS5nZXRTZXJ2aWNlKCk7XG4gICAgLy92YWRvIGEgc2V0dGFyZSBsZSBpY29uIHVybHMgZSBpbCBjcnMgc2UgZXNpc3RlIGNpIHNvbm86XG4gICAgXy5mb3JFYWNoKHRoaXMuY29uZmlnLmxheWVycywgZnVuY3Rpb24obGF5ZXJDb25maWcsIGxheWVyTmFtZSApIHtcbiAgICAgIHNlbGYuX2xheWVyc1tsYXllck5hbWVdLmluZm91cmwgPSBsYXllckNvbmZpZy5pbmZvdXJsO1xuICAgICAgc2VsZi5fbGF5ZXJzW2xheWVyTmFtZV0uY3JzID0gXCJFUFNHOlwiK2xheWVyQ29uZmlnLmNycztcbiAgICAgIHNlbGYuc2V0TGF5ZXJTdHlsZShsYXllck5hbWUpO1xuICAgIH0pO1xuICAgIC8vaW5pemlhbGl6em8gaWwgbG9hZGVyXG4gICAgLy8gcGFzc2FuZG9nbGk6XG4gICAgLy8gMSAtIGxheWVycyBkZWwgcGx1Z2luIChzdHlsZSBldGMuLilcbiAgICAvLyAyIC0gbGEgYmFzZXVybCBjaGUgbWkgc2VydmVyIHBlciBpbnRlcmFnaXJlIGNvbiBpbCBzZXJ2ZXIgcGVyIGZhcmUgdHV0dGUgbGUgbW9kaWZpY2hlXG4gICAgdmFyIG9wdGlvbnNfbG9hZGVyID0ge1xuICAgICAgJ2xheWVycyc6IHRoaXMuX2xheWVycyxcbiAgICAgICdiYXNldXJsJzogdGhpcy5jb25maWcuYmFzZXVybCxcbiAgICAgICdtYXBTZXJ2aWNlJzogdGhpcy5fbWFwU2VydmljZVxuICAgIH07XG4gICAgLy9pbml6aWFsaXp6byBpbCBsb2FkZXJcbiAgICB0aGlzLl9sb2FkZXIuaW5pdChvcHRpb25zX2xvYWRlcik7XG4gICAgLy9jYXNvIGRpIGxvYWRpbmcgZGF0YVxuICAgIHRoaXMuX2xvYWRlci5vbignbG9hZGluZ3ZlY3RvcmxheWVyc3N0YXJ0JywgZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLnN0YXRlLnJldHJpZXZpbmdEYXRhID0gdHJ1ZTtcbiAgICB9KTtcbiAgICB0aGlzLl9sb2FkZXIub24oJ2xvYWRpbmd2ZWN0b3JsYXllcnNlbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuc3RhdGUucmV0cmlldmluZ0RhdGEgPSBmYWxzZTtcbiAgICB9KTtcbiAgICB0aGlzLl9sb2FkZXIub24oJ3NldG1vZGUnLCBmdW5jdGlvbihtb2RlKSB7XG4gICAgICBzd2l0Y2gobW9kZSkge1xuICAgICAgICBjYXNlICd3JzpcbiAgICAgICAgICBzZWxmLnN0YXRlLmVkaXRpbmcub24gPSB0cnVlO1xuICAgICAgICAgIHNlbGYuZW1pdChcImVkaXRpbmdzdGFydGVkXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdyJzpcbiAgICAgICAgICBzZWxmLnN0YXRlLmVkaXRpbmcub24gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGRpc2FiaWxpdG8gbCdldmVudHVhbGUgdG9vbCBhdHRpdm8gc2UgdmllbmUgYXR0aXZhdGFcbiAgICAvLyB1bidpbnRlcmF6aW9uZSBkaSB0aXBvIHBvaW50ZXJJbnRlcmFjdGlvblNldCBzdWxsYSBtYXBwYVxuICAgIHRoaXMuX21hcFNlcnZpY2Uub24oJ3BvaW50ZXJJbnRlcmFjdGlvblNldCcsIGZ1bmN0aW9uKGludGVyYWN0aW9uKSB7XG4gICAgICB2YXIgY3VycmVudEVkaXRpbmdMYXllciA9IHNlbGYuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICAgIGlmIChjdXJyZW50RWRpdGluZ0xheWVyKSB7XG4gICAgICAgIHZhciBhY3RpdmVUb29sID0gY3VycmVudEVkaXRpbmdMYXllci5lZGl0b3IuZ2V0QWN0aXZlVG9vbCgpLmluc3RhbmNlO1xuICAgICAgICAvLyBkZXZvIHZlcmlmaWNhcmUgY2hlIG5vbiBzaWEgdW4naW50ZXJhemlvbmUgYXR0aXZhdGEgZGEgdW5vIGRlaSB0b29sIGRpIGVkaXRpbmcgZGVsIHBsdWdpblxuICAgICAgICBpZiAoYWN0aXZlVG9vbCAmJiAhYWN0aXZlVG9vbC5vd25zSW50ZXJhY3Rpb24oaW50ZXJhY3Rpb24pKSB7XG4gICAgICAgICAgc2VsZi5fc3RvcEVkaXRpbmdUb29sKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICAvLyAgYWJpbGl0byBvIG1lbm8gbCdlZGl0aW5nIGluIGJhc2UgYWxsYSByaXNvbHV6aW9uZSBkZWxsYSBtYXBwYVxuICAgIC8qdGhpcy5fbWFwU2VydmljZS5vbmFmdGVyKCdzZXRNYXBWaWV3JyxmdW5jdGlvbihiYm94LCByZXNvbHV0aW9uLCBjZW50ZXIpe1xuICAgICAgc2VsZi5zdGF0ZS5lZGl0aW5nLmVuYWJsZWQgPSAocmVzb2x1dGlvbiA8IGVkaXRpbmdDb25zdHJhaW50cy5yZXNvbHV0aW9uKSA/IHRydWUgOiBmYWxzZTtcbiAgICB9KTsqL1xuICAgIC8vIGF0dHJpYnV0byBkZWxsbyBzdGF0byBkZWwgc3Jldml6aW8gY2hlIG1pIHBlcm1ldHRlIGRpIGFjY2VuZGVyZSBvIHNwZW5nZXJlIGwnZWRpdGluZ1xuICAgIC8vIHNlcnZlIGFuY2hlIHBlciBwb3RlciBpbiBmYXNlIGRpIHRvZ2dsZUVkaXRpbmcoYm90dG9uZSBkaSBhdnZpbyBlZGl0aW5nKSBkaSB2ZWRlcmUgc2UgcG9zc28gaW56aWFyZSBvIG1lbm9cbiAgICAvLyBjYXJpY2FyZSBpIHZldHRvcmlhbGkgZXRjLi5cbiAgICB0aGlzLnN0YXRlLmVkaXRpbmcuZW5hYmxlZCA9IHRydWU7Ly8odGhpcy5fbWFwU2VydmljZS5nZXRSZXNvbHV0aW9uKCkgPCBlZGl0aW5nQ29uc3RyYWludHMucmVzb2x1dGlvbikgPyB0cnVlIDogZmFsc2U7XG4gICAgLy8gcGVyIG9nbmkgbGF5ZXIgZGVmaW5pdGkgbmVsIHBsdWdpbiBzZXR0byBuYW1lIGUgaWRcbiAgICAvLyByZWN1cGVyYXRpIGdyYXppZSBhbCBtYXBzZXJ2aWNlXG4gICAgXy5mb3JFYWNoKHRoaXMuX2xheWVycywgZnVuY3Rpb24oTGF5ZXIsIGxheWVyQ29kZSkge1xuICAgICAgLy9yZWN1cGVybyBsJ2lkIGRhbGxhIGNvbmZpZ3VyYXppb25lIGRlbCBwbHVnaW5cbiAgICAgIC8vIGkgbGF5ZXJzIG5lbGxhIGNvbmZpZ3VyYXppb25lIHBhc3NhdGEgaSBsYXllcnMgaGFubm8gZHVlIGF0dHJpYnV0aTogaWQgZSBuYW1lXG4gICAgICB2YXIgbGF5ZXJJZCA9IGNvbmZpZy5sYXllcnNbbGF5ZXJDb2RlXS5pZDtcbiAgICAgIHZhciBsYXllck5hbWUgPSBjb25maWcubGF5ZXJzW2xheWVyQ29kZV0ubmFtZTtcbiAgICAgIC8vIHJlY3VwZXJhIGlsIGxheWVyIGRhbCBtYXBzZXJ2aWNlXG4gICAgICB2YXIgbGF5ZXIgPSBzZWxmLl9tYXBTZXJ2aWNlLmdldFByb2plY3QoKS5nZXRMYXllckJ5SWQobGF5ZXJJZCk7XG4gICAgICAvLyBtZXNzbyBhbCBtb21lbnRvIGdlbmVyaWNvIHBlciByaXByZW5kZXJlIHN0ZXNzbyBjb25tcG9ydGFtZW50byBJdGVybmV0XG4gICAgICBpZiAobGF5ZXIpIHtcbiAgICAgICAgLy8gcmVjdXBlcm8gbCdvcmlnaW4gbmFtZSBkYWwgcHJvamVjdGxheWVyXG4gICAgICAgIExheWVyLm5hbWUgPSBsYXllci5nZXRPcmlnTmFtZSgpO1xuICAgICAgICBMYXllci5pZCA9IGxheWVySWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBMYXllci5uYW1lID0gbGF5ZXJOYW1lO1xuICAgICAgICBMYXllci5pZCA9IGxheWVySWQ7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIC8vIGZpbmUgZGVsIG1ldG9kbyBJTklUXG4gIHRoaXMuc2V0UGx1Z2luVG9vbHNTZXJ2aWNlID0gZnVuY3Rpb24ocGx1Z2luVG9vbHNTZXJ2aWNlKSB7XG4gICAgdGhpcy5fcGx1Z2luVG9vbHNTZXJ2aWNlID0gcGx1Z2luVG9vbHNTZXJ2aWNlO1xuICB9O1xuICB0aGlzLnNldFBsdWdpblRvb2xzID0gZnVuY3Rpb24odG9vbHMpIHtcblxuICAgIHRoaXMuX3BsdWdpblRvb2xzID0gdG9vbHM7XG4gIH07XG4gIHRoaXMuZ2V0UGx1Z2luVG9vbHMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcGx1Z2luVG9vbHM7XG4gIH07XG4gIHRoaXMuc2V0TGF5ZXJTdHlsZSA9IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgaWNvbnMgPSB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS5pY29ucztcblxuICAgIF8uZm9yRWFjaChpY29ucywgZnVuY3Rpb24oaWNvbnVybCwga2V5KSB7XG4gICAgICBpZiAoa2V5ID09ICd1cmwnKSB7XG4gICAgICAgIHNlbGYuX2xheWVyc1tsYXllckNvZGVdLnN0eWxlID0gc2VsZi5fbGF5ZXJzU3R5bGVbbGF5ZXJDb2RlXVtrZXldKHtcbiAgICAgICAgICBpY29udXJsOiBpY29udXJsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgc2VsZi5fbGF5ZXJzRWRpdGluZ1N0eWxlW2xheWVyQ29kZV1ba2V5XSA9IHNlbGYuX2xheWVyc1N0eWxlW2xheWVyQ29kZV1ba2V5XSh7XG4gICAgICAgICAgaWNvbnVybDogaWNvbnVybFxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgLy8gc2V0dG8gdGVtcG9yYW5lYW1lbnRlIGwnZWRpdG5nIHN0eWxlXG5cbiAgfTtcblxuICB0aGlzLmdldExheWVyU3R5bGUgPSBmdW5jdGlvbihsYXllckNvZGUpIHtcbiAgICByZXR1cm4gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0uc3R5bGU7XG4gIH07XG5cbiAgdGhpcy5fdG9nZ2xlQ2hlY2tCb3hQbHVnaW5Ub29sID0gZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBwbHVnaW5JbmRleCA9IDA7XG4gICAgLy8gYWwgbW9tZW50byAxIGhhcmRjb2RlZFxuICAgIGlmICh0aGlzLl9wbHVnaW5Ub29sc1NlcnZpY2UuZ2V0U3RhdGUoKS50b29sc0dyb3Vwcy5sZW5ndGggPiAxKSB7XG4gICAgICBwbHVnaW5JbmRleCA9IDE7XG4gICAgfVxuICAgIHZhciBwbHVnaW5Ub29scyA9IHRoaXMuX3BsdWdpblRvb2xzU2VydmljZS5nZXRTdGF0ZSgpLnRvb2xzR3JvdXBzW3BsdWdpbkluZGV4XS50b29scztcbiAgICB2YXIgdmVjdG9yTGF5ZXIgPSB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS52ZWN0b3I7XG4gICAgXy5mb3JFYWNoKHBsdWdpblRvb2xzLCBmdW5jdGlvbihwbHVnaW5Ub29sLCBpbmRleCkge1xuICAgICAgaWYgKF8uaGFzKHBsdWdpblRvb2wsICd0eXBlJykgJiYgcGx1Z2luVG9vbC5sYXllck5hbWUgPT0gbGF5ZXJDb2RlICYmIHBsdWdpblRvb2wudHlwZSA9PSAnY2hlY2tib3gnKSB7XG4gICAgICAgIHZhciB0b29sQ29uZmlnICA9IHBsdWdpblRvb2xzW2luZGV4XTtcbiAgICAgICAgdG9vbENvbmZpZy5pc0NoZWNrID0gdHJ1ZTtcbiAgICAgICAgcGx1Z2luVG9vbHNbaW5kZXhdID0gdG9vbENvbmZpZztcbiAgICAgICAgc2VsZi5fcGx1Z2luVG9vbHNTZXJ2aWNlLnVwZGF0ZVRvb2xzR3JvdXAocGx1Z2luSW5kZXgsIHtuYW1lOidHRU9OT1RFUycsIHRvb2xzOnBsdWdpblRvb2xzfSk7XG4gICAgICAgIHZlY3RvckxheWVyLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5pc0xheWVyVmlzaWJsZSA9IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgIHZhciB2ZWN0b3JMYXllciA9IHRoaXMuX2xheWVyc1tsYXllckNvZGVdLnZlY3RvcjtcbiAgICByZXR1cm4gdmVjdG9yTGF5ZXIuaXNWaXNpYmxlKCk7XG4gIH07XG5cbiAgdGhpcy5zaG93SGlkZUxheWVyID0gZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB2ZWN0b3JMYXllciA9IG51bGw7XG4gICAgaWYgKHRoaXMuX2xvYWRlci5pc1JlYWR5KCkpIHtcbiAgICAgIHZlY3RvckxheWVyID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yO1xuICAgICAgdmVjdG9yTGF5ZXIuc2V0VmlzaWJsZSghdmVjdG9yTGF5ZXIuaXNWaXNpYmxlKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sb2FkZXIubG9hZExheWVycygncicsIHRoaXMuX2N1c3RvbVVybFBhcmFtZXRlcnMpXG4gICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICBzZWxmLl9hZGRUb01hcCgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIC8vc3RvcFxuICB0aGlzLnN0b3AgPSBmdW5jdGlvbigpe1xuICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICBpZiAodGhpcy5zdGF0ZS5lZGl0aW5nLm9uKSB7XG4gICAgICB0aGlzLl9jYW5jZWxPclNhdmUoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzZWxmLl9zdG9wRWRpdGluZygpO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmZhaWwoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgIH0pXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuXG4gIC8vIGF2dmlvIG8gdGVybWlubyBsYSBzZXNzaW9uZSBkaSBlZGl0aW5nIGdlbmVyYWxlXG4gIC8vIHVudG8gZGkgcGFydGVuemEgZGVsbCdhdnZpbyBkZWxsJ2VkaXRpbmdcbiAgdGhpcy50b2dnbGVFZGl0aW5nID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gY3JlbyBvZ2dldHRvIGRlZmVycmVkIHBlciByZXN0aXR1aXJlIHVuYSBwcm9taXNlXG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIC8vIHF1aSBkaWNlIGNoZSBzZSBuZWwgY2FzbyBsYSByaXNvbHV6aW9uZSBkZWxsYSBtYXBwYSB2YSBiZW5lIChzdGF0ZS5lZGl0aW5nLmVuYWJsZWQpXG4gICAgLy8gZSBub24gw6ggYW5jb3JhIHN0YXRvIGF0dGl2YXRvIGwnZWRpdGluZ1xuICAgIC8vIHF1aW5kaSBjYXNvIHByaW1hIHZvbHRhXG4gICAgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy5lbmFibGVkICYmICF0aGlzLnN0YXRlLmVkaXRpbmcub24pIHtcbiAgICAgIC8vIGZhY2NpbyBwYXJ0aXJlIGVkaXRpbmdcbiAgICAgIHRoaXMuX3N0YXJ0RWRpdGluZygpO1xuICAgIH1cbiAgICAvLyBhbHRyaW1lbnRpIHNlIMOoIGdpw6AgaW4gZWRpdGluZyBjaGlhbW8gbG8gc3RvcCBkZWwgcGx1Z2luXG4gICAgLy8gY2hlIG5vbiDDqCBhbHRybyBjaGUgbG9zIHRvcG8gZGVsbCdlZGl0aW5nXG4gICAgZWxzZSBpZiAodGhpcy5zdGF0ZS5lZGl0aW5nLm9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9wKCk7XG4gICAgfVxuICAgIC8vIHJlc3RpdHVpc2NvIHVuYSBwcm9tZXNzYVxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH07XG5cbiAgdGhpcy5zYXZlRWRpdHMgPSBmdW5jdGlvbigpe1xuICAgIHRoaXMuX3NhdmVXaXRob3V0QXNrKCk7XG4gICAgLy90aGlzLl9jYW5jZWxPclNhdmUoMik7XG4gIH07XG5cbiAgLy8gYXZ2aWEgdW5vIGRlaSB0b29sIGRpIGVkaXRpbmcgdHJhIHF1ZWxsaSBzdXBwb3J0YXRpIGRhIEVkaXRvciAoYWRkZmVhdHVyZSwgZWNjLilcbiAgLy8gZnVuemlvbmUgZGVsbCdlbGVtZW50byBwYW5lbCB2dWVcbiAgdGhpcy50b2dnbGVFZGl0VG9vbCA9IGZ1bmN0aW9uKGxheWVyQ29kZSwgdG9vbFR5cGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy9wcmVuZG8gaWwgbGF5ZXIgaW4gYmFzZSBhbCBjb2RpY2UgcGFzc2F0byBkYWxsIGNvbXBvbmVudGUgdnVlXG4gICAgdmFyIGxheWVyID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV07XG4gICAgaWYgKGxheWVyKSB7XG4gICAgICAvL3JlY3VwcmVybyBpbCBjdXJyZW50IGxheWVyIGluIGVkaXRpbmdcbiAgICAgIHZhciBjdXJyZW50RWRpdGluZ0xheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgICAgLy8gc2Ugc2kgc3RhIHVzYW5kbyB1biB0b29sIGNoZSBwcmV2ZWRlIGxvIHN0ZXNzbyBsYXllciBpbiBlZGl0YXppb25lXG4gICAgICBpZiAoY3VycmVudEVkaXRpbmdMYXllciAmJiBsYXllckNvZGUgPT0gY3VycmVudEVkaXRpbmdMYXllci5sYXllckNvZGUpIHtcbiAgICAgICAgLy8gZSBsbyBzdGVzc28gdG9vbCBhbGxvcmEgZGlzYXR0aXZvIGlsIHRvb2wgKGluIHF1YW50byDDqFxuICAgICAgICAvLyBwcmVtdXRvIHN1bGxvIHN0ZXNzbyBib3R0b25lKVxuICAgICAgICBpZiAodG9vbFR5cGUgPT0gY3VycmVudEVkaXRpbmdMYXllci5lZGl0b3IuZ2V0QWN0aXZlVG9vbCgpLmdldFR5cGUoKSkge1xuICAgICAgICAgIC8vIHN0ZXNzbyB0aXBvIGRpIHRvb2wgcXVpbmRpIHNpIMOoIHZlcmlmaWNhdG8gdW4gdG9nZ2xlIG5lbCBib3R0b25lXG4gICAgICAgICAgLy8gYWxsb3JhIHN0aXBwbyBsJ2VkaXRpbmcgVG9vbFxuICAgICAgICAgIHRoaXMuX3N0b3BFZGl0aW5nVG9vbCgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFsdHJpbWVudGkgYXR0aXZvIGlsIHRvb2wgcmljaGllc3RvXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vc3RvcHBvIHByZXZlbnRpdmFtZW50ZSBsJ2VkaXRpbmcgdG9vbCBhdHRpdm9cbiAgICAgICAgICB0aGlzLl9zdG9wRWRpdGluZ1Rvb2woKTtcbiAgICAgICAgICAvL2ZhY2NpbyBwYXJ0aXJlIGwnZWRpdG5nIHRvb2wgcGFzc2FuZG8gY3VycmVudCBFZGl0aW5nIExheWVyIGUgaWwgdGlwbyBkaSB0b29sXG4gICAgICAgICAgdGhpcy5fc3RhcnRFZGl0aW5nVG9vbChjdXJyZW50RWRpdGluZ0xheWVyLCB0b29sVHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGFsdHJpbWVudGkgY2FzbyBpbiBjdWkgbm9uIMOoIHN0YXRvIHNldHRhdG8gaWwgY3VycmVudCBlZGl0aW5nIGxheWVyIG9cbiAgICAgICAgLy8gaWwgbGF5ZXIgY2hlIHNpIHN0YSBjZXJjYW5kbyBkaSBlZGl0YXJlIMOoIGRpdmVyc28gZGEgcXVlbGxvIGluIGVkaXRpbmcgaW4gcHJlY2VkZW56YVxuICAgICAgICAvLyBuZWwgY2FzbyBzaWEgZ2nDoCAgYXR0aXZvIHVuIGVkaXRvciB2ZXJpZmljbyBkaSBwb3RlcmxvIHN0b3BwYXJlXG4gICAgICAgIGlmIChjdXJyZW50RWRpdGluZ0xheWVyICYmIGN1cnJlbnRFZGl0aW5nTGF5ZXIuZWRpdG9yLmlzU3RhcnRlZCgpKSB7XG4gICAgICAgICAgLy8gc2UgbGEgdGVybWluYXppb25lIGRlbGwnZWRpdGluZyBzYXLDoCAgYW5kYXRhIGEgYnVvbiBmaW5lLCBzZXR0byBpbCB0b29sXG4gICAgICAgICAgLy8gcHJvdm8gYSBzdG9wcGFyZVxuICAgICAgICAgIHRoaXMuX2NhbmNlbE9yU2F2ZSgyKVxuICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLl9zdG9wRWRpdG9yKCkpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYuX3N0YXJ0RWRpdGluZ1Rvb2wobGF5ZXIsIHRvb2xUeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvL25lbCBjYXNvIHNpYSBsYSBwcmltYSB2b2x0YSBjaGUgaW50ZXJhZ2lzY28gY29uIHVuIHRvb2xcbiAgICAgICAgICAvLyBlIHF1aW5kaSBub24gw6ggc3RhdG8gc2V0dGF0byBuZXNzdW4gbGF5ZXIgaW4gZWRpdGluZ1xuICAgICAgICAgIHRoaXMuX3N0YXJ0RWRpdGluZ1Rvb2wobGF5ZXIsIHRvb2xUeXBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvL2Z1bnppb25lIGNoZSByZXN0aXR1aXNjZSBsJ2FycmF5IGRlaSBjb2RpY2kgZGVpIGxheWVyc1xuICB0aGlzLmdldExheWVyQ29kZXMgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiBfLnZhbHVlcyh0aGlzLmxheWVyQ29kZXMpO1xuICB9O1xuXG4gIC8qIE1FVE9ESSBQUklWQVRJICovXG4gIC8vIGZ1bnppb25lIHBlciBzZXR0YXJlIGlsIHZlY3RvcmxheWVyIGFsbGEgcHJvcmlldMOgIHZlY3RvciBkZWwgbGF5ZXJcbiAgdGhpcy5fc2V0VXBWZWN0b3JMYXllciA9IGZ1bmN0aW9uKGxheWVyQ29kZSwgdmVjdG9yTGF5ZXIpIHtcbiAgICB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS52ZWN0b3IgPSB2ZWN0b3JMYXllcjtcbiAgfTtcblxuICAvL2Z1bnppb25lIGNoZSBwZXJtZXR0ZSBkaSBmYXJlIGlsIHNldHVwIGRlbGwnZWRpdG9yIGUgYXNzZWdhbnJsbyBhbCBsYXllclxuICB0aGlzLl9zZXRVcEVkaXRvciA9IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vb3B0aW9uIGVkaXRvclxuICAgIHZhciBvcHRpb25zX2VkaXRvciA9IHtcbiAgICAgICdtYXBTZXJ2aWNlJzogc2VsZi5fbWFwU2VydmljZSxcbiAgICAgICdmb3JtQ2xhc3MnOiBGb3JtQ2xhc3MsXG4gICAgICAnZWRpdGluZ1ZlY3RvclN0eWxlJzogdGhpcy5fbGF5ZXJzRWRpdGluZ1N0eWxlW2xheWVyQ29kZV1cbiAgICB9O1xuICAgIC8vIHByZW5kbyBpbCB2ZWN0b3IgbGF5ZXIgZGVsIGxheWVyXG4gICAgdmFyIHZlY3RvckxheWVyID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yO1xuICAgIC8vR0VTVElPTkUgRSBJTklaSUFMSVpaQVpJT05FIERFTEwnRURJVE9SIFJFTEFUSVZPIEFMIExBWUVSIFZFVFRPUklBTEVcbiAgICAvL2NyZW8gbCdpc3RhbnphIGRlbGwnZWRpdG9yIGNoZSBnZXN0aXLDoCBpbCBsYXllclxuICAgIHZhciBlZGl0b3IgPSBuZXcgc2VsZi5fZWRpdG9yQ2xhc3NbbGF5ZXJDb2RlXShvcHRpb25zX2VkaXRvcik7XG4gICAgLy9zZXR0byBpbCBsYXllciB2ZXR0b3JpYWxlIGFzc29jaWF0byBhbGwnZWRpdG9yXG4gICAgLy8gZSBpIHRpcGkgZGkgdG9vbHMgYXNzb2NpYXRpIGFkIGVzc29cbiAgICBlZGl0b3Iuc2V0VmVjdG9yTGF5ZXIodmVjdG9yTGF5ZXIpO1xuICAgIC8vZW1ldHRlIGV2ZW50byBjaGUgw6ggc3RhdGEgZ2VuZXJhdGEgdW5hIG1vZGlmaWNhIGxhIGxheWVyXG4gICAgZWRpdG9yLm9uKFwiZGlydHlcIiwgZnVuY3Rpb24gKGRpcnR5KSB7XG4gICAgICBzZWxmLnN0YXRlLmhhc0VkaXRzID0gZGlydHk7XG4gICAgfSk7XG4gICAgLy9hc3NlZ25vIGwnaXN0YW56YSBlZGl0b3IgYWwgbGF5ZXIgdHJhbWl0ZSBsYSBwcm9wcmlldMOgIGVkaXRvclxuICAgIHRoaXMuX2xheWVyc1tsYXllckNvZGVdLmVkaXRvciA9IGVkaXRvcjtcbiAgICAvLy8vIEZJTkUgR0VTVElPTkUgRURJVE9SXG4gIH07XG4gIC8vZmEgcGFydGlyZSBsJ2VkaXRpbmdcbiAgdGhpcy5fc3RhcnRFZGl0aW5nID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gbWkgYXNzaWN1cm8gY2hlIHNlIHBlciBxdWFsc2lzaSBtb3Rpdm9cbiAgICAvLyBmYWNjaW8gdW5vIHN0YXJlZGl0aW5nIGRpIHVuIGVkaXRpbmcgZ2nDoCBhdnZpYXRvXG4gICAgLy8gcml0b3JubyBwZXJjaMOoIGhvIGdpw6AgdHV0dG8gKGxvIGZhY2NpbyBwZXIgc2ljdXJlbm56YSBub24gc2kgc2EgbWFpKVxuICAgIGlmICh0aGlzLnN0YXRlLmVkaXRpbmcub24gfHwgdGhpcy5zdGF0ZS5yZXRyaWV2aW5nRGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy8gY2hpZWRvIGFsIGxvYWRlciBkaSBjYXJpY2FyZSBpIGRhdGlcbiAgICBpZiAoIXRoaXMuX2xvYWRlci5pc1JlYWR5KCkpIHtcbiAgICAgIHRoaXMuX2xvYWRlci5sb2FkTGF5ZXJzKCd3JywgdGhpcy5fY3VzdG9tVXJsUGFyYW1ldGVycykgLy8gY2FyaWNvIGkgbGF5ZXIgaW4gbW9kYWxpdMOgIGVkaXRpbmcgKHNjcml0dHVyYSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHZlY3RvckxheWVyc0NvZGVzKSB7XG4gICAgICAgICAgLy91bmEgdm9sdGEgY2hlIGlsIGxvYWRlciBoYSBmaW5pdG8gZGkgY2FyaWNhcmUgaSBsYXllciB2ZXR0b3JpYWxpXG4gICAgICAgICAgLy9xdWVzdG8gbWkgcmVzdGl0dWlzY2UgaSBjb2RpY2UgZGVpIGxheWVyIGNoZSBzb25vIHN0YXRpIGNhcmljYXRpKGFycmF5KVxuICAgICAgICAgIF8uZm9yRWFjaCh2ZWN0b3JMYXllcnNDb2RlcywgZnVuY3Rpb24gKGxheWVyQ29kZSkge1xuICAgICAgICAgICAgLy8gcGVyIG9nbmkgbGF5ZXIgZmFjY2lvIGlsIHNldHVwIGRlbGwnZWRpdG9yXG4gICAgICAgICAgICBzZWxmLl9zZXRVcEVkaXRvcihsYXllckNvZGUpO1xuICAgICAgICAgICAgc2VsZi5fdG9nZ2xlQ2hlY2tCb3hQbHVnaW5Ub29sKGxheWVyQ29kZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gc2UgdHV0dG8gIMOoIGFuZGF0byBhIGJ1b24gZmluZSBhZ2dpdW5nbyBpIFZlY3RvckxheWVyIGFsbGEgbWFwcGFcbiAgICAgICAgICBzZWxmLl9hZGRUb01hcCgpO1xuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgR1VJLm5vdGlmeS5lcnJvcih0KCdjb3VsZF9ub3RfbG9hZF92ZWN0b3JfbGF5ZXJzJykpO1xuICAgICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sb2FkZXIuc2V0TW9kZSgndycpO1xuICAgICAgdmFyIHZlY3RvckxheWVyc0NvZGVzID0gdGhpcy5fbG9hZGVyLmdldFZlY3RvckxheWVyc0NvZGVzKCk7XG4gICAgICBfLmZvckVhY2godmVjdG9yTGF5ZXJzQ29kZXMsIGZ1bmN0aW9uIChsYXllckNvZGUpIHtcbiAgICAgICAgLy8gcGVyIG9nbmkgbGF5ZXIgZmFjY2lvIGlsIHNldHVwIGRlbGwnZWRpdG9yXG4gICAgICAgIHNlbGYuX2xvYWRlci5sb2NrRmVhdHVyZXMoc2VsZi5fbGF5ZXJzW2xheWVyQ29kZV0ubmFtZSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHNlbGYuX3NldFVwRWRpdG9yKGxheWVyQ29kZSk7XG4gICAgICAgICAgc2VsZi5fdG9nZ2xlQ2hlY2tCb3hQbHVnaW5Ub29sKGxheWVyQ29kZSk7XG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICAgIHNlbGYuc3RhdGUuZWRpdGluZy5vbiA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuX3N0b3BFZGl0aW5nID0gZnVuY3Rpb24ocmVzZXQpIHtcbiAgICAvLyBzZSBwb3NzbyBzdG9wcGFyZSB0dXR0aSBnbGkgZWRpdG9yLi4uXG4gICAgaWYgKHRoaXMuX3N0b3BFZGl0b3IocmVzZXQpKXtcbiAgICAgIF8uZm9yRWFjaCh0aGlzLl9sYXllcnMsIGZ1bmN0aW9uKGxheWVyLCBsYXllckNvZGUpIHtcbiAgICAgICAgdmFyIHZlY3RvciA9IGxheWVyLnZlY3RvcjtcbiAgICAgICAgLy9zZWxmLl9tYXBTZXJ2aWNlLnZpZXdlci5yZW1vdmVMYXllckJ5TmFtZSh2ZWN0b3IubmFtZSk7XG4gICAgICAgIC8vbGF5ZXIudmVjdG9yPSBudWxsO1xuICAgICAgICBsYXllci5lZGl0b3I9IG51bGw7XG4gICAgICAgIHNlbGYuX3VubG9ja0xheWVyKHNlbGYuX2xheWVyc1tsYXllckNvZGVdKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fdXBkYXRlRWRpdGluZ1N0YXRlKCk7XG4gICAgICB0aGlzLl9sb2FkZXIuc2V0TW9kZSgncicpO1xuICAgICAgc2VsZi5fY2xlYW5VcCgpO1xuICAgICAgc2VsZi5lbWl0KFwiZWRpdGluZ3N0b3BwZWRcIik7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuX2NsZWFuVXAgPSBmdW5jdGlvbigpIHtcbiAgICAvL3ZhZG8gYWQgYW5udWxhcmUgbCdlc3Rlbnppb25lIGRlbCBsb2FkZXIgcGVyIHBvdGVyIHJpY2FyaWNhcmUgaSBkYXRpIHZldHR0b3JpYWxpXG4gICAgLy9kYSByaXZlZGVyZTtcbiAgICB0aGlzLl9sb2FkZXIuY2xlYW5VcExheWVycygpO1xuXG4gIH07XG4gIC8vc2Ugbm9uIMOoIGFuY29yYSBwYXJ0aXRvIGZhY2NpbyBwYXJ0aXJlIGxvIHN0YXJ0IGVkaXRvclxuICB0aGlzLl9zdGFydEVkaXRvciA9IGZ1bmN0aW9uKGxheWVyKXtcbiAgICAvLyBhdnZpbyBsJ2VkaXRvclxuICAgIC8vIHBhc3NhbmRvbGkgaWwgc2VydmljZSBjaGUgbG8gYWNjZXR0YVxuICAgIGlmIChsYXllci5lZGl0b3Iuc3RhcnQodGhpcykpIHtcbiAgICAgIC8vIHJlZ2lzdHJvIGlsIGN1cnJlbnQgbGF5ZXIgaW4gZWRpdGluZ1xuICAgICAgdGhpcy5fc2V0Q3VycmVudEVkaXRpbmdMYXllcihsYXllcik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuICAvL2Z1bnppb25lIGNoZSB2aWVuZSBjaGlhbWF0YSBhbCBjbGljayBzdSB1biB0b29sIGRlbGwnZWRpdGluZyBlIHNlXG4gIC8vbm9uIMOoIHN0YXRvIGFzc2VnbmF0byBhbmNvcmEgbmVzc3VuIGxheWVyIGNvbWUgY3VycmVudCBsYXllciBlZGl0aW5nXG4gIHRoaXMuX3N0YXJ0RWRpdGluZ1Rvb2wgPSBmdW5jdGlvbihsYXllciwgdG9vbFR5cGUsIG9wdGlvbnMpIHtcbiAgICAvL2Fzc2Vnbm8gdHJ1ZSBhbGxvIHN0YXJ0RWRpdGluZ1Rvb2wgYXR0cmlidXRvIGRlbGxsbyBzdGF0ZVxuICAgIHRoaXMuc3RhdGUuc3RhcnRpbmdFZGl0aW5nVG9vbCA9IHRydWU7XG4gICAgdmFyIGNhblN0YXJ0VG9vbCA9IHRydWU7XG4gICAgLy92ZXJpZmljbyBzZSBsJ2VkaXRvciDDqCBwYXJ0aXRvIG8gbWVub1xuICAgIGlmICghbGF5ZXIuZWRpdG9yLmlzU3RhcnRlZCgpKSB7XG4gICAgICAvL3NlIG5vbiDDqCBhbmNvcmEgcGFydGl0byBsbyBmYWNjaW8gcGFydGlyZSBlIG5lIHByZW5kbyBpbCByaXN1bHRhdG9cbiAgICAgIC8vIHRydWUgbyBmYWxzZVxuICAgICAgY2FuU3RhcnRUb29sID0gdGhpcy5fc3RhcnRFZGl0b3IobGF5ZXIpO1xuICAgIH1cbiAgICAvLyB2ZXJpZmljYSBzZSBpbCB0b29sIHB1w7IgZXNzZXJlIGF0dGl2YXRvXG4gICAgLy8gbCdlZGl0b3IgdmVyaWZpY2Egc2UgaWwgdG9vbCByaWNoaWVzdG8gw6ggY29tcGF0aWJpbGVcbiAgICAvLyBjb24gaSB0b29scyBwcmV2aXN0aSBkYWxsJ2VkaXRvci4gQ3JlYSBpc3RhbnphIGRpIHRvb2wgZSBhdnZpYSBpbCB0b29sXG4gICAgLy8gYXR0cmF2ZXJzbyBpbCBtZXRvZG8gcnVuXG4gICAgaWYgKGNhblN0YXJ0VG9vbCAmJiBsYXllci5lZGl0b3Iuc2V0VG9vbCh0b29sVHlwZSwgb3B0aW9ucykpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZUVkaXRpbmdTdGF0ZSgpO1xuICAgICAgdGhpcy5zdGF0ZS5zdGFydGluZ0VkaXRpbmdUb29sID0gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5zdGFydGluZ0VkaXRpbmdUb29sID0gZmFsc2U7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIHRoaXMuX3N0b3BFZGl0b3IgPSBmdW5jdGlvbihyZXNldCl7XG4gICAgdmFyIHJldCA9IHRydWU7XG4gICAgdmFyIGxheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgIGlmIChsYXllcikge1xuICAgICAgcmV0ID0gbGF5ZXIuZWRpdG9yLnN0b3AocmVzZXQpO1xuICAgICAgaWYgKHJldCl7XG4gICAgICAgIHRoaXMuX3NldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIHNpIG9jY3VwYSBkaSBpbnRlcnJvbWVwZXJlIGwnZWR0aW5nIHRvb2xcbiAgdGhpcy5fc3RvcEVkaXRpbmdUb29sID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJldCA9IHRydWU7XG4gICAgLy8gcmVjdXBlcmUgaWwgbGF5ZXIgaW4gY3VycmVudCBlZGl0aW5nXG4gICAgdmFyIGxheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgIC8vIHNlIGVzaXN0ZSBlZCBlcmEgc3RhdG8gc2V0dGF0b1xuICAgIGlmIChsYXllcikge1xuICAgICAgLy8gc2UgYW5kYXRvIGJlbmUgcml0b3JuYSB0cnVlXG4gICAgICByZXQgPSBsYXllci5lZGl0b3Iuc3RvcFRvb2woKTtcbiAgICAgIGlmIChyZXQpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlRWRpdGluZ1N0YXRlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSBhY2NldHRhIGNvbWUgcGFyYW1ldHJvIGlsIHRpcG8gZGlcbiAgLy8gb3BlcmF6aW9uZSBkYSBmYXJlIGEgc2Vjb25kYSBkaWNvc2Egw6ggYXZ2ZW51dG9cbiAgdGhpcy5fc2F2ZVdpdGhvdXRBc2sgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgdmFyIGRpcnR5RWRpdG9ycyA9IHt9O1xuICAgIC8vIHZlcmlmaWNvIHBlciBvZ25pIGxheWVyIHNlIGwnZWRpdG8gYXNzb2NpYXRvIMOoIERpcnR5XG4gICAgXy5mb3JFYWNoKHRoaXMuX2xheWVycywgZnVuY3Rpb24obGF5ZXIsIGxheWVyQ29kZSkge1xuICAgICAgaWYgKGxheWVyLmVkaXRvci5pc0RpcnR5KCkpIHtcbiAgICAgICAgZGlydHlFZGl0b3JzW2xheWVyQ29kZV0gPSBsYXllci5lZGl0b3I7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fc2F2ZUVkaXRzKGRpcnR5RWRpdG9ycykuXG4gICAgdGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH0pLmZhaWwoZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgIH0pXG5cbiAgfTtcbiAgdGhpcy5fY2FuY2VsT3JTYXZlID0gZnVuY3Rpb24odHlwZSl7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIC8vIHBlciBzaWN1cmV6emEgdGVuZ28gdHV0dG8gZGVudHJvIHVuIGdyb3NzbyB0cnkvY2F0Y2gsXG4gICAgLy8gcGVyIG5vbiByaXNjaGlhcmUgZGkgcHJvdm9jYXJlIGluY29uc2lzdGVuemUgbmVpIGRhdGkgZHVyYW50ZSBpbCBzYWx2YXRhZ2dpb1xuICAgIHRyeSB7XG4gICAgICB2YXIgX2Fza1R5cGUgPSAxO1xuICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgX2Fza1R5cGUgPSB0eXBlXG4gICAgICB9XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgY2hvaWNlID0gXCJjYW5jZWxcIjtcbiAgICAgIHZhciBkaXJ0eUVkaXRvcnMgPSB7fTtcbiAgICAgIC8vIHZlcmlmaWNvIHBlciBvZ25pIGxheWVyIHNlIGwnZWRpdG8gYXNzb2NpYXRvIMOoIERpcnR5XG4gICAgICBfLmZvckVhY2godGhpcy5fbGF5ZXJzLCBmdW5jdGlvbihsYXllciwgbGF5ZXJDb2RlKSB7XG4gICAgICAgIGlmIChsYXllci5lZGl0b3IuaXNEaXJ0eSgpKSB7XG4gICAgICAgICAgZGlydHlFZGl0b3JzW2xheWVyQ29kZV0gPSBsYXllci5lZGl0b3I7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgLy8gdmVyaWZpY28gc2UgY2kgc29ubyBvIG1lbm8gZWRpdG9yIHNwb3JjaGlcbiAgICAgIGlmKF8ua2V5cyhkaXJ0eUVkaXRvcnMpLmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9hc2tDYW5jZWxPclNhdmUoX2Fza1R5cGUpLlxuICAgICAgICB0aGVuKGZ1bmN0aW9uKGFjdGlvbikge1xuICAgICAgICAgIC8vIHJpdG9ybmEgaWwgdGlwbyBkaSBhemlvbmUgZGEgZmFyZVxuICAgICAgICAgIC8vIHNhdmUsIGNhbmNlbCwgbm9zYXZlXG4gICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ3NhdmUnKSB7XG4gICAgICAgICAgICAvLyBwYXNzbyBnbGkgZWRpdG9yIHNwb2NoaSBhbGxhIGZ1bnppb25lIF9zYXZlRWRpdHNcbiAgICAgICAgICAgIHNlbGYuX3NhdmVFZGl0cyhkaXJ0eUVkaXRvcnMpLlxuICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PSAnbm9zYXZlJykge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09ICdjYW5jZWwnKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSBpbiBiYXNlIGFsIHRpcG8gZGkgYXNrVHlwZVxuICAvLyB2aXN1YWxpenphIGlsIG1vZGFsZSBhIGN1aSByaXNwb25kZXJlLCBzYWx2YSBldGMgLi5cbiAgdGhpcy5fYXNrQ2FuY2VsT3JTYXZlID0gZnVuY3Rpb24odHlwZSl7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIHZhciBidXR0b25UeXBlcyA9IHtcbiAgICAgIFNBVkU6IHtcbiAgICAgICAgbGFiZWw6IFwiU2FsdmFcIixcbiAgICAgICAgY2xhc3NOYW1lOiBcImJ0bi1zdWNjZXNzXCIsXG4gICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ3NhdmUnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIE5PU0FWRToge1xuICAgICAgICBsYWJlbDogXCJUZXJtaW5hIHNlbnphIHNhbHZhcmVcIixcbiAgICAgICAgY2xhc3NOYW1lOiBcImJ0bi1kYW5nZXJcIixcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnbm9zYXZlJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBDQU5DRUw6IHtcbiAgICAgICAgbGFiZWw6IFwiQW5udWxsYVwiLFxuICAgICAgICBjbGFzc05hbWU6IFwiYnRuLXByaW1hcnlcIixcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ2NhbmNlbCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBzd2l0Y2ggKHR5cGUpe1xuICAgICAgY2FzZSAxOlxuICAgICAgICBidXR0b25zID0ge1xuICAgICAgICAgIHNhdmU6IGJ1dHRvblR5cGVzLlNBVkUsXG4gICAgICAgICAgbm9zYXZlOiBidXR0b25UeXBlcy5OT1NBVkUsXG4gICAgICAgICAgY2FuY2VsOiBidXR0b25UeXBlcy5DQU5DRUxcbiAgICAgICAgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGJ1dHRvbnMgPSB7XG4gICAgICAgICAgc2F2ZTogYnV0dG9uVHlwZXMuU0FWRSxcbiAgICAgICAgICBjYW5jZWw6IGJ1dHRvblR5cGVzLkNBTkNFTFxuICAgICAgICB9O1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgR1VJLmRpYWxvZy5kaWFsb2coe1xuICAgICAgbWVzc2FnZTogXCJWdW9pIHNhbHZhcmUgZGVmaW5pdGl2YW1lbnRlIGxlIG1vZGlmaWNoZT9cIixcbiAgICAgIHRpdGxlOiBcIlNhbHZhdGFnZ2lvIG1vZGlmaWNhXCIsXG4gICAgICBidXR0b25zOiBidXR0b25zXG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIHNhbHZhIGkgZGF0aSByZWxhdGl2aSBhbCBsYXllciB2ZXR0b3JpYWxlXG4gIC8vIGRlbCBkaXJ0eUVkaXRvclxuICB0aGlzLl9zYXZlRWRpdHMgPSBmdW5jdGlvbihkaXJ0eUVkaXRvcnMpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIHRoaXMuX3NlbmRFZGl0cyhkaXJ0eUVkaXRvcnMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICBHVUkubm90aWZ5LnN1Y2Nlc3MoXCJJIGRhdGkgc29ubyBzdGF0aSBzYWx2YXRpIGNvcnJldHRhbWVudGVcIik7XG4gICAgICAgICAgc2VsZi5fY29tbWl0RWRpdHMoZGlydHlFZGl0b3JzLCByZXNwb25zZSk7XG4gICAgICAgICAgLy9zZWxmLl9tYXBTZXJ2aWNlLnJlZnJlc2hNYXAoKTtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKGVycm9ycyl7XG4gICAgICAgICAgR1VJLm5vdGlmeS5lcnJvcihcIkVycm9yZSBuZWwgc2FsdmF0YWdnaW8gc3VsIHNlcnZlclwiKTtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSBwcmVuZGUgY29tZSBpbmdyZXNzbyBnbGkgZWRpdG9yIHNwb3JjaGlcbiAgdGhpcy5fc2VuZEVkaXRzID0gZnVuY3Rpb24oZGlydHlFZGl0b3JzKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIHZhciBlZGl0c1RvUHVzaCA9IF8ubWFwKGRpcnR5RWRpdG9ycywgZnVuY3Rpb24oZWRpdG9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsYXllcm5hbWU6IGVkaXRvci5nZXRWZWN0b3JMYXllcigpLm5hbWUsXG4gICAgICAgIGVkaXRzOiBlZGl0b3IuZ2V0RWRpdGVkRmVhdHVyZXMoKVxuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIGVzZWd1ZSBpbCBwb3N0IGRlaSBkYXRpXG4gICAgdGhpcy5fcG9zdERhdGEoZWRpdHNUb1B1c2gpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJldHVybmVkKXtcbiAgICAgICAgICBpZiAocmV0dXJuZWQucmVzdWx0KXtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmV0dXJuZWQucmVzcG9uc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXR1cm5lZC5yZXNwb25zZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbihyZXR1cm5lZCl7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJldHVybmVkLnJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfTtcblxuICB0aGlzLl9jb21taXRFZGl0cyA9IGZ1bmN0aW9uKGVkaXRvcnMsIHJlc3BvbnNlKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgXy5mb3JFYWNoKGVkaXRvcnMsZnVuY3Rpb24oZWRpdG9yKSB7XG4gICAgICB2YXIgbmV3QXR0cmlidXRlc0Zyb21TZXJ2ZXIgPSBudWxsO1xuICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLm5ldyl7XG4gICAgICAgIF8uZm9yRWFjaChyZXNwb25zZS5uZXcsIGZ1bmN0aW9uKHVwZGF0ZWRGZWF0dXJlQXR0cmlidXRlcyl7XG4gICAgICAgICAgdmFyIG9sZGZpZCA9IHVwZGF0ZWRGZWF0dXJlQXR0cmlidXRlcy5jbGllbnRpZDtcbiAgICAgICAgICB2YXIgZmlkID0gdXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzLmlkO1xuICAgICAgICAgIGVkaXRvci5nZXRFZGl0VmVjdG9yTGF5ZXIoKS5zZXRGZWF0dXJlRGF0YShvbGRmaWQsZmlkLG51bGwsdXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzKTtcbiAgICAgICAgICBfLmZvckVhY2gocmVzcG9uc2UubmV3X2xvY2tpZHMsIGZ1bmN0aW9uKG5ld2xvY2tJZCl7XG4gICAgICAgICAgICBlZGl0b3IuZ2V0VmVjdG9yTGF5ZXIoKS5hZGRMb2NrSWQobmV3bG9ja0lkKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKCdlZGl0b3IgY29tbWl0Jyk7XG4gICAgICBlZGl0b3IuY29tbWl0KCk7XG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5fdW5kb0VkaXRzID0gZnVuY3Rpb24oZGlydHlFZGl0b3JzKXtcbiAgICB2YXIgY3VycmVudEVkaXRpbmdMYXllckNvZGUgPSB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCkubGF5ZXJDb2RlO1xuICAgIHZhciBlZGl0b3IgPSBkaXJ0eUVkaXRvcnNbY3VycmVudEVkaXRpbmdMYXllckNvZGVdO1xuICAgIHRoaXMuX3N0b3BFZGl0aW5nKHRydWUpO1xuICB9O1xuICAvLyBlc2VndWUgbCd1cGRhdGUgZGVsbG8gc3RhdGUgbmVsIGNhc28gYWQgZXNlbXBpbyBkaSB1biB0b2dnbGUgZGVsIGJvdHRvbmUgdG9vbFxuICB0aGlzLl91cGRhdGVFZGl0aW5nU3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBwcmVuZGUgaWwgbGF5ZXIgaW4gRWRpdGluZ1xuICAgIHZhciBsYXllciA9IHRoaXMuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICBpZiAobGF5ZXIpIHtcbiAgICAgIHRoaXMuc3RhdGUuZWRpdGluZy5sYXllckNvZGUgPSBsYXllci5sYXllckNvZGU7XG4gICAgICB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbFR5cGUgPSBsYXllci5lZGl0b3IuZ2V0QWN0aXZlVG9vbCgpLmdldFR5cGUoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnN0YXRlLmVkaXRpbmcubGF5ZXJDb2RlID0gbnVsbDtcbiAgICAgIHRoaXMuc3RhdGUuZWRpdGluZy50b29sVHlwZSA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuX3VwZGF0ZVRvb2xTdGVwc1N0YXRlKCk7XG4gIH07XG5cbiAgdGhpcy5fdXBkYXRlVG9vbFN0ZXBzU3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGxheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgIHZhciBhY3RpdmVUb29sO1xuICAgIGlmIChsYXllcikge1xuICAgICAgYWN0aXZlVG9vbCA9IGxheWVyLmVkaXRvci5nZXRBY3RpdmVUb29sKCk7XG4gICAgfVxuICAgIGlmIChhY3RpdmVUb29sICYmIGFjdGl2ZVRvb2wuZ2V0VG9vbCgpKSB7XG4gICAgICB2YXIgdG9vbEluc3RhbmNlID0gYWN0aXZlVG9vbC5nZXRUb29sKCk7XG4gICAgICBpZiAodG9vbEluc3RhbmNlLnN0ZXBzKXtcbiAgICAgICAgdGhpcy5fc2V0VG9vbFN0ZXBTdGF0ZShhY3RpdmVUb29sKTtcbiAgICAgICAgdG9vbEluc3RhbmNlLnN0ZXBzLm9uKCdzdGVwJywgZnVuY3Rpb24oaW5kZXgsc3RlcCkge1xuICAgICAgICAgIHNlbGYuX3NldFRvb2xTdGVwU3RhdGUoYWN0aXZlVG9vbCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0b29sSW5zdGFuY2Uuc3RlcHMub24oJ2NvbXBsZXRlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBzZWxmLl9zZXRUb29sU3RlcFN0YXRlKCk7XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgc2VsZi5fc2V0VG9vbFN0ZXBTdGF0ZSgpO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLl9zZXRUb29sU3RlcFN0YXRlID0gZnVuY3Rpb24oYWN0aXZlVG9vbCl7XG4gICAgdmFyIGluZGV4LCB0b3RhbCwgbWVzc2FnZTtcbiAgICBpZiAoXy5pc1VuZGVmaW5lZChhY3RpdmVUb29sKSl7XG4gICAgICBpbmRleCA9IG51bGw7XG4gICAgICB0b3RhbCA9IG51bGw7XG4gICAgICBtZXNzYWdlID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB2YXIgdG9vbCA9IGFjdGl2ZVRvb2wuZ2V0VG9vbCgpO1xuICAgICAgdmFyIG1lc3NhZ2VzID0gdG9vbFN0ZXBzTWVzc2FnZXNbYWN0aXZlVG9vbC5nZXRUeXBlKCldO1xuICAgICAgaW5kZXggPSB0b29sLnN0ZXBzLmN1cnJlbnRTdGVwSW5kZXgoKTtcbiAgICAgIHRvdGFsID0gdG9vbC5zdGVwcy50b3RhbFN0ZXBzKCk7XG4gICAgICBtZXNzYWdlID0gbWVzc2FnZXNbaW5kZXhdO1xuICAgICAgaWYgKF8uaXNVbmRlZmluZWQobWVzc2FnZSkpIHtcbiAgICAgICAgaW5kZXggPSBudWxsO1xuICAgICAgICB0b3RhbCA9IG51bGw7XG4gICAgICAgIG1lc3NhZ2UgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbHN0ZXAubiA9IGluZGV4ICsgMTtcbiAgICB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbHN0ZXAudG90YWwgPSB0b3RhbDtcbiAgICB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbHN0ZXAubWVzc2FnZSA9IG1lc3NhZ2U7XG4gIH07XG5cbiAgdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50RWRpdGluZ0xheWVyO1xuICB9O1xuXG4gIHRoaXMuX3NldEN1cnJlbnRFZGl0aW5nTGF5ZXIgPSBmdW5jdGlvbihsYXllcil7XG4gICAgaWYgKCFsYXllcil7XG4gICAgICB0aGlzLl9jdXJyZW50RWRpdGluZ0xheWVyID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLl9jdXJyZW50RWRpdGluZ0xheWVyID0gbGF5ZXI7XG4gICAgfVxuICB9O1xuICB0aGlzLl9hZGRUb01hcCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvL3JlY3VwZXJvIGwnZWxlbWVudG8gbWFwIG9sM1xuICAgIHZhciBtYXAgPSB0aGlzLl9tYXBTZXJ2aWNlLnZpZXdlci5tYXA7XG4gICAgdmFyIGxheWVyQ29kZXMgPSB0aGlzLmdldExheWVyQ29kZXMoKTtcbiAgICAvL29nbmkgbGF5ZXIgbG8gYWdnaXVuZ28gYWxsYSBtYXBwYVxuICAgIC8vY29uIGlsIG1ldG9kbyBhZGRUb01hcCBkaSB2ZWN0b3JMYXllclxuICAgIF8uZm9yRWFjaChsYXllckNvZGVzLCBmdW5jdGlvbihsYXllckNvZGUpIHtcbiAgICAgIHNlbGYuX2xheWVyc1tsYXllckNvZGVdLnZlY3Rvci5hZGRUb01hcChtYXApO1xuICAgIH0pO1xuICAgIC8vYWdnaXVuZ28gaWwgbGlzdGVuZXJcbiAgICBpZiAoIXRoaXMuX2xvYWREYXRhT25NYXBWaWV3Q2hhbmdlTGlzdGVuZXIpIHtcbiAgICAgIC8vdmllbmUgcml0b3JuYXRhIGxhIGxpc3RlbmVyIGtleVxuICAgICAgdGhpcy5fbG9hZERhdGFPbk1hcFZpZXdDaGFuZ2VMaXN0ZW5lciA9IHRoaXMuX21hcFNlcnZpY2Uub25hZnRlcignc2V0TWFwVmlldycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuc3RhdGUuZWRpdGluZy5vbiAmJiBzZWxmLnN0YXRlLmVkaXRpbmcuZW5hYmxlZCkge1xuICAgICAgICAgIHNlbGYuX2xvYWRlci5sb2FkQWxsVmVjdG9yc0RhdGEoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuX3Bvc3REYXRhID0gZnVuY3Rpb24oZWRpdHNUb1B1c2gpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy8gbWFuZG8gdW4gb2dnZXR0byBjb21lIG5lbCBjYXNvIGRlbCBiYXRjaCxcbiAgICAvLyBtYSBpbiBxdWVzdG8gY2FzbyBkZXZvIHByZW5kZXJlIHNvbG8gaWwgcHJpbW8sIGUgdW5pY28sIGVsZW1lbnRvXG4gICAgaWYgKGVkaXRzVG9QdXNoLmxlbmd0aCA+IDEpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wb3N0QmF0Y2hEYXRhKGVkaXRzVG9QdXNoKTtcbiAgICB9XG4gICAgdmFyIGxheWVyTmFtZSA9IGVkaXRzVG9QdXNoWzBdLmxheWVybmFtZTtcbiAgICAvL29nZ2V0dG8gY29udGVuZXRlbnRlIGFkZCBkZWxldGUgcmVsYXRpb25zIGxvY2tpZHNcbiAgICB2YXIgZWRpdHMgPSBlZGl0c1RvUHVzaFswXS5lZGl0cztcbiAgICB2YXIganNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeShlZGl0cyk7XG4gICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcbiAgICBfLmZvckVhY2goZWRpdHMsIGZ1bmN0aW9uKHZhbHVlcywga2V5KSB7XG4gICAgICBmb3JtLmFwcGVuZChrZXksIHZhbHVlcyk7XG4gICAgfSk7XG4gICAgcmV0dXJuICQuYWpheCh7XG4gICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICB1cmw6IHRoaXMuY29uZmlnLmJhc2V1cmwrbGF5ZXJOYW1lK1wiLz9cIitzZWxmLl9jdXN0b21VcmxQYXJhbWV0ZXJzLFxuICAgICAgLypjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBkYXRhOiBqc29uRGF0YVxuICAgICAgKi9cbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICBkYXRhOiBmb3JtLFxuICAgICAgY29udGVudFR5cGU6IGZhbHNlLFxuICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlXG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5fcG9zdEJhdGNoRGF0YSA9IGZ1bmN0aW9uKG11bHRpRWRpdHNUb1B1c2gpe1xuICAgIHZhciBlZGl0cyA9IHt9O1xuICAgIF8uZm9yRWFjaChtdWx0aUVkaXRzVG9QdXNoLGZ1bmN0aW9uKGVkaXRzVG9QdXNoKXtcbiAgICAgIGVkaXRzW2VkaXRzVG9QdXNoLmxheWVybmFtZV0gPSBlZGl0c1RvUHVzaC5lZGl0cztcbiAgICB9KTtcbiAgICB2YXIganNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeShlZGl0cyk7XG4gICAgcmV0dXJuICQucG9zdCh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLmJhc2V1cmwsXG4gICAgICBkYXRhOiBqc29uRGF0YSxcbiAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuX3VubG9jayA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsYXllckNvZGVzID0gdGhpcy5nZXRMYXllckNvZGVzKCk7XG4gICAgLy8gZXNlZ3VvIGxlIHJpY2hpZXN0ZSBkZWxsZSBjb25maWd1cmF6aW9uaSBlIG1pIHRlbmdvIGxlIHByb21lc3NlXG4gICAgXy5tYXAobGF5ZXJDb2RlcyxmdW5jdGlvbihsYXllckNvZGUpe1xuICAgICAgcmV0dXJuIHNlbGYuX3VubG9ja0xheWVyKHNlbGYuX2xheWVyc1tsYXllckNvZGVdKTtcbiAgICB9KTtcbiAgfTtcbiAgLy8gZnVuemlvbmUgaW52aW8gbG9ja3NcbiAgdGhpcy5fbG9ja0xheWVyID0gZnVuY3Rpb24obGF5ZXJDb25maWcpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGZlYXR1cmVMb2NrcyA9IHRoaXMuX2xvYWRlci5fdmVjdG9yTGF5ZXJzRGF0YVtsYXllckNvbmZpZy5uYW1lXS5mZWF0dXJlbG9ja3M7XG4gICAgdmFyIGpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoZmVhdHVyZUxvY2tzKTtcbiAgICByZXR1cm4gJC5wb3N0KHtcbiAgICAgIHVybDogdGhpcy5jb25maWcuYmFzZXVybCtsYXllckNvbmZpZy5uYW1lK1wiLz9sb2NrXCIgKyB0aGlzLl9jdXN0b21VcmxQYXJhbWV0ZXJzLFxuICAgICAgZGF0YToganNvbkRhdGEsXG4gICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLl9sb2NrTGF5ZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxheWVyQ29kZXMgPSB0aGlzLmdldExheWVyQ29kZXMoKTtcbiAgICAvLyBlc2VndW8gbGUgcmljaGllc3RlIGRlbGxlIGNvbmZpZ3VyYXppb25pIGUgbWkgdGVuZ28gbGUgcHJvbWVzc2VcbiAgICBfLm1hcChsYXllckNvZGVzLGZ1bmN0aW9uKGxheWVyQ29kZSl7XG4gICAgICByZXR1cm4gc2VsZi5fbG9ja0xheWVyKHNlbGYuX2xheWVyc1tsYXllckNvZGVdKTtcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLl91bmxvY2tMYXllciA9IGZ1bmN0aW9uKGxheWVyQ29uZmlnKXtcbiAgICAkLmdldCh0aGlzLmNvbmZpZy5iYXNldXJsK2xheWVyQ29uZmlnLm5hbWUrXCIvP3VubG9ja1wiICsgdGhpcy5fY3VzdG9tVXJsUGFyYW1ldGVycyk7XG4gIH07XG4gIC8vZ2V0IGxvYWRlciBzZXJ2aWNlXG4gIHRoaXMuZ2V0TG9hZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xvYWRlcjtcbiAgfVxufVxuXG5pbmhlcml0KEdlb25vdGVzU2VydmljZSwgRzNXT2JqZWN0KTtcbm1vZHVsZS5leHBvcnRzID0gbmV3IEdlb25vdGVzU2VydmljZTtcbn0se1wiLi9lZGl0b3JzL2F0dHJpYnV0ZXNmb3JtXCI6MX1dfSx7fSxbM10pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
