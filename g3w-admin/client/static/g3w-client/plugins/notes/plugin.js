!function e(t,i,o){function n(r,a){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};t[r][0].call(d.exports,function(e){var i=t[r][1][e];return n(i?i:e)},d,d.exports,e,t,i,o)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({1:[function(t,e,i){function o(t){s(this,t),this._formPanel=l}var n=g3wsdk.core.utils.inherit,s=g3wsdk.core.utils.base,r=g3wsdk.gui.FormPanel,a=g3wsdk.gui.Form,l=r.extend({});n(o,a),e.exports=o},{}],2:[function(t,e,i){function o(t){t.formTools=[],s(this,t);var e=function(){a.saveEdits()};this.onafter("addFeature",e),this.onafter("deleteFeature",e),this.onafter("moveFeature",e),this.onafter("pickFeature",e)}var n=g3wsdk.core.utils.inherit,s=g3wsdk.core.utils.base,r=g3wsdk.core.Editor,a=t("../pluginservice");t("./attributesform");n(o,r),e.exports=o},{"../pluginservice":7,"./attributesform":1}],3:[function(t,e,i){var o=g3wsdk.core.utils.inherit,n=g3wsdk.core.utils.base,s=g3wsdk.core.Plugin,r=g3wsdk.gui.GUI,a=g3wsdk.core.ProjectsRegistry,l=t("pluginconfig"),c=t("./pluginservice"),d=t("./panel"),u=function(){n(this),this.name="notes",this.config=null,this.service=null,this.init=function(){this.setPluginService(c),this.config=this.getPluginConfig(),this.setUpIconsUrl(this.config.layers),this.registerPlugin(this.config.gid)&&(r.ready?this.setupGui():r.on("ready",_.bind(this.setupGui,this)),l.customUrlParameters=this.createPluginCustomUrlParameters(),this.service.init(this.config,l))},this.setupGui=function(){var t=r.getComponent("tools"),e=t.getService(),i=l.tools(this);this.service.setPluginToolsService(e),e.addTools(1,"GEONOTES",i)},this.toolsActions={showHideLayer:function(){this.service.showHideLayer(l.layersCode.GEONOTES)},showEditingPanel:function(){var t=new d;_.forEach(this.config.layers,function(e,i){t.setIconsTool(i,e.icontools)}),this.service.toggleEditing(),r.showPanel(t)},isChecked:function(t){return this.service.isLayerVisible()}},this.createPluginCustomUrlParameters=function(){var t="&",e=a.getCurrentProject();return t+="project_type="+e.getType()+"&project_id="+e.getId()},this.setUpIconsUrl=function(t){_.forEach(t,function(t){l.layers[t.name].icons=t.icons})},this.setupToolsAction=function(t){_.forEach(t,function(t){})}};o(u,s),function(t){t.init()}(new u)},{"./panel":5,"./pluginservice":7,pluginconfig:6}],4:[function(t,e,i){e.exports='<div class="g3w-iternet-editing-panel">\n  <template v-for="toolbar in editorstoolbars">\n    <div class="panel panel-primary">\n      <div class="panel-heading">\n        <h3 class="panel-title">{{ toolbar.name }}</h3>\n      </div>\n      <div class="panel-body">\n        <template v-for="tool in toolbar.tools">\n          <div class="editbtn" :class="{\'enabled\' : (state.editing.on && editingtoolbtnEnabled(tool)), \'toggled\' : editingtoolbtnToggled(toolbar.layercode, tool.tooltype)}">\n            <img height="30px" width="30px" @click="toggleEditTool(toolbar.layercode, tool.tooltype)" :alt.once="tool.title" :title.once="tool.title" :src.once="tool.icon"></img>\n          </div>\n        </template>\n      </div>\n    </div>\n  </template>\n  <div v-show="state.retrievingData" style="color:#ffffff">\n    <span>Caricamento Dati ... </span><img :src="resourcesurl +\'images/loader.svg\'">\n  </div>\n  <div class="message">\n    {{{ message }}}\n  </div>\n</div>\n'},{}],5:[function(t,e,i){function o(){this.id="geonotes-editing-panel",this.name="Gestione dati GEONOTES",this.internalPanel=new c}var n=g3wsdk.core.utils.resolve,s=g3wsdk.core.utils.inherit,r=g3wsdk.gui.GUI,a=g3wsdk.gui.Panel,l=t("./pluginservice"),c=Vue.extend({template:t("./panel.html"),data:function(){var t=r.getResourcesUrl()+"images/";return{state:l.state,resourcesurl:r.getResourcesUrl(),editorstoolbars:[{name:"Geonotes",layercode:l.layerCodes.GEONOTES,tools:[{title:"Aggiungi Geonota",tooltype:"addfeature",icontool:"add",icon:t+"iternetAddPoint.png"},{title:"Sposta Geonota",tooltype:"movefeature",icontool:"move",icon:t+"iternetMovePoint.png"},{title:"Rimuovi Geonota",tooltype:"deletefeature",icontool:"delete",icon:t+"iternetDeletePoint.png"},{title:"Edita geonota",tooltype:"editattributes",icontool:"edit",icon:t+"editAttributes.png"}]}],savebtnlabel:"Salva"}},methods:{toggleEditing:function(){l.toggleEditing()},saveEdits:function(){l.saveEdits()},toggleEditTool:function(t,e){""!=e&&this.state.editing.on&&l.toggleEditTool(t,e)},editingtoolbtnToggled:function(t,e){return this.state.editing.layerCode==t&&this.state.editing.toolType==e},editingtoolbtnEnabled:function(t){return""!=t.tooltype},onClose:function(){l.stop()}},computed:{editingbtnlabel:function(){return this.state.editing.on?"Termina editing":"Avvia editing"},editingbtnEnabled:function(){return this.state.editing.enabled||this.state.editing.on?"":"disabled"},message:function(){var t="";if(this.state.editing.enabled){if(this.state.editing.toolstep.message){var e=this.state.editing.toolstep.n,i=this.state.editing.toolstep.total,o=this.state.editing.toolstep.message;t='<div style="margin-top:20px">GUIDA STRUMENTO:</div><div><span>['+e+"/"+i+'] </span><span style="color: yellow">'+o+"</span></div>"}}else t='<span style="color: red">Aumentare il livello di zoom per abilitare l\'editing';return t}}});s(o,a);var d=a.prototype;d.onShow=function(t){var e=this.internalPanel;return e.$mount().$appendTo(t),n(!0)},d.onClose=function(){console.log("close");var t=this,e=$.Deferred();return l.stop().then(function(){t.internalPanel.$destroy(!0),t.internalPanel=null,e.resolve()}).fail(function(){e.reject()}),e.promise()},d.setIconsTool=function(t,e){var i=this.internalPanel.editorstoolbars;_.forEach(i,function(o,n){t==o.layercode&&_.forEach(o.tools,function(t,o){e[t.icontool]&&(i[n].tools[o].icon=e[t.icontool])})})},e.exports=o},{"./panel.html":4,"./pluginservice":7}],6:[function(t,e,i){function o(t){return o=[{name:"Geonotes",layerName:"note",type:"checkbox",isCheck:!1,action:_.bind(t.toolsActions.showHideLayer,t)},{name:"Edita Geonotes",action:_.bind(t.toolsActions.showEditingPanel,t)}]}var n=t("./editors/geonoteseditor"),s=this.layerCodes={GEONOTES:"note"},r={};r[s.GEONOTES]=n;var a={},l={},c={},d=function(t){var e=t.iconurl;return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,.5],offset:[0,0],src:e})})};l[s.GEONOTES]={url:d,add:d,"delete":d,edit:d,move:d},c[s.GEONOTES]={},a[s.GEONOTES]={layerCode:s.GEONOTES,vector:null,editor:null,iconurl:null,crs:null,style:l[s.GEONOTES]},e.exports={layersCode:s,layers:a,layersStyle:l,layersEditingStyle:c,editorClass:r,tools:o}},{"./editors/geonoteseditor":2}],7:[function(e,i,o){function n(){var e=this;this._mapService=null,this._loadDataOnMapViewChangeListener=null,this._currentEditingLayer=null,this.state={editing:{on:!1,enabled:!1,layerCode:null,toolType:null,startingEditingTool:!1,toolstep:{n:null,total:null,message:null}},retrievingData:!1,hasEdits:!1},this._loader=new l;this.init=function(t,e){var i=this;this.config=t,this._crs=null,this._layers=e.layers,this._editorClass=e.editorClass,this.layerCodes=e.layersCode,this._layersStyle=e.layersStyle,this._layersEditingStyle=e.layersEditingStyle,this._customUrlParameters=e.customUrlParameters||null,this._mapService=a.getComponent("map").getService(),_.forEach(this.config.layers,function(t,e){i._layers[e].infourl=t.infourl,i._layers[e].crs="EPSG:"+t.crs,i.setLayerStyle(e)});var o={layers:this._layers,baseurl:this.config.baseurl,mapService:this._mapService};this._loader.init(o),this._loader.on("loadingvectorlayersstart",function(){i.state.retrievingData=!0}),this._loader.on("loadingvectorlayersend",function(){i.state.retrievingData=!1}),this._loader.on("setmode",function(t){switch(t){case"w":i.state.editing.on=!0,i.emit("editingstarted");break;case"r":i.state.editing.on=!1}}),this._mapService.on("pointerInteractionSet",function(t){var e=i._getCurrentEditingLayer();if(e){var o=e.editor.getActiveTool().instance;o&&!o.ownsInteraction(t)&&i._stopEditingTool()}}),this.state.editing.enabled=!0,_.forEach(this._layers,function(e,o){var n=t.layers[o].id,s=t.layers[o].name,r=i._mapService.getProject().getLayerById(n);r?(e.name=r.getOrigName(),e.id=n):(e.name=s,e.id=n)})},this.setPluginToolsService=function(t){this._pluginToolsService=t},this.setLayerStyle=function(t){var e=this,i=this._layers[t].icons;_.forEach(i,function(i,o){"url"==o&&(e._layers[t].style=e._layersStyle[t][o]({iconurl:i})),e._layersEditingStyle[t][o]=e._layersStyle[t][o]({iconurl:i})})},this.getLayerStyle=function(t){return this._layers[t].style},this._toggleCheckBoxPluginTool=function(t){var e=this,i=0;this._pluginToolsService.getState().toolsGroups.length>1&&(i=1);var o=this._pluginToolsService.getState().toolsGroups[i].tools,n=this._layers[t].vector;_.forEach(o,function(s,r){if(_.has(s,"type")&&s.layerName==t&&"checkbox"==s.type){var a=o[r];a.isCheck=!0,o[r]=a,e._pluginToolsService.updateToolsGroup(i,{name:"GEONOTES",tools:o}),n.setVisible(!0)}})},this.isLayerVisible=function(t){var e=this._layers[t].vector;return e.isVisible()},this.showHideLayer=function(t){var e=this,i=null;this._loader.isReady()?(i=this._layers[t].vector,i.setVisible(!i.isVisible())):this._loader.loadLayers("r",this._customUrlParameters).then(function(){e._addToMap()})},this.stop=function(){var t=$.Deferred();return this.state.editing.on?this._cancelOrSave().then(function(){e._stopEditing(),t.resolve()}).fail(function(){t.reject()}):t.resolve(),t.promise()},this.toggleEditing=function(){var t=$.Deferred();if(this.state.editing.enabled&&!this.state.editing.on)this._startEditing();else if(this.state.editing.on)return this.stop();return t.promise()},this.saveEdits=function(){this._saveWithoutAsk()},this.toggleEditTool=function(t,e){var i=this,o=this._layers[t];if(o){var n=this._getCurrentEditingLayer();n&&t==n.layerCode?e==n.editor.getActiveTool().getType()?this._stopEditingTool():(this._stopEditingTool(),this._startEditingTool(n,e)):n&&n.editor.isStarted()?this._cancelOrSave(2).then(function(){i._stopEditor()&&i._startEditingTool(o,e)}):this._startEditingTool(o,e)}},this.getLayerCodes=function(){return _.values(this.layerCodes)},this._setUpVectorLayer=function(t,e){this._layers[t].vector=e},this._setUpEditor=function(t){var e=this,i={mapService:e._mapService,formClass:c,editingVectorStyle:this._layersEditingStyle[t]},o=this._layers[t].vector,n=new e._editorClass[t](i);n.setVectorLayer(o),n.on("dirty",function(t){e.state.hasEdits=t}),this._layers[t].editor=n},this._startEditing=function(){if(!this.state.editing.on&&!this.state.retrievingData){var e=this;if(this._loader.isReady()){this._loader.setMode("w");var i=this._loader.getVectorLayersCodes();_.forEach(i,function(t){e._loader.lockFeatures(e._layers[t].name).then(function(i){e._setUpEditor(t),e._toggleCheckBoxPluginTool(t)})}),e.state.editing.on=!0}else this._loader.loadLayers("w",this._customUrlParameters).then(function(t){_.forEach(t,function(t){e._setUpEditor(t),e._toggleCheckBoxPluginTool(t)}),e._addToMap()}).fail(function(){a.notify.error(t("could_not_load_vector_layers"))})}},this._stopEditing=function(t){this._stopEditor(t)&&(_.forEach(this._layers,function(t,i){t.vector;t.editor=null,e._unlockLayer(e._layers[i])}),this._updateEditingState(),this._loader.setMode("r"),e._cleanUp(),e.emit("editingstopped"))},this._cleanUp=function(){this._loader.cleanUpLayers()},this._startEditor=function(t){return!!t.editor.start(this)&&(this._setCurrentEditingLayer(t),!0)},this._startEditingTool=function(t,e,i){this.state.startingEditingTool=!0;var o=!0;return t.editor.isStarted()||(o=this._startEditor(t)),o&&t.editor.setTool(e,i)?(this._updateEditingState(),this.state.startingEditingTool=!1,!0):(this.state.startingEditingTool=!1,!1)},this._stopEditor=function(t){var e=!0,i=this._getCurrentEditingLayer();return i&&(e=i.editor.stop(t),e&&this._setCurrentEditingLayer()),e},this._stopEditingTool=function(){var t=!0,e=this._getCurrentEditingLayer();return e&&(t=e.editor.stopTool(),t&&this._updateEditingState()),t},this._saveWithoutAsk=function(){var t=$.Deferred(),e={};_.forEach(this._layers,function(t,i){t.editor.isDirty()&&(e[i]=t.editor)}),this._saveEdits(e).then(function(e){t.resolve()}).fail(function(e){t.reject()})},this._cancelOrSave=function(t){var e=$.Deferred();try{var i=1;t&&(i=t);var o=this,n={};_.forEach(this._layers,function(t,e){t.editor.isDirty()&&(n[e]=t.editor)}),_.keys(n).length?this._askCancelOrSave(i).then(function(t){"save"===t?o._saveEdits(n).then(function(t){e.resolve()}).fail(function(t){e.reject()}):"nosave"==t?e.resolve():"cancel"==t&&e.reject()}):e.resolve()}catch(s){e.reject()}return e.promise()},this._askCancelOrSave=function(t){var e=$.Deferred(),i={SAVE:{label:"Salva",className:"btn-success",callback:function(){e.resolve("save")}},NOSAVE:{label:"Termina senza salvare",className:"btn-danger",callback:function(){e.resolve("nosave")}},CANCEL:{label:"Annulla",className:"btn-primary",callback:function(){e.resolve("cancel")}}};switch(t){case 1:buttons={save:i.SAVE,nosave:i.NOSAVE,cancel:i.CANCEL};break;case 2:buttons={save:i.SAVE,cancel:i.CANCEL}}return a.dialog.dialog({message:"Vuoi salvare definitivamente le modifiche?",title:"Salvataggio modifica",buttons:buttons}),e.promise()},this._saveEdits=function(t){var e=this,i=$.Deferred();return this._sendEdits(t).then(function(o){a.notify.success("I dati sono stati salvati correttamente"),e._commitEdits(t,o),i.resolve()}).fail(function(t){a.notify.error("Errore nel salvataggio sul server"),i.resolve()}),i.promise()},this._sendEdits=function(t){var e=$.Deferred(),i=_.map(t,function(t){return{layername:t.getVectorLayer().name,edits:t.getEditedFeatures()}});return this._postData(i).then(function(t){t.result?e.resolve(t.response):e.reject(t.response)}).fail(function(t){e.reject(t.response)}),e.promise()},this._commitEdits=function(t,e){_.forEach(t,function(t){e&&e["new"]&&_.forEach(e["new"],function(i){var o=i.clientid,n=i.id;t.getEditVectorLayer().setFeatureData(o,n,null,i),_.forEach(e.new_lockids,function(e){t.getVectorLayer().addLockId(e)})}),console.log("editor commit"),t.commit()})},this._undoEdits=function(t){var e=this._getCurrentEditingLayer().layerCode;t[e];this._stopEditing(!0)},this._updateEditingState=function(){var t=this._getCurrentEditingLayer();t?(this.state.editing.layerCode=t.layerCode,this.state.editing.toolType=t.editor.getActiveTool().getType()):(this.state.editing.layerCode=null,this.state.editing.toolType=null),this._updateToolStepsState()},this._updateToolStepsState=function(){var t,e=this,i=this._getCurrentEditingLayer();if(i&&(t=i.editor.getActiveTool()),t&&t.getTool()){var o=t.getTool();o.steps&&(this._setToolStepState(t),o.steps.on("step",function(i,o){e._setToolStepState(t)}),o.steps.on("complete",function(){e._setToolStepState()}))}else e._setToolStepState()},this._setToolStepState=function(t){var e,i,o;if(_.isUndefined(t))e=null,i=null,o=null;else{var n=t.getTool(),s=toolStepsMessages[t.getType()];e=n.steps.currentStepIndex(),i=n.steps.totalSteps(),o=s[e],_.isUndefined(o)&&(e=null,i=null,o=null)}this.state.editing.toolstep.n=e+1,this.state.editing.toolstep.total=i,this.state.editing.toolstep.message=o},this._getCurrentEditingLayer=function(){return this._currentEditingLayer},this._setCurrentEditingLayer=function(t){t?this._currentEditingLayer=t:this._currentEditingLayer=null},this._addToMap=function(){var t=this,e=this._mapService.viewer.map,i=this.getLayerCodes();_.forEach(i,function(i){t._layers[i].vector.addToMap(e)}),this._loadDataOnMapViewChangeListener||(this._loadDataOnMapViewChangeListener=this._mapService.onafter("setMapView",function(){t.state.editing.on&&t.state.editing.enabled&&t._loader.loadAllVectorsData()}))},this._postData=function(t){var e=this;if(t.length>1)return this._postBatchData(t);var i=t[0].layername,o=t[0].edits,n=JSON.stringify(o),s=new FormData;return _.forEach(o,function(t,e){s.append(e,t)}),$.ajax({type:"POST",url:this.config.baseurl+i+"/?"+e._customUrlParameters,contentType:"application/json",data:n})},this._postBatchData=function(t){var e={};_.forEach(t,function(t){e[t.layername]=t.edits});var i=JSON.stringify(e);return $.post({url:this.config.baseurl,data:i,contentType:"application/json"})},this._unlock=function(){var t=this.getLayerCodes();_.map(t,function(t){return e._unlockLayer(e._layers[t])})},this._lockLayer=function(t){var e=this._loader._vectorLayersData[t.name].featurelocks,i=JSON.stringify(e);return $.post({url:this.config.baseurl+t.name+"/?lock"+this._customUrlParameters,data:i,contentType:"application/json"})},this._lockLayers=function(){var t=this.getLayerCodes();_.map(t,function(t){return e._lockLayer(e._layers[t])})},this._unlockLayer=function(t){$.get(this.config.baseurl+t.name+"/?unlock"+this._customUrlParameters)},this.getLoader=function(){return this._loader}}var s=g3wsdk.core.utils.inherit,r=g3wsdk.core.G3WObject,a=g3wsdk.gui.GUI,l=g3wsdk.core.VectorLayerLoader,c=e("./editors/attributesform");s(n,r),i.exports=new n},{"./editors/attributesform":1}]},{},[3]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1aWxkLmpzIl0sIm5hbWVzIjpbImUiLCJ0IiwibiIsInIiLCJzIiwibyIsInUiLCJhIiwicmVxdWlyZSIsImkiLCJmIiwiRXJyb3IiLCJjb2RlIiwibCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIkdlb25vdGVGb3JtIiwib3B0aW9ucyIsImJhc2UiLCJ0aGlzIiwiX2Zvcm1QYW5lbCIsIkdlb25vdGVGb3JtUGFuZWwiLCJpbmhlcml0IiwiZzN3c2RrIiwiY29yZSIsInV0aWxzIiwiRm9ybVBhbmVsIiwiZ3VpIiwiRm9ybSIsImV4dGVuZCIsIjIiLCJHZW9ub3Rlc0VkaXRvciIsImZvcm1Ub29scyIsInNhdmVFZGl0c1RvRGF0YWJhc2UiLCJQbHVnaW5TZXJ2aWNlIiwic2F2ZUVkaXRzIiwib25hZnRlciIsIkVkaXRvciIsIi4uL3BsdWdpbnNlcnZpY2UiLCIuL2F0dHJpYnV0ZXNmb3JtIiwiMyIsIlBsdWdpbiIsIkdVSSIsIlByb2plY3RzUmVnaXN0cnkiLCJwbHVnaW5Db25maWciLCJTZXJ2aWNlIiwiRWRpdGluZ1BhbmVsIiwiX1BsdWdpbiIsIm5hbWUiLCJjb25maWciLCJzZXJ2aWNlIiwiaW5pdCIsInNldFBsdWdpblNlcnZpY2UiLCJnZXRQbHVnaW5Db25maWciLCJzZXRVcEljb25zVXJsIiwibGF5ZXJzIiwicmVnaXN0ZXJQbHVnaW4iLCJnaWQiLCJyZWFkeSIsInNldHVwR3VpIiwib24iLCJfIiwiYmluZCIsImN1c3RvbVVybFBhcmFtZXRlcnMiLCJjcmVhdGVQbHVnaW5DdXN0b21VcmxQYXJhbWV0ZXJzIiwidG9vbHNDb21wb25lbnQiLCJnZXRDb21wb25lbnQiLCJ0b29sc1NlcnZpY2UiLCJnZXRTZXJ2aWNlIiwidG9vbHMiLCJzZXRQbHVnaW5Ub29sc1NlcnZpY2UiLCJhZGRUb29scyIsInRvb2xzQWN0aW9ucyIsInNob3dIaWRlTGF5ZXIiLCJsYXllcnNDb2RlIiwiR0VPTk9URVMiLCJzaG93RWRpdGluZ1BhbmVsIiwicGFuZWwiLCJmb3JFYWNoIiwibGF5ZXJDb25maWciLCJsYXllckNvZGUiLCJzZXRJY29uc1Rvb2wiLCJpY29udG9vbHMiLCJ0b2dnbGVFZGl0aW5nIiwic2hvd1BhbmVsIiwiaXNDaGVja2VkIiwiaXNMYXllclZpc2libGUiLCJjdXJyZW50UHJvamVjdCIsImdldEN1cnJlbnRQcm9qZWN0IiwiZ2V0VHlwZSIsImdldElkIiwibGF5ZXJzQ29uZmlnIiwiaWNvbnMiLCJzZXR1cFRvb2xzQWN0aW9uIiwidG9vbCIsInBsdWdpbiIsIi4vcGFuZWwiLCIuL3BsdWdpbnNlcnZpY2UiLCJwbHVnaW5jb25maWciLCI0IiwiNSIsIkVkaXRvclBhbmVsIiwiaWQiLCJpbnRlcm5hbFBhbmVsIiwiUGFuZWxDb21wb25lbnQiLCJyZXNvbHZlZFZhbHVlIiwicmVzb2x2ZSIsIlBhbmVsIiwiVnVlIiwidGVtcGxhdGUiLCJkYXRhIiwiaW1hZ2VQYXRoIiwiZ2V0UmVzb3VyY2VzVXJsIiwic3RhdGUiLCJyZXNvdXJjZXN1cmwiLCJlZGl0b3JzdG9vbGJhcnMiLCJsYXllcmNvZGUiLCJsYXllckNvZGVzIiwidGl0bGUiLCJ0b29sdHlwZSIsImljb250b29sIiwiaWNvbiIsInNhdmVidG5sYWJlbCIsIm1ldGhvZHMiLCJ0b2dnbGVFZGl0VG9vbCIsInRvb2xUeXBlIiwiZWRpdGluZyIsImVkaXRpbmd0b29sYnRuVG9nZ2xlZCIsImVkaXRpbmd0b29sYnRuRW5hYmxlZCIsIm9uQ2xvc2UiLCJzdG9wIiwiY29tcHV0ZWQiLCJlZGl0aW5nYnRubGFiZWwiLCJlZGl0aW5nYnRuRW5hYmxlZCIsImVuYWJsZWQiLCJtZXNzYWdlIiwidG9vbHN0ZXAiLCJ0b3RhbCIsInN0ZXBtZXNzYWdlIiwicHJvdG8iLCJwcm90b3R5cGUiLCJvblNob3ciLCJjb250YWluZXIiLCIkbW91bnQiLCIkYXBwZW5kVG8iLCJjb25zb2xlIiwibG9nIiwic2VsZiIsImRlZmVycmVkIiwiJCIsIkRlZmVycmVkIiwidGhlbiIsIiRkZXN0cm95IiwiZmFpbCIsInJlamVjdCIsInByb21pc2UiLCJpY29uc0NvbmZpZyIsImVkaXRvclRvb2xzIiwiZWRpdG9yVG9vbEluZGV4IiwidG9vbEluZGV4IiwiLi9wYW5lbC5odG1sIiwiNiIsImxheWVyTmFtZSIsInR5cGUiLCJpc0NoZWNrIiwiYWN0aW9uIiwiZWRpdG9yQ2xhc3MiLCJsYXllcnNTdHlsZSIsImxheWVyc0VkaXRpbmdTdHlsZSIsImNyZWF0ZVN0eWxlIiwic3R5bGVPcHRpb25zIiwiaWNvbnVybCIsIm9sIiwic3R5bGUiLCJTdHlsZSIsImltYWdlIiwiSWNvbiIsImFuY2hvciIsIm9mZnNldCIsInNyYyIsInVybCIsImFkZCIsImRlbGV0ZSIsImVkaXQiLCJtb3ZlIiwidmVjdG9yIiwiZWRpdG9yIiwiY3JzIiwiLi9lZGl0b3JzL2dlb25vdGVzZWRpdG9yIiwiNyIsIkdlb25vdGVzU2VydmljZSIsIl9tYXBTZXJ2aWNlIiwiX2xvYWREYXRhT25NYXBWaWV3Q2hhbmdlTGlzdGVuZXIiLCJfY3VycmVudEVkaXRpbmdMYXllciIsInN0YXJ0aW5nRWRpdGluZ1Rvb2wiLCJyZXRyaWV2aW5nRGF0YSIsImhhc0VkaXRzIiwiX2xvYWRlciIsIlZlY3RvckxvYWRlckxheWVyIiwiX2NycyIsIl9sYXllcnMiLCJfZWRpdG9yQ2xhc3MiLCJfbGF5ZXJzU3R5bGUiLCJfbGF5ZXJzRWRpdGluZ1N0eWxlIiwiX2N1c3RvbVVybFBhcmFtZXRlcnMiLCJpbmZvdXJsIiwic2V0TGF5ZXJTdHlsZSIsIm9wdGlvbnNfbG9hZGVyIiwiYmFzZXVybCIsIm1hcFNlcnZpY2UiLCJtb2RlIiwiZW1pdCIsImludGVyYWN0aW9uIiwiY3VycmVudEVkaXRpbmdMYXllciIsIl9nZXRDdXJyZW50RWRpdGluZ0xheWVyIiwiYWN0aXZlVG9vbCIsImdldEFjdGl2ZVRvb2wiLCJpbnN0YW5jZSIsIm93bnNJbnRlcmFjdGlvbiIsIl9zdG9wRWRpdGluZ1Rvb2wiLCJMYXllciIsImxheWVySWQiLCJsYXllciIsImdldFByb2plY3QiLCJnZXRMYXllckJ5SWQiLCJnZXRPcmlnTmFtZSIsInBsdWdpblRvb2xzU2VydmljZSIsIl9wbHVnaW5Ub29sc1NlcnZpY2UiLCJrZXkiLCJnZXRMYXllclN0eWxlIiwiX3RvZ2dsZUNoZWNrQm94UGx1Z2luVG9vbCIsInBsdWdpbkluZGV4IiwiZ2V0U3RhdGUiLCJ0b29sc0dyb3VwcyIsInBsdWdpblRvb2xzIiwidmVjdG9yTGF5ZXIiLCJwbHVnaW5Ub29sIiwiaW5kZXgiLCJoYXMiLCJ0b29sQ29uZmlnIiwidXBkYXRlVG9vbHNHcm91cCIsInNldFZpc2libGUiLCJpc1Zpc2libGUiLCJpc1JlYWR5IiwibG9hZExheWVycyIsIl9hZGRUb01hcCIsIl9jYW5jZWxPclNhdmUiLCJfc3RvcEVkaXRpbmciLCJfc3RhcnRFZGl0aW5nIiwiX3NhdmVXaXRob3V0QXNrIiwiX3N0YXJ0RWRpdGluZ1Rvb2wiLCJpc1N0YXJ0ZWQiLCJfc3RvcEVkaXRvciIsImdldExheWVyQ29kZXMiLCJ2YWx1ZXMiLCJfc2V0VXBWZWN0b3JMYXllciIsIl9zZXRVcEVkaXRvciIsIm9wdGlvbnNfZWRpdG9yIiwiZm9ybUNsYXNzIiwiRm9ybUNsYXNzIiwiZWRpdGluZ1ZlY3RvclN0eWxlIiwic2V0VmVjdG9yTGF5ZXIiLCJkaXJ0eSIsInNldE1vZGUiLCJ2ZWN0b3JMYXllcnNDb2RlcyIsImdldFZlY3RvckxheWVyc0NvZGVzIiwibG9ja0ZlYXR1cmVzIiwibm90aWZ5IiwiZXJyb3IiLCJyZXNldCIsIl91bmxvY2tMYXllciIsIl91cGRhdGVFZGl0aW5nU3RhdGUiLCJfY2xlYW5VcCIsImNsZWFuVXBMYXllcnMiLCJfc3RhcnRFZGl0b3IiLCJzdGFydCIsIl9zZXRDdXJyZW50RWRpdGluZ0xheWVyIiwiY2FuU3RhcnRUb29sIiwic2V0VG9vbCIsInJldCIsInN0b3BUb29sIiwiZGlydHlFZGl0b3JzIiwiaXNEaXJ0eSIsIl9zYXZlRWRpdHMiLCJyZXN1bHQiLCJfYXNrVHlwZSIsImtleXMiLCJfYXNrQ2FuY2VsT3JTYXZlIiwiYnV0dG9uVHlwZXMiLCJTQVZFIiwibGFiZWwiLCJjbGFzc05hbWUiLCJjYWxsYmFjayIsIk5PU0FWRSIsIkNBTkNFTCIsImJ1dHRvbnMiLCJzYXZlIiwibm9zYXZlIiwiY2FuY2VsIiwiZGlhbG9nIiwiX3NlbmRFZGl0cyIsInJlc3BvbnNlIiwic3VjY2VzcyIsIl9jb21taXRFZGl0cyIsImVycm9ycyIsImVkaXRzVG9QdXNoIiwibWFwIiwibGF5ZXJuYW1lIiwiZ2V0VmVjdG9yTGF5ZXIiLCJlZGl0cyIsImdldEVkaXRlZEZlYXR1cmVzIiwiX3Bvc3REYXRhIiwicmV0dXJuZWQiLCJlZGl0b3JzIiwidXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzIiwib2xkZmlkIiwiY2xpZW50aWQiLCJmaWQiLCJnZXRFZGl0VmVjdG9yTGF5ZXIiLCJzZXRGZWF0dXJlRGF0YSIsIm5ld19sb2NraWRzIiwibmV3bG9ja0lkIiwiYWRkTG9ja0lkIiwiY29tbWl0IiwiX3VuZG9FZGl0cyIsImN1cnJlbnRFZGl0aW5nTGF5ZXJDb2RlIiwiX3VwZGF0ZVRvb2xTdGVwc1N0YXRlIiwiZ2V0VG9vbCIsInRvb2xJbnN0YW5jZSIsInN0ZXBzIiwiX3NldFRvb2xTdGVwU3RhdGUiLCJzdGVwIiwiaXNVbmRlZmluZWQiLCJtZXNzYWdlcyIsInRvb2xTdGVwc01lc3NhZ2VzIiwiY3VycmVudFN0ZXBJbmRleCIsInRvdGFsU3RlcHMiLCJ2aWV3ZXIiLCJhZGRUb01hcCIsImxvYWRBbGxWZWN0b3JzRGF0YSIsIl9wb3N0QmF0Y2hEYXRhIiwianNvbkRhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwiZm9ybSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiYWpheCIsImNvbnRlbnRUeXBlIiwibXVsdGlFZGl0c1RvUHVzaCIsInBvc3QiLCJfdW5sb2NrIiwiX2xvY2tMYXllciIsImZlYXR1cmVMb2NrcyIsIl92ZWN0b3JMYXllcnNEYXRhIiwiZmVhdHVyZWxvY2tzIiwiX2xvY2tMYXllcnMiLCJnZXQiLCJnZXRMb2FkZXIiLCJHM1dPYmplY3QiLCJWZWN0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TCxLQUNsQjJLLDJCQUEyQixTQUFTIiwiZmlsZSI6ImJ1aWxkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIGluaGVyaXQgPSBnM3dzZGsuY29yZS51dGlscy5pbmhlcml0O1xudmFyIGJhc2UgPSBnM3dzZGsuY29yZS51dGlscy5iYXNlO1xudmFyIEZvcm1QYW5lbCA9IGczd3Nkay5ndWkuRm9ybVBhbmVsO1xudmFyIEZvcm0gPSBnM3dzZGsuZ3VpLkZvcm07XG5cbnZhciBHZW9ub3RlRm9ybVBhbmVsID0gRm9ybVBhbmVsLmV4dGVuZCh7XG4gIC8vdGVtcGxhdGU6IHJlcXVpcmUoJy4vYXR0cmlidXRlc2Zvcm0uaHRtbCcpXG59KTtcblxuZnVuY3Rpb24gR2Vvbm90ZUZvcm0ob3B0aW9ucyl7XG4gIGJhc2UodGhpcyxvcHRpb25zKTtcbiAgdGhpcy5fZm9ybVBhbmVsID0gR2Vvbm90ZUZvcm1QYW5lbDtcbn1cbmluaGVyaXQoR2Vvbm90ZUZvcm0sRm9ybSk7XG5cbm1vZHVsZS5leHBvcnRzID0gR2Vvbm90ZUZvcm07XG5cbn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIGluaGVyaXQgPSBnM3dzZGsuY29yZS51dGlscy5pbmhlcml0O1xudmFyIGJhc2UgPSBnM3dzZGsuY29yZS51dGlscy5iYXNlO1xudmFyIEVkaXRvciA9IGczd3Nkay5jb3JlLkVkaXRvcjtcbnZhciBQbHVnaW5TZXJ2aWNlID0gcmVxdWlyZSgnLi4vcGx1Z2luc2VydmljZScpO1xudmFyIEZvcm0gPSByZXF1aXJlKCcuL2F0dHJpYnV0ZXNmb3JtJyk7XG52YXIgZm9ybSA9IG51bGw7IC8vIGJydXR0byBtYSBkZXZvIHRlbmVybG8gZXN0ZXJubyBzZW5uw7Igc2kgY3JlYSB1biBjbGljbyBkaSByaWZlcmltZW50aSBjaGUgbWFuZGEgaW4gcGFsbGEgVnVlXG5cblxuZnVuY3Rpb24gR2Vvbm90ZXNFZGl0b3Iob3B0aW9ucykge1xuXG4gIC8vIGluIHF1ZXN0byBtb2RvIHBhc3NpYW1vIGlsIG1hcHNlcnZpY2UgY29tZSBhcmdvbWVudG8gYWwgc3VwZXJjbGFzcyAoZWRpdG9yKVxuICAvLyBkaSBpdGVybmV0ZWRpdG9yIGluIG1vZG8gZGEgYXNzZWduYXJhZSBhbmNoZSBhIGl0ZXJuZXRlZGl0b3IgaWwgbWFwc2VydmVpY2UgY2hlIHhzZXJ2aXLDoCBhZCBlc2VtcGlvIGFkIGFnZ2l1bmdlcmVcbiAgLy8gbCdpbnRlcmFjdGlvbiBhbGxhIG1hcHBhIHF1YW5kbyB2aWVuZSBjbGljY2F0byBzdSB1biB0b29sXG4gIG9wdGlvbnMuZm9ybVRvb2xzID0gW107XG4gIGJhc2UodGhpcywgb3B0aW9ucyk7XG4gIHZhciBzYXZlRWRpdHNUb0RhdGFiYXNlID0gZnVuY3Rpb24oKSB7XG4gICAgUGx1Z2luU2VydmljZS5zYXZlRWRpdHMoKTtcbiAgfTtcbiAgLy90aGlzLl9zYXZlRWRpdHMgPSBfLmJpbmQoUGx1Z2luU2VydmljZS5zYXZlRWRpdHMsIFBsdWdpblNlcnZpY2UpO1xuICAvLyBhcHJlIGZvcm0gYXR0cmlidXRpIHBlciBpICBuc2VyaW1lbnRvXG5cbiAgdGhpcy5vbmFmdGVyKCdhZGRGZWF0dXJlJywgc2F2ZUVkaXRzVG9EYXRhYmFzZSk7XG4gIHRoaXMub25hZnRlcignZGVsZXRlRmVhdHVyZScsIHNhdmVFZGl0c1RvRGF0YWJhc2UpO1xuICB0aGlzLm9uYWZ0ZXIoJ21vdmVGZWF0dXJlJywgc2F2ZUVkaXRzVG9EYXRhYmFzZSk7XG4gIHRoaXMub25hZnRlcigncGlja0ZlYXR1cmUnLCBzYXZlRWRpdHNUb0RhdGFiYXNlKTtcblxuICAvLyBhcHJlIGZvcm0gYXR0cmlidXRpIHBlciBpbnNlcmltZW50b1xufVxuXG5pbmhlcml0KEdlb25vdGVzRWRpdG9yLCBFZGl0b3IpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdlb25vdGVzRWRpdG9yO1xufSx7XCIuLi9wbHVnaW5zZXJ2aWNlXCI6NyxcIi4vYXR0cmlidXRlc2Zvcm1cIjoxfV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vLyBTREsgLy8vXG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgYmFzZSA9IGczd3Nkay5jb3JlLnV0aWxzLmJhc2U7XG52YXIgUGx1Z2luID0gZzN3c2RrLmNvcmUuUGx1Z2luO1xudmFyIEdVSSA9IGczd3Nkay5ndWkuR1VJO1xudmFyIFByb2plY3RzUmVnaXN0cnkgPSBnM3dzZGsuY29yZS5Qcm9qZWN0c1JlZ2lzdHJ5O1xuLy8vIFBMVUdJTiAvL1xudmFyIHBsdWdpbkNvbmZpZyA9IHJlcXVpcmUoJ3BsdWdpbmNvbmZpZycpO1xudmFyIFNlcnZpY2UgPSByZXF1aXJlKCcuL3BsdWdpbnNlcnZpY2UnKTtcbnZhciBFZGl0aW5nUGFuZWwgPSByZXF1aXJlKCcuL3BhbmVsJyk7XG5cbnZhciBfUGx1Z2luID0gZnVuY3Rpb24oKSB7XG5cbiAgYmFzZSh0aGlzKTtcbiAgdGhpcy5uYW1lID0gJ25vdGVzJztcbiAgdGhpcy5jb25maWcgPSBudWxsO1xuICB0aGlzLnNlcnZpY2UgPSBudWxsO1xuICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy9zZXR0byBpbCBzZXJ2aXppb1xuICAgIHRoaXMuc2V0UGx1Z2luU2VydmljZShTZXJ2aWNlKTtcbiAgICAvL3JlY3VwZXJvIGNvbmZpZ3VyYXppb25lIGRlbCBwbHVnaW5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMuZ2V0UGx1Z2luQ29uZmlnKCk7XG4gICAgdGhpcy5zZXRVcEljb25zVXJsKHRoaXMuY29uZmlnLmxheWVycyk7XG4gICAgLy9yZWdpdHJvIGlsIHBsdWdpblxuICAgIGlmICh0aGlzLnJlZ2lzdGVyUGx1Z2luKHRoaXMuY29uZmlnLmdpZCkpIHtcbiAgICAgIGlmICghR1VJLnJlYWR5KSB7XG4gICAgICAgIEdVSS5vbigncmVhZHknLCBfLmJpbmQodGhpcy5zZXR1cEd1aSwgdGhpcykpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0dXBHdWkoKTtcbiAgICAgIH1cbiAgICAgIC8vaW5pemlhbGl6em8gaWwgc2Vydml6aW8uIElsIHNlcnZpemlvIMOoIGwnaXN0YW56YSBkZWxsYSBjbGFzc2Ugc2Vydml6aW9cbiAgICAgIHBsdWdpbkNvbmZpZy5jdXN0b21VcmxQYXJhbWV0ZXJzID0gdGhpcy5jcmVhdGVQbHVnaW5DdXN0b21VcmxQYXJhbWV0ZXJzKCk7XG4gICAgICB0aGlzLnNlcnZpY2UuaW5pdCh0aGlzLmNvbmZpZywgcGx1Z2luQ29uZmlnKTtcbiAgICB9XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSB1bmEgdm9sdGEgY2hlIGxhIEdVSSBoYSBlbWVzc28gbCdldmVudG8gJ3JlYWR5J1xuICAvLyBzZXJ2ZSBhIG1vbnRhcmUgaSBjb21wb2VudGkgZGVsIHBsdWdpbiBzdWxsYSBzaWRlYmFyXG4gIHRoaXMuc2V0dXBHdWkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdG9vbHNDb21wb25lbnQgPSBHVUkuZ2V0Q29tcG9uZW50KCd0b29scycpO1xuICAgIHZhciB0b29sc1NlcnZpY2UgPSB0b29sc0NvbXBvbmVudC5nZXRTZXJ2aWNlKCk7XG4gICAgdmFyIHRvb2xzID0gcGx1Z2luQ29uZmlnLnRvb2xzKHRoaXMpO1xuICAgIHRoaXMuc2VydmljZS5zZXRQbHVnaW5Ub29sc1NlcnZpY2UodG9vbHNTZXJ2aWNlKTtcbiAgICB0b29sc1NlcnZpY2UuYWRkVG9vbHMoMSAsJ0dFT05PVEVTJywgdG9vbHMpO1xuXG4gIH07XG4gIC8vIGF6aW9uaSBjaGUgc29ubyBsZWdhdGkgYWkgdG9vbHNcbiAgdGhpcy50b29sc0FjdGlvbnMgPSB7XG4gICAgc2hvd0hpZGVMYXllcjogIGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5zZXJ2aWNlLnNob3dIaWRlTGF5ZXIocGx1Z2luQ29uZmlnLmxheWVyc0NvZGUuR0VPTk9URVMpO1xuICAgIH0sXG4gICAgc2hvd0VkaXRpbmdQYW5lbDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFuZWwgPSBuZXcgRWRpdGluZ1BhbmVsKCk7XG4gICAgICBfLmZvckVhY2godGhpcy5jb25maWcubGF5ZXJzLCBmdW5jdGlvbihsYXllckNvbmZpZywgbGF5ZXJDb2RlKSB7XG4gICAgICAgIHBhbmVsLnNldEljb25zVG9vbChsYXllckNvZGUsIGxheWVyQ29uZmlnLmljb250b29scyk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2VydmljZS50b2dnbGVFZGl0aW5nKCk7XG4gICAgICBHVUkuc2hvd1BhbmVsKHBhbmVsKTtcbiAgICB9LFxuICAgIGlzQ2hlY2tlZCA6IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgICAgcmV0dXJuIHRoaXMuc2VydmljZS5pc0xheWVyVmlzaWJsZSgpO1xuICAgIH1cbiAgfTtcblxuICAvL3NldHVwUGx1Z2luQ3VzdG9tUGFyYW1ldGVyc1xuICB0aGlzLmNyZWF0ZVBsdWdpbkN1c3RvbVVybFBhcmFtZXRlcnMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY3VzdG9tVXJsUGFyYW1ldGVycz0nJic7XG4gICAgdmFyIGN1cnJlbnRQcm9qZWN0ID0gUHJvamVjdHNSZWdpc3RyeS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGN1c3RvbVVybFBhcmFtZXRlcnMrPSdwcm9qZWN0X3R5cGU9JytjdXJyZW50UHJvamVjdC5nZXRUeXBlKCkrJyZwcm9qZWN0X2lkPScrY3VycmVudFByb2plY3QuZ2V0SWQoKTtcbiAgICByZXR1cm4gY3VzdG9tVXJsUGFyYW1ldGVyc1xuICB9O1xuICAvLyBzZXR1cCBpY29uVXJsIGZvciBMYXllclxuICB0aGlzLnNldFVwSWNvbnNVcmwgPSBmdW5jdGlvbihsYXllcnNDb25maWcpIHtcbiAgICBfLmZvckVhY2gobGF5ZXJzQ29uZmlnLCBmdW5jdGlvbihsYXllckNvbmZpZykge1xuICAgICAgcGx1Z2luQ29uZmlnLmxheWVyc1tsYXllckNvbmZpZy5uYW1lXS5pY29ucyA9IGxheWVyQ29uZmlnLmljb25zO1xuICAgIH0pXG4gIH07XG5cbiAgdGhpcy5zZXR1cFRvb2xzQWN0aW9uID0gZnVuY3Rpb24odG9vbHMpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgXy5mb3JFYWNoKHRvb2xzLCBmdW5jdGlvbih0b29sKXtcbiAgICAgIC8vVE9ET1xuICAgIH0pXG4gIH07XG5cbn07XG5cbmluaGVyaXQoX1BsdWdpbiwgUGx1Z2luKTtcblxuKGZ1bmN0aW9uKHBsdWdpbil7XG4gIHBsdWdpbi5pbml0KCk7XG59KShuZXcgX1BsdWdpbik7XG5cblxuXG5cbn0se1wiLi9wYW5lbFwiOjUsXCIuL3BsdWdpbnNlcnZpY2VcIjo3LFwicGx1Z2luY29uZmlnXCI6Nn1dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImczdy1pdGVybmV0LWVkaXRpbmctcGFuZWxcXFwiPlxcbiAgPHRlbXBsYXRlIHYtZm9yPVxcXCJ0b29sYmFyIGluIGVkaXRvcnN0b29sYmFyc1xcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcInBhbmVsIHBhbmVsLXByaW1hcnlcXFwiPlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcInBhbmVsLWhlYWRpbmdcXFwiPlxcbiAgICAgICAgPGgzIGNsYXNzPVxcXCJwYW5lbC10aXRsZVxcXCI+e3sgdG9vbGJhci5uYW1lIH19PC9oMz5cXG4gICAgICA8L2Rpdj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJwYW5lbC1ib2R5XFxcIj5cXG4gICAgICAgIDx0ZW1wbGF0ZSB2LWZvcj1cXFwidG9vbCBpbiB0b29sYmFyLnRvb2xzXFxcIj5cXG4gICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZWRpdGJ0blxcXCIgOmNsYXNzPVxcXCJ7J2VuYWJsZWQnIDogKHN0YXRlLmVkaXRpbmcub24gJiYgZWRpdGluZ3Rvb2xidG5FbmFibGVkKHRvb2wpKSwgJ3RvZ2dsZWQnIDogZWRpdGluZ3Rvb2xidG5Ub2dnbGVkKHRvb2xiYXIubGF5ZXJjb2RlLCB0b29sLnRvb2x0eXBlKX1cXFwiPlxcbiAgICAgICAgICAgIDxpbWcgaGVpZ2h0PVxcXCIzMHB4XFxcIiB3aWR0aD1cXFwiMzBweFxcXCIgQGNsaWNrPVxcXCJ0b2dnbGVFZGl0VG9vbCh0b29sYmFyLmxheWVyY29kZSwgdG9vbC50b29sdHlwZSlcXFwiIDphbHQub25jZT1cXFwidG9vbC50aXRsZVxcXCIgOnRpdGxlLm9uY2U9XFxcInRvb2wudGl0bGVcXFwiIDpzcmMub25jZT1cXFwidG9vbC5pY29uXFxcIj48L2ltZz5cXG4gICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L3RlbXBsYXRlPlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gIDwvdGVtcGxhdGU+XFxuICA8ZGl2IHYtc2hvdz1cXFwic3RhdGUucmV0cmlldmluZ0RhdGFcXFwiIHN0eWxlPVxcXCJjb2xvcjojZmZmZmZmXFxcIj5cXG4gICAgPHNwYW4+Q2FyaWNhbWVudG8gRGF0aSAuLi4gPC9zcGFuPjxpbWcgOnNyYz1cXFwicmVzb3VyY2VzdXJsICsnaW1hZ2VzL2xvYWRlci5zdmcnXFxcIj5cXG4gIDwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cXFwibWVzc2FnZVxcXCI+XFxuICAgIHt7eyBtZXNzYWdlIH19fVxcbiAgPC9kaXY+XFxuPC9kaXY+XFxuXCI7XG5cbn0se31dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIHJlc29sdmVkVmFsdWUgPSBnM3dzZGsuY29yZS51dGlscy5yZXNvbHZlO1xudmFyIGluaGVyaXQgPSBnM3dzZGsuY29yZS51dGlscy5pbmhlcml0O1xudmFyIEdVSSA9IGczd3Nkay5ndWkuR1VJO1xuLy8gYmFzZSBjbGFzcyBQYW5lbFxudmFyIFBhbmVsID0gIGczd3Nkay5ndWkuUGFuZWw7XG52YXIgU2VydmljZSA9IHJlcXVpcmUoJy4vcGx1Z2luc2VydmljZScpO1xuXG52YXIgUGFuZWxDb21wb25lbnQgPSBWdWUuZXh0ZW5kKHtcbiAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vcGFuZWwuaHRtbCcpLFxuICBkYXRhOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW1hZ2VQYXRoID0gR1VJLmdldFJlc291cmNlc1VybCgpICsgJ2ltYWdlcy8nXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXRlOiBTZXJ2aWNlLnN0YXRlLFxuICAgICAgcmVzb3VyY2VzdXJsOiBHVUkuZ2V0UmVzb3VyY2VzVXJsKCksXG4gICAgICBlZGl0b3JzdG9vbGJhcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6IFwiR2Vvbm90ZXNcIixcbiAgICAgICAgICBsYXllcmNvZGU6IFNlcnZpY2UubGF5ZXJDb2Rlcy5HRU9OT1RFUyxcbiAgICAgICAgICB0b29sczpbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRpdGxlOiBcIkFnZ2l1bmdpIEdlb25vdGFcIixcbiAgICAgICAgICAgICAgLy8gdG9vbHR5cGUgw6ggbCdhdHRyaWJ1dG8gY2hlIHNlcnZlciBwZXIgc2NlZ2xpZXJlIGlsIHRpcG8gZGkgdG9vbFxuICAgICAgICAgICAgICAvLyBkZWxsJ2VkaXRvciBnZW5lcmFsZSBjaGUgZG92csOgIGVzc2VyZSBpbXBvc3RhdG9cbiAgICAgICAgICAgICAgdG9vbHR5cGU6ICdhZGRmZWF0dXJlJyxcbiAgICAgICAgICAgICAgaWNvbnRvb2w6ICdhZGQnLFxuICAgICAgICAgICAgICBpY29uOiBpbWFnZVBhdGggKydpdGVybmV0QWRkUG9pbnQucG5nJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiU3Bvc3RhIEdlb25vdGFcIixcbiAgICAgICAgICAgICAgdG9vbHR5cGU6ICdtb3ZlZmVhdHVyZScsXG4gICAgICAgICAgICAgIGljb250b29sOiAnbW92ZScsXG4gICAgICAgICAgICAgIGljb246IGltYWdlUGF0aCArICdpdGVybmV0TW92ZVBvaW50LnBuZydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRpdGxlOiBcIlJpbXVvdmkgR2Vvbm90YVwiLFxuICAgICAgICAgICAgICB0b29sdHlwZTogJ2RlbGV0ZWZlYXR1cmUnLFxuICAgICAgICAgICAgICBpY29udG9vbDogJ2RlbGV0ZScsXG4gICAgICAgICAgICAgIGljb246IGltYWdlUGF0aCArICdpdGVybmV0RGVsZXRlUG9pbnQucG5nJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiRWRpdGEgZ2Vvbm90YVwiLFxuICAgICAgICAgICAgICB0b29sdHlwZTogJ2VkaXRhdHRyaWJ1dGVzJyxcbiAgICAgICAgICAgICAgaWNvbnRvb2w6ICdlZGl0JyxcbiAgICAgICAgICAgICAgaWNvbjogaW1hZ2VQYXRoICsgJ2VkaXRBdHRyaWJ1dGVzLnBuZydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBzYXZlYnRubGFiZWw6IFwiU2FsdmFcIlxuICAgIH1cbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIC8vbWV0b2RvIGNoaWFtYXRvIHF1YW5kbyBzaSBjbGljY2Egc3UgYXZ2aWEvdGVybWluYSBlZGl0aW5nXG4gICAgdG9nZ2xlRWRpdGluZzogZnVuY3Rpb24oKSB7XG4gICAgICBTZXJ2aWNlLnRvZ2dsZUVkaXRpbmcoKTtcbiAgICB9LFxuICAgIHNhdmVFZGl0czogZnVuY3Rpb24oKXtcbiAgICAgIFNlcnZpY2Uuc2F2ZUVkaXRzKCk7XG4gICAgfSxcbiAgICAvLyBjaGFpbWF0byBxdWFuZG8gc2kgY2xpY2NhIHN1bCB1biB0b29sIGRlbGwnZWRpdG9yXG4gICAgLy8gY29tZSBhZCBlc2VtcGlvICBhZGQgbW92ZSBlZGl0IGF0dHJpYnV0ZXMgZXRjIC4uXG4gICAgdG9nZ2xlRWRpdFRvb2w6IGZ1bmN0aW9uKGxheWVyQ29kZSwgdG9vbFR5cGUpIHtcbiAgICAgIGlmICh0b29sVHlwZSA9PSAnJyl7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vdmVyaWZpY2Egc2UgbCdlZGl0b3Igw6ggaW4gZWRpdGluZyBvbiB0cnVlXG4gICAgICBpZiAodGhpcy5zdGF0ZS5lZGl0aW5nLm9uKSB7XG4gICAgICAgIFNlcnZpY2UudG9nZ2xlRWRpdFRvb2wobGF5ZXJDb2RlLCB0b29sVHlwZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBtZXRvZG8gY2hlIHZpZW5lIGNoaWFtYXRvIHBlciB2ZXJpZmljYXJlIGUgc2V0dGFyZVxuICAgIC8vIGxhIGNsYXNzZSAocHJlbXV0byBvIG5vIGRlbCBib3R0b25lIHRvb2wgaW4gcXVlc3Rpb25lKVxuICAgIGVkaXRpbmd0b29sYnRuVG9nZ2xlZDogZnVuY3Rpb24obGF5ZXJDb2RlLCB0b29sVHlwZSkge1xuICAgICAgcmV0dXJuICh0aGlzLnN0YXRlLmVkaXRpbmcubGF5ZXJDb2RlID09IGxheWVyQ29kZSAmJiB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbFR5cGUgPT0gdG9vbFR5cGUpO1xuICAgIH0sXG4gICAgLy8gZnVuemlvbmUgY2hlIHZlcmlmaWNhIHNlIGFiaWxpdGFyZSBvIG1lbm8gaSBib3R0b25pIGRlaSB0b29sc1xuICAgIGVkaXRpbmd0b29sYnRuRW5hYmxlZDogZnVuY3Rpb24odG9vbCl7XG4gICAgICByZXR1cm4gdG9vbC50b29sdHlwZSAhPSAnJztcbiAgICB9LFxuICAgIG9uQ2xvc2U6IGZ1bmN0aW9uKCkge1xuICAgICAgU2VydmljZS5zdG9wKCk7XG4gICAgfVxuICB9LFxuICBjb21wdXRlZDoge1xuICAgIGVkaXRpbmdidG5sYWJlbDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZS5lZGl0aW5nLm9uID8gXCJUZXJtaW5hIGVkaXRpbmdcIiA6IFwiQXZ2aWEgZWRpdGluZ1wiO1xuICAgIH0sXG4gICAgZWRpdGluZ2J0bkVuYWJsZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICh0aGlzLnN0YXRlLmVkaXRpbmcuZW5hYmxlZCB8fCB0aGlzLnN0YXRlLmVkaXRpbmcub24pID8gXCJcIiA6IFwiZGlzYWJsZWRcIjtcbiAgICB9LFxuICAgIG1lc3NhZ2U6IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgbWVzc2FnZSA9IFwiXCI7XG4gICAgICBpZiAoIXRoaXMuc3RhdGUuZWRpdGluZy5lbmFibGVkKXtcbiAgICAgICAgbWVzc2FnZSA9ICc8c3BhbiBzdHlsZT1cImNvbG9yOiByZWRcIj5BdW1lbnRhcmUgaWwgbGl2ZWxsbyBkaSB6b29tIHBlciBhYmlsaXRhcmUgbFxcJ2VkaXRpbmcnO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAodGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLm1lc3NhZ2Upe1xuICAgICAgICB2YXIgbiA9IHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC5uO1xuICAgICAgICB2YXIgdG90YWwgPSB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbHN0ZXAudG90YWw7XG4gICAgICAgIHZhciBzdGVwbWVzc2FnZSA9IHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC5tZXNzYWdlO1xuICAgICAgICBtZXNzYWdlID0gJzxkaXYgc3R5bGU9XCJtYXJnaW4tdG9wOjIwcHhcIj5HVUlEQSBTVFJVTUVOVE86PC9kaXY+JyArXG4gICAgICAgICAgJzxkaXY+PHNwYW4+WycrbisnLycrdG90YWwrJ10gPC9zcGFuPjxzcGFuIHN0eWxlPVwiY29sb3I6IHllbGxvd1wiPicrc3RlcG1lc3NhZ2UrJzwvc3Bhbj48L2Rpdj4nO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfVxuICB9XG59KTtcblxuZnVuY3Rpb24gRWRpdG9yUGFuZWwoKSB7XG4gIC8vIHByb3ByaWV0w6AgbmVjZXNzYXJpZS4gSW4gZnV0dXJvIGxlIG1ldHRlcm1vIGluIHVuYVxuICAvLyBjbGFzc2UgUGFuZWwgZGEgY3VpIGRlcml2ZXJhbm5vIHR1dHRpIGkgcGFubmVsbGkgY2hlIHZvZ2xpb25vIGVzc2VyZSBtb3N0cmF0aSBuZWxsYSBzaWRlYmFyXG4gIHRoaXMuaWQgPSBcImdlb25vdGVzLWVkaXRpbmctcGFuZWxcIjtcbiAgdGhpcy5uYW1lID0gXCJHZXN0aW9uZSBkYXRpIEdFT05PVEVTXCI7XG4gIHRoaXMuaW50ZXJuYWxQYW5lbCA9IG5ldyBQYW5lbENvbXBvbmVudCgpO1xufVxuXG5pbmhlcml0KEVkaXRvclBhbmVsLCBQYW5lbCk7XG5cbnZhciBwcm90byA9IFBhbmVsLnByb3RvdHlwZTtcblxuLy8gdmllbmUgcmljaGlhbWF0byBkYWxsYSB0b29sYmFyXG4vLyBxdWFuZG8gaWwgcGx1Z2luIGNoaWVkZSBkaSBtb3N0cmFyZSB1biBwcm9wcmlvIHBhbm5lbGxvIG5lbGxhIEdVSSAoR1VJLnNob3dQYW5lbClcbnByb3RvLm9uU2hvdyA9IGZ1bmN0aW9uKGNvbnRhaW5lcikge1xuICB2YXIgcGFuZWwgPSB0aGlzLmludGVybmFsUGFuZWw7XG4gIHBhbmVsLiRtb3VudCgpLiRhcHBlbmRUbyhjb250YWluZXIpO1xuICByZXR1cm4gcmVzb2x2ZWRWYWx1ZSh0cnVlKTtcbn07XG5cbi8vIHJpY2hpYW1hdG8gcXVhbmRvIGxhIEdVSSBjaGllZGUgZGkgY2hpdWRlcmUgaWwgcGFubmVsbG8uIFNlIHJpdG9ybmEgZmFsc2UgaWwgcGFubmVsbG8gbm9uIHZpZW5lIGNoaXVzb1xucHJvdG8ub25DbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBjb25zb2xlLmxvZygnY2xvc2UnKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gIFNlcnZpY2Uuc3RvcCgpXG4gIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgc2VsZi5pbnRlcm5hbFBhbmVsLiRkZXN0cm95KHRydWUpO1xuICAgIHNlbGYuaW50ZXJuYWxQYW5lbCA9IG51bGw7XG4gICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICB9KVxuICAuZmFpbChmdW5jdGlvbigpe1xuICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICB9KTtcbiAgXG4gIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG59O1xuXG5wcm90by5zZXRJY29uc1Rvb2wgPSBmdW5jdGlvbihsYXllckNvZGUsIGljb25zQ29uZmlnKSB7XG4gIHZhciBlZGl0b3JUb29scyA9IHRoaXMuaW50ZXJuYWxQYW5lbC5lZGl0b3JzdG9vbGJhcnM7XG4gIF8uZm9yRWFjaChlZGl0b3JUb29scywgZnVuY3Rpb24odG9vbCwgZWRpdG9yVG9vbEluZGV4KSB7XG4gICAgaWYgKGxheWVyQ29kZSA9PSB0b29sLmxheWVyY29kZSkge1xuICAgICAgXy5mb3JFYWNoKHRvb2wudG9vbHMsIGZ1bmN0aW9uKHRvb2wsIHRvb2xJbmRleCkge1xuICAgICAgICBpZiAoaWNvbnNDb25maWdbdG9vbC5pY29udG9vbF0pIHtcbiAgICAgICAgICBlZGl0b3JUb29sc1tlZGl0b3JUb29sSW5kZXhdLnRvb2xzW3Rvb2xJbmRleF0uaWNvbiA9IGljb25zQ29uZmlnW3Rvb2wuaWNvbnRvb2xdO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfSlcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRWRpdG9yUGFuZWw7XG5cbn0se1wiLi9wYW5lbC5odG1sXCI6NCxcIi4vcGx1Z2luc2VydmljZVwiOjd9XSw2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vUXVpIGNpIHNvbm8gZ2xpIGVkaXRvciAoY2xhc3NpKSB1c2F0aSBkYWkgdmFyaSBsYXllclxudmFyIEdlb25vdGVzRWRpdG9yID0gcmVxdWlyZSgnLi9lZGl0b3JzL2dlb25vdGVzZWRpdG9yJyk7XG5cbi8vZGVmaW5pc2NvIGkgY29kaWNpIGxheWVyXG52YXIgbGF5ZXJDb2RlcyA9IHRoaXMubGF5ZXJDb2RlcyA9IHtcbiAgICBHRU9OT1RFUzogJ25vdGUnXG59O1xuLy8gY2xhc3NpIGVkaXRvclxudmFyIGVkaXRvckNsYXNzID0ge307XG5lZGl0b3JDbGFzc1tsYXllckNvZGVzLkdFT05PVEVTXSA9IEdlb25vdGVzRWRpdG9yO1xuXG4vL2RlZmluaXNjbyBsYXllciBkZWwgcGx1Z2luIGNvbWUgb2dnZXR0b1xudmFyIGxheWVycyA9IHt9O1xudmFyIGxheWVyc1N0eWxlID0ge307XG4vL3N0eWxlIGVkaXRpbmdcbnZhciBsYXllcnNFZGl0aW5nU3R5bGUgPSB7fTtcbi8vbGF5ZXJcbi8vbGF5ZXIgU3R5bGVcbnZhciBjcmVhdGVTdHlsZSA9IGZ1bmN0aW9uKHN0eWxlT3B0aW9ucykge1xuICB2YXIgaWNvbnVybCA9IHN0eWxlT3B0aW9ucy5pY29udXJsO1xuICByZXR1cm4gbmV3IG9sLnN0eWxlLlN0eWxlKHtcbiAgICBpbWFnZTogbmV3IG9sLnN0eWxlLkljb24oKHtcbiAgICAgIGFuY2hvcjogWzAuNSwgMC41XSxcbiAgICAgIG9mZnNldDogWzAsIDBdLFxuICAgICAgc3JjOiBpY29udXJsXG4gICAgfSkpXG4gIH0pO1xufTtcblxubGF5ZXJzU3R5bGVbbGF5ZXJDb2Rlcy5HRU9OT1RFU10gPSB7XG5cbiAgdXJsOiBjcmVhdGVTdHlsZSxcbiAgYWRkOiBjcmVhdGVTdHlsZSxcbiAgZGVsZXRlOiBjcmVhdGVTdHlsZSxcbiAgZWRpdDogY3JlYXRlU3R5bGUsXG4gIG1vdmU6IGNyZWF0ZVN0eWxlXG5cbn07XG5cbmxheWVyc0VkaXRpbmdTdHlsZVtsYXllckNvZGVzLkdFT05PVEVTXSA9IHt9O1xuXG5sYXllcnNbbGF5ZXJDb2Rlcy5HRU9OT1RFU10gPSB7XG4gIGxheWVyQ29kZTogbGF5ZXJDb2Rlcy5HRU9OT1RFUyxcbiAgdmVjdG9yOiBudWxsLFxuICBlZGl0b3I6IG51bGwsXG4gIGljb251cmw6IG51bGwsXG4gIGNyczogbnVsbCxcbiAgLy9kZWZpbmlzY28gbG8gc3RpbGVcbiAgc3R5bGU6IGxheWVyc1N0eWxlW2xheWVyQ29kZXMuR0VPTk9URVNdXG59O1xuXG5cblxuLy8gZGVmaW5pc2NvIGkgdG9vbHNcbmZ1bmN0aW9uIHRvb2xzKHBsdWdpbikge1xuICByZXR1cm4gdG9vbHMgPSBbXG4gICAge1xuICAgICAgbmFtZTogXCJHZW9ub3Rlc1wiLFxuICAgICAgbGF5ZXJOYW1lOiAnbm90ZScsXG4gICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgaXNDaGVjazogZmFsc2UsXG4gICAgICBhY3Rpb246IF8uYmluZChwbHVnaW4udG9vbHNBY3Rpb25zLnNob3dIaWRlTGF5ZXIsIHBsdWdpbilcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiRWRpdGEgR2Vvbm90ZXNcIixcbiAgICAgIGFjdGlvbjogXy5iaW5kKHBsdWdpbi50b29sc0FjdGlvbnMuc2hvd0VkaXRpbmdQYW5lbCwgcGx1Z2luKVxuICAgIH1cbiAgXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgbGF5ZXJzQ29kZTogbGF5ZXJDb2RlcyxcbiAgICBsYXllcnM6IGxheWVycyxcbiAgICBsYXllcnNTdHlsZTogbGF5ZXJzU3R5bGUsXG4gICAgbGF5ZXJzRWRpdGluZ1N0eWxlOiBsYXllcnNFZGl0aW5nU3R5bGUsXG4gICAgZWRpdG9yQ2xhc3M6IGVkaXRvckNsYXNzLFxuICAgIHRvb2xzOiB0b29sc1xufTtcblxufSx7XCIuL2VkaXRvcnMvZ2Vvbm90ZXNlZGl0b3JcIjoyfV0sNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgRzNXT2JqZWN0ID0gZzN3c2RrLmNvcmUuRzNXT2JqZWN0O1xudmFyIEdVSSA9IGczd3Nkay5ndWkuR1VJO1xudmFyIFZlY3RvckxvYWRlckxheWVyID0gZzN3c2RrLmNvcmUuVmVjdG9yTGF5ZXJMb2FkZXI7XG52YXIgRm9ybUNsYXNzID0gcmVxdWlyZSgnLi9lZGl0b3JzL2F0dHJpYnV0ZXNmb3JtJyk7XG5cbmZ1bmN0aW9uIEdlb25vdGVzU2VydmljZSgpIHtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIC8vcXVpIHZhZG8gIGEgc2V0dGFyZSBpbCBtYXBzZXJ2aWNlXG4gIHRoaXMuX21hcFNlcnZpY2UgPSBudWxsO1xuICB0aGlzLl9sb2FkRGF0YU9uTWFwVmlld0NoYW5nZUxpc3RlbmVyID0gbnVsbDtcbiAgdGhpcy5fY3VycmVudEVkaXRpbmdMYXllciA9IG51bGw7XG4gIHRoaXMuc3RhdGUgPSB7XG4gICAgZWRpdGluZzoge1xuICAgICAgb246IGZhbHNlLFxuICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICBsYXllckNvZGU6IG51bGwsXG4gICAgICB0b29sVHlwZTogbnVsbCxcbiAgICAgIHN0YXJ0aW5nRWRpdGluZ1Rvb2w6IGZhbHNlLFxuICAgICAgdG9vbHN0ZXA6IHtcbiAgICAgICAgbjogbnVsbCxcbiAgICAgICAgdG90YWw6IG51bGwsXG4gICAgICAgIG1lc3NhZ2U6IG51bGxcbiAgICAgIH1cbiAgICB9LFxuICAgIHJldHJpZXZpbmdEYXRhOiBmYWxzZSxcbiAgICBoYXNFZGl0czogZmFsc2VcbiAgfTtcblxuICAvL2RlZmluaXNjbyBpbCBsb2FkZXIgZGVsIHBsdWdpblxuICB0aGlzLl9sb2FkZXIgPSBuZXcgVmVjdG9yTG9hZGVyTGF5ZXI7XG4gIC8vIHZpbmNvbGkgYWxsYSBwb3NzaWJpbGl0w6AgIGRpIGF0dGl2YXJlIGwnZWRpdGluZ1xuICB2YXIgZWRpdGluZ0NvbnN0cmFpbnRzID0ge1xuICAgIC8vcmVzb2x1dGlvbjogMSAvLyB2aW5jb2xvIGRpIHJpc29sdXppb25lIG1hc3NpbWFcbiAgfTtcbiAgLy8gaW5pemlhbGl6emF6aW9uZSBkZWwgcGx1Z2luXG4gIC8vIGNoaWFtdG8gZGFsbCAkc2NyaXB0KHVybCkgZGVsIHBsdWdpbiByZWdpc3RyeVxuICB0aGlzLmluaXQgPSBmdW5jdGlvbihjb25maWcsIHBsdWdpbkNvbmZpZykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9jcnMgPSBudWxsO1xuICAgIHRoaXMuX2xheWVycyA9IHBsdWdpbkNvbmZpZy5sYXllcnM7XG4gICAgdGhpcy5fZWRpdG9yQ2xhc3MgPSBwbHVnaW5Db25maWcuZWRpdG9yQ2xhc3M7XG4gICAgdGhpcy5sYXllckNvZGVzID0gcGx1Z2luQ29uZmlnLmxheWVyc0NvZGU7XG4gICAgLy8gc3RpbGkgZGVpIGxheWVyXG4gICAgdGhpcy5fbGF5ZXJzU3R5bGUgPSBwbHVnaW5Db25maWcubGF5ZXJzU3R5bGU7XG4gICAgLy8gc3RpbGkgZGVsIGxheWVyIGluIGVkaXRpbmcgKGluIGZ1dHVybyBkYSBkaXN0aW5ndWVyZSBkZWxldGUsIG1vdmUsIGVkaXRpbmcuLilcbiAgICB0aGlzLl9sYXllcnNFZGl0aW5nU3R5bGUgPSBwbHVnaW5Db25maWcubGF5ZXJzRWRpdGluZ1N0eWxlO1xuICAgIHRoaXMuX2N1c3RvbVVybFBhcmFtZXRlcnMgPSBwbHVnaW5Db25maWcuY3VzdG9tVXJsUGFyYW1ldGVycyB8fCBudWxsO1xuICAgIC8vIHNldHRvIGlsIG1hcHNlcnZpY2UgY2hlIG1pIHBlcm1ldHRlIGRpIGluZXJhZ2lyZSBjb24gbGEgbWFwcGFcbiAgICB0aGlzLl9tYXBTZXJ2aWNlID0gR1VJLmdldENvbXBvbmVudCgnbWFwJykuZ2V0U2VydmljZSgpO1xuICAgIC8vdmFkbyBhIHNldHRhcmUgbGUgaWNvbiB1cmxzIGUgaWwgY3JzIHNlIGVzaXN0ZSBjaSBzb25vOlxuICAgIF8uZm9yRWFjaCh0aGlzLmNvbmZpZy5sYXllcnMsIGZ1bmN0aW9uKGxheWVyQ29uZmlnLCBsYXllck5hbWUgKSB7XG4gICAgICBzZWxmLl9sYXllcnNbbGF5ZXJOYW1lXS5pbmZvdXJsID0gbGF5ZXJDb25maWcuaW5mb3VybDtcbiAgICAgIHNlbGYuX2xheWVyc1tsYXllck5hbWVdLmNycyA9IFwiRVBTRzpcIitsYXllckNvbmZpZy5jcnM7XG4gICAgICBzZWxmLnNldExheWVyU3R5bGUobGF5ZXJOYW1lKTtcbiAgICB9KTtcbiAgICAvL2luaXppYWxpenpvIGlsIGxvYWRlclxuICAgIC8vIHBhc3NhbmRvZ2xpOlxuICAgIC8vIDEgLSBsYXllcnMgZGVsIHBsdWdpbiAoc3R5bGUgZXRjLi4pXG4gICAgLy8gMiAtIGxhIGJhc2V1cmwgY2hlIG1pIHNlcnZlciBwZXIgaW50ZXJhZ2lyZSBjb24gaWwgc2VydmVyIHBlciBmYXJlIHR1dHRlIGxlIG1vZGlmaWNoZVxuICAgIHZhciBvcHRpb25zX2xvYWRlciA9IHtcbiAgICAgICdsYXllcnMnOiB0aGlzLl9sYXllcnMsXG4gICAgICAnYmFzZXVybCc6IHRoaXMuY29uZmlnLmJhc2V1cmwsXG4gICAgICAnbWFwU2VydmljZSc6IHRoaXMuX21hcFNlcnZpY2VcbiAgICB9O1xuICAgIC8vaW5pemlhbGl6em8gaWwgbG9hZGVyXG4gICAgdGhpcy5fbG9hZGVyLmluaXQob3B0aW9uc19sb2FkZXIpO1xuICAgIC8vY2FzbyBkaSBsb2FkaW5nIGRhdGFcbiAgICB0aGlzLl9sb2FkZXIub24oJ2xvYWRpbmd2ZWN0b3JsYXllcnNzdGFydCcsIGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5zdGF0ZS5yZXRyaWV2aW5nRGF0YSA9IHRydWU7XG4gICAgfSk7XG4gICAgdGhpcy5fbG9hZGVyLm9uKCdsb2FkaW5ndmVjdG9ybGF5ZXJzZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLnN0YXRlLnJldHJpZXZpbmdEYXRhID0gZmFsc2U7XG4gICAgfSk7XG4gICAgdGhpcy5fbG9hZGVyLm9uKCdzZXRtb2RlJywgZnVuY3Rpb24obW9kZSkge1xuICAgICAgc3dpdGNoKG1vZGUpIHtcbiAgICAgICAgY2FzZSAndyc6XG4gICAgICAgICAgc2VsZi5zdGF0ZS5lZGl0aW5nLm9uID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLmVtaXQoXCJlZGl0aW5nc3RhcnRlZFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncic6XG4gICAgICAgICAgc2VsZi5zdGF0ZS5lZGl0aW5nLm9uID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBkaXNhYmlsaXRvIGwnZXZlbnR1YWxlIHRvb2wgYXR0aXZvIHNlIHZpZW5lIGF0dGl2YXRhXG4gICAgLy8gdW4naW50ZXJhemlvbmUgZGkgdGlwbyBwb2ludGVySW50ZXJhY3Rpb25TZXQgc3VsbGEgbWFwcGFcbiAgICB0aGlzLl9tYXBTZXJ2aWNlLm9uKCdwb2ludGVySW50ZXJhY3Rpb25TZXQnLCBmdW5jdGlvbihpbnRlcmFjdGlvbikge1xuICAgICAgdmFyIGN1cnJlbnRFZGl0aW5nTGF5ZXIgPSBzZWxmLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgICBpZiAoY3VycmVudEVkaXRpbmdMYXllcikge1xuICAgICAgICB2YXIgYWN0aXZlVG9vbCA9IGN1cnJlbnRFZGl0aW5nTGF5ZXIuZWRpdG9yLmdldEFjdGl2ZVRvb2woKS5pbnN0YW5jZTtcbiAgICAgICAgLy8gZGV2byB2ZXJpZmljYXJlIGNoZSBub24gc2lhIHVuJ2ludGVyYXppb25lIGF0dGl2YXRhIGRhIHVubyBkZWkgdG9vbCBkaSBlZGl0aW5nIGRlbCBwbHVnaW5cbiAgICAgICAgaWYgKGFjdGl2ZVRvb2wgJiYgIWFjdGl2ZVRvb2wub3duc0ludGVyYWN0aW9uKGludGVyYWN0aW9uKSkge1xuICAgICAgICAgIHNlbGYuX3N0b3BFZGl0aW5nVG9vbCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gIGFiaWxpdG8gbyBtZW5vIGwnZWRpdGluZyBpbiBiYXNlIGFsbGEgcmlzb2x1emlvbmUgZGVsbGEgbWFwcGFcbiAgICAvKnRoaXMuX21hcFNlcnZpY2Uub25hZnRlcignc2V0TWFwVmlldycsZnVuY3Rpb24oYmJveCwgcmVzb2x1dGlvbiwgY2VudGVyKXtcbiAgICAgIHNlbGYuc3RhdGUuZWRpdGluZy5lbmFibGVkID0gKHJlc29sdXRpb24gPCBlZGl0aW5nQ29uc3RyYWludHMucmVzb2x1dGlvbikgPyB0cnVlIDogZmFsc2U7XG4gICAgfSk7Ki9cbiAgICAvLyBhdHRyaWJ1dG8gZGVsbG8gc3RhdG8gZGVsIHNyZXZpemlvIGNoZSBtaSBwZXJtZXR0ZSBkaSBhY2NlbmRlcmUgbyBzcGVuZ2VyZSBsJ2VkaXRpbmdcbiAgICAvLyBzZXJ2ZSBhbmNoZSBwZXIgcG90ZXIgaW4gZmFzZSBkaSB0b2dnbGVFZGl0aW5nKGJvdHRvbmUgZGkgYXZ2aW8gZWRpdGluZykgZGkgdmVkZXJlIHNlIHBvc3NvIGluemlhcmUgbyBtZW5vXG4gICAgLy8gY2FyaWNhcmUgaSB2ZXR0b3JpYWxpIGV0Yy4uXG4gICAgdGhpcy5zdGF0ZS5lZGl0aW5nLmVuYWJsZWQgPSB0cnVlOy8vKHRoaXMuX21hcFNlcnZpY2UuZ2V0UmVzb2x1dGlvbigpIDwgZWRpdGluZ0NvbnN0cmFpbnRzLnJlc29sdXRpb24pID8gdHJ1ZSA6IGZhbHNlO1xuICAgIC8vIHBlciBvZ25pIGxheWVyIGRlZmluaXRpIG5lbCBwbHVnaW4gc2V0dG8gbmFtZSBlIGlkXG4gICAgLy8gcmVjdXBlcmF0aSBncmF6aWUgYWwgbWFwc2VydmljZVxuICAgIF8uZm9yRWFjaCh0aGlzLl9sYXllcnMsIGZ1bmN0aW9uKExheWVyLCBsYXllckNvZGUpIHtcbiAgICAgIC8vcmVjdXBlcm8gbCdpZCBkYWxsYSBjb25maWd1cmF6aW9uZSBkZWwgcGx1Z2luXG4gICAgICAvLyBpIGxheWVycyBuZWxsYSBjb25maWd1cmF6aW9uZSBwYXNzYXRhIGkgbGF5ZXJzIGhhbm5vIGR1ZSBhdHRyaWJ1dGk6IGlkIGUgbmFtZVxuICAgICAgdmFyIGxheWVySWQgPSBjb25maWcubGF5ZXJzW2xheWVyQ29kZV0uaWQ7XG4gICAgICB2YXIgbGF5ZXJOYW1lID0gY29uZmlnLmxheWVyc1tsYXllckNvZGVdLm5hbWU7XG4gICAgICAvLyByZWN1cGVyYSBpbCBsYXllciBkYWwgbWFwc2VydmljZVxuICAgICAgdmFyIGxheWVyID0gc2VsZi5fbWFwU2VydmljZS5nZXRQcm9qZWN0KCkuZ2V0TGF5ZXJCeUlkKGxheWVySWQpO1xuICAgICAgLy8gbWVzc28gYWwgbW9tZW50byBnZW5lcmljbyBwZXIgcmlwcmVuZGVyZSBzdGVzc28gY29ubXBvcnRhbWVudG8gSXRlcm5ldFxuICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgIC8vIHJlY3VwZXJvIGwnb3JpZ2luIG5hbWUgZGFsIHByb2plY3RsYXllclxuICAgICAgICBMYXllci5uYW1lID0gbGF5ZXIuZ2V0T3JpZ05hbWUoKTtcbiAgICAgICAgTGF5ZXIuaWQgPSBsYXllcklkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgTGF5ZXIubmFtZSA9IGxheWVyTmFtZTtcbiAgICAgICAgTGF5ZXIuaWQgPSBsYXllcklkO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICAvLyBmaW5lIGRlbCBtZXRvZG8gSU5JVFxuICB0aGlzLnNldFBsdWdpblRvb2xzU2VydmljZSA9IGZ1bmN0aW9uKHBsdWdpblRvb2xzU2VydmljZSkge1xuICAgIHRoaXMuX3BsdWdpblRvb2xzU2VydmljZSA9IHBsdWdpblRvb2xzU2VydmljZTtcbiAgfTtcbiAgdGhpcy5zZXRMYXllclN0eWxlID0gZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBpY29ucyA9IHRoaXMuX2xheWVyc1tsYXllckNvZGVdLmljb25zO1xuXG4gICAgXy5mb3JFYWNoKGljb25zLCBmdW5jdGlvbihpY29udXJsLCBrZXkpIHtcbiAgICAgIGlmIChrZXkgPT0gJ3VybCcpIHtcbiAgICAgICAgc2VsZi5fbGF5ZXJzW2xheWVyQ29kZV0uc3R5bGUgPSBzZWxmLl9sYXllcnNTdHlsZVtsYXllckNvZGVdW2tleV0oe1xuICAgICAgICAgIGljb251cmw6IGljb251cmxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBzZWxmLl9sYXllcnNFZGl0aW5nU3R5bGVbbGF5ZXJDb2RlXVtrZXldID0gc2VsZi5fbGF5ZXJzU3R5bGVbbGF5ZXJDb2RlXVtrZXldKHtcbiAgICAgICAgICBpY29udXJsOiBpY29udXJsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICAvLyBzZXR0byB0ZW1wb3JhbmVhbWVudGUgbCdlZGl0bmcgc3R5bGVcblxuICB9O1xuXG4gIHRoaXMuZ2V0TGF5ZXJTdHlsZSA9IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgIHJldHVybiB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS5zdHlsZTtcbiAgfTtcblxuICB0aGlzLl90b2dnbGVDaGVja0JveFBsdWdpblRvb2wgPSBmdW5jdGlvbihsYXllckNvZGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHBsdWdpbkluZGV4ID0gMDtcbiAgICAvLyBhbCBtb21lbnRvIDEgaGFyZGNvZGVkXG4gICAgaWYgKHRoaXMuX3BsdWdpblRvb2xzU2VydmljZS5nZXRTdGF0ZSgpLnRvb2xzR3JvdXBzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHBsdWdpbkluZGV4ID0gMTtcbiAgICB9XG4gICAgdmFyIHBsdWdpblRvb2xzID0gdGhpcy5fcGx1Z2luVG9vbHNTZXJ2aWNlLmdldFN0YXRlKCkudG9vbHNHcm91cHNbcGx1Z2luSW5kZXhdLnRvb2xzO1xuICAgIHZhciB2ZWN0b3JMYXllciA9IHRoaXMuX2xheWVyc1tsYXllckNvZGVdLnZlY3RvcjtcbiAgICBfLmZvckVhY2gocGx1Z2luVG9vbHMsIGZ1bmN0aW9uKHBsdWdpblRvb2wsIGluZGV4KSB7XG4gICAgICBpZiAoXy5oYXMocGx1Z2luVG9vbCwgJ3R5cGUnKSAmJiBwbHVnaW5Ub29sLmxheWVyTmFtZSA9PSBsYXllckNvZGUgJiYgcGx1Z2luVG9vbC50eXBlID09ICdjaGVja2JveCcpIHtcbiAgICAgICAgdmFyIHRvb2xDb25maWcgID0gcGx1Z2luVG9vbHNbaW5kZXhdO1xuICAgICAgICB0b29sQ29uZmlnLmlzQ2hlY2sgPSB0cnVlO1xuICAgICAgICBwbHVnaW5Ub29sc1tpbmRleF0gPSB0b29sQ29uZmlnO1xuICAgICAgICBzZWxmLl9wbHVnaW5Ub29sc1NlcnZpY2UudXBkYXRlVG9vbHNHcm91cChwbHVnaW5JbmRleCwge25hbWU6J0dFT05PVEVTJywgdG9vbHM6cGx1Z2luVG9vbHN9KTtcbiAgICAgICAgdmVjdG9yTGF5ZXIuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLmlzTGF5ZXJWaXNpYmxlID0gZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgdmFyIHZlY3RvckxheWVyID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yO1xuICAgIHJldHVybiB2ZWN0b3JMYXllci5pc1Zpc2libGUoKTtcbiAgfTtcblxuICB0aGlzLnNob3dIaWRlTGF5ZXIgPSBmdW5jdGlvbihsYXllckNvZGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHZlY3RvckxheWVyID0gbnVsbDtcbiAgICBpZiAodGhpcy5fbG9hZGVyLmlzUmVhZHkoKSkge1xuICAgICAgdmVjdG9yTGF5ZXIgPSB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS52ZWN0b3I7XG4gICAgICB2ZWN0b3JMYXllci5zZXRWaXNpYmxlKCF2ZWN0b3JMYXllci5pc1Zpc2libGUoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xvYWRlci5sb2FkTGF5ZXJzKCdyJywgdGhpcy5fY3VzdG9tVXJsUGFyYW1ldGVycylcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgIHNlbGYuX2FkZFRvTWFwKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgLy9zdG9wXG4gIHRoaXMuc3RvcCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIGlmICh0aGlzLnN0YXRlLmVkaXRpbmcub24pIHtcbiAgICAgIHRoaXMuX2NhbmNlbE9yU2F2ZSgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNlbGYuX3N0b3BFZGl0aW5nKCk7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZmFpbChmdW5jdGlvbigpe1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgICAgfSlcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH07XG5cbiAgLy8gYXZ2aW8gbyB0ZXJtaW5vIGxhIHNlc3Npb25lIGRpIGVkaXRpbmcgZ2VuZXJhbGVcbiAgLy8gdW50byBkaSBwYXJ0ZW56YSBkZWxsJ2F2dmlvIGRlbGwnZWRpdGluZ1xuICB0aGlzLnRvZ2dsZUVkaXRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBjcmVvIG9nZ2V0dG8gZGVmZXJyZWQgcGVyIHJlc3RpdHVpcmUgdW5hIHByb21pc2VcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgLy8gcXVpIGRpY2UgY2hlIHNlIG5lbCBjYXNvIGxhIHJpc29sdXppb25lIGRlbGxhIG1hcHBhIHZhIGJlbmUgKHN0YXRlLmVkaXRpbmcuZW5hYmxlZClcbiAgICAvLyBlIG5vbiDDqCBhbmNvcmEgc3RhdG8gYXR0aXZhdG8gbCdlZGl0aW5nXG4gICAgLy8gcXVpbmRpIGNhc28gcHJpbWEgdm9sdGFcbiAgICBpZiAodGhpcy5zdGF0ZS5lZGl0aW5nLmVuYWJsZWQgJiYgIXRoaXMuc3RhdGUuZWRpdGluZy5vbikge1xuICAgICAgLy8gZmFjY2lvIHBhcnRpcmUgZWRpdGluZ1xuICAgICAgdGhpcy5fc3RhcnRFZGl0aW5nKCk7XG4gICAgfVxuICAgIC8vIGFsdHJpbWVudGkgc2Ugw6ggZ2nDoCBpbiBlZGl0aW5nIGNoaWFtbyBsbyBzdG9wIGRlbCBwbHVnaW5cbiAgICAvLyBjaGUgbm9uIMOoIGFsdHJvIGNoZSBsb3MgdG9wbyBkZWxsJ2VkaXRpbmdcbiAgICBlbHNlIGlmICh0aGlzLnN0YXRlLmVkaXRpbmcub24pIHtcbiAgICAgIHJldHVybiB0aGlzLnN0b3AoKTtcbiAgICB9XG4gICAgLy8gcmVzdGl0dWlzY28gdW5hIHByb21lc3NhXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfTtcblxuICB0aGlzLnNhdmVFZGl0cyA9IGZ1bmN0aW9uKCl7XG4gICAgdGhpcy5fc2F2ZVdpdGhvdXRBc2soKTtcbiAgICAvL3RoaXMuX2NhbmNlbE9yU2F2ZSgyKTtcbiAgfTtcblxuICAvLyBhdnZpYSB1bm8gZGVpIHRvb2wgZGkgZWRpdGluZyB0cmEgcXVlbGxpIHN1cHBvcnRhdGkgZGEgRWRpdG9yIChhZGRmZWF0dXJlLCBlY2MuKVxuICAvLyBmdW56aW9uZSBkZWxsJ2VsZW1lbnRvIHBhbmVsIHZ1ZVxuICB0aGlzLnRvZ2dsZUVkaXRUb29sID0gZnVuY3Rpb24obGF5ZXJDb2RlLCB0b29sVHlwZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvL3ByZW5kbyBpbCBsYXllciBpbiBiYXNlIGFsIGNvZGljZSBwYXNzYXRvIGRhbGwgY29tcG9uZW50ZSB2dWVcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXTtcbiAgICBpZiAobGF5ZXIpIHtcbiAgICAgIC8vcmVjdXByZXJvIGlsIGN1cnJlbnQgbGF5ZXIgaW4gZWRpdGluZ1xuICAgICAgdmFyIGN1cnJlbnRFZGl0aW5nTGF5ZXIgPSB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgICAvLyBzZSBzaSBzdGEgdXNhbmRvIHVuIHRvb2wgY2hlIHByZXZlZGUgbG8gc3Rlc3NvIGxheWVyIGluIGVkaXRhemlvbmVcbiAgICAgIGlmIChjdXJyZW50RWRpdGluZ0xheWVyICYmIGxheWVyQ29kZSA9PSBjdXJyZW50RWRpdGluZ0xheWVyLmxheWVyQ29kZSkge1xuICAgICAgICAvLyBlIGxvIHN0ZXNzbyB0b29sIGFsbG9yYSBkaXNhdHRpdm8gaWwgdG9vbCAoaW4gcXVhbnRvIMOoXG4gICAgICAgIC8vIHByZW11dG8gc3VsbG8gc3Rlc3NvIGJvdHRvbmUpXG4gICAgICAgIGlmICh0b29sVHlwZSA9PSBjdXJyZW50RWRpdGluZ0xheWVyLmVkaXRvci5nZXRBY3RpdmVUb29sKCkuZ2V0VHlwZSgpKSB7XG4gICAgICAgICAgLy8gc3Rlc3NvIHRpcG8gZGkgdG9vbCBxdWluZGkgc2kgw6ggdmVyaWZpY2F0byB1biB0b2dnbGUgbmVsIGJvdHRvbmVcbiAgICAgICAgICAvLyBhbGxvcmEgc3RpcHBvIGwnZWRpdGluZyBUb29sXG4gICAgICAgICAgdGhpcy5fc3RvcEVkaXRpbmdUb29sKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWx0cmltZW50aSBhdHRpdm8gaWwgdG9vbCByaWNoaWVzdG9cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLy9zdG9wcG8gcHJldmVudGl2YW1lbnRlIGwnZWRpdGluZyB0b29sIGF0dGl2b1xuICAgICAgICAgIHRoaXMuX3N0b3BFZGl0aW5nVG9vbCgpO1xuICAgICAgICAgIC8vZmFjY2lvIHBhcnRpcmUgbCdlZGl0bmcgdG9vbCBwYXNzYW5kbyBjdXJyZW50IEVkaXRpbmcgTGF5ZXIgZSBpbCB0aXBvIGRpIHRvb2xcbiAgICAgICAgICB0aGlzLl9zdGFydEVkaXRpbmdUb29sKGN1cnJlbnRFZGl0aW5nTGF5ZXIsIHRvb2xUeXBlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYWx0cmltZW50aSBjYXNvIGluIGN1aSBub24gw6ggc3RhdG8gc2V0dGF0byBpbCBjdXJyZW50IGVkaXRpbmcgbGF5ZXIgb1xuICAgICAgICAvLyBpbCBsYXllciBjaGUgc2kgc3RhIGNlcmNhbmRvIGRpIGVkaXRhcmUgw6ggZGl2ZXJzbyBkYSBxdWVsbG8gaW4gZWRpdGluZyBpbiBwcmVjZWRlbnphXG4gICAgICAgIC8vIG5lbCBjYXNvIHNpYSBnacOgICBhdHRpdm8gdW4gZWRpdG9yIHZlcmlmaWNvIGRpIHBvdGVybG8gc3RvcHBhcmVcbiAgICAgICAgaWYgKGN1cnJlbnRFZGl0aW5nTGF5ZXIgJiYgY3VycmVudEVkaXRpbmdMYXllci5lZGl0b3IuaXNTdGFydGVkKCkpIHtcbiAgICAgICAgICAvLyBzZSBsYSB0ZXJtaW5hemlvbmUgZGVsbCdlZGl0aW5nIHNhcsOgICBhbmRhdGEgYSBidW9uIGZpbmUsIHNldHRvIGlsIHRvb2xcbiAgICAgICAgICAvLyBwcm92byBhIHN0b3BwYXJlXG4gICAgICAgICAgdGhpcy5fY2FuY2VsT3JTYXZlKDIpXG4gICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuX3N0b3BFZGl0b3IoKSkge1xuICAgICAgICAgICAgICAgICAgc2VsZi5fc3RhcnRFZGl0aW5nVG9vbChsYXllciwgdG9vbFR5cGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vbmVsIGNhc28gc2lhIGxhIHByaW1hIHZvbHRhIGNoZSBpbnRlcmFnaXNjbyBjb24gdW4gdG9vbFxuICAgICAgICAgIC8vIGUgcXVpbmRpIG5vbiDDqCBzdGF0byBzZXR0YXRvIG5lc3N1biBsYXllciBpbiBlZGl0aW5nXG4gICAgICAgICAgdGhpcy5fc3RhcnRFZGl0aW5nVG9vbChsYXllciwgdG9vbFR5cGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vZnVuemlvbmUgY2hlIHJlc3RpdHVpc2NlIGwnYXJyYXkgZGVpIGNvZGljaSBkZWkgbGF5ZXJzXG4gIHRoaXMuZ2V0TGF5ZXJDb2RlcyA9IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIF8udmFsdWVzKHRoaXMubGF5ZXJDb2Rlcyk7XG4gIH07XG5cbiAgLyogTUVUT0RJIFBSSVZBVEkgKi9cbiAgLy8gZnVuemlvbmUgcGVyIHNldHRhcmUgaWwgdmVjdG9ybGF5ZXIgYWxsYSBwcm9yaWV0w6AgdmVjdG9yIGRlbCBsYXllclxuICB0aGlzLl9zZXRVcFZlY3RvckxheWVyID0gZnVuY3Rpb24obGF5ZXJDb2RlLCB2ZWN0b3JMYXllcikge1xuICAgIHRoaXMuX2xheWVyc1tsYXllckNvZGVdLnZlY3RvciA9IHZlY3RvckxheWVyO1xuICB9O1xuXG4gIC8vZnVuemlvbmUgY2hlIHBlcm1ldHRlIGRpIGZhcmUgaWwgc2V0dXAgZGVsbCdlZGl0b3IgZSBhc3NlZ2FucmxvIGFsIGxheWVyXG4gIHRoaXMuX3NldFVwRWRpdG9yID0gZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy9vcHRpb24gZWRpdG9yXG4gICAgdmFyIG9wdGlvbnNfZWRpdG9yID0ge1xuICAgICAgJ21hcFNlcnZpY2UnOiBzZWxmLl9tYXBTZXJ2aWNlLFxuICAgICAgJ2Zvcm1DbGFzcyc6IEZvcm1DbGFzcyxcbiAgICAgICdlZGl0aW5nVmVjdG9yU3R5bGUnOiB0aGlzLl9sYXllcnNFZGl0aW5nU3R5bGVbbGF5ZXJDb2RlXVxuICAgIH07XG4gICAgLy8gcHJlbmRvIGlsIHZlY3RvciBsYXllciBkZWwgbGF5ZXJcbiAgICB2YXIgdmVjdG9yTGF5ZXIgPSB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS52ZWN0b3I7XG4gICAgLy9HRVNUSU9ORSBFIElOSVpJQUxJWlpBWklPTkUgREVMTCdFRElUT1IgUkVMQVRJVk8gQUwgTEFZRVIgVkVUVE9SSUFMRVxuICAgIC8vY3JlbyBsJ2lzdGFuemEgZGVsbCdlZGl0b3IgY2hlIGdlc3RpcsOgIGlsIGxheWVyXG4gICAgdmFyIGVkaXRvciA9IG5ldyBzZWxmLl9lZGl0b3JDbGFzc1tsYXllckNvZGVdKG9wdGlvbnNfZWRpdG9yKTtcbiAgICAvL3NldHRvIGlsIGxheWVyIHZldHRvcmlhbGUgYXNzb2NpYXRvIGFsbCdlZGl0b3JcbiAgICAvLyBlIGkgdGlwaSBkaSB0b29scyBhc3NvY2lhdGkgYWQgZXNzb1xuICAgIGVkaXRvci5zZXRWZWN0b3JMYXllcih2ZWN0b3JMYXllcik7XG4gICAgLy9lbWV0dGUgZXZlbnRvIGNoZSDDqCBzdGF0YSBnZW5lcmF0YSB1bmEgbW9kaWZpY2EgbGEgbGF5ZXJcbiAgICBlZGl0b3Iub24oXCJkaXJ0eVwiLCBmdW5jdGlvbiAoZGlydHkpIHtcbiAgICAgIHNlbGYuc3RhdGUuaGFzRWRpdHMgPSBkaXJ0eTtcbiAgICB9KTtcbiAgICAvL2Fzc2Vnbm8gbCdpc3RhbnphIGVkaXRvciBhbCBsYXllciB0cmFtaXRlIGxhIHByb3ByaWV0w6AgZWRpdG9yXG4gICAgdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0uZWRpdG9yID0gZWRpdG9yO1xuICAgIC8vLy8gRklORSBHRVNUSU9ORSBFRElUT1JcbiAgfTtcbiAgLy9mYSBwYXJ0aXJlIGwnZWRpdGluZ1xuICB0aGlzLl9zdGFydEVkaXRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBtaSBhc3NpY3VybyBjaGUgc2UgcGVyIHF1YWxzaXNpIG1vdGl2b1xuICAgIC8vIGZhY2NpbyB1bm8gc3RhcmVkaXRpbmcgZGkgdW4gZWRpdGluZyBnacOgIGF2dmlhdG9cbiAgICAvLyByaXRvcm5vIHBlcmNow6ggaG8gZ2nDoCB0dXR0byAobG8gZmFjY2lvIHBlciBzaWN1cmVubnphIG5vbiBzaSBzYSBtYWkpXG4gICAgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy5vbiB8fCB0aGlzLnN0YXRlLnJldHJpZXZpbmdEYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvLyBjaGllZG8gYWwgbG9hZGVyIGRpIGNhcmljYXJlIGkgZGF0aVxuICAgIGlmICghdGhpcy5fbG9hZGVyLmlzUmVhZHkoKSkge1xuICAgICAgdGhpcy5fbG9hZGVyLmxvYWRMYXllcnMoJ3cnLCB0aGlzLl9jdXN0b21VcmxQYXJhbWV0ZXJzKSAvLyBjYXJpY28gaSBsYXllciBpbiBtb2RhbGl0w6AgZWRpdGluZyAoc2NyaXR0dXJhKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAodmVjdG9yTGF5ZXJzQ29kZXMpIHtcbiAgICAgICAgICAvL3VuYSB2b2x0YSBjaGUgaWwgbG9hZGVyIGhhIGZpbml0byBkaSBjYXJpY2FyZSBpIGxheWVyIHZldHRvcmlhbGlcbiAgICAgICAgICAvL3F1ZXN0byBtaSByZXN0aXR1aXNjZSBpIGNvZGljZSBkZWkgbGF5ZXIgY2hlIHNvbm8gc3RhdGkgY2FyaWNhdGkoYXJyYXkpXG4gICAgICAgICAgXy5mb3JFYWNoKHZlY3RvckxheWVyc0NvZGVzLCBmdW5jdGlvbiAobGF5ZXJDb2RlKSB7XG4gICAgICAgICAgICAvLyBwZXIgb2duaSBsYXllciBmYWNjaW8gaWwgc2V0dXAgZGVsbCdlZGl0b3JcbiAgICAgICAgICAgIHNlbGYuX3NldFVwRWRpdG9yKGxheWVyQ29kZSk7XG4gICAgICAgICAgICBzZWxmLl90b2dnbGVDaGVja0JveFBsdWdpblRvb2wobGF5ZXJDb2RlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvLyBzZSB0dXR0byAgw6ggYW5kYXRvIGEgYnVvbiBmaW5lIGFnZ2l1bmdvIGkgVmVjdG9yTGF5ZXIgYWxsYSBtYXBwYVxuICAgICAgICAgIHNlbGYuX2FkZFRvTWFwKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBHVUkubm90aWZ5LmVycm9yKHQoJ2NvdWxkX25vdF9sb2FkX3ZlY3Rvcl9sYXllcnMnKSk7XG4gICAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xvYWRlci5zZXRNb2RlKCd3Jyk7XG4gICAgICB2YXIgdmVjdG9yTGF5ZXJzQ29kZXMgPSB0aGlzLl9sb2FkZXIuZ2V0VmVjdG9yTGF5ZXJzQ29kZXMoKTtcbiAgICAgIF8uZm9yRWFjaCh2ZWN0b3JMYXllcnNDb2RlcywgZnVuY3Rpb24gKGxheWVyQ29kZSkge1xuICAgICAgICAvLyBwZXIgb2duaSBsYXllciBmYWNjaW8gaWwgc2V0dXAgZGVsbCdlZGl0b3JcbiAgICAgICAgc2VsZi5fbG9hZGVyLmxvY2tGZWF0dXJlcyhzZWxmLl9sYXllcnNbbGF5ZXJDb2RlXS5uYW1lKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgc2VsZi5fc2V0VXBFZGl0b3IobGF5ZXJDb2RlKTtcbiAgICAgICAgICBzZWxmLl90b2dnbGVDaGVja0JveFBsdWdpblRvb2wobGF5ZXJDb2RlKTtcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgICAgc2VsZi5zdGF0ZS5lZGl0aW5nLm9uID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgdGhpcy5fc3RvcEVkaXRpbmcgPSBmdW5jdGlvbihyZXNldCkge1xuICAgIC8vIHNlIHBvc3NvIHN0b3BwYXJlIHR1dHRpIGdsaSBlZGl0b3IuLi5cbiAgICBpZiAodGhpcy5fc3RvcEVkaXRvcihyZXNldCkpe1xuICAgICAgXy5mb3JFYWNoKHRoaXMuX2xheWVycywgZnVuY3Rpb24obGF5ZXIsIGxheWVyQ29kZSkge1xuICAgICAgICB2YXIgdmVjdG9yID0gbGF5ZXIudmVjdG9yO1xuICAgICAgICAvL3NlbGYuX21hcFNlcnZpY2Uudmlld2VyLnJlbW92ZUxheWVyQnlOYW1lKHZlY3Rvci5uYW1lKTtcbiAgICAgICAgLy9sYXllci52ZWN0b3I9IG51bGw7XG4gICAgICAgIGxheWVyLmVkaXRvcj0gbnVsbDtcbiAgICAgICAgc2VsZi5fdW5sb2NrTGF5ZXIoc2VsZi5fbGF5ZXJzW2xheWVyQ29kZV0pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl91cGRhdGVFZGl0aW5nU3RhdGUoKTtcbiAgICAgIHRoaXMuX2xvYWRlci5zZXRNb2RlKCdyJyk7XG4gICAgICBzZWxmLl9jbGVhblVwKCk7XG4gICAgICBzZWxmLmVtaXQoXCJlZGl0aW5nc3RvcHBlZFwiKTtcbiAgICB9XG4gIH07XG5cbiAgdGhpcy5fY2xlYW5VcCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vdmFkbyBhZCBhbm51bGFyZSBsJ2VzdGVuemlvbmUgZGVsIGxvYWRlciBwZXIgcG90ZXIgcmljYXJpY2FyZSBpIGRhdGkgdmV0dHRvcmlhbGlcbiAgICAvL2RhIHJpdmVkZXJlO1xuICAgIHRoaXMuX2xvYWRlci5jbGVhblVwTGF5ZXJzKCk7XG5cbiAgfTtcbiAgLy9zZSBub24gw6ggYW5jb3JhIHBhcnRpdG8gZmFjY2lvIHBhcnRpcmUgbG8gc3RhcnQgZWRpdG9yXG4gIHRoaXMuX3N0YXJ0RWRpdG9yID0gZnVuY3Rpb24obGF5ZXIpe1xuICAgIC8vIGF2dmlvIGwnZWRpdG9yXG4gICAgLy8gcGFzc2FuZG9saSBpbCBzZXJ2aWNlIGNoZSBsbyBhY2NldHRhXG4gICAgaWYgKGxheWVyLmVkaXRvci5zdGFydCh0aGlzKSkge1xuICAgICAgLy8gcmVnaXN0cm8gaWwgY3VycmVudCBsYXllciBpbiBlZGl0aW5nXG4gICAgICB0aGlzLl9zZXRDdXJyZW50RWRpdGluZ0xheWVyKGxheWVyKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG4gIC8vZnVuemlvbmUgY2hlIHZpZW5lIGNoaWFtYXRhIGFsIGNsaWNrIHN1IHVuIHRvb2wgZGVsbCdlZGl0aW5nIGUgc2VcbiAgLy9ub24gw6ggc3RhdG8gYXNzZWduYXRvIGFuY29yYSBuZXNzdW4gbGF5ZXIgY29tZSBjdXJyZW50IGxheWVyIGVkaXRpbmdcbiAgdGhpcy5fc3RhcnRFZGl0aW5nVG9vbCA9IGZ1bmN0aW9uKGxheWVyLCB0b29sVHlwZSwgb3B0aW9ucykge1xuICAgIC8vYXNzZWdubyB0cnVlIGFsbG8gc3RhcnRFZGl0aW5nVG9vbCBhdHRyaWJ1dG8gZGVsbGxvIHN0YXRlXG4gICAgdGhpcy5zdGF0ZS5zdGFydGluZ0VkaXRpbmdUb29sID0gdHJ1ZTtcbiAgICB2YXIgY2FuU3RhcnRUb29sID0gdHJ1ZTtcbiAgICAvL3ZlcmlmaWNvIHNlIGwnZWRpdG9yIMOoIHBhcnRpdG8gbyBtZW5vXG4gICAgaWYgKCFsYXllci5lZGl0b3IuaXNTdGFydGVkKCkpIHtcbiAgICAgIC8vc2Ugbm9uIMOoIGFuY29yYSBwYXJ0aXRvIGxvIGZhY2NpbyBwYXJ0aXJlIGUgbmUgcHJlbmRvIGlsIHJpc3VsdGF0b1xuICAgICAgLy8gdHJ1ZSBvIGZhbHNlXG4gICAgICBjYW5TdGFydFRvb2wgPSB0aGlzLl9zdGFydEVkaXRvcihsYXllcik7XG4gICAgfVxuICAgIC8vIHZlcmlmaWNhIHNlIGlsIHRvb2wgcHXDsiBlc3NlcmUgYXR0aXZhdG9cbiAgICAvLyBsJ2VkaXRvciB2ZXJpZmljYSBzZSBpbCB0b29sIHJpY2hpZXN0byDDqCBjb21wYXRpYmlsZVxuICAgIC8vIGNvbiBpIHRvb2xzIHByZXZpc3RpIGRhbGwnZWRpdG9yLiBDcmVhIGlzdGFuemEgZGkgdG9vbCBlIGF2dmlhIGlsIHRvb2xcbiAgICAvLyBhdHRyYXZlcnNvIGlsIG1ldG9kbyBydW5cbiAgICBpZiAoY2FuU3RhcnRUb29sICYmIGxheWVyLmVkaXRvci5zZXRUb29sKHRvb2xUeXBlLCBvcHRpb25zKSkge1xuICAgICAgdGhpcy5fdXBkYXRlRWRpdGluZ1N0YXRlKCk7XG4gICAgICB0aGlzLnN0YXRlLnN0YXJ0aW5nRWRpdGluZ1Rvb2wgPSBmYWxzZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aGlzLnN0YXRlLnN0YXJ0aW5nRWRpdGluZ1Rvb2wgPSBmYWxzZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgdGhpcy5fc3RvcEVkaXRvciA9IGZ1bmN0aW9uKHJlc2V0KXtcbiAgICB2YXIgcmV0ID0gdHJ1ZTtcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgaWYgKGxheWVyKSB7XG4gICAgICByZXQgPSBsYXllci5lZGl0b3Iuc3RvcChyZXNldCk7XG4gICAgICBpZiAocmV0KXtcbiAgICAgICAgdGhpcy5fc2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9O1xuICAvLyBmdW56aW9uZSBjaGUgc2kgb2NjdXBhIGRpIGludGVycm9tZXBlcmUgbCdlZHRpbmcgdG9vbFxuICB0aGlzLl9zdG9wRWRpdGluZ1Rvb2wgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmV0ID0gdHJ1ZTtcbiAgICAvLyByZWN1cGVyZSBpbCBsYXllciBpbiBjdXJyZW50IGVkaXRpbmdcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgLy8gc2UgZXNpc3RlIGVkIGVyYSBzdGF0byBzZXR0YXRvXG4gICAgaWYgKGxheWVyKSB7XG4gICAgICAvLyBzZSBhbmRhdG8gYmVuZSByaXRvcm5hIHRydWVcbiAgICAgIHJldCA9IGxheWVyLmVkaXRvci5zdG9wVG9vbCgpO1xuICAgICAgaWYgKHJldCkge1xuICAgICAgICB0aGlzLl91cGRhdGVFZGl0aW5nU3RhdGUoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIGFjY2V0dGEgY29tZSBwYXJhbWV0cm8gaWwgdGlwbyBkaVxuICAvLyBvcGVyYXppb25lIGRhIGZhcmUgYSBzZWNvbmRhIGRpY29zYSDDqCBhdnZlbnV0b1xuICB0aGlzLl9zYXZlV2l0aG91dEFzayA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICB2YXIgZGlydHlFZGl0b3JzID0ge307XG4gICAgLy8gdmVyaWZpY28gcGVyIG9nbmkgbGF5ZXIgc2UgbCdlZGl0byBhc3NvY2lhdG8gw6ggRGlydHlcbiAgICBfLmZvckVhY2godGhpcy5fbGF5ZXJzLCBmdW5jdGlvbihsYXllciwgbGF5ZXJDb2RlKSB7XG4gICAgICBpZiAobGF5ZXIuZWRpdG9yLmlzRGlydHkoKSkge1xuICAgICAgICBkaXJ0eUVkaXRvcnNbbGF5ZXJDb2RlXSA9IGxheWVyLmVkaXRvcjtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9zYXZlRWRpdHMoZGlydHlFZGl0b3JzKS5cbiAgICB0aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgfSkuZmFpbChmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgfSlcblxuICB9O1xuICB0aGlzLl9jYW5jZWxPclNhdmUgPSBmdW5jdGlvbih0eXBlKXtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgLy8gcGVyIHNpY3VyZXp6YSB0ZW5nbyB0dXR0byBkZW50cm8gdW4gZ3Jvc3NvIHRyeS9jYXRjaCxcbiAgICAvLyBwZXIgbm9uIHJpc2NoaWFyZSBkaSBwcm92b2NhcmUgaW5jb25zaXN0ZW56ZSBuZWkgZGF0aSBkdXJhbnRlIGlsIHNhbHZhdGFnZ2lvXG4gICAgdHJ5IHtcbiAgICAgIHZhciBfYXNrVHlwZSA9IDE7XG4gICAgICBpZiAodHlwZSkge1xuICAgICAgICBfYXNrVHlwZSA9IHR5cGVcbiAgICAgIH1cbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBjaG9pY2UgPSBcImNhbmNlbFwiO1xuICAgICAgdmFyIGRpcnR5RWRpdG9ycyA9IHt9O1xuICAgICAgLy8gdmVyaWZpY28gcGVyIG9nbmkgbGF5ZXIgc2UgbCdlZGl0byBhc3NvY2lhdG8gw6ggRGlydHlcbiAgICAgIF8uZm9yRWFjaCh0aGlzLl9sYXllcnMsIGZ1bmN0aW9uKGxheWVyLCBsYXllckNvZGUpIHtcbiAgICAgICAgaWYgKGxheWVyLmVkaXRvci5pc0RpcnR5KCkpIHtcbiAgICAgICAgICBkaXJ0eUVkaXRvcnNbbGF5ZXJDb2RlXSA9IGxheWVyLmVkaXRvcjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyB2ZXJpZmljbyBzZSBjaSBzb25vIG8gbWVubyBlZGl0b3Igc3BvcmNoaVxuICAgICAgaWYoXy5rZXlzKGRpcnR5RWRpdG9ycykubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX2Fza0NhbmNlbE9yU2F2ZShfYXNrVHlwZSkuXG4gICAgICAgIHRoZW4oZnVuY3Rpb24oYWN0aW9uKSB7XG4gICAgICAgICAgLy8gcml0b3JuYSBpbCB0aXBvIGRpIGF6aW9uZSBkYSBmYXJlXG4gICAgICAgICAgLy8gc2F2ZSwgY2FuY2VsLCBub3NhdmVcbiAgICAgICAgICBpZiAoYWN0aW9uID09PSAnc2F2ZScpIHtcbiAgICAgICAgICAgIC8vIHBhc3NvIGdsaSBlZGl0b3Igc3BvY2hpIGFsbGEgZnVuemlvbmUgX3NhdmVFZGl0c1xuICAgICAgICAgICAgc2VsZi5fc2F2ZUVkaXRzKGRpcnR5RWRpdG9ycykuXG4gICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09ICdub3NhdmUnKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT0gJ2NhbmNlbCcpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIGluIGJhc2UgYWwgdGlwbyBkaSBhc2tUeXBlXG4gIC8vIHZpc3VhbGl6emEgaWwgbW9kYWxlIGEgY3VpIHJpc3BvbmRlcmUsIHNhbHZhIGV0YyAuLlxuICB0aGlzLl9hc2tDYW5jZWxPclNhdmUgPSBmdW5jdGlvbih0eXBlKXtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgdmFyIGJ1dHRvblR5cGVzID0ge1xuICAgICAgU0FWRToge1xuICAgICAgICBsYWJlbDogXCJTYWx2YVwiLFxuICAgICAgICBjbGFzc05hbWU6IFwiYnRuLXN1Y2Nlc3NcIixcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnc2F2ZScpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgTk9TQVZFOiB7XG4gICAgICAgIGxhYmVsOiBcIlRlcm1pbmEgc2VuemEgc2FsdmFyZVwiLFxuICAgICAgICBjbGFzc05hbWU6IFwiYnRuLWRhbmdlclwiLFxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oKXtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdub3NhdmUnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIENBTkNFTDoge1xuICAgICAgICBsYWJlbDogXCJBbm51bGxhXCIsXG4gICAgICAgIGNsYXNzTmFtZTogXCJidG4tcHJpbWFyeVwiLFxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnY2FuY2VsJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHN3aXRjaCAodHlwZSl7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGJ1dHRvbnMgPSB7XG4gICAgICAgICAgc2F2ZTogYnV0dG9uVHlwZXMuU0FWRSxcbiAgICAgICAgICBub3NhdmU6IGJ1dHRvblR5cGVzLk5PU0FWRSxcbiAgICAgICAgICBjYW5jZWw6IGJ1dHRvblR5cGVzLkNBTkNFTFxuICAgICAgICB9O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgYnV0dG9ucyA9IHtcbiAgICAgICAgICBzYXZlOiBidXR0b25UeXBlcy5TQVZFLFxuICAgICAgICAgIGNhbmNlbDogYnV0dG9uVHlwZXMuQ0FOQ0VMXG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBHVUkuZGlhbG9nLmRpYWxvZyh7XG4gICAgICBtZXNzYWdlOiBcIlZ1b2kgc2FsdmFyZSBkZWZpbml0aXZhbWVudGUgbGUgbW9kaWZpY2hlP1wiLFxuICAgICAgdGl0bGU6IFwiU2FsdmF0YWdnaW8gbW9kaWZpY2FcIixcbiAgICAgIGJ1dHRvbnM6IGJ1dHRvbnNcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuICAvLyBmdW56aW9uZSBjaGUgc2FsdmEgaSBkYXRpIHJlbGF0aXZpIGFsIGxheWVyIHZldHRvcmlhbGVcbiAgLy8gZGVsIGRpcnR5RWRpdG9yXG4gIHRoaXMuX3NhdmVFZGl0cyA9IGZ1bmN0aW9uKGRpcnR5RWRpdG9ycykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgdGhpcy5fc2VuZEVkaXRzKGRpcnR5RWRpdG9ycylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgIEdVSS5ub3RpZnkuc3VjY2VzcyhcIkkgZGF0aSBzb25vIHN0YXRpIHNhbHZhdGkgY29ycmV0dGFtZW50ZVwiKTtcbiAgICAgICAgICBzZWxmLl9jb21taXRFZGl0cyhkaXJ0eUVkaXRvcnMsIHJlc3BvbnNlKTtcbiAgICAgICAgICAvL3NlbGYuX21hcFNlcnZpY2UucmVmcmVzaE1hcCgpO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oZXJyb3JzKXtcbiAgICAgICAgICBHVUkubm90aWZ5LmVycm9yKFwiRXJyb3JlIG5lbCBzYWx2YXRhZ2dpbyBzdWwgc2VydmVyXCIpO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIHByZW5kZSBjb21lIGluZ3Jlc3NvIGdsaSBlZGl0b3Igc3BvcmNoaVxuICB0aGlzLl9zZW5kRWRpdHMgPSBmdW5jdGlvbihkaXJ0eUVkaXRvcnMpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgdmFyIGVkaXRzVG9QdXNoID0gXy5tYXAoZGlydHlFZGl0b3JzLCBmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxheWVybmFtZTogZWRpdG9yLmdldFZlY3RvckxheWVyKCkubmFtZSxcbiAgICAgICAgZWRpdHM6IGVkaXRvci5nZXRFZGl0ZWRGZWF0dXJlcygpXG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gZXNlZ3VlIGlsIHBvc3QgZGVpIGRhdGlcbiAgICB0aGlzLl9wb3N0RGF0YShlZGl0c1RvUHVzaClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmV0dXJuZWQpe1xuICAgICAgICAgIGlmIChyZXR1cm5lZC5yZXN1bHQpe1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXR1cm5lZC5yZXNwb25zZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJldHVybmVkLnJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKHJldHVybmVkKXtcbiAgICAgICAgICBkZWZlcnJlZC5yZWplY3QocmV0dXJuZWQucmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuXG4gIHRoaXMuX2NvbW1pdEVkaXRzID0gZnVuY3Rpb24oZWRpdG9ycywgcmVzcG9uc2Upe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBfLmZvckVhY2goZWRpdG9ycyxmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgIHZhciBuZXdBdHRyaWJ1dGVzRnJvbVNlcnZlciA9IG51bGw7XG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UubmV3KXtcbiAgICAgICAgXy5mb3JFYWNoKHJlc3BvbnNlLm5ldywgZnVuY3Rpb24odXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzKXtcbiAgICAgICAgICB2YXIgb2xkZmlkID0gdXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzLmNsaWVudGlkO1xuICAgICAgICAgIHZhciBmaWQgPSB1cGRhdGVkRmVhdHVyZUF0dHJpYnV0ZXMuaWQ7XG4gICAgICAgICAgZWRpdG9yLmdldEVkaXRWZWN0b3JMYXllcigpLnNldEZlYXR1cmVEYXRhKG9sZGZpZCxmaWQsbnVsbCx1cGRhdGVkRmVhdHVyZUF0dHJpYnV0ZXMpO1xuICAgICAgICAgIF8uZm9yRWFjaChyZXNwb25zZS5uZXdfbG9ja2lkcywgZnVuY3Rpb24obmV3bG9ja0lkKXtcbiAgICAgICAgICAgIGVkaXRvci5nZXRWZWN0b3JMYXllcigpLmFkZExvY2tJZChuZXdsb2NrSWQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coJ2VkaXRvciBjb21taXQnKTtcbiAgICAgIGVkaXRvci5jb21taXQoKTtcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLl91bmRvRWRpdHMgPSBmdW5jdGlvbihkaXJ0eUVkaXRvcnMpe1xuICAgIHZhciBjdXJyZW50RWRpdGluZ0xheWVyQ29kZSA9IHRoaXMuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKS5sYXllckNvZGU7XG4gICAgdmFyIGVkaXRvciA9IGRpcnR5RWRpdG9yc1tjdXJyZW50RWRpdGluZ0xheWVyQ29kZV07XG4gICAgdGhpcy5fc3RvcEVkaXRpbmcodHJ1ZSk7XG4gIH07XG4gIC8vIGVzZWd1ZSBsJ3VwZGF0ZSBkZWxsbyBzdGF0ZSBuZWwgY2FzbyBhZCBlc2VtcGlvIGRpIHVuIHRvZ2dsZSBkZWwgYm90dG9uZSB0b29sXG4gIHRoaXMuX3VwZGF0ZUVkaXRpbmdTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIHByZW5kZSBpbCBsYXllciBpbiBFZGl0aW5nXG4gICAgdmFyIGxheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgIGlmIChsYXllcikge1xuICAgICAgdGhpcy5zdGF0ZS5lZGl0aW5nLmxheWVyQ29kZSA9IGxheWVyLmxheWVyQ29kZTtcbiAgICAgIHRoaXMuc3RhdGUuZWRpdGluZy50b29sVHlwZSA9IGxheWVyLmVkaXRvci5nZXRBY3RpdmVUb29sKCkuZ2V0VHlwZSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuZWRpdGluZy5sYXllckNvZGUgPSBudWxsO1xuICAgICAgdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xUeXBlID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5fdXBkYXRlVG9vbFN0ZXBzU3RhdGUoKTtcbiAgfTtcblxuICB0aGlzLl91cGRhdGVUb29sU3RlcHNTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgdmFyIGFjdGl2ZVRvb2w7XG4gICAgaWYgKGxheWVyKSB7XG4gICAgICBhY3RpdmVUb29sID0gbGF5ZXIuZWRpdG9yLmdldEFjdGl2ZVRvb2woKTtcbiAgICB9XG4gICAgaWYgKGFjdGl2ZVRvb2wgJiYgYWN0aXZlVG9vbC5nZXRUb29sKCkpIHtcbiAgICAgIHZhciB0b29sSW5zdGFuY2UgPSBhY3RpdmVUb29sLmdldFRvb2woKTtcbiAgICAgIGlmICh0b29sSW5zdGFuY2Uuc3RlcHMpe1xuICAgICAgICB0aGlzLl9zZXRUb29sU3RlcFN0YXRlKGFjdGl2ZVRvb2wpO1xuICAgICAgICB0b29sSW5zdGFuY2Uuc3RlcHMub24oJ3N0ZXAnLCBmdW5jdGlvbihpbmRleCxzdGVwKSB7XG4gICAgICAgICAgc2VsZi5fc2V0VG9vbFN0ZXBTdGF0ZShhY3RpdmVUb29sKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRvb2xJbnN0YW5jZS5zdGVwcy5vbignY29tcGxldGUnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIHNlbGYuX3NldFRvb2xTdGVwU3RhdGUoKTtcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzZWxmLl9zZXRUb29sU3RlcFN0YXRlKCk7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuX3NldFRvb2xTdGVwU3RhdGUgPSBmdW5jdGlvbihhY3RpdmVUb29sKXtcbiAgICB2YXIgaW5kZXgsIHRvdGFsLCBtZXNzYWdlO1xuICAgIGlmIChfLmlzVW5kZWZpbmVkKGFjdGl2ZVRvb2wpKXtcbiAgICAgIGluZGV4ID0gbnVsbDtcbiAgICAgIHRvdGFsID0gbnVsbDtcbiAgICAgIG1lc3NhZ2UgPSBudWxsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHZhciB0b29sID0gYWN0aXZlVG9vbC5nZXRUb29sKCk7XG4gICAgICB2YXIgbWVzc2FnZXMgPSB0b29sU3RlcHNNZXNzYWdlc1thY3RpdmVUb29sLmdldFR5cGUoKV07XG4gICAgICBpbmRleCA9IHRvb2wuc3RlcHMuY3VycmVudFN0ZXBJbmRleCgpO1xuICAgICAgdG90YWwgPSB0b29sLnN0ZXBzLnRvdGFsU3RlcHMoKTtcbiAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlc1tpbmRleF07XG4gICAgICBpZiAoXy5pc1VuZGVmaW5lZChtZXNzYWdlKSkge1xuICAgICAgICBpbmRleCA9IG51bGw7XG4gICAgICAgIHRvdGFsID0gbnVsbDtcbiAgICAgICAgbWVzc2FnZSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC5uID0gaW5kZXggKyAxO1xuICAgIHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC50b3RhbCA9IHRvdGFsO1xuICAgIHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC5tZXNzYWdlID0gbWVzc2FnZTtcbiAgfTtcblxuICB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRFZGl0aW5nTGF5ZXI7XG4gIH07XG5cbiAgdGhpcy5fc2V0Q3VycmVudEVkaXRpbmdMYXllciA9IGZ1bmN0aW9uKGxheWVyKXtcbiAgICBpZiAoIWxheWVyKXtcbiAgICAgIHRoaXMuX2N1cnJlbnRFZGl0aW5nTGF5ZXIgPSBudWxsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRFZGl0aW5nTGF5ZXIgPSBsYXllcjtcbiAgICB9XG4gIH07XG4gIHRoaXMuX2FkZFRvTWFwID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vcmVjdXBlcm8gbCdlbGVtZW50byBtYXAgb2wzXG4gICAgdmFyIG1hcCA9IHRoaXMuX21hcFNlcnZpY2Uudmlld2VyLm1hcDtcbiAgICB2YXIgbGF5ZXJDb2RlcyA9IHRoaXMuZ2V0TGF5ZXJDb2RlcygpO1xuICAgIC8vb2duaSBsYXllciBsbyBhZ2dpdW5nbyBhbGxhIG1hcHBhXG4gICAgLy9jb24gaWwgbWV0b2RvIGFkZFRvTWFwIGRpIHZlY3RvckxheWVyXG4gICAgXy5mb3JFYWNoKGxheWVyQ29kZXMsIGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgICAgc2VsZi5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yLmFkZFRvTWFwKG1hcCk7XG4gICAgfSk7XG4gICAgLy9hZ2dpdW5nbyBpbCBsaXN0ZW5lclxuICAgIGlmICghdGhpcy5fbG9hZERhdGFPbk1hcFZpZXdDaGFuZ2VMaXN0ZW5lcikge1xuICAgICAgLy92aWVuZSByaXRvcm5hdGEgbGEgbGlzdGVuZXIga2V5XG4gICAgICB0aGlzLl9sb2FkRGF0YU9uTWFwVmlld0NoYW5nZUxpc3RlbmVyID0gdGhpcy5fbWFwU2VydmljZS5vbmFmdGVyKCdzZXRNYXBWaWV3JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2VsZi5zdGF0ZS5lZGl0aW5nLm9uICYmIHNlbGYuc3RhdGUuZWRpdGluZy5lbmFibGVkKSB7XG4gICAgICAgICAgc2VsZi5fbG9hZGVyLmxvYWRBbGxWZWN0b3JzRGF0YSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgdGhpcy5fcG9zdERhdGEgPSBmdW5jdGlvbihlZGl0c1RvUHVzaCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvLyBtYW5kbyB1biBvZ2dldHRvIGNvbWUgbmVsIGNhc28gZGVsIGJhdGNoLFxuICAgIC8vIG1hIGluIHF1ZXN0byBjYXNvIGRldm8gcHJlbmRlcmUgc29sbyBpbCBwcmltbywgZSB1bmljbywgZWxlbWVudG9cbiAgICBpZiAoZWRpdHNUb1B1c2gubGVuZ3RoID4gMSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Bvc3RCYXRjaERhdGEoZWRpdHNUb1B1c2gpO1xuICAgIH1cbiAgICB2YXIgbGF5ZXJOYW1lID0gZWRpdHNUb1B1c2hbMF0ubGF5ZXJuYW1lO1xuICAgIC8vb2dnZXR0byBjb250ZW5ldGVudGUgYWRkIGRlbGV0ZSByZWxhdGlvbnMgbG9ja2lkc1xuICAgIHZhciBlZGl0cyA9IGVkaXRzVG9QdXNoWzBdLmVkaXRzO1xuICAgIHZhciBqc29uRGF0YSA9IEpTT04uc3RyaW5naWZ5KGVkaXRzKTtcbiAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIF8uZm9yRWFjaChlZGl0cywgZnVuY3Rpb24odmFsdWVzLCBrZXkpIHtcbiAgICAgIGZvcm0uYXBwZW5kKGtleSwgdmFsdWVzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gJC5hamF4KHtcbiAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgIHVybDogdGhpcy5jb25maWcuYmFzZXVybCtsYXllck5hbWUrXCIvP1wiK3NlbGYuX2N1c3RvbVVybFBhcmFtZXRlcnMsXG4gICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBkYXRhOiBqc29uRGF0YVxuXG4gICAgICAvKmRhdGFUeXBlOiAnanNvbicsXG4gICAgICBkYXRhOiBmb3JtLFxuICAgICAgY29udGVudFR5cGU6IGZhbHNlLFxuICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlKi9cbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLl9wb3N0QmF0Y2hEYXRhID0gZnVuY3Rpb24obXVsdGlFZGl0c1RvUHVzaCl7XG4gICAgdmFyIGVkaXRzID0ge307XG4gICAgXy5mb3JFYWNoKG11bHRpRWRpdHNUb1B1c2gsZnVuY3Rpb24oZWRpdHNUb1B1c2gpe1xuICAgICAgZWRpdHNbZWRpdHNUb1B1c2gubGF5ZXJuYW1lXSA9IGVkaXRzVG9QdXNoLmVkaXRzO1xuICAgIH0pO1xuICAgIHZhciBqc29uRGF0YSA9IEpTT04uc3RyaW5naWZ5KGVkaXRzKTtcbiAgICByZXR1cm4gJC5wb3N0KHtcbiAgICAgIHVybDogdGhpcy5jb25maWcuYmFzZXVybCxcbiAgICAgIGRhdGE6IGpzb25EYXRhLFxuICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5fdW5sb2NrID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxheWVyQ29kZXMgPSB0aGlzLmdldExheWVyQ29kZXMoKTtcbiAgICAvLyBlc2VndW8gbGUgcmljaGllc3RlIGRlbGxlIGNvbmZpZ3VyYXppb25pIGUgbWkgdGVuZ28gbGUgcHJvbWVzc2VcbiAgICBfLm1hcChsYXllckNvZGVzLGZ1bmN0aW9uKGxheWVyQ29kZSl7XG4gICAgICByZXR1cm4gc2VsZi5fdW5sb2NrTGF5ZXIoc2VsZi5fbGF5ZXJzW2xheWVyQ29kZV0pO1xuICAgIH0pO1xuICB9O1xuICAvLyBmdW56aW9uZSBpbnZpbyBsb2Nrc1xuICB0aGlzLl9sb2NrTGF5ZXIgPSBmdW5jdGlvbihsYXllckNvbmZpZykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZmVhdHVyZUxvY2tzID0gdGhpcy5fbG9hZGVyLl92ZWN0b3JMYXllcnNEYXRhW2xheWVyQ29uZmlnLm5hbWVdLmZlYXR1cmVsb2NrcztcbiAgICB2YXIganNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeShmZWF0dXJlTG9ja3MpO1xuICAgIHJldHVybiAkLnBvc3Qoe1xuICAgICAgdXJsOiB0aGlzLmNvbmZpZy5iYXNldXJsK2xheWVyQ29uZmlnLm5hbWUrXCIvP2xvY2tcIiArIHRoaXMuX2N1c3RvbVVybFBhcmFtZXRlcnMsXG4gICAgICBkYXRhOiBqc29uRGF0YSxcbiAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuX2xvY2tMYXllcnMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGF5ZXJDb2RlcyA9IHRoaXMuZ2V0TGF5ZXJDb2RlcygpO1xuICAgIC8vIGVzZWd1byBsZSByaWNoaWVzdGUgZGVsbGUgY29uZmlndXJhemlvbmkgZSBtaSB0ZW5nbyBsZSBwcm9tZXNzZVxuICAgIF8ubWFwKGxheWVyQ29kZXMsZnVuY3Rpb24obGF5ZXJDb2RlKXtcbiAgICAgIHJldHVybiBzZWxmLl9sb2NrTGF5ZXIoc2VsZi5fbGF5ZXJzW2xheWVyQ29kZV0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuX3VubG9ja0xheWVyID0gZnVuY3Rpb24obGF5ZXJDb25maWcpe1xuICAgICQuZ2V0KHRoaXMuY29uZmlnLmJhc2V1cmwrbGF5ZXJDb25maWcubmFtZStcIi8/dW5sb2NrXCIgKyB0aGlzLl9jdXN0b21VcmxQYXJhbWV0ZXJzKTtcbiAgfTtcbiAgLy9nZXQgbG9hZGVyIHNlcnZpY2VcbiAgdGhpcy5nZXRMb2FkZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fbG9hZGVyO1xuICB9XG59XG5cbmluaGVyaXQoR2Vvbm90ZXNTZXJ2aWNlLCBHM1dPYmplY3QpO1xubW9kdWxlLmV4cG9ydHMgPSBuZXcgR2Vvbm90ZXNTZXJ2aWNlO1xufSx7XCIuL2VkaXRvcnMvYXR0cmlidXRlc2Zvcm1cIjoxfV19LHt9LFszXSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
