!function e(t,i,n){function s(r,a){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};t[r][0].call(d.exports,function(e){var i=t[r][1][e];return s(i?i:e)},d,d.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e,i){function n(t){o(this,t),this._formPanel=l}var s=g3wsdk.core.utils.inherit,o=g3wsdk.core.utils.base,r=g3wsdk.gui.FormPanel,a=g3wsdk.gui.Form,l=r.extend({});s(n,a),e.exports=n},{}],2:[function(t,e,i){function n(t){t.formTools=[],o(this,t);var e=function(){a.saveEdits()};this.onafter("addFeature",e),this.onafter("deleteFeature",e),this.onafter("moveFeature",e),this.onafter("pickFeature",e)}var s=g3wsdk.core.utils.inherit,o=g3wsdk.core.utils.base,r=g3wsdk.core.Editor,a=t("../pluginservice");t("./attributesform");s(n,r),e.exports=n},{"../pluginservice":7,"./attributesform":1}],3:[function(t,e,i){var n=g3wsdk.core.utils.inherit,s=g3wsdk.core.utils.base,o=g3wsdk.core.Plugin,r=g3wsdk.gui.GUI,a=g3wsdk.core.ProjectsRegistry,l=t("pluginconfig"),c=t("./pluginservice"),d=t("./panel"),u=function(){s(this),this.name="notes",this.config=null,this.service=null,this.tools=null,this.init=function(){this.setPluginService(c),this.config=this.getPluginConfig(),this.setUpIconUrl(this.config.layers),this.registerPlugin(this.config.gid)&&(r.ready?this.setupGui():r.on("ready",_.bind(this.setupGui,this)),l.customUrlParameters=this.createPluginCustomUrlParameters(),this.service.init(this.config,l))},this.setupGui=function(){var t=r.getComponent("tools"),e=t.getService();this.tools=l.tools(this),this.service.setPluginTools(this.tools),e.addTools(1,"GEONOTES",this.tools)},this.toolsActions={showHideLayer:function(){this.service.showHideLayer(l.layersCode.GEONOTES)},showEditingPanel:function(){var t=new d;this.service.toggleEditing(),r.showPanel(t)}},this.createPluginCustomUrlParameters=function(){var t="&",e=a.getCurrentProject();return t+="project_type="+e.getType()+"&project_id="+e.getId()},this.setUpIconUrl=function(t){_.forEach(t,function(t){l.layers[t.name].iconurl=t.iconurl})},this.setupToolsAction=function(t){_.forEach(t,function(t){})}};n(u,o),function(t){t.init()}(new u)},{"./panel":5,"./pluginservice":7,pluginconfig:6}],4:[function(t,e,i){e.exports='<div class="g3w-iternet-editing-panel">\n  <template v-for="toolbar in editorstoolbars">\n    <div class="panel panel-primary">\n      <div class="panel-heading">\n        <h3 class="panel-title">{{ toolbar.name }}</h3>\n      </div>\n      <div class="panel-body">\n        <template v-for="tool in toolbar.tools">\n          <div class="editbtn" :class="{\'enabled\' : (state.editing.on && editingtoolbtnEnabled(tool)), \'toggled\' : editingtoolbtnToggled(toolbar.layercode, tool.tooltype)}">\n            <img height="30px" width="30px" @click="toggleEditTool(toolbar.layercode, tool.tooltype)" :alt.once="tool.title" :title.once="tool.title" :src.once="resourcesurl+\'images/\'+tool.icon"></img>\n          </div>\n        </template>\n      </div>\n    </div>\n  </template>\n  <div v-show="state.retrievingData" style="color:#ffffff">\n    <!--<button class="btn btn-primary" v-disabled="editingbtnEnabled" :class="{\'btn-success\' : state.editingOn}" @click="toggleEditing">{{ editingbtnlabel }}</button>-->\n    <!--<button class="btn btn-danger" v-disabled="!state.hasEdits" @click="saveEdits">{{ savebtnlabel }}</button>-->\n    <span>Caricamento Dati ... </span><img :src="resourcesurl +\'images/loader.svg\'">\n  </div>\n  <div class="message">\n    {{{ message }}}\n  </div>\n</div>\n'},{}],5:[function(t,e,i){function n(){this.id="geonotes-editing-panel",this.name="Gestione dati GEONOTES",this.internalPanel=new c}var s=g3wsdk.core.utils.resolve,o=g3wsdk.core.utils.inherit,r=g3wsdk.gui.GUI,a=g3wsdk.gui.Panel,l=t("./pluginservice"),c=Vue.extend({template:t("./panel.html"),data:function(){return{state:l.state,resourcesurl:r.getResourcesUrl(),editorstoolbars:[{name:"Geonotes",layercode:l.layerCodes.GEONOTES,tools:[{title:"Aggiungi Geonota",tooltype:"addfeature",icon:"iternetAddPoint.png"},{title:"Sposta Geonota",tooltype:"movefeature",icon:"iternetMovePoint.png"},{title:"Rimuovi Geonota",tooltype:"deletefeature",icon:"iternetDeletePoint.png"},{title:"Edita geonota",tooltype:"editattributes",icon:"editAttributes.png"}]}],savebtnlabel:"Salva"}},methods:{toggleEditing:function(){l.toggleEditing()},saveEdits:function(){l.saveEdits()},toggleEditTool:function(t,e){""!=e&&this.state.editing.on&&l.toggleEditTool(t,e)},editingtoolbtnToggled:function(t,e){return this.state.editing.layerCode==t&&this.state.editing.toolType==e},editingtoolbtnEnabled:function(t){return""!=t.tooltype},onClose:function(){l.stop()}},computed:{editingbtnlabel:function(){return this.state.editing.on?"Termina editing":"Avvia editing"},editingbtnEnabled:function(){return this.state.editing.enabled||this.state.editing.on?"":"disabled"},message:function(){var t="";if(this.state.editing.enabled){if(this.state.editing.toolstep.message){var e=this.state.editing.toolstep.n,i=this.state.editing.toolstep.total,n=this.state.editing.toolstep.message;t='<div style="margin-top:20px">GUIDA STRUMENTO:</div><div><span>['+e+"/"+i+'] </span><span style="color: yellow">'+n+"</span></div>"}}else t='<span style="color: red">Aumentare il livello di zoom per abilitare l\'editing';return t}}});o(n,a);var d=a.prototype;d.onShow=function(t){console.log("onshow");var e=this.internalPanel;return e.$mount().$appendTo(t),s(!0)},d.onClose=function(){console.log("close");var t=this,e=$.Deferred();return l.stop().then(function(){t.internalPanel.$destroy(!0),t.internalPanel=null,e.resolve()}).fail(function(){e.reject()}),e.promise()},e.exports=n},{"./panel.html":4,"./pluginservice":7}],6:[function(t,e,i){function n(t){return n=[{layerName:"note",name:"Geonotes",type:"checkbox",isCheck:!1,action:_.bind(t.toolsActions.showHideLayer,t)},{name:"Edita Geonotes",action:_.bind(t.toolsActions.showEditingPanel,t)}]}var s=t("./editors/geonoteseditor"),o=this.layerCodes={GEONOTES:"note"},r={};r[o.GEONOTES]=s;var a={},l={},c={};l[o.GEONOTES]=function(t){var e=t.iconurl||null;return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,.5],src:e})})},a[o.GEONOTES]={layerCode:o.GEONOTES,vector:null,editor:null,iconurl:null,crs:null,style:new ol.style.Style({image:new ol.style.Icon({anchor:[.5,.5],src:"fake.png"})})},e.exports={layersCode:o,layers:a,layersStyle:l,layersEditingStyle:c,editorClass:r,tools:n}},{"./editors/geonoteseditor":2}],7:[function(e,i,n){function s(){var e=this;this._mapService=null,this._loadDataOnMapViewChangeListener=null,this._currentEditingLayer=null,this._pluginTools=null,this.state={editing:{on:!1,enabled:!1,layerCode:null,toolType:null,startingEditingTool:!1,toolstep:{n:null,total:null,message:null}},retrievingData:!1,hasEdits:!1},this._loader=new l;this.init=function(t,e){var i=this;this.config=t,this._crs=null,this._layers=e.layers,this._editorClass=e.editorClass,this.layerCodes=e.layersCode,this._layersStyle=e.layersStyle,this._layersEditingStyle=e.layersEditingStyle,this._customUrlParameters=e.customUrlParameters||null,this._mapService=a.getComponent("map").getService(),_.forEach(this.config.layers,function(t,e){i._layers[e].infourl=t.infourl,i._layers[e].crs="EPSG:"+t.crs,i.setLayerStyle(e)});var n={layers:this._layers,baseurl:this.config.baseurl,mapService:this._mapService};this._loader.init(n),this._loader.on("loadingvectorlayersstart",function(){i.state.retrievingData=!0}),this._loader.on("loadingvectorlayersend",function(){i.state.retrievingData=!1}),this._loader.on("setmode",function(t){switch(t){case"w":i.state.editing.on=!0,i.emit("editingstarted");break;case"r":i.state.editing.on=!1}}),this._mapService.on("pointerInteractionSet",function(t){var e=i._getCurrentEditingLayer();if(e){var n=e.editor.getActiveTool().instance;n&&!n.ownsInteraction(t)&&i._stopEditingTool()}}),this.state.editing.enabled=!0,_.forEach(this._layers,function(e,n){var s=t.layers[n].id,o=t.layers[n].name,r=i._mapService.getProject().getLayerById(s);r?(e.name=r.getOrigName(),e.id=s):(e.name=o,e.id=s)})},this.setPluginTools=function(t){this._pluginTools=t},this.getPluginTools=function(){return this._pluginTools},this.setLayerStyle=function(t){var e=this._layers[t].iconurl,i={iconurl:e},n=this._layersStyle[t](i);this._layers[t].style=n,this._layersEditingStyle[t]=n},this.getLayerStyle=function(t){return this._layers[t].style},this._toggleCheckBoxPluginTool=function(t){var i=e.getPluginTools();_.forEach(i,function(e,n){_.has(e,"type")&&e.layerName==t&&"checkbox"==e.type&&(i[n].isCheck=!0)})},this.isLayerVisible=function(t){var e=this._layers[t].vector;return e.isVisible()},this.showHideLayer=function(t){var e=this,i=null;this._loader.isReady()?(i=this._layers[t].vector,i.setVisible(!i.isVisible())):this._loader.loadLayers("r",this._customUrlParameters).then(function(){e._addToMap()})},this.stop=function(){var t=$.Deferred();return this.state.editing.on?this._cancelOrSave().then(function(){e._stopEditing(),t.resolve()}).fail(function(){t.reject()}):t.resolve(),t.promise()},this.toggleEditing=function(){var t=$.Deferred();if(this.state.editing.enabled&&!this.state.editing.on)this._startEditing();else if(this.state.editing.on)return this.stop();return t.promise()},this.saveEdits=function(){this._saveWithoutAsk()},this.toggleEditTool=function(t,e){var i=this,n=this._layers[t];if(n){var s=this._getCurrentEditingLayer();s&&t==s.layerCode?e==s.editor.getActiveTool().getType()?this._stopEditingTool():(this._stopEditingTool(),this._startEditingTool(s,e)):s&&s.editor.isStarted()?this._cancelOrSave(2).then(function(){i._stopEditor()&&i._startEditingTool(n,e)}):this._startEditingTool(n,e)}},this.getLayerCodes=function(){return _.values(this.layerCodes)},this._setUpVectorLayer=function(t,e){this._layers[t].vector=e},this._setUpEditor=function(t){var e=this,i={mapService:e._mapService,formClass:c,editingVectorStyle:this._layersEditingStyle[t]},n=this._layers[t].vector,s=new e._editorClass[t](i);s.setVectorLayer(n),s.on("dirty",function(t){e.state.hasEdits=t}),this._layers[t].editor=s},this._startEditing=function(){if(!this.state.editing.on&&!this.state.retrievingData){var e=this;if(this._loader.isReady()){this._loader.setMode("w");var i=this._loader.getVectorLayersCodes();_.forEach(i,function(t){e._loader.lockFeatures(e._layers[t].name).then(function(i){e._setUpEditor(t),e._toggleCheckBoxPluginTool(t)})}),e.state.editing.on=!0}else this._loader.loadLayers("w",this._customUrlParameters).then(function(t){_.forEach(t,function(t){e._setUpEditor(t),e._toggleCheckBoxPluginTool(t)}),e._addToMap()}).fail(function(){a.notify.error(t("could_not_load_vector_layers"))})}},this._stopEditing=function(t){this._stopEditor(t)&&(_.forEach(this._layers,function(t,i){t.vector;t.editor=null,e._unlockLayer(e._layers[i])}),this._updateEditingState(),this._loader.setMode("r"),e._cleanUp(),e.emit("editingstopped"))},this._cleanUp=function(){this._loader.cleanUpLayers()},this._startEditor=function(t){return!!t.editor.start(this)&&(this._setCurrentEditingLayer(t),!0)},this._startEditingTool=function(t,e,i){this.state.startingEditingTool=!0;var n=!0;return t.editor.isStarted()||(n=this._startEditor(t)),n&&t.editor.setTool(e,i)?(this._updateEditingState(),this.state.startingEditingTool=!1,!0):(this.state.startingEditingTool=!1,!1)},this._stopEditor=function(t){var e=!0,i=this._getCurrentEditingLayer();return i&&(e=i.editor.stop(t),e&&this._setCurrentEditingLayer()),e},this._stopEditingTool=function(){var t=!0,e=this._getCurrentEditingLayer();return e&&(t=e.editor.stopTool(),t&&this._updateEditingState()),t},this._saveWithoutAsk=function(){var t=$.Deferred(),e={};_.forEach(this._layers,function(t,i){t.editor.isDirty()&&(e[i]=t.editor)}),this._saveEdits(e).then(function(e){t.resolve()}).fail(function(e){t.reject()})},this._cancelOrSave=function(t){var e=$.Deferred();try{var i=1;t&&(i=t);var n=this,s={};_.forEach(this._layers,function(t,e){t.editor.isDirty()&&(s[e]=t.editor)}),_.keys(s).length?this._askCancelOrSave(i).then(function(t){"save"===t?n._saveEdits(s).then(function(t){e.resolve()}).fail(function(t){e.reject()}):"nosave"==t?e.resolve():"cancel"==t&&e.reject()}):e.resolve()}catch(o){e.reject()}return e.promise()},this._askCancelOrSave=function(t){var e=$.Deferred(),i={SAVE:{label:"Salva",className:"btn-success",callback:function(){e.resolve("save")}},NOSAVE:{label:"Termina senza salvare",className:"btn-danger",callback:function(){e.resolve("nosave")}},CANCEL:{label:"Annulla",className:"btn-primary",callback:function(){e.resolve("cancel")}}};switch(t){case 1:buttons={save:i.SAVE,nosave:i.NOSAVE,cancel:i.CANCEL};break;case 2:buttons={save:i.SAVE,cancel:i.CANCEL}}return a.dialog.dialog({message:"Vuoi salvare definitivamente le modifiche?",title:"Salvataggio modifica",buttons:buttons}),e.promise()},this._saveEdits=function(t){var e=this,i=$.Deferred();return this._sendEdits(t).then(function(n){a.notify.success("I dati sono stati salvati correttamente"),e._commitEdits(t,n),i.resolve()}).fail(function(t){a.notify.error("Errore nel salvataggio sul server"),i.resolve()}),i.promise()},this._sendEdits=function(t){var e=$.Deferred(),i=_.map(t,function(t){return{layername:t.getVectorLayer().name,edits:t.getEditedFeatures()}});return this._postData(i).then(function(t){t.result?e.resolve(t.response):e.reject(t.response)}).fail(function(t){e.reject(t.response)}),e.promise()},this._commitEdits=function(t,e){_.forEach(t,function(t){e&&e["new"]&&_.forEach(e["new"],function(i){var n=i.clientid,s=i.id;t.getEditVectorLayer().setFeatureData(n,s,null,i),_.forEach(e.new_lockids,function(e){t.getVectorLayer().addLockId(e)})}),console.log("editor commit"),t.commit()})},this._undoEdits=function(t){var e=this._getCurrentEditingLayer().layerCode;t[e];this._stopEditing(!0)},this._updateEditingState=function(){var t=this._getCurrentEditingLayer();t?(this.state.editing.layerCode=t.layerCode,this.state.editing.toolType=t.editor.getActiveTool().getType()):(this.state.editing.layerCode=null,this.state.editing.toolType=null),this._updateToolStepsState()},this._updateToolStepsState=function(){var t,e=this,i=this._getCurrentEditingLayer();if(i&&(t=i.editor.getActiveTool()),t&&t.getTool()){var n=t.getTool();n.steps&&(this._setToolStepState(t),n.steps.on("step",function(i,n){e._setToolStepState(t)}),n.steps.on("complete",function(){e._setToolStepState()}))}else e._setToolStepState()},this._setToolStepState=function(t){var e,i,n;if(_.isUndefined(t))e=null,i=null,n=null;else{var s=t.getTool(),o=toolStepsMessages[t.getType()];e=s.steps.currentStepIndex(),i=s.steps.totalSteps(),n=o[e],_.isUndefined(n)&&(e=null,i=null,n=null)}this.state.editing.toolstep.n=e+1,this.state.editing.toolstep.total=i,this.state.editing.toolstep.message=n},this._getCurrentEditingLayer=function(){return this._currentEditingLayer},this._setCurrentEditingLayer=function(t){t?this._currentEditingLayer=t:this._currentEditingLayer=null},this._addToMap=function(){var t=this,e=this._mapService.viewer.map,i=this.getLayerCodes();_.forEach(i,function(i){t._layers[i].vector.addToMap(e)}),this._loadDataOnMapViewChangeListener||(this._loadDataOnMapViewChangeListener=this._mapService.onafter("setMapView",function(){t.state.editing.on&&t.state.editing.enabled&&t._loader.loadAllVectorsData()}))},this._postData=function(t){var e=this;if(t.length>1)return this._postBatchData(t);var i=t[0].layername,n=t[0].edits,s=JSON.stringify(n);return $.post({url:this.config.baseurl+i+"/?"+e._customUrlParameters,data:s,contentType:"application/json"})},this._postBatchData=function(t){var e={};_.forEach(t,function(t){e[t.layername]=t.edits});var i=JSON.stringify(e);return $.post({url:this.config.baseurl,data:i,contentType:"application/json"})},this._unlock=function(){var t=this.getLayerCodes();_.map(t,function(t){return e._unlockLayer(e._layers[t])})},this._lockLayer=function(t){var e=this._loader._vectorLayersData[t.name].featurelocks,i=JSON.stringify(e);return $.post({url:this.config.baseurl+t.name+"/?lock"+this._customUrlParameters,data:i,contentType:"application/json"})},this._lockLayers=function(){var t=this.getLayerCodes();_.map(t,function(t){return e._lockLayer(e._layers[t])})},this._unlockLayer=function(t){$.get(this.config.baseurl+t.name+"/?unlock"+this._customUrlParameters)},this.getLoader=function(){return this._loader}}var o=g3wsdk.core.utils.inherit,r=g3wsdk.core.G3WObject,a=g3wsdk.gui.GUI,l=g3wsdk.core.VectorLayerLoader,c=e("./editors/attributesform");o(s,r),i.exports=new s},{"./editors/attributesform":1}]},{},[3]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1aWxkLmpzIl0sIm5hbWVzIjpbImUiLCJ0IiwibiIsInIiLCJzIiwibyIsInUiLCJhIiwicmVxdWlyZSIsImkiLCJmIiwiRXJyb3IiLCJjb2RlIiwibCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIkdlb25vdGVGb3JtIiwib3B0aW9ucyIsImJhc2UiLCJ0aGlzIiwiX2Zvcm1QYW5lbCIsIkdlb25vdGVGb3JtUGFuZWwiLCJpbmhlcml0IiwiZzN3c2RrIiwiY29yZSIsInV0aWxzIiwiRm9ybVBhbmVsIiwiZ3VpIiwiRm9ybSIsImV4dGVuZCIsIjIiLCJHZW9ub3Rlc0VkaXRvciIsImZvcm1Ub29scyIsInNhdmVFZGl0c1RvRGF0YWJhc2UiLCJQbHVnaW5TZXJ2aWNlIiwic2F2ZUVkaXRzIiwib25hZnRlciIsIkVkaXRvciIsIi4uL3BsdWdpbnNlcnZpY2UiLCIuL2F0dHJpYnV0ZXNmb3JtIiwiMyIsIlBsdWdpbiIsIkdVSSIsIlByb2plY3RzUmVnaXN0cnkiLCJwbHVnaW5Db25maWciLCJTZXJ2aWNlIiwiRWRpdGluZ1BhbmVsIiwiX1BsdWdpbiIsIm5hbWUiLCJjb25maWciLCJzZXJ2aWNlIiwidG9vbHMiLCJpbml0Iiwic2V0UGx1Z2luU2VydmljZSIsImdldFBsdWdpbkNvbmZpZyIsInNldFVwSWNvblVybCIsImxheWVycyIsInJlZ2lzdGVyUGx1Z2luIiwiZ2lkIiwicmVhZHkiLCJzZXR1cEd1aSIsIm9uIiwiXyIsImJpbmQiLCJjdXN0b21VcmxQYXJhbWV0ZXJzIiwiY3JlYXRlUGx1Z2luQ3VzdG9tVXJsUGFyYW1ldGVycyIsInRvb2xzQ29tcG9uZW50IiwiZ2V0Q29tcG9uZW50IiwidG9vbHNTZXJ2aWNlIiwiZ2V0U2VydmljZSIsInNldFBsdWdpblRvb2xzIiwiYWRkVG9vbHMiLCJ0b29sc0FjdGlvbnMiLCJzaG93SGlkZUxheWVyIiwibGF5ZXJzQ29kZSIsIkdFT05PVEVTIiwic2hvd0VkaXRpbmdQYW5lbCIsInBhbmVsIiwidG9nZ2xlRWRpdGluZyIsInNob3dQYW5lbCIsImN1cnJlbnRQcm9qZWN0IiwiZ2V0Q3VycmVudFByb2plY3QiLCJnZXRUeXBlIiwiZ2V0SWQiLCJsYXllcnNDb25maWciLCJmb3JFYWNoIiwibGF5ZXJDb25maWciLCJpY29udXJsIiwic2V0dXBUb29sc0FjdGlvbiIsInRvb2wiLCJwbHVnaW4iLCIuL3BhbmVsIiwiLi9wbHVnaW5zZXJ2aWNlIiwicGx1Z2luY29uZmlnIiwiNCIsIjUiLCJFZGl0b3JQYW5lbCIsImlkIiwiaW50ZXJuYWxQYW5lbCIsIlBhbmVsQ29tcG9uZW50IiwicmVzb2x2ZWRWYWx1ZSIsInJlc29sdmUiLCJQYW5lbCIsIlZ1ZSIsInRlbXBsYXRlIiwiZGF0YSIsInN0YXRlIiwicmVzb3VyY2VzdXJsIiwiZ2V0UmVzb3VyY2VzVXJsIiwiZWRpdG9yc3Rvb2xiYXJzIiwibGF5ZXJjb2RlIiwibGF5ZXJDb2RlcyIsInRpdGxlIiwidG9vbHR5cGUiLCJpY29uIiwic2F2ZWJ0bmxhYmVsIiwibWV0aG9kcyIsInRvZ2dsZUVkaXRUb29sIiwibGF5ZXJDb2RlIiwidG9vbFR5cGUiLCJlZGl0aW5nIiwiZWRpdGluZ3Rvb2xidG5Ub2dnbGVkIiwiZWRpdGluZ3Rvb2xidG5FbmFibGVkIiwib25DbG9zZSIsInN0b3AiLCJjb21wdXRlZCIsImVkaXRpbmdidG5sYWJlbCIsImVkaXRpbmdidG5FbmFibGVkIiwiZW5hYmxlZCIsIm1lc3NhZ2UiLCJ0b29sc3RlcCIsInRvdGFsIiwic3RlcG1lc3NhZ2UiLCJwcm90byIsInByb3RvdHlwZSIsIm9uU2hvdyIsImNvbnRhaW5lciIsImNvbnNvbGUiLCJsb2ciLCIkbW91bnQiLCIkYXBwZW5kVG8iLCJzZWxmIiwiZGVmZXJyZWQiLCIkIiwiRGVmZXJyZWQiLCJ0aGVuIiwiJGRlc3Ryb3kiLCJmYWlsIiwicmVqZWN0IiwicHJvbWlzZSIsIi4vcGFuZWwuaHRtbCIsIjYiLCJsYXllck5hbWUiLCJ0eXBlIiwiaXNDaGVjayIsImFjdGlvbiIsImVkaXRvckNsYXNzIiwibGF5ZXJzU3R5bGUiLCJsYXllcnNFZGl0aW5nU3R5bGUiLCJzdHlsZUNvbmZpZyIsIm9sIiwic3R5bGUiLCJTdHlsZSIsImltYWdlIiwiSWNvbiIsImFuY2hvciIsInNyYyIsInZlY3RvciIsImVkaXRvciIsImNycyIsIi4vZWRpdG9ycy9nZW9ub3Rlc2VkaXRvciIsIjciLCJHZW9ub3Rlc1NlcnZpY2UiLCJfbWFwU2VydmljZSIsIl9sb2FkRGF0YU9uTWFwVmlld0NoYW5nZUxpc3RlbmVyIiwiX2N1cnJlbnRFZGl0aW5nTGF5ZXIiLCJfcGx1Z2luVG9vbHMiLCJzdGFydGluZ0VkaXRpbmdUb29sIiwicmV0cmlldmluZ0RhdGEiLCJoYXNFZGl0cyIsIl9sb2FkZXIiLCJWZWN0b3JMb2FkZXJMYXllciIsIl9jcnMiLCJfbGF5ZXJzIiwiX2VkaXRvckNsYXNzIiwiX2xheWVyc1N0eWxlIiwiX2xheWVyc0VkaXRpbmdTdHlsZSIsIl9jdXN0b21VcmxQYXJhbWV0ZXJzIiwiaW5mb3VybCIsInNldExheWVyU3R5bGUiLCJvcHRpb25zX2xvYWRlciIsImJhc2V1cmwiLCJtYXBTZXJ2aWNlIiwibW9kZSIsImVtaXQiLCJpbnRlcmFjdGlvbiIsImN1cnJlbnRFZGl0aW5nTGF5ZXIiLCJfZ2V0Q3VycmVudEVkaXRpbmdMYXllciIsImFjdGl2ZVRvb2wiLCJnZXRBY3RpdmVUb29sIiwiaW5zdGFuY2UiLCJvd25zSW50ZXJhY3Rpb24iLCJfc3RvcEVkaXRpbmdUb29sIiwiTGF5ZXIiLCJsYXllcklkIiwibGF5ZXIiLCJnZXRQcm9qZWN0IiwiZ2V0TGF5ZXJCeUlkIiwiZ2V0T3JpZ05hbWUiLCJnZXRQbHVnaW5Ub29scyIsInN0eWxlT3B0aW9ucyIsImdldExheWVyU3R5bGUiLCJfdG9nZ2xlQ2hlY2tCb3hQbHVnaW5Ub29sIiwicGx1Z2luVG9vbHMiLCJwbHVnaW5Ub29sIiwiaW5kZXgiLCJoYXMiLCJpc0xheWVyVmlzaWJsZSIsInZlY3RvckxheWVyIiwiaXNWaXNpYmxlIiwiaXNSZWFkeSIsInNldFZpc2libGUiLCJsb2FkTGF5ZXJzIiwiX2FkZFRvTWFwIiwiX2NhbmNlbE9yU2F2ZSIsIl9zdG9wRWRpdGluZyIsIl9zdGFydEVkaXRpbmciLCJfc2F2ZVdpdGhvdXRBc2siLCJfc3RhcnRFZGl0aW5nVG9vbCIsImlzU3RhcnRlZCIsIl9zdG9wRWRpdG9yIiwiZ2V0TGF5ZXJDb2RlcyIsInZhbHVlcyIsIl9zZXRVcFZlY3RvckxheWVyIiwiX3NldFVwRWRpdG9yIiwib3B0aW9uc19lZGl0b3IiLCJmb3JtQ2xhc3MiLCJGb3JtQ2xhc3MiLCJlZGl0aW5nVmVjdG9yU3R5bGUiLCJzZXRWZWN0b3JMYXllciIsImRpcnR5Iiwic2V0TW9kZSIsInZlY3RvckxheWVyc0NvZGVzIiwiZ2V0VmVjdG9yTGF5ZXJzQ29kZXMiLCJsb2NrRmVhdHVyZXMiLCJub3RpZnkiLCJlcnJvciIsInJlc2V0IiwiX3VubG9ja0xheWVyIiwiX3VwZGF0ZUVkaXRpbmdTdGF0ZSIsIl9jbGVhblVwIiwiY2xlYW5VcExheWVycyIsIl9zdGFydEVkaXRvciIsInN0YXJ0IiwiX3NldEN1cnJlbnRFZGl0aW5nTGF5ZXIiLCJjYW5TdGFydFRvb2wiLCJzZXRUb29sIiwicmV0Iiwic3RvcFRvb2wiLCJkaXJ0eUVkaXRvcnMiLCJpc0RpcnR5IiwiX3NhdmVFZGl0cyIsInJlc3VsdCIsIl9hc2tUeXBlIiwia2V5cyIsIl9hc2tDYW5jZWxPclNhdmUiLCJidXR0b25UeXBlcyIsIlNBVkUiLCJsYWJlbCIsImNsYXNzTmFtZSIsImNhbGxiYWNrIiwiTk9TQVZFIiwiQ0FOQ0VMIiwiYnV0dG9ucyIsInNhdmUiLCJub3NhdmUiLCJjYW5jZWwiLCJkaWFsb2ciLCJfc2VuZEVkaXRzIiwicmVzcG9uc2UiLCJzdWNjZXNzIiwiX2NvbW1pdEVkaXRzIiwiZXJyb3JzIiwiZWRpdHNUb1B1c2giLCJtYXAiLCJsYXllcm5hbWUiLCJnZXRWZWN0b3JMYXllciIsImVkaXRzIiwiZ2V0RWRpdGVkRmVhdHVyZXMiLCJfcG9zdERhdGEiLCJyZXR1cm5lZCIsImVkaXRvcnMiLCJ1cGRhdGVkRmVhdHVyZUF0dHJpYnV0ZXMiLCJvbGRmaWQiLCJjbGllbnRpZCIsImZpZCIsImdldEVkaXRWZWN0b3JMYXllciIsInNldEZlYXR1cmVEYXRhIiwibmV3X2xvY2tpZHMiLCJuZXdsb2NrSWQiLCJhZGRMb2NrSWQiLCJjb21taXQiLCJfdW5kb0VkaXRzIiwiY3VycmVudEVkaXRpbmdMYXllckNvZGUiLCJfdXBkYXRlVG9vbFN0ZXBzU3RhdGUiLCJnZXRUb29sIiwidG9vbEluc3RhbmNlIiwic3RlcHMiLCJfc2V0VG9vbFN0ZXBTdGF0ZSIsInN0ZXAiLCJpc1VuZGVmaW5lZCIsIm1lc3NhZ2VzIiwidG9vbFN0ZXBzTWVzc2FnZXMiLCJjdXJyZW50U3RlcEluZGV4IiwidG90YWxTdGVwcyIsInZpZXdlciIsImFkZFRvTWFwIiwibG9hZEFsbFZlY3RvcnNEYXRhIiwiX3Bvc3RCYXRjaERhdGEiLCJqc29uRGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwb3N0IiwidXJsIiwiY29udGVudFR5cGUiLCJtdWx0aUVkaXRzVG9QdXNoIiwiX3VubG9jayIsIl9sb2NrTGF5ZXIiLCJmZWF0dXJlTG9ja3MiLCJfdmVjdG9yTGF5ZXJzRGF0YSIsImZlYXR1cmVsb2NrcyIsIl9sb2NrTGF5ZXJzIiwiZ2V0IiwiZ2V0TG9hZGVyIiwiRzNXT2JqZWN0IiwiVmVjdG9yTGF5ZXJMb2FkZXIiLCIuL2VkaXRvcnMvYXR0cmlidXRlc2Zvcm0iXSwibWFwcGluZ3MiOiJDQUFBLFFBQVVBLEdBQUVDLEVBQUVDLEVBQUVDLEdBQUcsUUFBU0MsR0FBRUMsRUFBRUMsR0FBRyxJQUFJSixFQUFFRyxHQUFHLENBQUMsSUFBSUosRUFBRUksR0FBRyxDQUFDLEdBQUlFLEdBQWtCLGtCQUFUQyxVQUFxQkEsT0FBUSxLQUFJRixHQUFHQyxFQUFFLE1BQU9BLEdBQUVGLEdBQUUsRUFBSSxJQUFHSSxFQUFFLE1BQU9BLEdBQUVKLEdBQUUsRUFBSSxJQUFJSyxHQUFFLEdBQUlDLE9BQU0sdUJBQXVCTixFQUFFLElB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ZXJULEtBQUtpSyxRQUFRcUosa0JBQWtCblAsRUFBWXRDLE1BQU0wUixhQUNoRVgsRUFBV0MsS0FBS0MsVUFBVU8sRUFDOUIsT0FBT3pMLEdBQUVtTCxNQUNQQyxJQUFLaFQsS0FBSzhCLE9BQU84SSxRQUFRekcsRUFBWXRDLEtBQUssU0FBVzdCLEtBQUt3SyxxQkFDMURsRixLQUFNc04sRUFDTkssWUFBYSxzQkFJakJqVCxLQUFLd1QsWUFBYyxXQUNqQixHQUFJNU4sR0FBYTVGLEtBQUtvTixlQUV0QnpLLEdBQUU4TixJQUFJN0ssRUFBVyxTQUFTTyxHQUN4QixNQUFPdUIsR0FBSzBMLFdBQVcxTCxFQUFLMEMsUUFBUWpFLE9BSXhDbkcsS0FBS3FPLGFBQWUsU0FBU2xLLEdBQzNCeUQsRUFBRTZMLElBQUl6VCxLQUFLOEIsT0FBTzhJLFFBQVF6RyxFQUFZdEMsS0FBSyxXQUFhN0IsS0FBS3dLLHVCQUcvRHhLLEtBQUswVCxVQUFZLFdBQ2YsTUFBTzFULE1BQUtpSyxTQWx4QmhCLEdBQUk5SixHQUFVQyxPQUFPQyxLQUFLQyxNQUFNSCxRQUM1QndULEVBQVl2VCxPQUFPQyxLQUFLc1QsVUFDeEJwUyxFQUFNbkIsT0FBT0ksSUFBSWUsSUFDakIySSxFQUFvQjlKLE9BQU9DLEtBQUt1VCxrQkFDaENsRyxFQUFZeE8sRUFBUSwyQkFreEJ4QmlCLEdBQVFzSixFQUFpQmtLLEdBQ3pCL1QsRUFBT0osUUFBVSxHQUFJaUssS0FDbEJvSywyQkFBMkIsU0FBUyIsImZpbGUiOiJidWlsZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBpbmhlcml0ID0gZzN3c2RrLmNvcmUudXRpbHMuaW5oZXJpdDtcbnZhciBiYXNlID0gZzN3c2RrLmNvcmUudXRpbHMuYmFzZTtcbnZhciBGb3JtUGFuZWwgPSBnM3dzZGsuZ3VpLkZvcm1QYW5lbDtcbnZhciBGb3JtID0gZzN3c2RrLmd1aS5Gb3JtO1xuXG52YXIgR2Vvbm90ZUZvcm1QYW5lbCA9IEZvcm1QYW5lbC5leHRlbmQoe1xuICAvL3RlbXBsYXRlOiByZXF1aXJlKCcuL2F0dHJpYnV0ZXNmb3JtLmh0bWwnKVxufSk7XG5cbmZ1bmN0aW9uIEdlb25vdGVGb3JtKG9wdGlvbnMpe1xuICBiYXNlKHRoaXMsb3B0aW9ucyk7XG4gIHRoaXMuX2Zvcm1QYW5lbCA9IEdlb25vdGVGb3JtUGFuZWw7XG59XG5pbmhlcml0KEdlb25vdGVGb3JtLEZvcm0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdlb25vdGVGb3JtO1xuXG59LHt9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBpbmhlcml0ID0gZzN3c2RrLmNvcmUudXRpbHMuaW5oZXJpdDtcbnZhciBiYXNlID0gZzN3c2RrLmNvcmUudXRpbHMuYmFzZTtcbnZhciBFZGl0b3IgPSBnM3dzZGsuY29yZS5FZGl0b3I7XG52YXIgUGx1Z2luU2VydmljZSA9IHJlcXVpcmUoJy4uL3BsdWdpbnNlcnZpY2UnKTtcbnZhciBGb3JtID0gcmVxdWlyZSgnLi9hdHRyaWJ1dGVzZm9ybScpO1xudmFyIGZvcm0gPSBudWxsOyAvLyBicnV0dG8gbWEgZGV2byB0ZW5lcmxvIGVzdGVybm8gc2VubsOyIHNpIGNyZWEgdW4gY2xpY28gZGkgcmlmZXJpbWVudGkgY2hlIG1hbmRhIGluIHBhbGxhIFZ1ZVxuXG5cbmZ1bmN0aW9uIEdlb25vdGVzRWRpdG9yKG9wdGlvbnMpIHtcblxuICAvLyBpbiBxdWVzdG8gbW9kbyBwYXNzaWFtbyBpbCBtYXBzZXJ2aWNlIGNvbWUgYXJnb21lbnRvIGFsIHN1cGVyY2xhc3MgKGVkaXRvcilcbiAgLy8gZGkgaXRlcm5ldGVkaXRvciBpbiBtb2RvIGRhIGFzc2VnbmFyYWUgYW5jaGUgYSBpdGVybmV0ZWRpdG9yIGlsIG1hcHNlcnZlaWNlIGNoZSB4c2Vydmlyw6AgYWQgZXNlbXBpbyBhZCBhZ2dpdW5nZXJlXG4gIC8vIGwnaW50ZXJhY3Rpb24gYWxsYSBtYXBwYSBxdWFuZG8gdmllbmUgY2xpY2NhdG8gc3UgdW4gdG9vbFxuICBvcHRpb25zLmZvcm1Ub29scyA9IFtdO1xuICBiYXNlKHRoaXMsIG9wdGlvbnMpO1xuICB2YXIgc2F2ZUVkaXRzVG9EYXRhYmFzZSA9IGZ1bmN0aW9uKCkge1xuICAgIFBsdWdpblNlcnZpY2Uuc2F2ZUVkaXRzKCk7XG4gIH07XG4gIC8vdGhpcy5fc2F2ZUVkaXRzID0gXy5iaW5kKFBsdWdpblNlcnZpY2Uuc2F2ZUVkaXRzLCBQbHVnaW5TZXJ2aWNlKTtcbiAgLy8gYXByZSBmb3JtIGF0dHJpYnV0aSBwZXIgaSAgbnNlcmltZW50b1xuXG4gIHRoaXMub25hZnRlcignYWRkRmVhdHVyZScsIHNhdmVFZGl0c1RvRGF0YWJhc2UpO1xuICB0aGlzLm9uYWZ0ZXIoJ2RlbGV0ZUZlYXR1cmUnLCBzYXZlRWRpdHNUb0RhdGFiYXNlKTtcbiAgdGhpcy5vbmFmdGVyKCdtb3ZlRmVhdHVyZScsIHNhdmVFZGl0c1RvRGF0YWJhc2UpO1xuICB0aGlzLm9uYWZ0ZXIoJ3BpY2tGZWF0dXJlJywgc2F2ZUVkaXRzVG9EYXRhYmFzZSk7XG5cbiAgLy8gYXByZSBmb3JtIGF0dHJpYnV0aSBwZXIgaW5zZXJpbWVudG9cbn1cblxuaW5oZXJpdChHZW9ub3Rlc0VkaXRvciwgRWRpdG9yKTtcblxubW9kdWxlLmV4cG9ydHMgPSBHZW9ub3Rlc0VkaXRvcjtcbn0se1wiLi4vcGx1Z2luc2VydmljZVwiOjcsXCIuL2F0dHJpYnV0ZXNmb3JtXCI6MX1dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy8gU0RLIC8vL1xudmFyIGluaGVyaXQgPSBnM3dzZGsuY29yZS51dGlscy5pbmhlcml0O1xudmFyIGJhc2UgPSBnM3dzZGsuY29yZS51dGlscy5iYXNlO1xudmFyIFBsdWdpbiA9IGczd3Nkay5jb3JlLlBsdWdpbjtcbnZhciBHVUkgPSBnM3dzZGsuZ3VpLkdVSTtcbnZhciBQcm9qZWN0c1JlZ2lzdHJ5ID0gZzN3c2RrLmNvcmUuUHJvamVjdHNSZWdpc3RyeTtcbi8vLyBQTFVHSU4gLy9cbnZhciBwbHVnaW5Db25maWcgPSByZXF1aXJlKCdwbHVnaW5jb25maWcnKTtcbnZhciBTZXJ2aWNlID0gcmVxdWlyZSgnLi9wbHVnaW5zZXJ2aWNlJyk7XG52YXIgRWRpdGluZ1BhbmVsID0gcmVxdWlyZSgnLi9wYW5lbCcpO1xuXG52YXIgX1BsdWdpbiA9IGZ1bmN0aW9uKCkge1xuXG4gIGJhc2UodGhpcyk7XG4gIHRoaXMubmFtZSA9ICdub3Rlcyc7XG4gIHRoaXMuY29uZmlnID0gbnVsbDtcbiAgdGhpcy5zZXJ2aWNlID0gbnVsbDtcbiAgdGhpcy50b29scyA9IG51bGw7XG4gIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvL3NldHRvIGlsIHNlcnZpemlvXG4gICAgdGhpcy5zZXRQbHVnaW5TZXJ2aWNlKFNlcnZpY2UpO1xuICAgIC8vcmVjdXBlcm8gY29uZmlndXJhemlvbmUgZGVsIHBsdWdpblxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5nZXRQbHVnaW5Db25maWcoKTtcbiAgICB0aGlzLnNldFVwSWNvblVybCh0aGlzLmNvbmZpZy5sYXllcnMpO1xuICAgIC8vcmVnaXRybyBpbCBwbHVnaW5cbiAgICBpZiAodGhpcy5yZWdpc3RlclBsdWdpbih0aGlzLmNvbmZpZy5naWQpKSB7XG4gICAgICBpZiAoIUdVSS5yZWFkeSkge1xuICAgICAgICBHVUkub24oJ3JlYWR5JywgXy5iaW5kKHRoaXMuc2V0dXBHdWksIHRoaXMpKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLnNldHVwR3VpKCk7XG4gICAgICB9XG4gICAgICAvL2luaXppYWxpenpvIGlsIHNlcnZpemlvLiBJbCBzZXJ2aXppbyDDqCBsJ2lzdGFuemEgZGVsbGEgY2xhc3NlIHNlcnZpemlvXG4gICAgICBwbHVnaW5Db25maWcuY3VzdG9tVXJsUGFyYW1ldGVycyA9IHRoaXMuY3JlYXRlUGx1Z2luQ3VzdG9tVXJsUGFyYW1ldGVycygpO1xuICAgICAgdGhpcy5zZXJ2aWNlLmluaXQodGhpcy5jb25maWcsIHBsdWdpbkNvbmZpZyk7XG4gICAgfVxuICB9O1xuICAvLyBmdW56aW9uZSBjaGUgdW5hIHZvbHRhIGNoZSBsYSBHVUkgaGEgZW1lc3NvIGwnZXZlbnRvICdyZWFkeSdcbiAgLy8gc2VydmUgYSBtb250YXJlIGkgY29tcG9lbnRpIGRlbCBwbHVnaW4gc3VsbGEgc2lkZWJhclxuICB0aGlzLnNldHVwR3VpID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB0b29sc0NvbXBvbmVudCA9IEdVSS5nZXRDb21wb25lbnQoJ3Rvb2xzJyk7XG4gICAgdmFyIHRvb2xzU2VydmljZSA9IHRvb2xzQ29tcG9uZW50LmdldFNlcnZpY2UoKTtcbiAgICB0aGlzLnRvb2xzID0gcGx1Z2luQ29uZmlnLnRvb2xzKHRoaXMpO1xuICAgIHRoaXMuc2VydmljZS5zZXRQbHVnaW5Ub29scyh0aGlzLnRvb2xzKTtcbiAgICB0b29sc1NlcnZpY2UuYWRkVG9vbHMoMSAsJ0dFT05PVEVTJywgdGhpcy50b29scylcbiAgfTtcbiAgLy8gYXppb25pIGNoZSBzb25vIGxlZ2F0aSBhaSB0b29sc1xuICB0aGlzLnRvb2xzQWN0aW9ucyA9IHtcbiAgICBzaG93SGlkZUxheWVyOiAgZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnNlcnZpY2Uuc2hvd0hpZGVMYXllcihwbHVnaW5Db25maWcubGF5ZXJzQ29kZS5HRU9OT1RFUyk7XG4gICAgfSxcbiAgICBzaG93RWRpdGluZ1BhbmVsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYW5lbCA9IG5ldyBFZGl0aW5nUGFuZWwoKTtcbiAgICAgIHRoaXMuc2VydmljZS50b2dnbGVFZGl0aW5nKCk7XG4gICAgICBHVUkuc2hvd1BhbmVsKHBhbmVsKTtcbiAgICB9XG4gIH07XG5cbiAgLy9zZXR1cFBsdWdpbkN1c3RvbVBhcmFtZXRlcnNcbiAgdGhpcy5jcmVhdGVQbHVnaW5DdXN0b21VcmxQYXJhbWV0ZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGN1c3RvbVVybFBhcmFtZXRlcnM9JyYnO1xuICAgIHZhciBjdXJyZW50UHJvamVjdCA9IFByb2plY3RzUmVnaXN0cnkuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBjdXN0b21VcmxQYXJhbWV0ZXJzKz0ncHJvamVjdF90eXBlPScrY3VycmVudFByb2plY3QuZ2V0VHlwZSgpKycmcHJvamVjdF9pZD0nK2N1cnJlbnRQcm9qZWN0LmdldElkKCk7XG4gICAgcmV0dXJuIGN1c3RvbVVybFBhcmFtZXRlcnNcbiAgfTtcbiAgLy8gc2V0dXAgaWNvblVybCBmb3IgTGF5ZXJcbiAgdGhpcy5zZXRVcEljb25VcmwgPSBmdW5jdGlvbihsYXllcnNDb25maWcpIHtcbiAgICBfLmZvckVhY2gobGF5ZXJzQ29uZmlnLCBmdW5jdGlvbihsYXllckNvbmZpZykge1xuICAgICAgcGx1Z2luQ29uZmlnLmxheWVyc1tsYXllckNvbmZpZy5uYW1lXS5pY29udXJsID0gbGF5ZXJDb25maWcuaWNvbnVybDtcbiAgICB9KVxuICB9O1xuXG4gIHRoaXMuc2V0dXBUb29sc0FjdGlvbiA9IGZ1bmN0aW9uKHRvb2xzKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIF8uZm9yRWFjaCh0b29scywgZnVuY3Rpb24odG9vbCl7XG4gICAgICAvL1RPRE9cbiAgICB9KVxuICB9XG59O1xuXG5pbmhlcml0KF9QbHVnaW4sIFBsdWdpbik7XG5cbihmdW5jdGlvbihwbHVnaW4pe1xuICBwbHVnaW4uaW5pdCgpO1xufSkobmV3IF9QbHVnaW4pO1xuXG5cblxuXG59LHtcIi4vcGFuZWxcIjo1LFwiLi9wbHVnaW5zZXJ2aWNlXCI6NyxcInBsdWdpbmNvbmZpZ1wiOjZ9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJnM3ctaXRlcm5ldC1lZGl0aW5nLXBhbmVsXFxcIj5cXG4gIDx0ZW1wbGF0ZSB2LWZvcj1cXFwidG9vbGJhciBpbiBlZGl0b3JzdG9vbGJhcnNcXFwiPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJwYW5lbCBwYW5lbC1wcmltYXJ5XFxcIj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJwYW5lbC1oZWFkaW5nXFxcIj5cXG4gICAgICAgIDxoMyBjbGFzcz1cXFwicGFuZWwtdGl0bGVcXFwiPnt7IHRvb2xiYXIubmFtZSB9fTwvaDM+XFxuICAgICAgPC9kaXY+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwicGFuZWwtYm9keVxcXCI+XFxuICAgICAgICA8dGVtcGxhdGUgdi1mb3I9XFxcInRvb2wgaW4gdG9vbGJhci50b29sc1xcXCI+XFxuICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVkaXRidG5cXFwiIDpjbGFzcz1cXFwieydlbmFibGVkJyA6IChzdGF0ZS5lZGl0aW5nLm9uICYmIGVkaXRpbmd0b29sYnRuRW5hYmxlZCh0b29sKSksICd0b2dnbGVkJyA6IGVkaXRpbmd0b29sYnRuVG9nZ2xlZCh0b29sYmFyLmxheWVyY29kZSwgdG9vbC50b29sdHlwZSl9XFxcIj5cXG4gICAgICAgICAgICA8aW1nIGhlaWdodD1cXFwiMzBweFxcXCIgd2lkdGg9XFxcIjMwcHhcXFwiIEBjbGljaz1cXFwidG9nZ2xlRWRpdFRvb2wodG9vbGJhci5sYXllcmNvZGUsIHRvb2wudG9vbHR5cGUpXFxcIiA6YWx0Lm9uY2U9XFxcInRvb2wudGl0bGVcXFwiIDp0aXRsZS5vbmNlPVxcXCJ0b29sLnRpdGxlXFxcIiA6c3JjLm9uY2U9XFxcInJlc291cmNlc3VybCsnaW1hZ2VzLycrdG9vbC5pY29uXFxcIj48L2ltZz5cXG4gICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L3RlbXBsYXRlPlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gIDwvdGVtcGxhdGU+XFxuICA8ZGl2IHYtc2hvdz1cXFwic3RhdGUucmV0cmlldmluZ0RhdGFcXFwiIHN0eWxlPVxcXCJjb2xvcjojZmZmZmZmXFxcIj5cXG4gICAgPCEtLTxidXR0b24gY2xhc3M9XFxcImJ0biBidG4tcHJpbWFyeVxcXCIgdi1kaXNhYmxlZD1cXFwiZWRpdGluZ2J0bkVuYWJsZWRcXFwiIDpjbGFzcz1cXFwieydidG4tc3VjY2VzcycgOiBzdGF0ZS5lZGl0aW5nT259XFxcIiBAY2xpY2s9XFxcInRvZ2dsZUVkaXRpbmdcXFwiPnt7IGVkaXRpbmdidG5sYWJlbCB9fTwvYnV0dG9uPi0tPlxcbiAgICA8IS0tPGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1kYW5nZXJcXFwiIHYtZGlzYWJsZWQ9XFxcIiFzdGF0ZS5oYXNFZGl0c1xcXCIgQGNsaWNrPVxcXCJzYXZlRWRpdHNcXFwiPnt7IHNhdmVidG5sYWJlbCB9fTwvYnV0dG9uPi0tPlxcbiAgICA8c3Bhbj5DYXJpY2FtZW50byBEYXRpIC4uLiA8L3NwYW4+PGltZyA6c3JjPVxcXCJyZXNvdXJjZXN1cmwgKydpbWFnZXMvbG9hZGVyLnN2ZydcXFwiPlxcbiAgPC9kaXY+XFxuICA8ZGl2IGNsYXNzPVxcXCJtZXNzYWdlXFxcIj5cXG4gICAge3t7IG1lc3NhZ2UgfX19XFxuICA8L2Rpdj5cXG48L2Rpdj5cXG5cIjtcblxufSx7fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgcmVzb2x2ZWRWYWx1ZSA9IGczd3Nkay5jb3JlLnV0aWxzLnJlc29sdmU7XG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgR1VJID0gZzN3c2RrLmd1aS5HVUk7XG4vLyBiYXNlIGNsYXNzIFBhbmVsXG52YXIgUGFuZWwgPSAgZzN3c2RrLmd1aS5QYW5lbDtcbnZhciBTZXJ2aWNlID0gcmVxdWlyZSgnLi9wbHVnaW5zZXJ2aWNlJyk7XG5cbnZhciBQYW5lbENvbXBvbmVudCA9IFZ1ZS5leHRlbmQoe1xuICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9wYW5lbC5odG1sJyksXG4gIGRhdGE6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0ZTogU2VydmljZS5zdGF0ZSxcbiAgICAgIHJlc291cmNlc3VybDogR1VJLmdldFJlc291cmNlc1VybCgpLFxuICAgICAgZWRpdG9yc3Rvb2xiYXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiBcIkdlb25vdGVzXCIsXG4gICAgICAgICAgbGF5ZXJjb2RlOiBTZXJ2aWNlLmxheWVyQ29kZXMuR0VPTk9URVMsXG4gICAgICAgICAgdG9vbHM6W1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJBZ2dpdW5naSBHZW9ub3RhXCIsXG4gICAgICAgICAgICAgIC8vIHRvb2x0eXBlIMOoIGwnYXR0cmlidXRvIGNoZSBzZXJ2ZXIgcGVyIHNjZWdsaWVyZSBpbCB0aXBvIGRpIHRvb2xcbiAgICAgICAgICAgICAgLy8gZGVsbCdlZGl0b3IgZ2VuZXJhbGUgY2hlIGRvdnLDoCBlc3NlcmUgaW1wb3N0YXRvXG4gICAgICAgICAgICAgIHRvb2x0eXBlOiAnYWRkZmVhdHVyZScsXG4gICAgICAgICAgICAgIGljb246ICdpdGVybmV0QWRkUG9pbnQucG5nJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiU3Bvc3RhIEdlb25vdGFcIixcbiAgICAgICAgICAgICAgdG9vbHR5cGU6ICdtb3ZlZmVhdHVyZScsXG4gICAgICAgICAgICAgIGljb246ICdpdGVybmV0TW92ZVBvaW50LnBuZydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRpdGxlOiBcIlJpbXVvdmkgR2Vvbm90YVwiLFxuICAgICAgICAgICAgICB0b29sdHlwZTogJ2RlbGV0ZWZlYXR1cmUnLFxuICAgICAgICAgICAgICBpY29uOiAnaXRlcm5ldERlbGV0ZVBvaW50LnBuZydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRpdGxlOiBcIkVkaXRhIGdlb25vdGFcIixcbiAgICAgICAgICAgICAgdG9vbHR5cGU6ICdlZGl0YXR0cmlidXRlcycsXG4gICAgICAgICAgICAgIGljb246ICdlZGl0QXR0cmlidXRlcy5wbmcnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgc2F2ZWJ0bmxhYmVsOiBcIlNhbHZhXCJcbiAgICB9XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICAvL21ldG9kbyBjaGlhbWF0byBxdWFuZG8gc2kgY2xpY2NhIHN1IGF2dmlhL3Rlcm1pbmEgZWRpdGluZ1xuICAgIHRvZ2dsZUVkaXRpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgU2VydmljZS50b2dnbGVFZGl0aW5nKCk7XG4gICAgfSxcbiAgICBzYXZlRWRpdHM6IGZ1bmN0aW9uKCl7XG4gICAgICBTZXJ2aWNlLnNhdmVFZGl0cygpO1xuICAgIH0sXG4gICAgLy8gY2hhaW1hdG8gcXVhbmRvIHNpIGNsaWNjYSBzdWwgdW4gdG9vbCBkZWxsJ2VkaXRvclxuICAgIC8vIGNvbWUgYWQgZXNlbXBpbyAgYWRkIG1vdmUgZWRpdCBhdHRyaWJ1dGVzIGV0YyAuLlxuICAgIHRvZ2dsZUVkaXRUb29sOiBmdW5jdGlvbihsYXllckNvZGUsIHRvb2xUeXBlKSB7XG4gICAgICBpZiAodG9vbFR5cGUgPT0gJycpe1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvL3ZlcmlmaWNhIHNlIGwnZWRpdG9yIMOoIGluIGVkaXRpbmcgb24gdHJ1ZVxuICAgICAgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy5vbikge1xuICAgICAgICBTZXJ2aWNlLnRvZ2dsZUVkaXRUb29sKGxheWVyQ29kZSwgdG9vbFR5cGUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gbWV0b2RvIGNoZSB2aWVuZSBjaGlhbWF0byBwZXIgdmVyaWZpY2FyZSBlIHNldHRhcmVcbiAgICAvLyBsYSBjbGFzc2UgKHByZW11dG8gbyBubyBkZWwgYm90dG9uZSB0b29sIGluIHF1ZXN0aW9uZSlcbiAgICBlZGl0aW5ndG9vbGJ0blRvZ2dsZWQ6IGZ1bmN0aW9uKGxheWVyQ29kZSwgdG9vbFR5cGUpIHtcbiAgICAgIHJldHVybiAodGhpcy5zdGF0ZS5lZGl0aW5nLmxheWVyQ29kZSA9PSBsYXllckNvZGUgJiYgdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xUeXBlID09IHRvb2xUeXBlKTtcbiAgICB9LFxuICAgIC8vIGZ1bnppb25lIGNoZSB2ZXJpZmljYSBzZSBhYmlsaXRhcmUgbyBtZW5vIGkgYm90dG9uaSBkZWkgdG9vbHNcbiAgICBlZGl0aW5ndG9vbGJ0bkVuYWJsZWQ6IGZ1bmN0aW9uKHRvb2wpe1xuICAgICAgcmV0dXJuIHRvb2wudG9vbHR5cGUgIT0gJyc7XG4gICAgfSxcbiAgICBvbkNsb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgIFNlcnZpY2Uuc3RvcCgpO1xuICAgIH1cbiAgfSxcbiAgY29tcHV0ZWQ6IHtcbiAgICBlZGl0aW5nYnRubGFiZWw6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuZWRpdGluZy5vbiA/IFwiVGVybWluYSBlZGl0aW5nXCIgOiBcIkF2dmlhIGVkaXRpbmdcIjtcbiAgICB9LFxuICAgIGVkaXRpbmdidG5FbmFibGVkOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAodGhpcy5zdGF0ZS5lZGl0aW5nLmVuYWJsZWQgfHwgdGhpcy5zdGF0ZS5lZGl0aW5nLm9uKSA/IFwiXCIgOiBcImRpc2FibGVkXCI7XG4gICAgfSxcbiAgICBtZXNzYWdlOiBmdW5jdGlvbigpe1xuICAgICAgdmFyIG1lc3NhZ2UgPSBcIlwiO1xuICAgICAgaWYgKCF0aGlzLnN0YXRlLmVkaXRpbmcuZW5hYmxlZCl7XG4gICAgICAgIG1lc3NhZ2UgPSAnPHNwYW4gc3R5bGU9XCJjb2xvcjogcmVkXCI+QXVtZW50YXJlIGlsIGxpdmVsbG8gZGkgem9vbSBwZXIgYWJpbGl0YXJlIGxcXCdlZGl0aW5nJztcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC5tZXNzYWdlKXtcbiAgICAgICAgdmFyIG4gPSB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbHN0ZXAubjtcbiAgICAgICAgdmFyIHRvdGFsID0gdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLnRvdGFsO1xuICAgICAgICB2YXIgc3RlcG1lc3NhZ2UgPSB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbHN0ZXAubWVzc2FnZTtcbiAgICAgICAgbWVzc2FnZSA9ICc8ZGl2IHN0eWxlPVwibWFyZ2luLXRvcDoyMHB4XCI+R1VJREEgU1RSVU1FTlRPOjwvZGl2PicgK1xuICAgICAgICAgICc8ZGl2PjxzcGFuPlsnK24rJy8nK3RvdGFsKyddIDwvc3Bhbj48c3BhbiBzdHlsZT1cImNvbG9yOiB5ZWxsb3dcIj4nK3N0ZXBtZXNzYWdlKyc8L3NwYW4+PC9kaXY+JztcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH1cbiAgfVxufSk7XG5cbmZ1bmN0aW9uIEVkaXRvclBhbmVsKCkge1xuICAvLyBwcm9wcmlldMOgIG5lY2Vzc2FyaWUuIEluIGZ1dHVybyBsZSBtZXR0ZXJtbyBpbiB1bmFcbiAgLy8gY2xhc3NlIFBhbmVsIGRhIGN1aSBkZXJpdmVyYW5ubyB0dXR0aSBpIHBhbm5lbGxpIGNoZSB2b2dsaW9ubyBlc3NlcmUgbW9zdHJhdGkgbmVsbGEgc2lkZWJhclxuICB0aGlzLmlkID0gXCJnZW9ub3Rlcy1lZGl0aW5nLXBhbmVsXCI7XG4gIHRoaXMubmFtZSA9IFwiR2VzdGlvbmUgZGF0aSBHRU9OT1RFU1wiO1xuICB0aGlzLmludGVybmFsUGFuZWwgPSBuZXcgUGFuZWxDb21wb25lbnQoKTtcbn1cblxuaW5oZXJpdChFZGl0b3JQYW5lbCwgUGFuZWwpO1xuXG52YXIgcHJvdG8gPSBQYW5lbC5wcm90b3R5cGU7XG5cbi8vIHZpZW5lIHJpY2hpYW1hdG8gZGFsbGEgdG9vbGJhclxuLy8gcXVhbmRvIGlsIHBsdWdpbiBjaGllZGUgZGkgbW9zdHJhcmUgdW4gcHJvcHJpbyBwYW5uZWxsbyBuZWxsYSBHVUkgKEdVSS5zaG93UGFuZWwpXG5wcm90by5vblNob3cgPSBmdW5jdGlvbihjb250YWluZXIpIHtcbiAgY29uc29sZS5sb2coJ29uc2hvdycpO1xuICB2YXIgcGFuZWwgPSB0aGlzLmludGVybmFsUGFuZWw7XG4gIHBhbmVsLiRtb3VudCgpLiRhcHBlbmRUbyhjb250YWluZXIpO1xuICByZXR1cm4gcmVzb2x2ZWRWYWx1ZSh0cnVlKTtcbn07XG5cbi8vIHJpY2hpYW1hdG8gcXVhbmRvIGxhIEdVSSBjaGllZGUgZGkgY2hpdWRlcmUgaWwgcGFubmVsbG8uIFNlIHJpdG9ybmEgZmFsc2UgaWwgcGFubmVsbG8gbm9uIHZpZW5lIGNoaXVzb1xucHJvdG8ub25DbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBjb25zb2xlLmxvZygnY2xvc2UnKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gIFNlcnZpY2Uuc3RvcCgpXG4gIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgc2VsZi5pbnRlcm5hbFBhbmVsLiRkZXN0cm95KHRydWUpO1xuICAgIHNlbGYuaW50ZXJuYWxQYW5lbCA9IG51bGw7XG4gICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICB9KVxuICAuZmFpbChmdW5jdGlvbigpe1xuICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICB9KTtcbiAgXG4gIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEVkaXRvclBhbmVsO1xuXG59LHtcIi4vcGFuZWwuaHRtbFwiOjQsXCIuL3BsdWdpbnNlcnZpY2VcIjo3fV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vL1F1aSBjaSBzb25vIGdsaSBlZGl0b3IgKGNsYXNzaSkgdXNhdGkgZGFpIHZhcmkgbGF5ZXJcbnZhciBHZW9ub3Rlc0VkaXRvciA9IHJlcXVpcmUoJy4vZWRpdG9ycy9nZW9ub3Rlc2VkaXRvcicpO1xuXG4vL2RlZmluaXNjbyBpIGNvZGljaSBsYXllclxudmFyIGxheWVyQ29kZXMgPSB0aGlzLmxheWVyQ29kZXMgPSB7XG4gICAgR0VPTk9URVM6ICdub3RlJ1xufTtcbi8vIGNsYXNzaSBlZGl0b3JcbnZhciBlZGl0b3JDbGFzcyA9IHt9O1xuZWRpdG9yQ2xhc3NbbGF5ZXJDb2Rlcy5HRU9OT1RFU10gPSBHZW9ub3Rlc0VkaXRvcjtcblxuLy9kZWZpbmlzY28gbGF5ZXIgZGVsIHBsdWdpbiBjb21lIG9nZ2V0dG9cbnZhciBsYXllcnMgPSB7fTtcbnZhciBsYXllcnNTdHlsZSA9IHt9O1xudmFyIGxheWVyc0VkaXRpbmdTdHlsZSA9IHt9O1xuLy9sYXllclxuLy9sYXllciBTdHlsZVxubGF5ZXJzU3R5bGVbbGF5ZXJDb2Rlcy5HRU9OT1RFU10gPSBmdW5jdGlvbihzdHlsZUNvbmZpZykge1xuICB2YXIgaWNvbnVybCA9IHN0eWxlQ29uZmlnLmljb251cmwgfHwgbnVsbDtcbiAgcmV0dXJuIG5ldyBvbC5zdHlsZS5TdHlsZSh7XG4gICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5JY29uKCh7XG4gICAgICBhbmNob3I6IFswLjUsIDAuNV0sXG4gICAgICBzcmM6IGljb251cmwgLy8gJ2Zha2UucG5nJ1xuICAgIH0pKVxuICB9KTtcbn07XG5cbmxheWVyc1tsYXllckNvZGVzLkdFT05PVEVTXSA9IHtcbiAgbGF5ZXJDb2RlOiBsYXllckNvZGVzLkdFT05PVEVTLFxuICB2ZWN0b3I6IG51bGwsXG4gIGVkaXRvcjogbnVsbCxcbiAgaWNvbnVybDogbnVsbCxcbiAgY3JzOiBudWxsLFxuICAvL2RlZmluaXNjbyBsbyBzdGlsZVxuICBzdHlsZTogbmV3IG9sLnN0eWxlLlN0eWxlKHtcbiAgICBpbWFnZTogbmV3IG9sLnN0eWxlLkljb24oKHtcbiAgICAgIGFuY2hvcjogWzAuNSwgMC41XSxcbiAgICAgIHNyYzogJ2Zha2UucG5nJ1xuICAgIH0pKVxuICB9KVxufTtcblxuXG5cbi8vIGRlZmluaXNjbyBpIHRvb2xzXG5mdW5jdGlvbiB0b29scyhwbHVnaW4pIHtcbiAgcmV0dXJuIHRvb2xzID0gW1xuICAgIHtcbiAgICAgIGxheWVyTmFtZTonbm90ZScsXG4gICAgICBuYW1lOiBcIkdlb25vdGVzXCIsXG4gICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgaXNDaGVjazogZmFsc2UsXG4gICAgICBhY3Rpb246IF8uYmluZChwbHVnaW4udG9vbHNBY3Rpb25zLnNob3dIaWRlTGF5ZXIsIHBsdWdpbilcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiRWRpdGEgR2Vvbm90ZXNcIixcbiAgICAgIGFjdGlvbjogXy5iaW5kKHBsdWdpbi50b29sc0FjdGlvbnMuc2hvd0VkaXRpbmdQYW5lbCwgcGx1Z2luKVxuICAgIH1cbiAgXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgbGF5ZXJzQ29kZTogbGF5ZXJDb2RlcyxcbiAgICBsYXllcnM6IGxheWVycyxcbiAgICBsYXllcnNTdHlsZTogbGF5ZXJzU3R5bGUsXG4gICAgbGF5ZXJzRWRpdGluZ1N0eWxlOiBsYXllcnNFZGl0aW5nU3R5bGUsXG4gICAgZWRpdG9yQ2xhc3M6IGVkaXRvckNsYXNzLFxuICAgIHRvb2xzOiB0b29sc1xufTtcblxufSx7XCIuL2VkaXRvcnMvZ2Vvbm90ZXNlZGl0b3JcIjoyfV0sNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgRzNXT2JqZWN0ID0gZzN3c2RrLmNvcmUuRzNXT2JqZWN0O1xudmFyIEdVSSA9IGczd3Nkay5ndWkuR1VJO1xudmFyIFZlY3RvckxvYWRlckxheWVyID0gZzN3c2RrLmNvcmUuVmVjdG9yTGF5ZXJMb2FkZXI7XG52YXIgRm9ybUNsYXNzID0gcmVxdWlyZSgnLi9lZGl0b3JzL2F0dHJpYnV0ZXNmb3JtJyk7XG5cbmZ1bmN0aW9uIEdlb25vdGVzU2VydmljZSgpIHtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIC8vcXVpIHZhZG8gIGEgc2V0dGFyZSBpbCBtYXBzZXJ2aWNlXG4gIHRoaXMuX21hcFNlcnZpY2UgPSBudWxsO1xuICB0aGlzLl9sb2FkRGF0YU9uTWFwVmlld0NoYW5nZUxpc3RlbmVyID0gbnVsbDtcbiAgdGhpcy5fY3VycmVudEVkaXRpbmdMYXllciA9IG51bGw7XG4gIHRoaXMuX3BsdWdpblRvb2xzID0gbnVsbDtcblxuICB0aGlzLnN0YXRlID0ge1xuICAgIGVkaXRpbmc6IHtcbiAgICAgIG9uOiBmYWxzZSxcbiAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgbGF5ZXJDb2RlOiBudWxsLFxuICAgICAgdG9vbFR5cGU6IG51bGwsXG4gICAgICBzdGFydGluZ0VkaXRpbmdUb29sOiBmYWxzZSxcbiAgICAgIHRvb2xzdGVwOiB7XG4gICAgICAgIG46IG51bGwsXG4gICAgICAgIHRvdGFsOiBudWxsLFxuICAgICAgICBtZXNzYWdlOiBudWxsXG4gICAgICB9XG4gICAgfSxcbiAgICByZXRyaWV2aW5nRGF0YTogZmFsc2UsXG4gICAgaGFzRWRpdHM6IGZhbHNlXG4gIH07XG5cbiAgLy9kZWZpbmlzY28gaWwgbG9hZGVyIGRlbCBwbHVnaW5cbiAgdGhpcy5fbG9hZGVyID0gbmV3IFZlY3RvckxvYWRlckxheWVyO1xuICAvLyB2aW5jb2xpIGFsbGEgcG9zc2liaWxpdMOgICBkaSBhdHRpdmFyZSBsJ2VkaXRpbmdcbiAgdmFyIGVkaXRpbmdDb25zdHJhaW50cyA9IHtcbiAgICByZXNvbHV0aW9uOiAxIC8vIHZpbmNvbG8gZGkgcmlzb2x1emlvbmUgbWFzc2ltYVxuICB9O1xuICAvLyBpbml6aWFsaXp6YXppb25lIGRlbCBwbHVnaW5cbiAgLy8gY2hpYW10byBkYWxsICRzY3JpcHQodXJsKSBkZWwgcGx1Z2luIHJlZ2lzdHJ5XG4gIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKGNvbmZpZywgcGx1Z2luQ29uZmlnKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2NycyA9IG51bGw7XG4gICAgLy9sYXllcnMgZGVsIHBsdWdpblxuICAgIHRoaXMuX2xheWVycyA9IHBsdWdpbkNvbmZpZy5sYXllcnM7XG4gICAgLy9lZGl0b3IgY2xhc3NpIGRlbCBwbHVnaW5cbiAgICB0aGlzLl9lZGl0b3JDbGFzcyA9IHBsdWdpbkNvbmZpZy5lZGl0b3JDbGFzcztcbiAgICAvLyBjb2RpY2kgZGVpIGxheWVyXG4gICAgdGhpcy5sYXllckNvZGVzID0gcGx1Z2luQ29uZmlnLmxheWVyc0NvZGU7XG4gICAgLy8gc3RpbGkgZGVpIGxheWVyXG4gICAgdGhpcy5fbGF5ZXJzU3R5bGUgPSBwbHVnaW5Db25maWcubGF5ZXJzU3R5bGU7XG4gICAgLy8gc3RpbGkgZGVsIGxheWVyIGluIGVkaXRpbmcgKGluIGZ1dHVybyBkYSBkaXN0aW5ndWVyZSBkZWxldGUsIG1vdmUsIGVkaXRpbmcuLilcbiAgICB0aGlzLl9sYXllcnNFZGl0aW5nU3R5bGUgPSBwbHVnaW5Db25maWcubGF5ZXJzRWRpdGluZ1N0eWxlO1xuICAgIC8vIHBhcmFtZXRyeSBjdXN0b20gcGVyIGxlIHJpY2hpZXN0ZSBhbCBzZXJ2ZXJcbiAgICB0aGlzLl9jdXN0b21VcmxQYXJhbWV0ZXJzID0gcGx1Z2luQ29uZmlnLmN1c3RvbVVybFBhcmFtZXRlcnMgfHwgbnVsbDtcbiAgICAvLyBzZXR0byBpbCBtYXBzZXJ2aWNlIGNoZSBtaSBwZXJtZXR0ZSBkaSBpbmVyYWdpcmUgY29uIGxhIG1hcHBhXG4gICAgdGhpcy5fbWFwU2VydmljZSA9IEdVSS5nZXRDb21wb25lbnQoJ21hcCcpLmdldFNlcnZpY2UoKTtcbiAgICAvL3ZhZG8gYSBzZXR0YXJlIGxlIGljb251cmxzIGUgaWwgY3JzIHNlIGVzaXN0ZSBjaSBzb25vOlxuICAgIF8uZm9yRWFjaCh0aGlzLmNvbmZpZy5sYXllcnMsIGZ1bmN0aW9uKGxheWVyQ29uZmlnLCBsYXllck5hbWUgKSB7XG4gICAgICBzZWxmLl9sYXllcnNbbGF5ZXJOYW1lXS5pbmZvdXJsID0gbGF5ZXJDb25maWcuaW5mb3VybDtcbiAgICAgIHNlbGYuX2xheWVyc1tsYXllck5hbWVdLmNycyA9IFwiRVBTRzpcIitsYXllckNvbmZpZy5jcnM7XG4gICAgICBzZWxmLnNldExheWVyU3R5bGUobGF5ZXJOYW1lKTtcbiAgICB9KTtcbiAgICAvL2luaXppYWxpenpvIGlsIGxvYWRlclxuICAgIC8vIHBhc3NhbmRvZ2xpOlxuICAgIC8vIDEgLSBsYXllcnMgZGVsIHBsdWdpbiAoc3R5bGUgZXRjLi4pXG4gICAgLy8gMiAtIGxhIGJhc2V1cmwgY2hlIG1pIHNlcnZlciBwZXIgaW50ZXJhZ2lyZSBjb24gaWwgc2VydmVyIHBlciBmYXJlIHR1dHRlIGxlIG1vZGlmaWNoZVxuICAgIHZhciBvcHRpb25zX2xvYWRlciA9IHtcbiAgICAgICdsYXllcnMnOiB0aGlzLl9sYXllcnMsXG4gICAgICAnYmFzZXVybCc6IHRoaXMuY29uZmlnLmJhc2V1cmwsXG4gICAgICAnbWFwU2VydmljZSc6IHRoaXMuX21hcFNlcnZpY2VcbiAgICB9O1xuICAgIC8vaW5pemlhbGl6em8gaWwgbG9hZGVyXG4gICAgdGhpcy5fbG9hZGVyLmluaXQob3B0aW9uc19sb2FkZXIpO1xuICAgIC8vY2FzbyBkaSBsb2FkaW5nIGRhdGFcbiAgICB0aGlzLl9sb2FkZXIub24oJ2xvYWRpbmd2ZWN0b3JsYXllcnNzdGFydCcsIGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5zdGF0ZS5yZXRyaWV2aW5nRGF0YSA9IHRydWU7XG4gICAgfSk7XG4gICAgdGhpcy5fbG9hZGVyLm9uKCdsb2FkaW5ndmVjdG9ybGF5ZXJzZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLnN0YXRlLnJldHJpZXZpbmdEYXRhID0gZmFsc2U7XG4gICAgfSk7XG4gICAgdGhpcy5fbG9hZGVyLm9uKCdzZXRtb2RlJywgZnVuY3Rpb24obW9kZSkge1xuICAgICAgc3dpdGNoKG1vZGUpIHtcbiAgICAgICAgY2FzZSAndyc6XG4gICAgICAgICAgc2VsZi5zdGF0ZS5lZGl0aW5nLm9uID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLmVtaXQoXCJlZGl0aW5nc3RhcnRlZFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncic6XG4gICAgICAgICAgc2VsZi5zdGF0ZS5lZGl0aW5nLm9uID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBkaXNhYmlsaXRvIGwnZXZlbnR1YWxlIHRvb2wgYXR0aXZvIHNlIHZpZW5lIGF0dGl2YXRhXG4gICAgLy8gdW4naW50ZXJhemlvbmUgZGkgdGlwbyBwb2ludGVySW50ZXJhY3Rpb25TZXQgc3VsbGEgbWFwcGFcbiAgICB0aGlzLl9tYXBTZXJ2aWNlLm9uKCdwb2ludGVySW50ZXJhY3Rpb25TZXQnLCBmdW5jdGlvbihpbnRlcmFjdGlvbikge1xuICAgICAgdmFyIGN1cnJlbnRFZGl0aW5nTGF5ZXIgPSBzZWxmLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgICBpZiAoY3VycmVudEVkaXRpbmdMYXllcikge1xuICAgICAgICB2YXIgYWN0aXZlVG9vbCA9IGN1cnJlbnRFZGl0aW5nTGF5ZXIuZWRpdG9yLmdldEFjdGl2ZVRvb2woKS5pbnN0YW5jZTtcbiAgICAgICAgLy8gZGV2byB2ZXJpZmljYXJlIGNoZSBub24gc2lhIHVuJ2ludGVyYXppb25lIGF0dGl2YXRhIGRhIHVubyBkZWkgdG9vbCBkaSBlZGl0aW5nIGRlbCBwbHVnaW5cbiAgICAgICAgaWYgKGFjdGl2ZVRvb2wgJiYgIWFjdGl2ZVRvb2wub3duc0ludGVyYWN0aW9uKGludGVyYWN0aW9uKSkge1xuICAgICAgICAgIHNlbGYuX3N0b3BFZGl0aW5nVG9vbCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gIGFiaWxpdG8gbyBtZW5vIGwnZWRpdGluZyBpbiBiYXNlIGFsbGEgcmlzb2x1emlvbmUgZGVsbGEgbWFwcGFcbiAgICAvKnRoaXMuX21hcFNlcnZpY2Uub25hZnRlcignc2V0TWFwVmlldycsZnVuY3Rpb24oYmJveCwgcmVzb2x1dGlvbiwgY2VudGVyKXtcbiAgICAgIHNlbGYuc3RhdGUuZWRpdGluZy5lbmFibGVkID0gKHJlc29sdXRpb24gPCBlZGl0aW5nQ29uc3RyYWludHMucmVzb2x1dGlvbikgPyB0cnVlIDogZmFsc2U7XG4gICAgfSk7Ki9cbiAgICAvLyBhdHRyaWJ1dG8gZGVsbG8gc3RhdG8gZGVsIHNyZXZpemlvIGNoZSBtaSBwZXJtZXR0ZSBkaSBhY2NlbmRlcmUgbyBzcGVuZ2VyZSBsJ2VkaXRpbmdcbiAgICAvLyBzZXJ2ZSBhbmNoZSBwZXIgcG90ZXIgaW4gZmFzZSBkaSB0b2dnbGVFZGl0aW5nKGJvdHRvbmUgZGkgYXZ2aW8gZWRpdGluZykgZGkgdmVkZXJlIHNlIHBvc3NvIGluemlhcmUgbyBtZW5vXG4gICAgLy8gY2FyaWNhcmUgaSB2ZXR0b3JpYWxpIGV0Yy4uXG4gICAgdGhpcy5zdGF0ZS5lZGl0aW5nLmVuYWJsZWQgPSB0cnVlOy8vKHRoaXMuX21hcFNlcnZpY2UuZ2V0UmVzb2x1dGlvbigpIDwgZWRpdGluZ0NvbnN0cmFpbnRzLnJlc29sdXRpb24pID8gdHJ1ZSA6IGZhbHNlO1xuICAgIC8vIHBlciBvZ25pIGxheWVyIGRlZmluaXRpIG5lbCBwbHVnaW4gc2V0dG8gbmFtZSBlIGlkXG4gICAgLy8gcmVjdXBlcmF0aSBncmF6aWUgYWwgbWFwc2VydmljZVxuICAgIF8uZm9yRWFjaCh0aGlzLl9sYXllcnMsIGZ1bmN0aW9uKExheWVyLCBsYXllckNvZGUpIHtcbiAgICAgIC8vcmVjdXBlcm8gbCdpZCBkYWxsYSBjb25maWd1cmF6aW9uZSBkZWwgcGx1Z2luXG4gICAgICAvLyBpIGxheWVycyBuZWxsYSBjb25maWd1cmF6aW9uZSBwYXNzYXRhIGkgbGF5ZXJzIGhhbm5vIGR1ZSBhdHRyaWJ1dGk6IGlkIGUgbmFtZVxuICAgICAgdmFyIGxheWVySWQgPSBjb25maWcubGF5ZXJzW2xheWVyQ29kZV0uaWQ7XG4gICAgICB2YXIgbGF5ZXJOYW1lID0gY29uZmlnLmxheWVyc1tsYXllckNvZGVdLm5hbWU7XG4gICAgICAvLyByZWN1cGVyYSBpbCBsYXllciBkYWwgbWFwc2VydmljZVxuICAgICAgdmFyIGxheWVyID0gc2VsZi5fbWFwU2VydmljZS5nZXRQcm9qZWN0KCkuZ2V0TGF5ZXJCeUlkKGxheWVySWQpO1xuICAgICAgLy8gbWVzc28gYWwgbW9tZW50byBnZW5lcmljbyBwZXIgcmlwcmVuZGVyZSBzdGVzc28gY29ubXBvcnRhbWVudG8gSXRlcm5ldFxuICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgIC8vIHJlY3VwZXJvIGwnb3JpZ2luIG5hbWUgZGFsIHByb2plY3RsYXllclxuICAgICAgICBMYXllci5uYW1lID0gbGF5ZXIuZ2V0T3JpZ05hbWUoKTtcbiAgICAgICAgTGF5ZXIuaWQgPSBsYXllcklkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgTGF5ZXIubmFtZSA9IGxheWVyTmFtZTtcbiAgICAgICAgTGF5ZXIuaWQgPSBsYXllcklkO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICAvLyBmaW5lIGRlbCBtZXRvZG8gSU5JVFxuXG4gIHRoaXMuc2V0UGx1Z2luVG9vbHMgPSBmdW5jdGlvbih0b29scykge1xuICAgIHRoaXMuX3BsdWdpblRvb2xzID0gdG9vbHM7XG4gIH07XG4gIHRoaXMuZ2V0UGx1Z2luVG9vbHMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcGx1Z2luVG9vbHM7XG4gIH07XG5cbiAgdGhpcy5zZXRMYXllclN0eWxlID0gZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgdmFyIGljb251cmwgPSB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS5pY29udXJsO1xuXG4gICAgdmFyIHN0eWxlT3B0aW9ucyA9IHtcbiAgICAgIGljb251cmw6IGljb251cmxcbiAgICB9O1xuICAgIHZhciBzdHlsZSA9IHRoaXMuX2xheWVyc1N0eWxlW2xheWVyQ29kZV0oc3R5bGVPcHRpb25zKTtcbiAgICB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS5zdHlsZSA9IHN0eWxlO1xuICAgIC8vIHNldHRvIHRlbXBvcmFuZWFtZW50ZSBsJ2VkaXRuZyBzdHlsZVxuICAgIHRoaXMuX2xheWVyc0VkaXRpbmdTdHlsZVtsYXllckNvZGVdID0gc3R5bGU7XG4gIH07XG5cbiAgdGhpcy5nZXRMYXllclN0eWxlID0gZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xheWVyc1tsYXllckNvZGVdLnN0eWxlO1xuICB9O1xuXG4gIHRoaXMuX3RvZ2dsZUNoZWNrQm94UGx1Z2luVG9vbCA9IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgIHZhciBwbHVnaW5Ub29scyA9IHNlbGYuZ2V0UGx1Z2luVG9vbHMoKTtcbiAgICBfLmZvckVhY2gocGx1Z2luVG9vbHMsIGZ1bmN0aW9uKHBsdWdpblRvb2wsIGluZGV4KSB7XG5cbiAgICAgIGlmIChfLmhhcyhwbHVnaW5Ub29sLCAndHlwZScpICYmIHBsdWdpblRvb2wubGF5ZXJOYW1lID09IGxheWVyQ29kZSAmJiBwbHVnaW5Ub29sLnR5cGUgPT0gJ2NoZWNrYm94Jykge1xuICAgICAgICBwbHVnaW5Ub29sc1tpbmRleF0uaXNDaGVjayA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5pc0xheWVyVmlzaWJsZSA9IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgIHZhciB2ZWN0b3JMYXllciA9IHRoaXMuX2xheWVyc1tsYXllckNvZGVdLnZlY3RvcjtcbiAgICByZXR1cm4gdmVjdG9yTGF5ZXIuaXNWaXNpYmxlKCk7XG4gIH07XG5cbiAgdGhpcy5zaG93SGlkZUxheWVyID0gZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB2ZWN0b3JMYXllciA9IG51bGw7XG4gICAgaWYgKHRoaXMuX2xvYWRlci5pc1JlYWR5KCkpIHtcbiAgICAgIHZlY3RvckxheWVyID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yO1xuICAgICAgdmVjdG9yTGF5ZXIuc2V0VmlzaWJsZSghdmVjdG9yTGF5ZXIuaXNWaXNpYmxlKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sb2FkZXIubG9hZExheWVycygncicsIHRoaXMuX2N1c3RvbVVybFBhcmFtZXRlcnMpXG4gICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICBzZWxmLl9hZGRUb01hcCgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIC8vc3RvcFxuICB0aGlzLnN0b3AgPSBmdW5jdGlvbigpe1xuICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICBpZiAodGhpcy5zdGF0ZS5lZGl0aW5nLm9uKSB7XG4gICAgICB0aGlzLl9jYW5jZWxPclNhdmUoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzZWxmLl9zdG9wRWRpdGluZygpO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmZhaWwoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgIH0pXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuXG4gIC8vIGF2dmlvIG8gdGVybWlubyBsYSBzZXNzaW9uZSBkaSBlZGl0aW5nIGdlbmVyYWxlXG4gIC8vIHVudG8gZGkgcGFydGVuemEgZGVsbCdhdnZpbyBkZWxsJ2VkaXRpbmdcbiAgdGhpcy50b2dnbGVFZGl0aW5nID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gY3JlbyBvZ2dldHRvIGRlZmVycmVkIHBlciByZXN0aXR1aXJlIHVuYSBwcm9taXNlXG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIC8vIHF1aSBkaWNlIGNoZSBzZSBuZWwgY2FzbyBsYSByaXNvbHV6aW9uZSBkZWxsYSBtYXBwYSB2YSBiZW5lIChzdGF0ZS5lZGl0aW5nLmVuYWJsZWQpXG4gICAgLy8gZSBub24gw6ggYW5jb3JhIHN0YXRvIGF0dGl2YXRvIGwnZWRpdGluZ1xuICAgIC8vIHF1aW5kaSBjYXNvIHByaW1hIHZvbHRhXG4gICAgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy5lbmFibGVkICYmICF0aGlzLnN0YXRlLmVkaXRpbmcub24pIHtcbiAgICAgIC8vIGZhY2NpbyBwYXJ0aXJlIGVkaXRpbmdcbiAgICAgIHRoaXMuX3N0YXJ0RWRpdGluZygpO1xuICAgIH1cbiAgICAvLyBhbHRyaW1lbnRpIHNlIMOoIGdpw6AgaW4gZWRpdGluZyBjaGlhbW8gbG8gc3RvcCBkZWwgcGx1Z2luXG4gICAgLy8gY2hlIG5vbiDDqCBhbHRybyBjaGUgbG9zIHRvcG8gZGVsbCdlZGl0aW5nXG4gICAgZWxzZSBpZiAodGhpcy5zdGF0ZS5lZGl0aW5nLm9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9wKCk7XG4gICAgfVxuICAgIC8vIHJlc3RpdHVpc2NvIHVuYSBwcm9tZXNzYVxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH07XG5cbiAgdGhpcy5zYXZlRWRpdHMgPSBmdW5jdGlvbigpe1xuICAgIHRoaXMuX3NhdmVXaXRob3V0QXNrKCk7XG4gICAgLy90aGlzLl9jYW5jZWxPclNhdmUoMik7XG4gIH07XG5cbiAgLy8gYXZ2aWEgdW5vIGRlaSB0b29sIGRpIGVkaXRpbmcgdHJhIHF1ZWxsaSBzdXBwb3J0YXRpIGRhIEVkaXRvciAoYWRkZmVhdHVyZSwgZWNjLilcbiAgLy8gZnVuemlvbmUgZGVsbCdlbGVtZW50byBwYW5lbCB2dWVcbiAgdGhpcy50b2dnbGVFZGl0VG9vbCA9IGZ1bmN0aW9uKGxheWVyQ29kZSwgdG9vbFR5cGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy9wcmVuZG8gaWwgbGF5ZXIgaW4gYmFzZSBhbCBjb2RpY2UgcGFzc2F0byBkYWxsIGNvbXBvbmVudGUgdnVlXG4gICAgdmFyIGxheWVyID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV07XG4gICAgaWYgKGxheWVyKSB7XG4gICAgICAvL3JlY3VwcmVybyBpbCBjdXJyZW50IGxheWVyIGluIGVkaXRpbmdcbiAgICAgIHZhciBjdXJyZW50RWRpdGluZ0xheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgICAgLy8gc2Ugc2kgc3RhIHVzYW5kbyB1biB0b29sIGNoZSBwcmV2ZWRlIGxvIHN0ZXNzbyBsYXllciBpbiBlZGl0YXppb25lXG4gICAgICBpZiAoY3VycmVudEVkaXRpbmdMYXllciAmJiBsYXllckNvZGUgPT0gY3VycmVudEVkaXRpbmdMYXllci5sYXllckNvZGUpIHtcbiAgICAgICAgLy8gZSBsbyBzdGVzc28gdG9vbCBhbGxvcmEgZGlzYXR0aXZvIGlsIHRvb2wgKGluIHF1YW50byDDqFxuICAgICAgICAvLyBwcmVtdXRvIHN1bGxvIHN0ZXNzbyBib3R0b25lKVxuICAgICAgICBpZiAodG9vbFR5cGUgPT0gY3VycmVudEVkaXRpbmdMYXllci5lZGl0b3IuZ2V0QWN0aXZlVG9vbCgpLmdldFR5cGUoKSkge1xuICAgICAgICAgIC8vIHN0ZXNzbyB0aXBvIGRpIHRvb2wgcXVpbmRpIHNpIMOoIHZlcmlmaWNhdG8gdW4gdG9nZ2xlIG5lbCBib3R0b25lXG4gICAgICAgICAgLy8gYWxsb3JhIHN0aXBwbyBsJ2VkaXRpbmcgVG9vbFxuICAgICAgICAgIHRoaXMuX3N0b3BFZGl0aW5nVG9vbCgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFsdHJpbWVudGkgYXR0aXZvIGlsIHRvb2wgcmljaGllc3RvXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vc3RvcHBvIHByZXZlbnRpdmFtZW50ZSBsJ2VkaXRpbmcgdG9vbCBhdHRpdm9cbiAgICAgICAgICB0aGlzLl9zdG9wRWRpdGluZ1Rvb2woKTtcbiAgICAgICAgICAvL2ZhY2NpbyBwYXJ0aXJlIGwnZWRpdG5nIHRvb2wgcGFzc2FuZG8gY3VycmVudCBFZGl0aW5nIExheWVyIGUgaWwgdGlwbyBkaSB0b29sXG4gICAgICAgICAgdGhpcy5fc3RhcnRFZGl0aW5nVG9vbChjdXJyZW50RWRpdGluZ0xheWVyLCB0b29sVHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGFsdHJpbWVudGkgY2FzbyBpbiBjdWkgbm9uIMOoIHN0YXRvIHNldHRhdG8gaWwgY3VycmVudCBlZGl0aW5nIGxheWVyIG9cbiAgICAgICAgLy8gaWwgbGF5ZXIgY2hlIHNpIHN0YSBjZXJjYW5kbyBkaSBlZGl0YXJlIMOoIGRpdmVyc28gZGEgcXVlbGxvIGluIGVkaXRpbmcgaW4gcHJlY2VkZW56YVxuICAgICAgICAvLyBuZWwgY2FzbyBzaWEgZ2nDoCAgYXR0aXZvIHVuIGVkaXRvciB2ZXJpZmljbyBkaSBwb3RlcmxvIHN0b3BwYXJlXG4gICAgICAgIGlmIChjdXJyZW50RWRpdGluZ0xheWVyICYmIGN1cnJlbnRFZGl0aW5nTGF5ZXIuZWRpdG9yLmlzU3RhcnRlZCgpKSB7XG4gICAgICAgICAgLy8gc2UgbGEgdGVybWluYXppb25lIGRlbGwnZWRpdGluZyBzYXLDoCAgYW5kYXRhIGEgYnVvbiBmaW5lLCBzZXR0byBpbCB0b29sXG4gICAgICAgICAgLy8gcHJvdm8gYSBzdG9wcGFyZVxuICAgICAgICAgIHRoaXMuX2NhbmNlbE9yU2F2ZSgyKVxuICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLl9zdG9wRWRpdG9yKCkpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYuX3N0YXJ0RWRpdGluZ1Rvb2wobGF5ZXIsIHRvb2xUeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvL25lbCBjYXNvIHNpYSBsYSBwcmltYSB2b2x0YSBjaGUgaW50ZXJhZ2lzY28gY29uIHVuIHRvb2xcbiAgICAgICAgICAvLyBlIHF1aW5kaSBub24gw6ggc3RhdG8gc2V0dGF0byBuZXNzdW4gbGF5ZXIgaW4gZWRpdGluZ1xuICAgICAgICAgIHRoaXMuX3N0YXJ0RWRpdGluZ1Rvb2wobGF5ZXIsIHRvb2xUeXBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvL2Z1bnppb25lIGNoZSByZXN0aXR1aXNjZSBsJ2FycmF5IGRlaSBjb2RpY2kgZGVpIGxheWVyc1xuICB0aGlzLmdldExheWVyQ29kZXMgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiBfLnZhbHVlcyh0aGlzLmxheWVyQ29kZXMpO1xuICB9O1xuXG4gIC8qIE1FVE9ESSBQUklWQVRJICovXG4gIC8vIGZ1bnppb25lIHBlciBzZXR0YXJlIGlsIHZlY3RvcmxheWVyIGFsbGEgcHJvcmlldMOgIHZlY3RvciBkZWwgbGF5ZXJcbiAgdGhpcy5fc2V0VXBWZWN0b3JMYXllciA9IGZ1bmN0aW9uKGxheWVyQ29kZSwgdmVjdG9yTGF5ZXIpIHtcbiAgICB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS52ZWN0b3IgPSB2ZWN0b3JMYXllcjtcbiAgfTtcblxuICAvL2Z1bnppb25lIGNoZSBwZXJtZXR0ZSBkaSBmYXJlIGlsIHNldHVwIGRlbGwnZWRpdG9yIGUgYXNzZWdhbnJsbyBhbCBsYXllclxuICB0aGlzLl9zZXRVcEVkaXRvciA9IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vb3B0aW9uIGVkaXRvclxuICAgIHZhciBvcHRpb25zX2VkaXRvciA9IHtcbiAgICAgICdtYXBTZXJ2aWNlJzogc2VsZi5fbWFwU2VydmljZSxcbiAgICAgICdmb3JtQ2xhc3MnOiBGb3JtQ2xhc3MsXG4gICAgICAnZWRpdGluZ1ZlY3RvclN0eWxlJzogdGhpcy5fbGF5ZXJzRWRpdGluZ1N0eWxlW2xheWVyQ29kZV1cbiAgICB9O1xuICAgIC8vIHByZW5kbyBpbCB2ZWN0b3IgbGF5ZXIgZGVsIGxheWVyXG4gICAgdmFyIHZlY3RvckxheWVyID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yO1xuICAgIC8vR0VTVElPTkUgRSBJTklaSUFMSVpaQVpJT05FIERFTEwnRURJVE9SIFJFTEFUSVZPIEFMIExBWUVSIFZFVFRPUklBTEVcbiAgICAvL2NyZW8gbCdpc3RhbnphIGRlbGwnZWRpdG9yIGNoZSBnZXN0aXLDoCBpbCBsYXllclxuICAgIHZhciBlZGl0b3IgPSBuZXcgc2VsZi5fZWRpdG9yQ2xhc3NbbGF5ZXJDb2RlXShvcHRpb25zX2VkaXRvcik7XG4gICAgLy9zZXR0byBpbCBsYXllciB2ZXR0b3JpYWxlIGFzc29jaWF0byBhbGwnZWRpdG9yXG4gICAgLy8gZSBpIHRpcGkgZGkgdG9vbHMgYXNzb2NpYXRpIGFkIGVzc29cbiAgICBlZGl0b3Iuc2V0VmVjdG9yTGF5ZXIodmVjdG9yTGF5ZXIpO1xuICAgIC8vZW1ldHRlIGV2ZW50byBjaGUgw6ggc3RhdGEgZ2VuZXJhdGEgdW5hIG1vZGlmaWNhIGxhIGxheWVyXG4gICAgZWRpdG9yLm9uKFwiZGlydHlcIiwgZnVuY3Rpb24gKGRpcnR5KSB7XG4gICAgICBzZWxmLnN0YXRlLmhhc0VkaXRzID0gZGlydHk7XG4gICAgfSk7XG4gICAgLy9hc3NlZ25vIGwnaXN0YW56YSBlZGl0b3IgYWwgbGF5ZXIgdHJhbWl0ZSBsYSBwcm9wcmlldMOgIGVkaXRvclxuICAgIHRoaXMuX2xheWVyc1tsYXllckNvZGVdLmVkaXRvciA9IGVkaXRvcjtcbiAgICAvLy8vIEZJTkUgR0VTVElPTkUgRURJVE9SXG4gIH07XG5cbiAgLy9mYSBwYXJ0aXJlIGwnZWRpdGluZ1xuICB0aGlzLl9zdGFydEVkaXRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBtaSBhc3NpY3VybyBjaGUgc2UgcGVyIHF1YWxzaXNpIG1vdGl2b1xuICAgIC8vIGZhY2NpbyB1bm8gc3RhcmVkaXRpbmcgZGkgdW4gZWRpdGluZyBnacOgIGF2dmlhdG9cbiAgICAvLyByaXRvcm5vIHBlcmNow6ggaG8gZ2nDoCB0dXR0byAobG8gZmFjY2lvIHBlciBzaWN1cmVubnphIG5vbiBzaSBzYSBtYWkpXG4gICAgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy5vbiB8fCB0aGlzLnN0YXRlLnJldHJpZXZpbmdEYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvLyBjaGllZG8gYWwgbG9hZGVyIGRpIGNhcmljYXJlIGkgZGF0aVxuICAgIGlmICghdGhpcy5fbG9hZGVyLmlzUmVhZHkoKSkge1xuICAgICAgdGhpcy5fbG9hZGVyLmxvYWRMYXllcnMoJ3cnLCB0aGlzLl9jdXN0b21VcmxQYXJhbWV0ZXJzKSAvLyBjYXJpY28gaSBsYXllciBpbiBtb2RhbGl0w6AgZWRpdGluZyAoc2NyaXR0dXJhKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAodmVjdG9yTGF5ZXJzQ29kZXMpIHtcbiAgICAgICAgICAvL3VuYSB2b2x0YSBjaGUgaWwgbG9hZGVyIGhhIGZpbml0byBkaSBjYXJpY2FyZSBpIGxheWVyIHZldHRvcmlhbGlcbiAgICAgICAgICAvL3F1ZXN0byBtaSByZXN0aXR1aXNjZSBpIGNvZGljZSBkZWkgbGF5ZXIgY2hlIHNvbm8gc3RhdGkgY2FyaWNhdGkoYXJyYXkpXG4gICAgICAgICAgXy5mb3JFYWNoKHZlY3RvckxheWVyc0NvZGVzLCBmdW5jdGlvbiAobGF5ZXJDb2RlKSB7XG4gICAgICAgICAgICAvLyBwZXIgb2duaSBsYXllciBmYWNjaW8gaWwgc2V0dXAgZGVsbCdlZGl0b3JcbiAgICAgICAgICAgIHNlbGYuX3NldFVwRWRpdG9yKGxheWVyQ29kZSk7XG4gICAgICAgICAgICBzZWxmLl90b2dnbGVDaGVja0JveFBsdWdpblRvb2wobGF5ZXJDb2RlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvLyBzZSB0dXR0byAgw6ggYW5kYXRvIGEgYnVvbiBmaW5lIGFnZ2l1bmdvIGkgVmVjdG9yTGF5ZXIgYWxsYSBtYXBwYVxuICAgICAgICAgIHNlbGYuX2FkZFRvTWFwKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBHVUkubm90aWZ5LmVycm9yKHQoJ2NvdWxkX25vdF9sb2FkX3ZlY3Rvcl9sYXllcnMnKSk7XG4gICAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xvYWRlci5zZXRNb2RlKCd3Jyk7XG4gICAgICB2YXIgdmVjdG9yTGF5ZXJzQ29kZXMgPSB0aGlzLl9sb2FkZXIuZ2V0VmVjdG9yTGF5ZXJzQ29kZXMoKTtcbiAgICAgIF8uZm9yRWFjaCh2ZWN0b3JMYXllcnNDb2RlcywgZnVuY3Rpb24gKGxheWVyQ29kZSkge1xuICAgICAgICAvL3NlbGYuX2xvYWRlci5zZXRWZWN0b3JGZWF0dXJlc0xvY2soc2VsZi5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yLCBzZWxmLl9sb2FkZXIuZ2V0VmVjdG9yTGF5ZXJEYXRhKGxheWVyQ29kZSkuZmVhdHVyZWxvY2tzKTtcbiAgICAgICAgLy8gcGVyIG9nbmkgbGF5ZXIgZmFjY2lvIGlsIHNldHVwIGRlbGwnZWRpdG9yXG4gICAgICAgIHNlbGYuX2xvYWRlci5sb2NrRmVhdHVyZXMoc2VsZi5fbGF5ZXJzW2xheWVyQ29kZV0ubmFtZSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHNlbGYuX3NldFVwRWRpdG9yKGxheWVyQ29kZSk7XG4gICAgICAgICAgc2VsZi5fdG9nZ2xlQ2hlY2tCb3hQbHVnaW5Ub29sKGxheWVyQ29kZSk7XG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICAgIHNlbGYuc3RhdGUuZWRpdGluZy5vbiA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuX3N0b3BFZGl0aW5nID0gZnVuY3Rpb24ocmVzZXQpIHtcbiAgICAvLyBzZSBwb3NzbyBzdG9wcGFyZSB0dXR0aSBnbGkgZWRpdG9yLi4uXG4gICAgaWYgKHRoaXMuX3N0b3BFZGl0b3IocmVzZXQpKXtcbiAgICAgIF8uZm9yRWFjaCh0aGlzLl9sYXllcnMsIGZ1bmN0aW9uKGxheWVyLCBsYXllckNvZGUpIHtcbiAgICAgICAgdmFyIHZlY3RvciA9IGxheWVyLnZlY3RvcjtcbiAgICAgICAgLy9zZWxmLl9tYXBTZXJ2aWNlLnZpZXdlci5yZW1vdmVMYXllckJ5TmFtZSh2ZWN0b3IubmFtZSk7XG4gICAgICAgIC8vbGF5ZXIudmVjdG9yPSBudWxsO1xuICAgICAgICBsYXllci5lZGl0b3I9IG51bGw7XG4gICAgICAgIHNlbGYuX3VubG9ja0xheWVyKHNlbGYuX2xheWVyc1tsYXllckNvZGVdKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fdXBkYXRlRWRpdGluZ1N0YXRlKCk7XG4gICAgICB0aGlzLl9sb2FkZXIuc2V0TW9kZSgncicpO1xuICAgICAgc2VsZi5fY2xlYW5VcCgpO1xuICAgICAgc2VsZi5lbWl0KFwiZWRpdGluZ3N0b3BwZWRcIik7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuX2NsZWFuVXAgPSBmdW5jdGlvbigpIHtcbiAgICAvL3ZhZG8gYWQgYW5udWxhcmUgbCdlc3Rlbnppb25lIGRlbCBsb2FkZXIgcGVyIHBvdGVyIHJpY2FyaWNhcmUgaSBkYXRpIHZldHR0b3JpYWxpXG4gICAgLy9kYSByaXZlZGVyZTtcbiAgICB0aGlzLl9sb2FkZXIuY2xlYW5VcExheWVycygpO1xuXG4gIH07XG4gIC8vc2Ugbm9uIMOoIGFuY29yYSBwYXJ0aXRvIGZhY2NpbyBwYXJ0aXJlIGxvIHN0YXJ0IGVkaXRvclxuICB0aGlzLl9zdGFydEVkaXRvciA9IGZ1bmN0aW9uKGxheWVyKXtcbiAgICAvLyBhdnZpbyBsJ2VkaXRvclxuICAgIC8vIHBhc3NhbmRvbGkgaWwgc2VydmljZSBjaGUgbG8gYWNjZXR0YVxuICAgIGlmIChsYXllci5lZGl0b3Iuc3RhcnQodGhpcykpIHtcbiAgICAgIC8vIHJlZ2lzdHJvIGlsIGN1cnJlbnQgbGF5ZXIgaW4gZWRpdGluZ1xuICAgICAgdGhpcy5fc2V0Q3VycmVudEVkaXRpbmdMYXllcihsYXllcik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuICAvL2Z1bnppb25lIGNoZSB2aWVuZSBjaGlhbWF0YSBhbCBjbGljayBzdSB1biB0b29sIGRlbGwnZWRpdGluZyBlIHNlXG4gIC8vbm9uIMOoIHN0YXRvIGFzc2VnbmF0byBhbmNvcmEgbmVzc3VuIGxheWVyIGNvbWUgY3VycmVudCBsYXllciBlZGl0aW5nXG4gIHRoaXMuX3N0YXJ0RWRpdGluZ1Rvb2wgPSBmdW5jdGlvbihsYXllciwgdG9vbFR5cGUsIG9wdGlvbnMpIHtcbiAgICAvL2Fzc2Vnbm8gdHJ1ZSBhbGxvIHN0YXJ0RWRpdGluZ1Rvb2wgYXR0cmlidXRvIGRlbGxsbyBzdGF0ZVxuICAgIHRoaXMuc3RhdGUuc3RhcnRpbmdFZGl0aW5nVG9vbCA9IHRydWU7XG4gICAgdmFyIGNhblN0YXJ0VG9vbCA9IHRydWU7XG4gICAgLy92ZXJpZmljbyBzZSBsJ2VkaXRvciDDqCBwYXJ0aXRvIG8gbWVub1xuICAgIGlmICghbGF5ZXIuZWRpdG9yLmlzU3RhcnRlZCgpKSB7XG4gICAgICAvL3NlIG5vbiDDqCBhbmNvcmEgcGFydGl0byBsbyBmYWNjaW8gcGFydGlyZSBlIG5lIHByZW5kbyBpbCByaXN1bHRhdG9cbiAgICAgIC8vIHRydWUgbyBmYWxzZVxuICAgICAgY2FuU3RhcnRUb29sID0gdGhpcy5fc3RhcnRFZGl0b3IobGF5ZXIpO1xuICAgIH1cbiAgICAvLyB2ZXJpZmljYSBzZSBpbCB0b29sIHB1w7IgZXNzZXJlIGF0dGl2YXRvXG4gICAgLy8gbCdlZGl0b3IgdmVyaWZpY2Egc2UgaWwgdG9vbCByaWNoaWVzdG8gw6ggY29tcGF0aWJpbGVcbiAgICAvLyBjb24gaSB0b29scyBwcmV2aXN0aSBkYWxsJ2VkaXRvci4gQ3JlYSBpc3RhbnphIGRpIHRvb2wgZSBhdnZpYSBpbCB0b29sXG4gICAgLy8gYXR0cmF2ZXJzbyBpbCBtZXRvZG8gcnVuXG4gICAgaWYgKGNhblN0YXJ0VG9vbCAmJiBsYXllci5lZGl0b3Iuc2V0VG9vbCh0b29sVHlwZSwgb3B0aW9ucykpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZUVkaXRpbmdTdGF0ZSgpO1xuICAgICAgdGhpcy5zdGF0ZS5zdGFydGluZ0VkaXRpbmdUb29sID0gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5zdGFydGluZ0VkaXRpbmdUb29sID0gZmFsc2U7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIHRoaXMuX3N0b3BFZGl0b3IgPSBmdW5jdGlvbihyZXNldCl7XG4gICAgdmFyIHJldCA9IHRydWU7XG4gICAgdmFyIGxheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgIGlmIChsYXllcikge1xuICAgICAgcmV0ID0gbGF5ZXIuZWRpdG9yLnN0b3AocmVzZXQpO1xuICAgICAgaWYgKHJldCl7XG4gICAgICAgIHRoaXMuX3NldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIHNpIG9jY3VwYSBkaSBpbnRlcnJvbWVwZXJlIGwnZWR0aW5nIHRvb2xcbiAgdGhpcy5fc3RvcEVkaXRpbmdUb29sID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJldCA9IHRydWU7XG4gICAgLy8gcmVjdXBlcmUgaWwgbGF5ZXIgaW4gY3VycmVudCBlZGl0aW5nXG4gICAgdmFyIGxheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgIC8vIHNlIGVzaXN0ZSBlZCBlcmEgc3RhdG8gc2V0dGF0b1xuICAgIGlmIChsYXllcikge1xuICAgICAgLy8gc2UgYW5kYXRvIGJlbmUgcml0b3JuYSB0cnVlXG4gICAgICByZXQgPSBsYXllci5lZGl0b3Iuc3RvcFRvb2woKTtcbiAgICAgIGlmIChyZXQpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlRWRpdGluZ1N0YXRlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSBhY2NldHRhIGNvbWUgcGFyYW1ldHJvIGlsIHRpcG8gZGlcbiAgLy8gb3BlcmF6aW9uZSBkYSBmYXJlIGEgc2Vjb25kYSBkaWNvc2Egw6ggYXZ2ZW51dG9cbiAgdGhpcy5fc2F2ZVdpdGhvdXRBc2sgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgdmFyIGRpcnR5RWRpdG9ycyA9IHt9O1xuICAgIC8vIHZlcmlmaWNvIHBlciBvZ25pIGxheWVyIHNlIGwnZWRpdG8gYXNzb2NpYXRvIMOoIERpcnR5XG4gICAgXy5mb3JFYWNoKHRoaXMuX2xheWVycywgZnVuY3Rpb24obGF5ZXIsIGxheWVyQ29kZSkge1xuICAgICAgaWYgKGxheWVyLmVkaXRvci5pc0RpcnR5KCkpIHtcbiAgICAgICAgZGlydHlFZGl0b3JzW2xheWVyQ29kZV0gPSBsYXllci5lZGl0b3I7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fc2F2ZUVkaXRzKGRpcnR5RWRpdG9ycykuXG4gICAgdGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH0pLmZhaWwoZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgIH0pXG5cbiAgfTtcbiAgdGhpcy5fY2FuY2VsT3JTYXZlID0gZnVuY3Rpb24odHlwZSl7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIC8vIHBlciBzaWN1cmV6emEgdGVuZ28gdHV0dG8gZGVudHJvIHVuIGdyb3NzbyB0cnkvY2F0Y2gsXG4gICAgLy8gcGVyIG5vbiByaXNjaGlhcmUgZGkgcHJvdm9jYXJlIGluY29uc2lzdGVuemUgbmVpIGRhdGkgZHVyYW50ZSBpbCBzYWx2YXRhZ2dpb1xuICAgIHRyeSB7XG4gICAgICB2YXIgX2Fza1R5cGUgPSAxO1xuICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgX2Fza1R5cGUgPSB0eXBlXG4gICAgICB9XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgY2hvaWNlID0gXCJjYW5jZWxcIjtcbiAgICAgIHZhciBkaXJ0eUVkaXRvcnMgPSB7fTtcbiAgICAgIC8vIHZlcmlmaWNvIHBlciBvZ25pIGxheWVyIHNlIGwnZWRpdG8gYXNzb2NpYXRvIMOoIERpcnR5XG4gICAgICBfLmZvckVhY2godGhpcy5fbGF5ZXJzLCBmdW5jdGlvbihsYXllciwgbGF5ZXJDb2RlKSB7XG4gICAgICAgIGlmIChsYXllci5lZGl0b3IuaXNEaXJ0eSgpKSB7XG4gICAgICAgICAgZGlydHlFZGl0b3JzW2xheWVyQ29kZV0gPSBsYXllci5lZGl0b3I7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgLy8gdmVyaWZpY28gc2UgY2kgc29ubyBvIG1lbm8gZWRpdG9yIHNwb3JjaGlcbiAgICAgIGlmKF8ua2V5cyhkaXJ0eUVkaXRvcnMpLmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9hc2tDYW5jZWxPclNhdmUoX2Fza1R5cGUpLlxuICAgICAgICB0aGVuKGZ1bmN0aW9uKGFjdGlvbikge1xuICAgICAgICAgIC8vIHJpdG9ybmEgaWwgdGlwbyBkaSBhemlvbmUgZGEgZmFyZVxuICAgICAgICAgIC8vIHNhdmUsIGNhbmNlbCwgbm9zYXZlXG4gICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ3NhdmUnKSB7XG4gICAgICAgICAgICAvLyBwYXNzbyBnbGkgZWRpdG9yIHNwb2NoaSBhbGxhIGZ1bnppb25lIF9zYXZlRWRpdHNcbiAgICAgICAgICAgIHNlbGYuX3NhdmVFZGl0cyhkaXJ0eUVkaXRvcnMpLlxuICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PSAnbm9zYXZlJykge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09ICdjYW5jZWwnKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSBpbiBiYXNlIGFsIHRpcG8gZGkgYXNrVHlwZVxuICAvLyB2aXN1YWxpenphIGlsIG1vZGFsZSBhIGN1aSByaXNwb25kZXJlLCBzYWx2YSBldGMgLi5cbiAgdGhpcy5fYXNrQ2FuY2VsT3JTYXZlID0gZnVuY3Rpb24odHlwZSl7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIHZhciBidXR0b25UeXBlcyA9IHtcbiAgICAgIFNBVkU6IHtcbiAgICAgICAgbGFiZWw6IFwiU2FsdmFcIixcbiAgICAgICAgY2xhc3NOYW1lOiBcImJ0bi1zdWNjZXNzXCIsXG4gICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ3NhdmUnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIE5PU0FWRToge1xuICAgICAgICBsYWJlbDogXCJUZXJtaW5hIHNlbnphIHNhbHZhcmVcIixcbiAgICAgICAgY2xhc3NOYW1lOiBcImJ0bi1kYW5nZXJcIixcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnbm9zYXZlJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBDQU5DRUw6IHtcbiAgICAgICAgbGFiZWw6IFwiQW5udWxsYVwiLFxuICAgICAgICBjbGFzc05hbWU6IFwiYnRuLXByaW1hcnlcIixcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnY2FuY2VsJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHN3aXRjaCAodHlwZSl7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGJ1dHRvbnMgPSB7XG4gICAgICAgICAgc2F2ZTogYnV0dG9uVHlwZXMuU0FWRSxcbiAgICAgICAgICBub3NhdmU6IGJ1dHRvblR5cGVzLk5PU0FWRSxcbiAgICAgICAgICBjYW5jZWw6IGJ1dHRvblR5cGVzLkNBTkNFTFxuICAgICAgICB9O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgYnV0dG9ucyA9IHtcbiAgICAgICAgICBzYXZlOiBidXR0b25UeXBlcy5TQVZFLFxuICAgICAgICAgIGNhbmNlbDogYnV0dG9uVHlwZXMuQ0FOQ0VMXG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBHVUkuZGlhbG9nLmRpYWxvZyh7XG4gICAgICBtZXNzYWdlOiBcIlZ1b2kgc2FsdmFyZSBkZWZpbml0aXZhbWVudGUgbGUgbW9kaWZpY2hlP1wiLFxuICAgICAgdGl0bGU6IFwiU2FsdmF0YWdnaW8gbW9kaWZpY2FcIixcbiAgICAgIGJ1dHRvbnM6IGJ1dHRvbnNcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuICAvLyBmdW56aW9uZSBjaGUgc2FsdmEgaSBkYXRpIHJlbGF0aXZpIGFsIGxheWVyIHZldHRvcmlhbGVcbiAgLy8gZGVsIGRpcnR5RWRpdG9yXG4gIHRoaXMuX3NhdmVFZGl0cyA9IGZ1bmN0aW9uKGRpcnR5RWRpdG9ycykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgdGhpcy5fc2VuZEVkaXRzKGRpcnR5RWRpdG9ycylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgIEdVSS5ub3RpZnkuc3VjY2VzcyhcIkkgZGF0aSBzb25vIHN0YXRpIHNhbHZhdGkgY29ycmV0dGFtZW50ZVwiKTtcbiAgICAgICAgICBzZWxmLl9jb21taXRFZGl0cyhkaXJ0eUVkaXRvcnMsIHJlc3BvbnNlKTtcbiAgICAgICAgICAvL3NlbGYuX21hcFNlcnZpY2UucmVmcmVzaE1hcCgpO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oZXJyb3JzKXtcbiAgICAgICAgICBHVUkubm90aWZ5LmVycm9yKFwiRXJyb3JlIG5lbCBzYWx2YXRhZ2dpbyBzdWwgc2VydmVyXCIpO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfTtcbiAgLy8gZnVuemlvbmUgY2hlIHByZW5kZSBjb21lIGluZ3Jlc3NvIGdsaSBlZGl0b3Igc3BvcmNoaVxuICB0aGlzLl9zZW5kRWRpdHMgPSBmdW5jdGlvbihkaXJ0eUVkaXRvcnMpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgdmFyIGVkaXRzVG9QdXNoID0gXy5tYXAoZGlydHlFZGl0b3JzLCBmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxheWVybmFtZTogZWRpdG9yLmdldFZlY3RvckxheWVyKCkubmFtZSxcbiAgICAgICAgZWRpdHM6IGVkaXRvci5nZXRFZGl0ZWRGZWF0dXJlcygpXG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gZXNlZ3VlIGlsIHBvc3QgZGVpIGRhdGlcbiAgICB0aGlzLl9wb3N0RGF0YShlZGl0c1RvUHVzaClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmV0dXJuZWQpe1xuICAgICAgICAgIGlmIChyZXR1cm5lZC5yZXN1bHQpe1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXR1cm5lZC5yZXNwb25zZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJldHVybmVkLnJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKHJldHVybmVkKXtcbiAgICAgICAgICBkZWZlcnJlZC5yZWplY3QocmV0dXJuZWQucmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuXG4gIHRoaXMuX2NvbW1pdEVkaXRzID0gZnVuY3Rpb24oZWRpdG9ycywgcmVzcG9uc2Upe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBfLmZvckVhY2goZWRpdG9ycyxmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgIHZhciBuZXdBdHRyaWJ1dGVzRnJvbVNlcnZlciA9IG51bGw7XG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UubmV3KXtcbiAgICAgICAgXy5mb3JFYWNoKHJlc3BvbnNlLm5ldywgZnVuY3Rpb24odXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzKXtcbiAgICAgICAgICB2YXIgb2xkZmlkID0gdXBkYXRlZEZlYXR1cmVBdHRyaWJ1dGVzLmNsaWVudGlkO1xuICAgICAgICAgIHZhciBmaWQgPSB1cGRhdGVkRmVhdHVyZUF0dHJpYnV0ZXMuaWQ7XG4gICAgICAgICAgZWRpdG9yLmdldEVkaXRWZWN0b3JMYXllcigpLnNldEZlYXR1cmVEYXRhKG9sZGZpZCxmaWQsbnVsbCx1cGRhdGVkRmVhdHVyZUF0dHJpYnV0ZXMpO1xuICAgICAgICAgIF8uZm9yRWFjaChyZXNwb25zZS5uZXdfbG9ja2lkcywgZnVuY3Rpb24obmV3bG9ja0lkKXtcbiAgICAgICAgICAgIGVkaXRvci5nZXRWZWN0b3JMYXllcigpLmFkZExvY2tJZChuZXdsb2NrSWQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coJ2VkaXRvciBjb21taXQnKTtcbiAgICAgIGVkaXRvci5jb21taXQoKTtcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLl91bmRvRWRpdHMgPSBmdW5jdGlvbihkaXJ0eUVkaXRvcnMpe1xuICAgIHZhciBjdXJyZW50RWRpdGluZ0xheWVyQ29kZSA9IHRoaXMuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKS5sYXllckNvZGU7XG4gICAgdmFyIGVkaXRvciA9IGRpcnR5RWRpdG9yc1tjdXJyZW50RWRpdGluZ0xheWVyQ29kZV07XG4gICAgdGhpcy5fc3RvcEVkaXRpbmcodHJ1ZSk7XG4gIH07XG4gIC8vIGVzZWd1ZSBsJ3VwZGF0ZSBkZWxsbyBzdGF0ZSBuZWwgY2FzbyBhZCBlc2VtcGlvIGRpIHVuIHRvZ2dsZSBkZWwgYm90dG9uZSB0b29sXG4gIHRoaXMuX3VwZGF0ZUVkaXRpbmdTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIHByZW5kZSBpbCBsYXllciBpbiBFZGl0aW5nXG4gICAgdmFyIGxheWVyID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpO1xuICAgIGlmIChsYXllcikge1xuICAgICAgdGhpcy5zdGF0ZS5lZGl0aW5nLmxheWVyQ29kZSA9IGxheWVyLmxheWVyQ29kZTtcbiAgICAgIHRoaXMuc3RhdGUuZWRpdGluZy50b29sVHlwZSA9IGxheWVyLmVkaXRvci5nZXRBY3RpdmVUb29sKCkuZ2V0VHlwZSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuZWRpdGluZy5sYXllckNvZGUgPSBudWxsO1xuICAgICAgdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xUeXBlID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5fdXBkYXRlVG9vbFN0ZXBzU3RhdGUoKTtcbiAgfTtcblxuICB0aGlzLl91cGRhdGVUb29sU3RlcHNTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgdmFyIGFjdGl2ZVRvb2w7XG4gICAgaWYgKGxheWVyKSB7XG4gICAgICBhY3RpdmVUb29sID0gbGF5ZXIuZWRpdG9yLmdldEFjdGl2ZVRvb2woKTtcbiAgICB9XG4gICAgaWYgKGFjdGl2ZVRvb2wgJiYgYWN0aXZlVG9vbC5nZXRUb29sKCkpIHtcbiAgICAgIHZhciB0b29sSW5zdGFuY2UgPSBhY3RpdmVUb29sLmdldFRvb2woKTtcbiAgICAgIGlmICh0b29sSW5zdGFuY2Uuc3RlcHMpe1xuICAgICAgICB0aGlzLl9zZXRUb29sU3RlcFN0YXRlKGFjdGl2ZVRvb2wpO1xuICAgICAgICB0b29sSW5zdGFuY2Uuc3RlcHMub24oJ3N0ZXAnLCBmdW5jdGlvbihpbmRleCxzdGVwKSB7XG4gICAgICAgICAgc2VsZi5fc2V0VG9vbFN0ZXBTdGF0ZShhY3RpdmVUb29sKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRvb2xJbnN0YW5jZS5zdGVwcy5vbignY29tcGxldGUnLCBmdW5jdGlvbigpe1xuICAgICAgICAgIHNlbGYuX3NldFRvb2xTdGVwU3RhdGUoKTtcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzZWxmLl9zZXRUb29sU3RlcFN0YXRlKCk7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuX3NldFRvb2xTdGVwU3RhdGUgPSBmdW5jdGlvbihhY3RpdmVUb29sKXtcbiAgICB2YXIgaW5kZXgsIHRvdGFsLCBtZXNzYWdlO1xuICAgIGlmIChfLmlzVW5kZWZpbmVkKGFjdGl2ZVRvb2wpKXtcbiAgICAgIGluZGV4ID0gbnVsbDtcbiAgICAgIHRvdGFsID0gbnVsbDtcbiAgICAgIG1lc3NhZ2UgPSBudWxsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHZhciB0b29sID0gYWN0aXZlVG9vbC5nZXRUb29sKCk7XG4gICAgICB2YXIgbWVzc2FnZXMgPSB0b29sU3RlcHNNZXNzYWdlc1thY3RpdmVUb29sLmdldFR5cGUoKV07XG4gICAgICBpbmRleCA9IHRvb2wuc3RlcHMuY3VycmVudFN0ZXBJbmRleCgpO1xuICAgICAgdG90YWwgPSB0b29sLnN0ZXBzLnRvdGFsU3RlcHMoKTtcbiAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlc1tpbmRleF07XG4gICAgICBpZiAoXy5pc1VuZGVmaW5lZChtZXNzYWdlKSkge1xuICAgICAgICBpbmRleCA9IG51bGw7XG4gICAgICAgIHRvdGFsID0gbnVsbDtcbiAgICAgICAgbWVzc2FnZSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC5uID0gaW5kZXggKyAxO1xuICAgIHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC50b3RhbCA9IHRvdGFsO1xuICAgIHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC5tZXNzYWdlID0gbWVzc2FnZTtcbiAgfTtcblxuICB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRFZGl0aW5nTGF5ZXI7XG4gIH07XG5cbiAgdGhpcy5fc2V0Q3VycmVudEVkaXRpbmdMYXllciA9IGZ1bmN0aW9uKGxheWVyKXtcbiAgICBpZiAoIWxheWVyKXtcbiAgICAgIHRoaXMuX2N1cnJlbnRFZGl0aW5nTGF5ZXIgPSBudWxsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRFZGl0aW5nTGF5ZXIgPSBsYXllcjtcbiAgICB9XG4gIH07XG4gIHRoaXMuX2FkZFRvTWFwID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vcmVjdXBlcm8gbCdlbGVtZW50byBtYXAgb2wzXG4gICAgdmFyIG1hcCA9IHRoaXMuX21hcFNlcnZpY2Uudmlld2VyLm1hcDtcbiAgICB2YXIgbGF5ZXJDb2RlcyA9IHRoaXMuZ2V0TGF5ZXJDb2RlcygpO1xuICAgIC8vb2duaSBsYXllciBsbyBhZ2dpdW5nbyBhbGxhIG1hcHBhXG4gICAgLy9jb24gaWwgbWV0b2RvIGFkZFRvTWFwIGRpIHZlY3RvckxheWVyXG4gICAgXy5mb3JFYWNoKGxheWVyQ29kZXMsIGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgICAgc2VsZi5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yLmFkZFRvTWFwKG1hcCk7XG4gICAgfSk7XG4gICAgLy9hZ2dpdW5nbyBpbCBsaXN0ZW5lclxuICAgIGlmICghdGhpcy5fbG9hZERhdGFPbk1hcFZpZXdDaGFuZ2VMaXN0ZW5lcikge1xuICAgICAgLy92aWVuZSByaXRvcm5hdGEgbGEgbGlzdGVuZXIga2V5XG4gICAgICB0aGlzLl9sb2FkRGF0YU9uTWFwVmlld0NoYW5nZUxpc3RlbmVyID0gdGhpcy5fbWFwU2VydmljZS5vbmFmdGVyKCdzZXRNYXBWaWV3JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2VsZi5zdGF0ZS5lZGl0aW5nLm9uICYmIHNlbGYuc3RhdGUuZWRpdGluZy5lbmFibGVkKSB7XG4gICAgICAgICAgc2VsZi5fbG9hZGVyLmxvYWRBbGxWZWN0b3JzRGF0YSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgdGhpcy5fcG9zdERhdGEgPSBmdW5jdGlvbihlZGl0c1RvUHVzaCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvLyBtYW5kbyB1biBvZ2dldHRvIGNvbWUgbmVsIGNhc28gZGVsIGJhdGNoLFxuICAgIC8vIG1hIGluIHF1ZXN0byBjYXNvIGRldm8gcHJlbmRlcmUgc29sbyBpbCBwcmltbywgZSB1bmljbywgZWxlbWVudG9cbiAgICBpZiAoZWRpdHNUb1B1c2gubGVuZ3RoID4gMSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Bvc3RCYXRjaERhdGEoZWRpdHNUb1B1c2gpO1xuICAgIH1cbiAgICB2YXIgbGF5ZXJOYW1lID0gZWRpdHNUb1B1c2hbMF0ubGF5ZXJuYW1lO1xuICAgIHZhciBlZGl0cyA9IGVkaXRzVG9QdXNoWzBdLmVkaXRzO1xuICAgIHZhciBqc29uRGF0YSA9IEpTT04uc3RyaW5naWZ5KGVkaXRzKTtcbiAgICByZXR1cm4gJC5wb3N0KHtcbiAgICAgIHVybDogdGhpcy5jb25maWcuYmFzZXVybCtsYXllck5hbWUrXCIvP1wiK3NlbGYuX2N1c3RvbVVybFBhcmFtZXRlcnMsXG4gICAgICBkYXRhOiBqc29uRGF0YSxcbiAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuX3Bvc3RCYXRjaERhdGEgPSBmdW5jdGlvbihtdWx0aUVkaXRzVG9QdXNoKXtcbiAgICB2YXIgZWRpdHMgPSB7fTtcbiAgICBfLmZvckVhY2gobXVsdGlFZGl0c1RvUHVzaCxmdW5jdGlvbihlZGl0c1RvUHVzaCl7XG4gICAgICBlZGl0c1tlZGl0c1RvUHVzaC5sYXllcm5hbWVdID0gZWRpdHNUb1B1c2guZWRpdHM7XG4gICAgfSk7XG4gICAgdmFyIGpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoZWRpdHMpO1xuICAgIHJldHVybiAkLnBvc3Qoe1xuICAgICAgdXJsOiB0aGlzLmNvbmZpZy5iYXNldXJsLFxuICAgICAgZGF0YToganNvbkRhdGEsXG4gICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLl91bmxvY2sgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGF5ZXJDb2RlcyA9IHRoaXMuZ2V0TGF5ZXJDb2RlcygpO1xuICAgIC8vIGVzZWd1byBsZSByaWNoaWVzdGUgZGVsbGUgY29uZmlndXJhemlvbmkgZSBtaSB0ZW5nbyBsZSBwcm9tZXNzZVxuICAgIF8ubWFwKGxheWVyQ29kZXMsZnVuY3Rpb24obGF5ZXJDb2RlKXtcbiAgICAgIHJldHVybiBzZWxmLl91bmxvY2tMYXllcihzZWxmLl9sYXllcnNbbGF5ZXJDb2RlXSk7XG4gICAgfSk7XG4gIH07XG4gIC8vIGZ1bnppb25lIGludmlvIGxvY2tzXG4gIHRoaXMuX2xvY2tMYXllciA9IGZ1bmN0aW9uKGxheWVyQ29uZmlnKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBmZWF0dXJlTG9ja3MgPSB0aGlzLl9sb2FkZXIuX3ZlY3RvckxheWVyc0RhdGFbbGF5ZXJDb25maWcubmFtZV0uZmVhdHVyZWxvY2tzO1xuICAgIHZhciBqc29uRGF0YSA9IEpTT04uc3RyaW5naWZ5KGZlYXR1cmVMb2Nrcyk7XG4gICAgcmV0dXJuICQucG9zdCh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLmJhc2V1cmwrbGF5ZXJDb25maWcubmFtZStcIi8/bG9ja1wiICsgdGhpcy5fY3VzdG9tVXJsUGFyYW1ldGVycyxcbiAgICAgIGRhdGE6IGpzb25EYXRhLFxuICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5fbG9ja0xheWVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsYXllckNvZGVzID0gdGhpcy5nZXRMYXllckNvZGVzKCk7XG4gICAgLy8gZXNlZ3VvIGxlIHJpY2hpZXN0ZSBkZWxsZSBjb25maWd1cmF6aW9uaSBlIG1pIHRlbmdvIGxlIHByb21lc3NlXG4gICAgXy5tYXAobGF5ZXJDb2RlcyxmdW5jdGlvbihsYXllckNvZGUpe1xuICAgICAgcmV0dXJuIHNlbGYuX2xvY2tMYXllcihzZWxmLl9sYXllcnNbbGF5ZXJDb2RlXSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5fdW5sb2NrTGF5ZXIgPSBmdW5jdGlvbihsYXllckNvbmZpZyl7XG4gICAgJC5nZXQodGhpcy5jb25maWcuYmFzZXVybCtsYXllckNvbmZpZy5uYW1lK1wiLz91bmxvY2tcIiArIHRoaXMuX2N1c3RvbVVybFBhcmFtZXRlcnMpO1xuICB9O1xuICAvL2dldCBsb2FkZXIgc2VydmljZVxuICB0aGlzLmdldExvYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9sb2FkZXI7XG4gIH1cbn1cblxuaW5oZXJpdChHZW9ub3Rlc1NlcnZpY2UsIEczV09iamVjdCk7XG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBHZW9ub3Rlc1NlcnZpY2U7XG59LHtcIi4vZWRpdG9ycy9hdHRyaWJ1dGVzZm9ybVwiOjF9XX0se30sWzNdKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
