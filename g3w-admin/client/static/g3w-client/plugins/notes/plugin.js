!function e(t,i,o){function n(r,a){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};t[r][0].call(d.exports,function(e){var i=t[r][1][e];return n(i?i:e)},d,d.exports,e,t,i,o)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({1:[function(t,e,i){function o(t){s(this,t),this._formPanel=l}var n=g3wsdk.core.utils.inherit,s=g3wsdk.core.utils.base,r=g3wsdk.gui.FormPanel,a=g3wsdk.gui.Form,l=r.extend({});n(o,a),e.exports=o},{}],2:[function(t,e,i){function o(t){t.formTools=[],s(this,t);var e=function(){a.saveEdits()};this.onafter("addFeature",e),this.onafter("deleteFeature",e),this.onafter("moveFeature",e),this.onafter("pickFeature",e)}var n=g3wsdk.core.utils.inherit,s=g3wsdk.core.utils.base,r=g3wsdk.core.Editor,a=t("../pluginservice");t("./attributesform");n(o,r),e.exports=o},{"../pluginservice":7,"./attributesform":1}],3:[function(t,e,i){var o=g3wsdk.core.utils.inherit,n=g3wsdk.core.utils.base,s=g3wsdk.core.Plugin,r=g3wsdk.gui.GUI,a=g3wsdk.core.ProjectsRegistry,l=t("pluginconfig"),c=t("./pluginservice"),d=t("./panel"),u=function(){n(this),this.name="notes",this.config=null,this.service=null,this.init=function(){this.setPluginService(c),this.config=this.getPluginConfig(),this.setUpIconsUrl(this.config.layers),this.registerPlugin(this.config.gid)&&(r.ready?this.setupGui():r.on("ready",_.bind(this.setupGui,this)),l.customUrlParameters=this.createPluginCustomUrlParameters(),this.service.init(this.config,l))},this.setupGui=function(){var t=r.getComponent("tools"),e=t.getService(),i=l.tools(this);this.service.setPluginTools(i),this.service.setPluginToolsService(e),e.addTools(1,"GEONOTES",i)},this.toolsActions={showHideLayer:function(){this.service.showHideLayer(l.layersCode.GEONOTES)},showEditingPanel:function(){var t=new d;_.forEach(this.config.layers,function(e,i){t.setIconsTool(i,e.icontools)}),this.service.toggleEditing(),r.showPanel(t)},isChecked:function(t){return this.service.isLayerVisible()}},this.createPluginCustomUrlParameters=function(){var t="&",e=a.getCurrentProject();return t+="project_type="+e.getType()+"&project_id="+e.getId()},this.setUpIconsUrl=function(t){_.forEach(t,function(t){l.layers[t.name].icons=t.icons})},this.setupToolsAction=function(t){_.forEach(t,function(t){})}};o(u,s),function(t){t.init()}(new u)},{"./panel":5,"./pluginservice":7,pluginconfig:6}],4:[function(t,e,i){e.exports='<div class="g3w-iternet-editing-panel">\n  <template v-for="toolbar in editorstoolbars">\n    <div class="panel panel-primary">\n      <div class="panel-heading">\n        <h3 class="panel-title">{{ toolbar.name }}</h3>\n      </div>\n      <div class="panel-body">\n        <template v-for="tool in toolbar.tools">\n          <div class="editbtn" :class="{\'enabled\' : (state.editing.on && editingtoolbtnEnabled(tool)), \'toggled\' : editingtoolbtnToggled(toolbar.layercode, tool.tooltype)}">\n            <img height="30px" width="30px" @click="toggleEditTool(toolbar.layercode, tool.tooltype)" :alt.once="tool.title" :title.once="tool.title" :src.once="tool.icon"></img>\n          </div>\n        </template>\n      </div>\n    </div>\n  </template>\n  <div v-show="state.retrievingData" style="color:#ffffff">\n    <span>Caricamento Dati ... </span><img :src="resourcesurl +\'images/loader.svg\'">\n  </div>\n  <div class="message">\n    {{{ message }}}\n  </div>\n</div>\n'},{}],5:[function(t,e,i){function o(){this.id="geonotes-editing-panel",this.name="Gestione dati GEONOTES",this.internalPanel=new c}var n=g3wsdk.core.utils.resolve,s=g3wsdk.core.utils.inherit,r=g3wsdk.gui.GUI,a=g3wsdk.gui.Panel,l=t("./pluginservice"),c=Vue.extend({template:t("./panel.html"),data:function(){var t=r.getResourcesUrl()+"images/";return{state:l.state,resourcesurl:r.getResourcesUrl(),editorstoolbars:[{name:"Geonotes",layercode:l.layerCodes.GEONOTES,tools:[{title:"Aggiungi Geonota",tooltype:"addfeature",icontool:"add",icon:t+"iternetAddPoint.png"},{title:"Sposta Geonota",tooltype:"movefeature",icontool:"move",icon:t+"iternetMovePoint.png"},{title:"Rimuovi Geonota",tooltype:"deletefeature",icontool:"delete",icon:t+"iternetDeletePoint.png"},{title:"Edita geonota",tooltype:"editattributes",icontool:"edit",icon:t+"editAttributes.png"}]}],savebtnlabel:"Salva"}},methods:{toggleEditing:function(){l.toggleEditing()},saveEdits:function(){l.saveEdits()},toggleEditTool:function(t,e){""!=e&&this.state.editing.on&&l.toggleEditTool(t,e)},editingtoolbtnToggled:function(t,e){return this.state.editing.layerCode==t&&this.state.editing.toolType==e},editingtoolbtnEnabled:function(t){return""!=t.tooltype},onClose:function(){l.stop()}},computed:{editingbtnlabel:function(){return this.state.editing.on?"Termina editing":"Avvia editing"},editingbtnEnabled:function(){return this.state.editing.enabled||this.state.editing.on?"":"disabled"},message:function(){var t="";if(this.state.editing.enabled){if(this.state.editing.toolstep.message){var e=this.state.editing.toolstep.n,i=this.state.editing.toolstep.total,o=this.state.editing.toolstep.message;t='<div style="margin-top:20px">GUIDA STRUMENTO:</div><div><span>['+e+"/"+i+'] </span><span style="color: yellow">'+o+"</span></div>"}}else t='<span style="color: red">Aumentare il livello di zoom per abilitare l\'editing';return t}}});s(o,a);var d=a.prototype;d.onShow=function(t){var e=this.internalPanel;return e.$mount().$appendTo(t),n(!0)},d.onClose=function(){console.log("close");var t=this,e=$.Deferred();return l.stop().then(function(){t.internalPanel.$destroy(!0),t.internalPanel=null,e.resolve()}).fail(function(){e.reject()}),e.promise()},d.setIconsTool=function(t,e){var i=this.internalPanel.editorstoolbars;_.forEach(i,function(o,n){t==o.layercode&&_.forEach(o.tools,function(t,o){e[t.icontool]&&(i[n].tools[o].icon=e[t.icontool])})})},e.exports=o},{"./panel.html":4,"./pluginservice":7}],6:[function(t,e,i){function o(t){return o=[{name:"Geonotes",layerName:"note",type:"checkbox",isCheck:!1,action:_.bind(t.toolsActions.showHideLayer,t)},{name:"Edita Geonotes",action:_.bind(t.toolsActions.showEditingPanel,t)}]}var n=t("./editors/geonoteseditor"),s=this.layerCodes={GEONOTES:"note"},r={};r[s.GEONOTES]=n;var a={},l={},c={},d=function(t){var e=t.iconurl;return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,.5],offset:[0,0],src:e})})};l[s.GEONOTES]={url:d,add:d,"delete":d,edit:d,move:d},c[s.GEONOTES]={},a[s.GEONOTES]={layerCode:s.GEONOTES,vector:null,editor:null,iconurl:null,crs:null,style:l[s.GEONOTES]},e.exports={layersCode:s,layers:a,layersStyle:l,layersEditingStyle:c,editorClass:r,tools:o}},{"./editors/geonoteseditor":2}],7:[function(e,i,o){function n(){var e=this;this._mapService=null,this._loadDataOnMapViewChangeListener=null,this._currentEditingLayer=null,this._pluginTools=null,this.state={editing:{on:!1,enabled:!1,layerCode:null,toolType:null,startingEditingTool:!1,toolstep:{n:null,total:null,message:null}},retrievingData:!1,hasEdits:!1},this._loader=new l;this.init=function(t,e){var i=this;this.config=t,this._crs=null,this._layers=e.layers,this._editorClass=e.editorClass,this.layerCodes=e.layersCode,this._layersStyle=e.layersStyle,this._layersEditingStyle=e.layersEditingStyle,this._customUrlParameters=e.customUrlParameters||null,this._mapService=a.getComponent("map").getService(),_.forEach(this.config.layers,function(t,e){i._layers[e].infourl=t.infourl,i._layers[e].crs="EPSG:"+t.crs,i.setLayerStyle(e)});var o={layers:this._layers,baseurl:this.config.baseurl,mapService:this._mapService};this._loader.init(o),this._loader.on("loadingvectorlayersstart",function(){i.state.retrievingData=!0}),this._loader.on("loadingvectorlayersend",function(){i.state.retrievingData=!1}),this._loader.on("setmode",function(t){switch(t){case"w":i.state.editing.on=!0,i.emit("editingstarted");break;case"r":i.state.editing.on=!1}}),this._mapService.on("pointerInteractionSet",function(t){var e=i._getCurrentEditingLayer();if(e){var o=e.editor.getActiveTool().instance;o&&!o.ownsInteraction(t)&&i._stopEditingTool()}}),this.state.editing.enabled=!0,_.forEach(this._layers,function(e,o){var n=t.layers[o].id,s=t.layers[o].name,r=i._mapService.getProject().getLayerById(n);r?(e.name=r.getOrigName(),e.id=n):(e.name=s,e.id=n)})},this.setPluginToolsService=function(t){this._pluginToolsService=t},this.setPluginTools=function(t){this._pluginTools=t},this.getPluginTools=function(){return this._pluginTools},this.setLayerStyle=function(t){var e=this,i=this._layers[t].icons;_.forEach(i,function(i,o){"url"==o&&(e._layers[t].style=e._layersStyle[t][o]({iconurl:i})),e._layersEditingStyle[t][o]=e._layersStyle[t][o]({iconurl:i})})},this.getLayerStyle=function(t){return this._layers[t].style},this._toggleCheckBoxPluginTool=function(t){var e=this,i=0;this._pluginToolsService.getState().toolsGroups.length>1&&(i=1);var o=this._pluginToolsService.getState().toolsGroups[i].tools,n=this._layers[t].vector;_.forEach(o,function(s,r){if(_.has(s,"type")&&s.layerName==t&&"checkbox"==s.type){var a=o[r];a.isCheck=!0,o[r]=a,e._pluginToolsService.updateToolsGroup(i,{name:"GEONOTES",tools:o}),n.setVisible(!0)}})},this.isLayerVisible=function(t){var e=this._layers[t].vector;return e.isVisible()},this.showHideLayer=function(t){var e=this,i=null;this._loader.isReady()?(i=this._layers[t].vector,i.setVisible(!i.isVisible())):this._loader.loadLayers("r",this._customUrlParameters).then(function(){e._addToMap()})},this.stop=function(){var t=$.Deferred();return this.state.editing.on?this._cancelOrSave().then(function(){e._stopEditing(),t.resolve()}).fail(function(){t.reject()}):t.resolve(),t.promise()},this.toggleEditing=function(){var t=$.Deferred();if(this.state.editing.enabled&&!this.state.editing.on)this._startEditing();else if(this.state.editing.on)return this.stop();return t.promise()},this.saveEdits=function(){this._saveWithoutAsk()},this.toggleEditTool=function(t,e){var i=this,o=this._layers[t];if(o){var n=this._getCurrentEditingLayer();n&&t==n.layerCode?e==n.editor.getActiveTool().getType()?this._stopEditingTool():(this._stopEditingTool(),this._startEditingTool(n,e)):n&&n.editor.isStarted()?this._cancelOrSave(2).then(function(){i._stopEditor()&&i._startEditingTool(o,e)}):this._startEditingTool(o,e)}},this.getLayerCodes=function(){return _.values(this.layerCodes)},this._setUpVectorLayer=function(t,e){this._layers[t].vector=e},this._setUpEditor=function(t){var e=this,i={mapService:e._mapService,formClass:c,editingVectorStyle:this._layersEditingStyle[t]},o=this._layers[t].vector,n=new e._editorClass[t](i);n.setVectorLayer(o),n.on("dirty",function(t){e.state.hasEdits=t}),this._layers[t].editor=n},this._startEditing=function(){if(!this.state.editing.on&&!this.state.retrievingData){var e=this;if(this._loader.isReady()){this._loader.setMode("w");var i=this._loader.getVectorLayersCodes();_.forEach(i,function(t){e._loader.lockFeatures(e._layers[t].name).then(function(i){e._setUpEditor(t),e._toggleCheckBoxPluginTool(t)})}),e.state.editing.on=!0}else this._loader.loadLayers("w",this._customUrlParameters).then(function(t){_.forEach(t,function(t){e._setUpEditor(t),e._toggleCheckBoxPluginTool(t)}),e._addToMap()}).fail(function(){a.notify.error(t("could_not_load_vector_layers"))})}},this._stopEditing=function(t){this._stopEditor(t)&&(_.forEach(this._layers,function(t,i){t.vector;t.editor=null,e._unlockLayer(e._layers[i])}),this._updateEditingState(),this._loader.setMode("r"),e._cleanUp(),e.emit("editingstopped"))},this._cleanUp=function(){this._loader.cleanUpLayers()},this._startEditor=function(t){return!!t.editor.start(this)&&(this._setCurrentEditingLayer(t),!0)},this._startEditingTool=function(t,e,i){this.state.startingEditingTool=!0;var o=!0;return t.editor.isStarted()||(o=this._startEditor(t)),o&&t.editor.setTool(e,i)?(this._updateEditingState(),this.state.startingEditingTool=!1,!0):(this.state.startingEditingTool=!1,!1)},this._stopEditor=function(t){var e=!0,i=this._getCurrentEditingLayer();return i&&(e=i.editor.stop(t),e&&this._setCurrentEditingLayer()),e},this._stopEditingTool=function(){var t=!0,e=this._getCurrentEditingLayer();return e&&(t=e.editor.stopTool(),t&&this._updateEditingState()),t},this._saveWithoutAsk=function(){var t=$.Deferred(),e={};_.forEach(this._layers,function(t,i){t.editor.isDirty()&&(e[i]=t.editor)}),this._saveEdits(e).then(function(e){t.resolve()}).fail(function(e){t.reject()})},this._cancelOrSave=function(t){var e=$.Deferred();try{var i=1;t&&(i=t);var o=this,n={};_.forEach(this._layers,function(t,e){t.editor.isDirty()&&(n[e]=t.editor)}),_.keys(n).length?this._askCancelOrSave(i).then(function(t){"save"===t?o._saveEdits(n).then(function(t){e.resolve()}).fail(function(t){e.reject()}):"nosave"==t?e.resolve():"cancel"==t&&e.reject()}):e.resolve()}catch(s){e.reject()}return e.promise()},this._askCancelOrSave=function(t){var e=$.Deferred(),i={SAVE:{label:"Salva",className:"btn-success",callback:function(){e.resolve("save")}},NOSAVE:{label:"Termina senza salvare",className:"btn-danger",callback:function(){e.resolve("nosave")}},CANCEL:{label:"Annulla",className:"btn-primary",callback:function(){e.resolve("cancel")}}};switch(t){case 1:buttons={save:i.SAVE,nosave:i.NOSAVE,cancel:i.CANCEL};break;case 2:buttons={save:i.SAVE,cancel:i.CANCEL}}return a.dialog.dialog({message:"Vuoi salvare definitivamente le modifiche?",title:"Salvataggio modifica",buttons:buttons}),e.promise()},this._saveEdits=function(t){var e=this,i=$.Deferred();return this._sendEdits(t).then(function(o){a.notify.success("I dati sono stati salvati correttamente"),e._commitEdits(t,o),i.resolve()}).fail(function(t){a.notify.error("Errore nel salvataggio sul server"),i.resolve()}),i.promise()},this._sendEdits=function(t){var e=$.Deferred(),i=_.map(t,function(t){return{layername:t.getVectorLayer().name,edits:t.getEditedFeatures()}});return this._postData(i).then(function(t){t.result?e.resolve(t.response):e.reject(t.response)}).fail(function(t){e.reject(t.response)}),e.promise()},this._commitEdits=function(t,e){_.forEach(t,function(t){e&&e["new"]&&_.forEach(e["new"],function(i){var o=i.clientid,n=i.id;t.getEditVectorLayer().setFeatureData(o,n,null,i),_.forEach(e.new_lockids,function(e){t.getVectorLayer().addLockId(e)})}),console.log("editor commit"),t.commit()})},this._undoEdits=function(t){var e=this._getCurrentEditingLayer().layerCode;t[e];this._stopEditing(!0)},this._updateEditingState=function(){var t=this._getCurrentEditingLayer();t?(this.state.editing.layerCode=t.layerCode,this.state.editing.toolType=t.editor.getActiveTool().getType()):(this.state.editing.layerCode=null,this.state.editing.toolType=null),this._updateToolStepsState()},this._updateToolStepsState=function(){var t,e=this,i=this._getCurrentEditingLayer();if(i&&(t=i.editor.getActiveTool()),t&&t.getTool()){var o=t.getTool();o.steps&&(this._setToolStepState(t),o.steps.on("step",function(i,o){e._setToolStepState(t)}),o.steps.on("complete",function(){e._setToolStepState()}))}else e._setToolStepState()},this._setToolStepState=function(t){var e,i,o;if(_.isUndefined(t))e=null,i=null,o=null;else{var n=t.getTool(),s=toolStepsMessages[t.getType()];e=n.steps.currentStepIndex(),i=n.steps.totalSteps(),o=s[e],_.isUndefined(o)&&(e=null,i=null,o=null)}this.state.editing.toolstep.n=e+1,this.state.editing.toolstep.total=i,this.state.editing.toolstep.message=o},this._getCurrentEditingLayer=function(){return this._currentEditingLayer},this._setCurrentEditingLayer=function(t){t?this._currentEditingLayer=t:this._currentEditingLayer=null},this._addToMap=function(){var t=this,e=this._mapService.viewer.map,i=this.getLayerCodes();_.forEach(i,function(i){t._layers[i].vector.addToMap(e)}),this._loadDataOnMapViewChangeListener||(this._loadDataOnMapViewChangeListener=this._mapService.onafter("setMapView",function(){t.state.editing.on&&t.state.editing.enabled&&t._loader.loadAllVectorsData()}))},this._postData=function(t){var e=this;if(t.length>1)return this._postBatchData(t);var i=t[0].layername,o=t[0].edits,n=JSON.stringify(o),s=new FormData;return _.forEach(o,function(t,e){s.append(e,t)}),$.ajax({type:"POST",url:this.config.baseurl+i+"/?"+e._customUrlParameters,contentType:"application/json",data:n})},this._postBatchData=function(t){var e={};_.forEach(t,function(t){e[t.layername]=t.edits});var i=JSON.stringify(e);return $.post({url:this.config.baseurl,data:i,contentType:"application/json"})},this._unlock=function(){var t=this.getLayerCodes();_.map(t,function(t){return e._unlockLayer(e._layers[t])})},this._lockLayer=function(t){var e=this._loader._vectorLayersData[t.name].featurelocks,i=JSON.stringify(e);return $.post({url:this.config.baseurl+t.name+"/?lock"+this._customUrlParameters,data:i,contentType:"application/json"})},this._lockLayers=function(){var t=this.getLayerCodes();_.map(t,function(t){return e._lockLayer(e._layers[t])})},this._unlockLayer=function(t){$.get(this.config.baseurl+t.name+"/?unlock"+this._customUrlParameters)},this.getLoader=function(){return this._loader}}var s=g3wsdk.core.utils.inherit,r=g3wsdk.core.G3WObject,a=g3wsdk.gui.GUI,l=g3wsdk.core.VectorLayerLoader,c=e("./editors/attributesform");s(n,r),i.exports=new n},{"./editors/attributesform":1}]},{},[3]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1aWxkLmpzIl0sIm5hbWVzIjpbImUiLCJ0IiwibiIsInIiLCJzIiwibyIsInUiLCJhIiwicmVxdWlyZSIsImkiLCJmIiwiRXJyb3IiLCJjb2RlIiwibCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIkdlb25vdGVGb3JtIiwib3B0aW9ucyIsImJhc2UiLCJ0aGlzIiwiX2Zvcm1QYW5lbCIsIkdlb25vdGVGb3JtUGFuZWwiLCJpbmhlcml0IiwiZzN3c2RrIiwiY29yZSIsInV0aWxzIiwiRm9ybVBhbmVsIiwiZ3VpIiwiRm9ybSIsImV4dGVuZCIsIjIiLCJHZW9ub3Rlc0VkaXRvciIsImZvcm1Ub29scyIsInNhdmVFZGl0c1RvRGF0YWJhc2UiLCJQbHVnaW5TZXJ2aWNlIiwic2F2ZUVkaXRzIiwib25hZnRlciIsIkVkaXRvciIsIi4uL3BsdWdpbnNlcnZpY2UiLCIuL2F0dHJpYnV0ZXNmb3JtIiwiMyIsIlBsdWdpbiIsIkdVSSIsIlByb2plY3RzUmVnaXN0cnkiLCJwbHVnaW5Db25maWciLCJTZXJ2aWNlIiwiRWRpdGluZ1BhbmVsIiwiX1BsdWdpbiIsIm5hbWUiLCJjb25maWciLCJzZXJ2aWNlIiwiaW5pdCIsInNldFBsdWdpblNlcnZpY2UiLCJnZXRQbHVnaW5Db25maWciLCJzZXRVcEljb25zVXJsIiwibGF5ZXJzIiwicmVnaXN0ZXJQbHVnaW4iLCJnaWQiLCJyZWFkeSIsInNldHVwR3VpIiwib24iLCJfIiwiYmluZCIsImN1c3RvbVVybFBhcmFtZXRlcnMiLCJjcmVhdGVQbHVnaW5DdXN0b21VcmxQYXJhbWV0ZXJzIiwidG9vbHNDb21wb25lbnQiLCJnZXRDb21wb25lbnQiLCJ0b29sc1NlcnZpY2UiLCJnZXRTZXJ2aWNlIiwidG9vbHMiLCJzZXRQbHVnaW5Ub29scyIsInNldFBsdWdpblRvb2xzU2VydmljZSIsImFkZFRvb2xzIiwidG9vbHNBY3Rpb25zIiwic2hvd0hpZGVMYXllciIsImxheWVyc0NvZGUiLCJHRU9OT1RFUyIsInNob3dFZGl0aW5nUGFuZWwiLCJwYW5lbCIsImZvckVhY2giLCJsYXllckNvbmZpZyIsImxheWVyQ29kZSIsInNldEljb25zVG9vbCIsImljb250b29scyIsInRvZ2dsZUVkaXRpbmciLCJzaG93UGFuZWwiLCJpc0NoZWNrZWQiLCJpc0xheWVyVmlzaWJsZSIsImN1cnJlbnRQcm9qZWN0IiwiZ2V0Q3VycmVudFByb2plY3QiLCJnZXRUeXBlIiwiZ2V0SWQiLCJsYXllcnNDb25maWciLCJpY29ucyIsInNldHVwVG9vbHNBY3Rpb24iLCJ0b29sIiwicGx1Z2luIiwiLi9wYW5lbCIsIi4vcGx1Z2luc2VydmljZSIsInBsdWdpbmNvbmZpZyIsIjQiLCI1IiwiRWRpdG9yUGFuZWwiLCJpZCIsImludGVybmFsUGFuZWwiLCJQYW5lbENvbXBvbmVudCIsInJlc29sdmVkVmFsdWUiLCJyZXNvbHZlIiwiUGFuZWwiLCJWdWUiLCJ0ZW1wbGF0ZSIsImRhdGEiLCJpbWFnZVBhdGgiLCJnZXRSZXNvdXJjZXNVcmwiLCJzdGF0ZSIsInJlc291cmNlc3VybCIsImVkaXRvcnN0b29sYmFycyIsImxheWVyY29kZSIsImxheWVyQ29kZXMiLCJ0aXRsZSIsInRvb2x0eXBlIiwiaWNvbnRvb2wiLCJpY29uIiwic2F2ZWJ0bmxhYmVsIiwibWV0aG9kcyIsInRvZ2dsZUVkaXRUb29sIiwidG9vbFR5cGUiLCJlZGl0aW5nIiwiZWRpdGluZ3Rvb2xidG5Ub2dnbGVkIiwiZWRpdGluZ3Rvb2xidG5FbmFibGVkIiwib25DbG9zZSIsInN0b3AiLCJjb21wdXRlZCIsImVkaXRpbmdidG5sYWJlbCIsImVkaXRpbmdidG5FbmFibGVkIiwiZW5hYmxlZCIsIm1lc3NhZ2UiLCJ0b29sc3RlcCIsInRvdGFsIiwic3RlcG1lc3NhZ2UiLCJwcm90byIsInByb3RvdHlwZSIsIm9uU2hvdyIsImNvbnRhaW5lciIsIiRtb3VudCIsIiRhcHBlbmRUbyIsImNvbnNvbGUiLCJsb2ciLCJzZWxmIiwiZGVmZXJyZWQiLCIkIiwiRGVmZXJyZWQiLCJ0aGVuIiwiJGRlc3Ryb3kiLCJmYWlsIiwicmVqZWN0IiwicHJvbWlzZSIsImljb25zQ29uZmlnIiwiZWRpdG9yVG9vbHMiLCJlZGl0b3JUb29sSW5kZXgiLCJ0b29sSW5kZXgiLCIuL3BhbmVsLmh0bWwiLCI2IiwibGF5ZXJOYW1lIiwidHlwZSIsImlzQ2hlY2siLCJhY3Rpb24iLCJlZGl0b3JDbGFzcyIsImxheWVyc1N0eWxlIiwibGF5ZXJzRWRpdGluZ1N0eWxlIiwiY3JlYXRlU3R5bGUiLCJzdHlsZU9wdGlvbnMiLCJpY29udXJsIiwib2wiLCJzdHlsZSIsIlN0eWxlIiwiaW1hZ2UiLCJJY29uIiwiYW5jaG9yIiwib2Zmc2V0Iiwic3JjIiwidXJsIiwiYWRkIiwiZGVsZXRlIiwiZWRpdCIsIm1vdmUiLCJ2ZWN0b3IiLCJlZGl0b3IiLCJjcnMiLCIuL2VkaXRvcnMvZ2Vvbm90ZXNlZGl0b3IiLCI3IiwiR2Vvbm90ZXNTZXJ2aWNlIiwiX21hcFNlcnZpY2UiLCJfbG9hZERhdGFPbk1hcFZpZXdDaGFuZ2VMaXN0ZW5lciIsIl9jdXJyZW50RWRpdGluZ0xheWVyIiwiX3BsdWdpblRvb2xzIiwic3RhcnRpbmdFZGl0aW5nVG9vbCIsInJldHJpZXZpbmdEYXRhIiwiaGFzRWRpdHMiLCJfbG9hZGVyIiwiVmVjdG9yTG9hZGVyTGF5ZXIiLCJfY3JzIiwiX2xheWVycyIsIl9lZGl0b3JDbGFzcyIsIl9sYXllcnNTdHlsZSIsIl9sYXllcnNFZGl0aW5nU3R5bGUiLCJfY3VzdG9tVXJsUGFyYW1ldGVycyIsImluZm91cmwiLCJzZXRMYXllclN0eWxlIiwib3B0aW9uc19sb2FkZXIiLCJiYXNldXJsIiwibWFwU2VydmljZSIsIm1vZGUiLCJlbWl0IiwiaW50ZXJhY3Rpb24iLCJjdXJyZW50RWRpdGluZ0xheWVyIiwiX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIiLCJhY3RpdmVUb29sIiwiZ2V0QWN0aXZlVG9vbCIsImluc3RhbmNlIiwib3duc0ludGVyYWN0aW9uIiwiX3N0b3BFZGl0aW5nVG9vbCIsIkxheWVyIiwibGF5ZXJJZCIsImxheWVyIiwiZ2V0UHJvamVjdCIsImdldExheWVyQnlJZCIsImdldE9yaWdOYW1lIiwicGx1Z2luVG9vbHNTZXJ2aWNlIiwiX3BsdWdpblRvb2xzU2VydmljZSIsImdldFBsdWdpblRvb2xzIiwia2V5IiwiZ2V0TGF5ZXJTdHlsZSIsIl90b2dnbGVDaGVja0JveFBsdWdpblRvb2wiLCJwbHVnaW5JbmRleCIsImdldFN0YXRlIiwidG9vbHNHcm91cHMiLCJwbHVnaW5Ub29scyIsInZlY3RvckxheWVyIiwicGx1Z2luVG9vbCIsImluZGV4IiwiaGFzIiwidG9vbENvbmZpZyIsInVwZGF0ZVRvb2xzR3JvdXAiLCJzZXRWaXNpYmxlIiwiaXNWaXNpYmxlIiwiaXNSZWFkeSIsImxvYWRMYXllcnMiLCJfYWRkVG9NYXAiLCJfY2FuY2VsT3JTYXZlIiwiX3N0b3BFZGl0aW5nIiwiX3N0YXJ0RWRpdGluZyIsIl9zYXZlV2l0aG91dEFzayIsIl9zdGFydEVkaXRpbmdUb29sIiwiaXNTdGFydGVkIiwiX3N0b3BFZGl0b3IiLCJnZXRMYXllckNvZGVzIiwidmFsdWVzIiwiX3NldFVwVmVjdG9yTGF5ZXIiLCJfc2V0VXBFZGl0b3IiLCJvcHRpb25zX2VkaXRvciIsImZvcm1DbGFzcyIsIkZvcm1DbGFzcyIsImVkaXRpbmdWZWN0b3JTdHlsZSIsInNldFZlY3RvckxheWVyIiwiZGlydHkiLCJzZXRNb2RlIiwidmVjdG9yTGF5ZXJzQ29kZXMiLCJnZXRWZWN0b3JMYXllcnNDb2RlcyIsImxvY2tGZWF0dXJlcyIsIm5vdGlmeSIsImVycm9yIiwicmVzZXQiLCJfdW5sb2NrTGF5ZXIiLCJfdXBkYXRlRWRpdGluZ1N0YXRlIiwiX2NsZWFuVXAiLCJjbGVhblVwTGF5ZXJzIiwiX3N0YXJ0RWRpdG9yIiwic3RhcnQiLCJfc2V0Q3VycmVudEVkaXRpbmdMYXllciIsImNhblN0YXJ0VG9vbCIsInNldFRvb2wiLCJyZXQiLCJzdG9wVG9vbCIsImRpcnR5RWRpdG9ycyIsImlzRGlydHkiLCJfc2F2ZUVkaXRzIiwicmVzdWx0IiwiX2Fza1R5cGUiLCJrZXlzIiwiX2Fza0NhbmNlbE9yU2F2ZSIsImJ1dHRvblR5cGVzIiwiU0FWRSIsImxhYmVsIiwiY2xhc3NOYW1lIiwiY2FsbGJhY2siLCJOT1NBVkUiLCJDQU5DRUwiLCJidXR0b25zIiwic2F2ZSIsIm5vc2F2ZSIsImNhbmNlbCIsImRpYWxvZyIsIl9zZW5kRWRpdHMiLCJyZXNwb25zZSIsInN1Y2Nlc3MiLCJfY29tbWl0RWRpdHMiLCJlcnJvcnMiLCJlZGl0c1RvUHVzaCIsIm1hcCIsImxheWVybmFtZSIsImdldFZlY3RvckxheWVyIiwiZWRpdHMiLCJnZXRFZGl0ZWRGZWF0dXJlcyIsIl9wb3N0RGF0YSIsInJldHVybmVkIiwiZWRpdG9ycyIsInVwZGF0ZWRGZWF0dXJlQXR0cmlidXRlcyIsIm9sZGZpZCIsImNsaWVudGlkIiwiZmlkIiwiZ2V0RWRpdFZlY3RvckxheWVyIiwic2V0RmVhdHVyZURhdGEiLCJuZXdfbG9ja2lkcyIsIm5ld2xvY2tJZCIsImFkZExvY2tJZCIsImNvbW1pdCIsIl91bmRvRWRpdHMiLCJjdXJyZW50RWRpdGluZ0xheWVyQ29kZSIsIl91cGRhdGVUb29sU3RlcHNTdGF0ZSIsImdldFRvb2wiLCJ0b29sSW5zdGFuY2UiLCJzdGVwcyIsIl9zZXRUb29sU3RlcFN0YXRlIiwic3RlcCIsImlzVW5kZWZpbmVkIiwibWVzc2FnZXMiLCJ0b29sU3RlcHNNZXNzYWdlcyIsImN1cnJlbnRTdGVwSW5kZXgiLCJ0b3RhbFN0ZXBzIiwidmlld2VyIiwiYWRkVG9NYXAiLCJsb2FkQWxsVmVjdG9yc0RhdGEiLCJfcG9zdEJhdGNoRGF0YSIsImpzb25EYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsImZvcm0iLCJGb3JtRGF0YSIsImFwcGVuZCIsImFqYXgiLCJjb250ZW50VHlwZSIsIm11bHRpRWRpdHNUb1B1c2giLCJwb3N0IiwiX3VubG9jayIsIl9sb2NrTGF5ZXIiLCJmZWF0dXJlTG9ja3MiLCJfdmVjdG9yTGF5ZXJzRGF0YSIsImZlYXR1cmVsb2NrcyIsIl9sb2NrTGF5ZXJzIiwiZ2V0IiwiZ2V0TG9hZGVyIiwiRzNXT2JqZWN0IiwiVmVjdG9yTGF5ZXJMb2FkZXIiLCIuL2VkaXRvcnMvYXR0cmlidXRlc2Zvcm0iXSwibWFwcGluZ3MiOiJDQUFBLFFBQVVBLEdBQUVDLEVBQUVDLEVBQUVDLEdBQUcsUUFBU0MsR0FBRUMsRUFBRUMsR0FBRyxJQUFJSixFQUFFRyxHQUFHLENBQUMsSUFBSUosRUFBRUksR0FBRyxDQUFDLEdBQUlFLEdBQWtCLGtCQUFUQyxVQUFxQkEsT0FBUSxLQUFJRixHQUFHQyxFQUFFLE1BQU9BLEdBQUVGLEdBQUUsRUFBSSxJQUFHSSxFQUFFLE1BQU9BLEdBQUVKLEdBQUUsRUFBSSxJQUFJSyxHQUFFLEdBQUlDLE9BQU0sdUJBQXVCTixFQUFFLElBQUssTUFBTUssR0FBRUUsS0FBSyxtQkFBbUJGLEVBQUUsR0FBSUcsR0FBRVgsRUFBRUcsSUFBSVMsV0FBWWIsR0FBRUksR0FBRyxHQUFHVSxLQUFLRixFQUFFQyxRQUFRLFNBQVNkLEdBQUcsR0FBSUUsR0FBRUQsRUFBRUksR0FBRyxHQUFHTCxFQUFHLE9BQU9JLEdBQUVGLEVBQUVBLEVBQUVGLElBQUlhLEVBQUVBLEVBQUVDLFFBQVFkLEVBQUVDLEVBQUVDLEVBQUVDLEdBQUcsTUFBT0QsR0FBRUcsR0FBR1MsUUFBa0QsSUFBSSxHQUExQ0wsR0FBa0Isa0JBQVRELFVBQXFCQSxRQUFnQkgsRUFBRSxFQUFFQSxFQUFFRixFQUFFYSxPQUFPWCxJQUFJRCxFQUFFRCxFQUFFRSxHQUFJLE9BQU9ELEtBQUthLEdBQUcsU0FBU1QsRUFBUVUsRUFBT0osR0FVdmQsUUFBU0ssR0FBWUMsR0FDbkJDLEVBQUtDLEtBQUtGLEdBQ1ZFLEtBQUtDLFdBQWFDLEVBWHBCLEdBQUlDLEdBQVVDLE9BQU9DLEtBQUtDLE1BQU1ILFFBQzVCSixFQUFPSyxPQUFPQyxLQUFLQyxNQUFNUCxLQUN6QlEsRUFBWUgsT0FBT0ksSUFBSUQsVUFDdkJFLEVBQU9MLE9BQU9JLElBQUlDLEtBRWxCUCxFQUFtQkssRUFBVUcs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R0FBSWpMLEdBQVVDLE9BQU9DLEtBQUtDLE1BQU1ILFFBQzVCb1YsRUFBWW5WLE9BQU9DLEtBQUtrVixVQUN4QmhVLEVBQU1uQixPQUFPSSxJQUFJZSxJQUNqQjhKLEVBQW9CakwsT0FBT0MsS0FBS21WLGtCQUNoQ3JHLEVBQVlqUSxFQUFRLDJCQXl5QnhCaUIsR0FBUXlLLEVBQWlCMkssR0FDekIzVixFQUFPSixRQUFVLEdBQUlvTCxLQUNsQjZLLDJCQUEyQixTQUFTIiwiZmlsZSI6ImJ1aWxkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIGluaGVyaXQgPSBnM3dzZGsuY29yZS51dGlscy5pbmhlcml0O1xudmFyIGJhc2UgPSBnM3dzZGsuY29yZS51dGlscy5iYXNlO1xudmFyIEZvcm1QYW5lbCA9IGczd3Nkay5ndWkuRm9ybVBhbmVsO1xudmFyIEZvcm0gPSBnM3dzZGsuZ3VpLkZvcm07XG5cbnZhciBHZW9ub3RlRm9ybVBhbmVsID0gRm9ybVBhbmVsLmV4dGVuZCh7XG4gIC8vdGVtcGxhdGU6IHJlcXVpcmUoJy4vYXR0cmlidXRlc2Zvcm0uaHRtbCcpXG59KTtcblxuZnVuY3Rpb24gR2Vvbm90ZUZvcm0ob3B0aW9ucyl7XG4gIGJhc2UodGhpcyxvcHRpb25zKTtcbiAgdGhpcy5fZm9ybVBhbmVsID0gR2Vvbm90ZUZvcm1QYW5lbDtcbn1cbmluaGVyaXQoR2Vvbm90ZUZvcm0sRm9ybSk7XG5cbm1vZHVsZS5leHBvcnRzID0gR2Vvbm90ZUZvcm07XG5cbn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIGluaGVyaXQgPSBnM3dzZGsuY29yZS51dGlscy5pbmhlcml0O1xudmFyIGJhc2UgPSBnM3dzZGsuY29yZS51dGlscy5iYXNlO1xudmFyIEVkaXRvciA9IGczd3Nkay5jb3JlLkVkaXRvcjtcbnZhciBQbHVnaW5TZXJ2aWNlID0gcmVxdWlyZSgnLi4vcGx1Z2luc2VydmljZScpO1xudmFyIEZvcm0gPSByZXF1aXJlKCcuL2F0dHJpYnV0ZXNmb3JtJyk7XG52YXIgZm9ybSA9IG51bGw7IC8vIGJydXR0byBtYSBkZXZvIHRlbmVybG8gZXN0ZXJubyBzZW5uw7Igc2kgY3JlYSB1biBjbGljbyBkaSByaWZlcmltZW50aSBjaGUgbWFuZGEgaW4gcGFsbGEgVnVlXG5cblxuZnVuY3Rpb24gR2Vvbm90ZXNFZGl0b3Iob3B0aW9ucykge1xuXG4gIC8vIGluIHF1ZXN0byBtb2RvIHBhc3NpYW1vIGlsIG1hcHNlcnZpY2UgY29tZSBhcmdvbWVudG8gYWwgc3VwZXJjbGFzcyAoZWRpdG9yKVxuICAvLyBkaSBpdGVybmV0ZWRpdG9yIGluIG1vZG8gZGEgYXNzZWduYXJhZSBhbmNoZSBhIGl0ZXJuZXRlZGl0b3IgaWwgbWFwc2VydmVpY2UgY2hlIHhzZXJ2aXLDoCBhZCBlc2VtcGlvIGFkIGFnZ2l1bmdlcmVcbiAgLy8gbCdpbnRlcmFjdGlvbiBhbGxhIG1hcHBhIHF1YW5kbyB2aWVuZSBjbGljY2F0byBzdSB1biB0b29sXG4gIG9wdGlvbnMuZm9ybVRvb2xzID0gW107XG4gIGJhc2UodGhpcywgb3B0aW9ucyk7XG4gIHZhciBzYXZlRWRpdHNUb0RhdGFiYXNlID0gZnVuY3Rpb24oKSB7XG4gICAgUGx1Z2luU2VydmljZS5zYXZlRWRpdHMoKTtcbiAgfTtcbiAgLy90aGlzLl9zYXZlRWRpdHMgPSBfLmJpbmQoUGx1Z2luU2VydmljZS5zYXZlRWRpdHMsIFBsdWdpblNlcnZpY2UpO1xuICAvLyBhcHJlIGZvcm0gYXR0cmlidXRpIHBlciBpICBuc2VyaW1lbnRvXG5cbiAgdGhpcy5vbmFmdGVyKCdhZGRGZWF0dXJlJywgc2F2ZUVkaXRzVG9EYXRhYmFzZSk7XG4gIHRoaXMub25hZnRlcignZGVsZXRlRmVhdHVyZScsIHNhdmVFZGl0c1RvRGF0YWJhc2UpO1xuICB0aGlzLm9uYWZ0ZXIoJ21vdmVGZWF0dXJlJywgc2F2ZUVkaXRzVG9EYXRhYmFzZSk7XG4gIHRoaXMub25hZnRlcigncGlja0ZlYXR1cmUnLCBzYXZlRWRpdHNUb0RhdGFiYXNlKTtcblxuICAvLyBhcHJlIGZvcm0gYXR0cmlidXRpIHBlciBpbnNlcmltZW50b1xufVxuXG5pbmhlcml0KEdlb25vdGVzRWRpdG9yLCBFZGl0b3IpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdlb25vdGVzRWRpdG9yO1xufSx7XCIuLi9wbHVnaW5zZXJ2aWNlXCI6NyxcIi4vYXR0cmlidXRlc2Zvcm1cIjoxfV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vLyBTREsgLy8vXG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgYmFzZSA9IGczd3Nkay5jb3JlLnV0aWxzLmJhc2U7XG52YXIgUGx1Z2luID0gZzN3c2RrLmNvcmUuUGx1Z2luO1xudmFyIEdVSSA9IGczd3Nkay5ndWkuR1VJO1xudmFyIFByb2plY3RzUmVnaXN0cnkgPSBnM3dzZGsuY29yZS5Qcm9qZWN0c1JlZ2lzdHJ5O1xuLy8vIFBMVUdJTiAvL1xudmFyIHBsdWdpbkNvbmZpZyA9IHJlcXVpcmUoJ3BsdWdpbmNvbmZpZycpO1xudmFyIFNlcnZpY2UgPSByZXF1aXJlKCcuL3BsdWdpbnNlcnZpY2UnKTtcbnZhciBFZGl0aW5nUGFuZWwgPSByZXF1aXJlKCcuL3BhbmVsJyk7XG5cbnZhciBfUGx1Z2luID0gZnVuY3Rpb24oKSB7XG5cbiAgYmFzZSh0aGlzKTtcbiAgdGhpcy5uYW1lID0gJ25vdGVzJztcbiAgdGhpcy5jb25maWcgPSBudWxsO1xuICB0aGlzLnNlcnZpY2UgPSBudWxsO1xuICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy9zZXR0byBpbCBzZXJ2aXppb1xuICAgIHRoaXMuc2V0UGx1Z2luU2VydmljZShTZXJ2aWNlKTtcbiAgICAvL3JlY3VwZXJvIGNvbmZpZ3VyYXppb25lIGRlbCBwbHVnaW5cbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMuZ2V0UGx1Z2luQ29uZmlnKCk7XG4gICAgdGhpcy5zZXRVcEljb25zVXJsKHRoaXMuY29uZmlnLmxheWVycyk7XG4gICAgLy9yZWdpdHJvIGlsIHBsdWdpblxuICAgIGlmICh0aGlzLnJlZ2lzdGVyUGx1Z2luKHRoaXMuY29uZmlnLmdpZCkpIHtcbiAgICAgIGlmICghR1VJLnJlYWR5KSB7XG4gICAgICAgIEdVSS5vbigncmVhZHknLCBfLmJpbmQodGhpcy5zZXR1cEd1aSwgdGhpcykpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0dXBHdWkoKTtcbiAgICAgIH1cbiAgICAgIC8vaW5pemlhbGl6em8gaWwgc2Vydml6aW8uIElsIHNlcnZpemlvIMOoIGwnaXN0YW56YSBkZWxsYSBjbGFzc2Ugc2Vydml6aW9cbiAgICAgIHBsdWdpbkNvbmZpZy5jdXN0b21VcmxQYXJhbWV0ZXJzID0gdGhpcy5jcmVhdGVQbHVnaW5DdXN0b21VcmxQYXJhbWV0ZXJzKCk7XG4gICAgICB0aGlzLnNlcnZpY2UuaW5pdCh0aGlzLmNvbmZpZywgcGx1Z2luQ29uZmlnKTtcbiAgICB9XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSB1bmEgdm9sdGEgY2hlIGxhIEdVSSBoYSBlbWVzc28gbCdldmVudG8gJ3JlYWR5J1xuICAvLyBzZXJ2ZSBhIG1vbnRhcmUgaSBjb21wb2VudGkgZGVsIHBsdWdpbiBzdWxsYSBzaWRlYmFyXG4gIHRoaXMuc2V0dXBHdWkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdG9vbHNDb21wb25lbnQgPSBHVUkuZ2V0Q29tcG9uZW50KCd0b29scycpO1xuICAgIHZhciB0b29sc1NlcnZpY2UgPSB0b29sc0NvbXBvbmVudC5nZXRTZXJ2aWNlKCk7XG4gICAgdmFyIHRvb2xzID0gcGx1Z2luQ29uZmlnLnRvb2xzKHRoaXMpO1xuICAgIHRoaXMuc2VydmljZS5zZXRQbHVnaW5Ub29scyh0b29scyk7XG4gICAgdGhpcy5zZXJ2aWNlLnNldFBsdWdpblRvb2xzU2VydmljZSh0b29sc1NlcnZpY2UpO1xuICAgIHRvb2xzU2VydmljZS5hZGRUb29scygxICwnR0VPTk9URVMnLCB0b29scyk7XG5cbiAgfTtcbiAgLy8gYXppb25pIGNoZSBzb25vIGxlZ2F0aSBhaSB0b29sc1xuICB0aGlzLnRvb2xzQWN0aW9ucyA9IHtcbiAgICBzaG93SGlkZUxheWVyOiAgZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnNlcnZpY2Uuc2hvd0hpZGVMYXllcihwbHVnaW5Db25maWcubGF5ZXJzQ29kZS5HRU9OT1RFUyk7XG4gICAgfSxcbiAgICBzaG93RWRpdGluZ1BhbmVsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYW5lbCA9IG5ldyBFZGl0aW5nUGFuZWwoKTtcbiAgICAgIF8uZm9yRWFjaCh0aGlzLmNvbmZpZy5sYXllcnMsIGZ1bmN0aW9uKGxheWVyQ29uZmlnLCBsYXllckNvZGUpIHtcbiAgICAgICAgcGFuZWwuc2V0SWNvbnNUb29sKGxheWVyQ29kZSwgbGF5ZXJDb25maWcuaWNvbnRvb2xzKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zZXJ2aWNlLnRvZ2dsZUVkaXRpbmcoKTtcbiAgICAgIEdVSS5zaG93UGFuZWwocGFuZWwpO1xuICAgIH0sXG4gICAgaXNDaGVja2VkIDogZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLmlzTGF5ZXJWaXNpYmxlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vc2V0dXBQbHVnaW5DdXN0b21QYXJhbWV0ZXJzXG4gIHRoaXMuY3JlYXRlUGx1Z2luQ3VzdG9tVXJsUGFyYW1ldGVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjdXN0b21VcmxQYXJhbWV0ZXJzPScmJztcbiAgICB2YXIgY3VycmVudFByb2plY3QgPSBQcm9qZWN0c1JlZ2lzdHJ5LmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY3VzdG9tVXJsUGFyYW1ldGVycys9J3Byb2plY3RfdHlwZT0nK2N1cnJlbnRQcm9qZWN0LmdldFR5cGUoKSsnJnByb2plY3RfaWQ9JytjdXJyZW50UHJvamVjdC5nZXRJZCgpO1xuICAgIHJldHVybiBjdXN0b21VcmxQYXJhbWV0ZXJzXG4gIH07XG4gIC8vIHNldHVwIGljb25VcmwgZm9yIExheWVyXG4gIHRoaXMuc2V0VXBJY29uc1VybCA9IGZ1bmN0aW9uKGxheWVyc0NvbmZpZykge1xuICAgIF8uZm9yRWFjaChsYXllcnNDb25maWcsIGZ1bmN0aW9uKGxheWVyQ29uZmlnKSB7XG4gICAgICBwbHVnaW5Db25maWcubGF5ZXJzW2xheWVyQ29uZmlnLm5hbWVdLmljb25zID0gbGF5ZXJDb25maWcuaWNvbnM7XG4gICAgfSlcbiAgfTtcblxuICB0aGlzLnNldHVwVG9vbHNBY3Rpb24gPSBmdW5jdGlvbih0b29scykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBfLmZvckVhY2godG9vbHMsIGZ1bmN0aW9uKHRvb2wpe1xuICAgICAgLy9UT0RPXG4gICAgfSlcbiAgfTtcblxufTtcblxuaW5oZXJpdChfUGx1Z2luLCBQbHVnaW4pO1xuXG4oZnVuY3Rpb24ocGx1Z2luKXtcbiAgcGx1Z2luLmluaXQoKTtcbn0pKG5ldyBfUGx1Z2luKTtcblxuXG5cblxufSx7XCIuL3BhbmVsXCI6NSxcIi4vcGx1Z2luc2VydmljZVwiOjcsXCJwbHVnaW5jb25maWdcIjo2fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiZzN3LWl0ZXJuZXQtZWRpdGluZy1wYW5lbFxcXCI+XFxuICA8dGVtcGxhdGUgdi1mb3I9XFxcInRvb2xiYXIgaW4gZWRpdG9yc3Rvb2xiYXJzXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwicGFuZWwgcGFuZWwtcHJpbWFyeVxcXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwicGFuZWwtaGVhZGluZ1xcXCI+XFxuICAgICAgICA8aDMgY2xhc3M9XFxcInBhbmVsLXRpdGxlXFxcIj57eyB0b29sYmFyLm5hbWUgfX08L2gzPlxcbiAgICAgIDwvZGl2PlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcInBhbmVsLWJvZHlcXFwiPlxcbiAgICAgICAgPHRlbXBsYXRlIHYtZm9yPVxcXCJ0b29sIGluIHRvb2xiYXIudG9vbHNcXFwiPlxcbiAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJlZGl0YnRuXFxcIiA6Y2xhc3M9XFxcInsnZW5hYmxlZCcgOiAoc3RhdGUuZWRpdGluZy5vbiAmJiBlZGl0aW5ndG9vbGJ0bkVuYWJsZWQodG9vbCkpLCAndG9nZ2xlZCcgOiBlZGl0aW5ndG9vbGJ0blRvZ2dsZWQodG9vbGJhci5sYXllcmNvZGUsIHRvb2wudG9vbHR5cGUpfVxcXCI+XFxuICAgICAgICAgICAgPGltZyBoZWlnaHQ9XFxcIjMwcHhcXFwiIHdpZHRoPVxcXCIzMHB4XFxcIiBAY2xpY2s9XFxcInRvZ2dsZUVkaXRUb29sKHRvb2xiYXIubGF5ZXJjb2RlLCB0b29sLnRvb2x0eXBlKVxcXCIgOmFsdC5vbmNlPVxcXCJ0b29sLnRpdGxlXFxcIiA6dGl0bGUub25jZT1cXFwidG9vbC50aXRsZVxcXCIgOnNyYy5vbmNlPVxcXCJ0b29sLmljb25cXFwiPjwvaW1nPlxcbiAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvdGVtcGxhdGU+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgPC90ZW1wbGF0ZT5cXG4gIDxkaXYgdi1zaG93PVxcXCJzdGF0ZS5yZXRyaWV2aW5nRGF0YVxcXCIgc3R5bGU9XFxcImNvbG9yOiNmZmZmZmZcXFwiPlxcbiAgICA8c3Bhbj5DYXJpY2FtZW50byBEYXRpIC4uLiA8L3NwYW4+PGltZyA6c3JjPVxcXCJyZXNvdXJjZXN1cmwgKydpbWFnZXMvbG9hZGVyLnN2ZydcXFwiPlxcbiAgPC9kaXY+XFxuICA8ZGl2IGNsYXNzPVxcXCJtZXNzYWdlXFxcIj5cXG4gICAge3t7IG1lc3NhZ2UgfX19XFxuICA8L2Rpdj5cXG48L2Rpdj5cXG5cIjtcblxufSx7fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgcmVzb2x2ZWRWYWx1ZSA9IGczd3Nkay5jb3JlLnV0aWxzLnJlc29sdmU7XG52YXIgaW5oZXJpdCA9IGczd3Nkay5jb3JlLnV0aWxzLmluaGVyaXQ7XG52YXIgR1VJID0gZzN3c2RrLmd1aS5HVUk7XG4vLyBiYXNlIGNsYXNzIFBhbmVsXG52YXIgUGFuZWwgPSAgZzN3c2RrLmd1aS5QYW5lbDtcbnZhciBTZXJ2aWNlID0gcmVxdWlyZSgnLi9wbHVnaW5zZXJ2aWNlJyk7XG5cbnZhciBQYW5lbENvbXBvbmVudCA9IFZ1ZS5leHRlbmQoe1xuICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9wYW5lbC5odG1sJyksXG4gIGRhdGE6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbWFnZVBhdGggPSBHVUkuZ2V0UmVzb3VyY2VzVXJsKCkgKyAnaW1hZ2VzLydcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdGU6IFNlcnZpY2Uuc3RhdGUsXG4gICAgICByZXNvdXJjZXN1cmw6IEdVSS5nZXRSZXNvdXJjZXNVcmwoKSxcbiAgICAgIGVkaXRvcnN0b29sYmFyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJHZW9ub3Rlc1wiLFxuICAgICAgICAgIGxheWVyY29kZTogU2VydmljZS5sYXllckNvZGVzLkdFT05PVEVTLFxuICAgICAgICAgIHRvb2xzOltcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiQWdnaXVuZ2kgR2Vvbm90YVwiLFxuICAgICAgICAgICAgICAvLyB0b29sdHlwZSDDqCBsJ2F0dHJpYnV0byBjaGUgc2VydmVyIHBlciBzY2VnbGllcmUgaWwgdGlwbyBkaSB0b29sXG4gICAgICAgICAgICAgIC8vIGRlbGwnZWRpdG9yIGdlbmVyYWxlIGNoZSBkb3Zyw6AgZXNzZXJlIGltcG9zdGF0b1xuICAgICAgICAgICAgICB0b29sdHlwZTogJ2FkZGZlYXR1cmUnLFxuICAgICAgICAgICAgICBpY29udG9vbDogJ2FkZCcsXG4gICAgICAgICAgICAgIGljb246IGltYWdlUGF0aCArJ2l0ZXJuZXRBZGRQb2ludC5wbmcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJTcG9zdGEgR2Vvbm90YVwiLFxuICAgICAgICAgICAgICB0b29sdHlwZTogJ21vdmVmZWF0dXJlJyxcbiAgICAgICAgICAgICAgaWNvbnRvb2w6ICdtb3ZlJyxcbiAgICAgICAgICAgICAgaWNvbjogaW1hZ2VQYXRoICsgJ2l0ZXJuZXRNb3ZlUG9pbnQucG5nJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiUmltdW92aSBHZW9ub3RhXCIsXG4gICAgICAgICAgICAgIHRvb2x0eXBlOiAnZGVsZXRlZmVhdHVyZScsXG4gICAgICAgICAgICAgIGljb250b29sOiAnZGVsZXRlJyxcbiAgICAgICAgICAgICAgaWNvbjogaW1hZ2VQYXRoICsgJ2l0ZXJuZXREZWxldGVQb2ludC5wbmcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aXRsZTogXCJFZGl0YSBnZW9ub3RhXCIsXG4gICAgICAgICAgICAgIHRvb2x0eXBlOiAnZWRpdGF0dHJpYnV0ZXMnLFxuICAgICAgICAgICAgICBpY29udG9vbDogJ2VkaXQnLFxuICAgICAgICAgICAgICBpY29uOiBpbWFnZVBhdGggKyAnZWRpdEF0dHJpYnV0ZXMucG5nJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHNhdmVidG5sYWJlbDogXCJTYWx2YVwiXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgLy9tZXRvZG8gY2hpYW1hdG8gcXVhbmRvIHNpIGNsaWNjYSBzdSBhdnZpYS90ZXJtaW5hIGVkaXRpbmdcbiAgICB0b2dnbGVFZGl0aW5nOiBmdW5jdGlvbigpIHtcbiAgICAgIFNlcnZpY2UudG9nZ2xlRWRpdGluZygpO1xuICAgIH0sXG4gICAgc2F2ZUVkaXRzOiBmdW5jdGlvbigpe1xuICAgICAgU2VydmljZS5zYXZlRWRpdHMoKTtcbiAgICB9LFxuICAgIC8vIGNoYWltYXRvIHF1YW5kbyBzaSBjbGljY2Egc3VsIHVuIHRvb2wgZGVsbCdlZGl0b3JcbiAgICAvLyBjb21lIGFkIGVzZW1waW8gIGFkZCBtb3ZlIGVkaXQgYXR0cmlidXRlcyBldGMgLi5cbiAgICB0b2dnbGVFZGl0VG9vbDogZnVuY3Rpb24obGF5ZXJDb2RlLCB0b29sVHlwZSkge1xuICAgICAgaWYgKHRvb2xUeXBlID09ICcnKXtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy92ZXJpZmljYSBzZSBsJ2VkaXRvciDDqCBpbiBlZGl0aW5nIG9uIHRydWVcbiAgICAgIGlmICh0aGlzLnN0YXRlLmVkaXRpbmcub24pIHtcbiAgICAgICAgU2VydmljZS50b2dnbGVFZGl0VG9vbChsYXllckNvZGUsIHRvb2xUeXBlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIG1ldG9kbyBjaGUgdmllbmUgY2hpYW1hdG8gcGVyIHZlcmlmaWNhcmUgZSBzZXR0YXJlXG4gICAgLy8gbGEgY2xhc3NlIChwcmVtdXRvIG8gbm8gZGVsIGJvdHRvbmUgdG9vbCBpbiBxdWVzdGlvbmUpXG4gICAgZWRpdGluZ3Rvb2xidG5Ub2dnbGVkOiBmdW5jdGlvbihsYXllckNvZGUsIHRvb2xUeXBlKSB7XG4gICAgICByZXR1cm4gKHRoaXMuc3RhdGUuZWRpdGluZy5sYXllckNvZGUgPT0gbGF5ZXJDb2RlICYmIHRoaXMuc3RhdGUuZWRpdGluZy50b29sVHlwZSA9PSB0b29sVHlwZSk7XG4gICAgfSxcbiAgICAvLyBmdW56aW9uZSBjaGUgdmVyaWZpY2Egc2UgYWJpbGl0YXJlIG8gbWVubyBpIGJvdHRvbmkgZGVpIHRvb2xzXG4gICAgZWRpdGluZ3Rvb2xidG5FbmFibGVkOiBmdW5jdGlvbih0b29sKXtcbiAgICAgIHJldHVybiB0b29sLnRvb2x0eXBlICE9ICcnO1xuICAgIH0sXG4gICAgb25DbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICBTZXJ2aWNlLnN0b3AoKTtcbiAgICB9XG4gIH0sXG4gIGNvbXB1dGVkOiB7XG4gICAgZWRpdGluZ2J0bmxhYmVsOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0YXRlLmVkaXRpbmcub24gPyBcIlRlcm1pbmEgZWRpdGluZ1wiIDogXCJBdnZpYSBlZGl0aW5nXCI7XG4gICAgfSxcbiAgICBlZGl0aW5nYnRuRW5hYmxlZDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gKHRoaXMuc3RhdGUuZWRpdGluZy5lbmFibGVkIHx8IHRoaXMuc3RhdGUuZWRpdGluZy5vbikgPyBcIlwiIDogXCJkaXNhYmxlZFwiO1xuICAgIH0sXG4gICAgbWVzc2FnZTogZnVuY3Rpb24oKXtcbiAgICAgIHZhciBtZXNzYWdlID0gXCJcIjtcbiAgICAgIGlmICghdGhpcy5zdGF0ZS5lZGl0aW5nLmVuYWJsZWQpe1xuICAgICAgICBtZXNzYWdlID0gJzxzcGFuIHN0eWxlPVwiY29sb3I6IHJlZFwiPkF1bWVudGFyZSBpbCBsaXZlbGxvIGRpIHpvb20gcGVyIGFiaWxpdGFyZSBsXFwnZWRpdGluZyc7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0aGlzLnN0YXRlLmVkaXRpbmcudG9vbHN0ZXAubWVzc2FnZSl7XG4gICAgICAgIHZhciBuID0gdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLm47XG4gICAgICAgIHZhciB0b3RhbCA9IHRoaXMuc3RhdGUuZWRpdGluZy50b29sc3RlcC50b3RhbDtcbiAgICAgICAgdmFyIHN0ZXBtZXNzYWdlID0gdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLm1lc3NhZ2U7XG4gICAgICAgIG1lc3NhZ2UgPSAnPGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6MjBweFwiPkdVSURBIFNUUlVNRU5UTzo8L2Rpdj4nICtcbiAgICAgICAgICAnPGRpdj48c3Bhbj5bJytuKycvJyt0b3RhbCsnXSA8L3NwYW4+PHNwYW4gc3R5bGU9XCJjb2xvcjogeWVsbG93XCI+JytzdGVwbWVzc2FnZSsnPC9zcGFuPjwvZGl2Pic7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBFZGl0b3JQYW5lbCgpIHtcbiAgLy8gcHJvcHJpZXTDoCBuZWNlc3NhcmllLiBJbiBmdXR1cm8gbGUgbWV0dGVybW8gaW4gdW5hXG4gIC8vIGNsYXNzZSBQYW5lbCBkYSBjdWkgZGVyaXZlcmFubm8gdHV0dGkgaSBwYW5uZWxsaSBjaGUgdm9nbGlvbm8gZXNzZXJlIG1vc3RyYXRpIG5lbGxhIHNpZGViYXJcbiAgdGhpcy5pZCA9IFwiZ2Vvbm90ZXMtZWRpdGluZy1wYW5lbFwiO1xuICB0aGlzLm5hbWUgPSBcIkdlc3Rpb25lIGRhdGkgR0VPTk9URVNcIjtcbiAgdGhpcy5pbnRlcm5hbFBhbmVsID0gbmV3IFBhbmVsQ29tcG9uZW50KCk7XG59XG5cbmluaGVyaXQoRWRpdG9yUGFuZWwsIFBhbmVsKTtcblxudmFyIHByb3RvID0gUGFuZWwucHJvdG90eXBlO1xuXG4vLyB2aWVuZSByaWNoaWFtYXRvIGRhbGxhIHRvb2xiYXJcbi8vIHF1YW5kbyBpbCBwbHVnaW4gY2hpZWRlIGRpIG1vc3RyYXJlIHVuIHByb3ByaW8gcGFubmVsbG8gbmVsbGEgR1VJIChHVUkuc2hvd1BhbmVsKVxucHJvdG8ub25TaG93ID0gZnVuY3Rpb24oY29udGFpbmVyKSB7XG4gIHZhciBwYW5lbCA9IHRoaXMuaW50ZXJuYWxQYW5lbDtcbiAgcGFuZWwuJG1vdW50KCkuJGFwcGVuZFRvKGNvbnRhaW5lcik7XG4gIHJldHVybiByZXNvbHZlZFZhbHVlKHRydWUpO1xufTtcblxuLy8gcmljaGlhbWF0byBxdWFuZG8gbGEgR1VJIGNoaWVkZSBkaSBjaGl1ZGVyZSBpbCBwYW5uZWxsby4gU2Ugcml0b3JuYSBmYWxzZSBpbCBwYW5uZWxsbyBub24gdmllbmUgY2hpdXNvXG5wcm90by5vbkNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIGNvbnNvbGUubG9nKCdjbG9zZScpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgU2VydmljZS5zdG9wKClcbiAgLnRoZW4oZnVuY3Rpb24oKXtcbiAgICBzZWxmLmludGVybmFsUGFuZWwuJGRlc3Ryb3kodHJ1ZSk7XG4gICAgc2VsZi5pbnRlcm5hbFBhbmVsID0gbnVsbDtcbiAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gIH0pXG4gIC5mYWlsKGZ1bmN0aW9uKCl7XG4gICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gIH0pO1xuICBcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbn07XG5cbnByb3RvLnNldEljb25zVG9vbCA9IGZ1bmN0aW9uKGxheWVyQ29kZSwgaWNvbnNDb25maWcpIHtcbiAgdmFyIGVkaXRvclRvb2xzID0gdGhpcy5pbnRlcm5hbFBhbmVsLmVkaXRvcnN0b29sYmFycztcbiAgXy5mb3JFYWNoKGVkaXRvclRvb2xzLCBmdW5jdGlvbih0b29sLCBlZGl0b3JUb29sSW5kZXgpIHtcbiAgICBpZiAobGF5ZXJDb2RlID09IHRvb2wubGF5ZXJjb2RlKSB7XG4gICAgICBfLmZvckVhY2godG9vbC50b29scywgZnVuY3Rpb24odG9vbCwgdG9vbEluZGV4KSB7XG4gICAgICAgIGlmIChpY29uc0NvbmZpZ1t0b29sLmljb250b29sXSkge1xuICAgICAgICAgIGVkaXRvclRvb2xzW2VkaXRvclRvb2xJbmRleF0udG9vbHNbdG9vbEluZGV4XS5pY29uID0gaWNvbnNDb25maWdbdG9vbC5pY29udG9vbF07XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9KVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFZGl0b3JQYW5lbDtcblxufSx7XCIuL3BhbmVsLmh0bWxcIjo0LFwiLi9wbHVnaW5zZXJ2aWNlXCI6N31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy9RdWkgY2kgc29ubyBnbGkgZWRpdG9yIChjbGFzc2kpIHVzYXRpIGRhaSB2YXJpIGxheWVyXG52YXIgR2Vvbm90ZXNFZGl0b3IgPSByZXF1aXJlKCcuL2VkaXRvcnMvZ2Vvbm90ZXNlZGl0b3InKTtcblxuLy9kZWZpbmlzY28gaSBjb2RpY2kgbGF5ZXJcbnZhciBsYXllckNvZGVzID0gdGhpcy5sYXllckNvZGVzID0ge1xuICAgIEdFT05PVEVTOiAnbm90ZSdcbn07XG4vLyBjbGFzc2kgZWRpdG9yXG52YXIgZWRpdG9yQ2xhc3MgPSB7fTtcbmVkaXRvckNsYXNzW2xheWVyQ29kZXMuR0VPTk9URVNdID0gR2Vvbm90ZXNFZGl0b3I7XG5cbi8vZGVmaW5pc2NvIGxheWVyIGRlbCBwbHVnaW4gY29tZSBvZ2dldHRvXG52YXIgbGF5ZXJzID0ge307XG52YXIgbGF5ZXJzU3R5bGUgPSB7fTtcbi8vc3R5bGUgZWRpdGluZ1xudmFyIGxheWVyc0VkaXRpbmdTdHlsZSA9IHt9O1xuLy9sYXllclxuLy9sYXllciBTdHlsZVxudmFyIGNyZWF0ZVN0eWxlID0gZnVuY3Rpb24oc3R5bGVPcHRpb25zKSB7XG4gIHZhciBpY29udXJsID0gc3R5bGVPcHRpb25zLmljb251cmw7XG4gIHJldHVybiBuZXcgb2wuc3R5bGUuU3R5bGUoe1xuICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuSWNvbigoe1xuICAgICAgYW5jaG9yOiBbMC41LCAwLjVdLFxuICAgICAgb2Zmc2V0OiBbMCwgMF0sXG4gICAgICBzcmM6IGljb251cmxcbiAgICB9KSlcbiAgfSk7XG59O1xuXG5sYXllcnNTdHlsZVtsYXllckNvZGVzLkdFT05PVEVTXSA9IHtcblxuICB1cmw6IGNyZWF0ZVN0eWxlLFxuICBhZGQ6IGNyZWF0ZVN0eWxlLFxuICBkZWxldGU6IGNyZWF0ZVN0eWxlLFxuICBlZGl0OiBjcmVhdGVTdHlsZSxcbiAgbW92ZTogY3JlYXRlU3R5bGVcblxufTtcblxubGF5ZXJzRWRpdGluZ1N0eWxlW2xheWVyQ29kZXMuR0VPTk9URVNdID0ge307XG5cbmxheWVyc1tsYXllckNvZGVzLkdFT05PVEVTXSA9IHtcbiAgbGF5ZXJDb2RlOiBsYXllckNvZGVzLkdFT05PVEVTLFxuICB2ZWN0b3I6IG51bGwsXG4gIGVkaXRvcjogbnVsbCxcbiAgaWNvbnVybDogbnVsbCxcbiAgY3JzOiBudWxsLFxuICAvL2RlZmluaXNjbyBsbyBzdGlsZVxuICBzdHlsZTogbGF5ZXJzU3R5bGVbbGF5ZXJDb2Rlcy5HRU9OT1RFU11cbn07XG5cblxuXG4vLyBkZWZpbmlzY28gaSB0b29sc1xuZnVuY3Rpb24gdG9vbHMocGx1Z2luKSB7XG4gIHJldHVybiB0b29scyA9IFtcbiAgICB7XG4gICAgICBuYW1lOiBcIkdlb25vdGVzXCIsXG4gICAgICBsYXllck5hbWU6ICdub3RlJyxcbiAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICBpc0NoZWNrOiBmYWxzZSxcbiAgICAgIGFjdGlvbjogXy5iaW5kKHBsdWdpbi50b29sc0FjdGlvbnMuc2hvd0hpZGVMYXllciwgcGx1Z2luKVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJFZGl0YSBHZW9ub3Rlc1wiLFxuICAgICAgYWN0aW9uOiBfLmJpbmQocGx1Z2luLnRvb2xzQWN0aW9ucy5zaG93RWRpdGluZ1BhbmVsLCBwbHVnaW4pXG4gICAgfVxuICBdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBsYXllcnNDb2RlOiBsYXllckNvZGVzLFxuICAgIGxheWVyczogbGF5ZXJzLFxuICAgIGxheWVyc1N0eWxlOiBsYXllcnNTdHlsZSxcbiAgICBsYXllcnNFZGl0aW5nU3R5bGU6IGxheWVyc0VkaXRpbmdTdHlsZSxcbiAgICBlZGl0b3JDbGFzczogZWRpdG9yQ2xhc3MsXG4gICAgdG9vbHM6IHRvb2xzXG59O1xuXG59LHtcIi4vZWRpdG9ycy9nZW9ub3Rlc2VkaXRvclwiOjJ9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBpbmhlcml0ID0gZzN3c2RrLmNvcmUudXRpbHMuaW5oZXJpdDtcbnZhciBHM1dPYmplY3QgPSBnM3dzZGsuY29yZS5HM1dPYmplY3Q7XG52YXIgR1VJID0gZzN3c2RrLmd1aS5HVUk7XG52YXIgVmVjdG9yTG9hZGVyTGF5ZXIgPSBnM3dzZGsuY29yZS5WZWN0b3JMYXllckxvYWRlcjtcbnZhciBGb3JtQ2xhc3MgPSByZXF1aXJlKCcuL2VkaXRvcnMvYXR0cmlidXRlc2Zvcm0nKTtcblxuZnVuY3Rpb24gR2Vvbm90ZXNTZXJ2aWNlKCkge1xuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgLy9xdWkgdmFkbyAgYSBzZXR0YXJlIGlsIG1hcHNlcnZpY2VcbiAgdGhpcy5fbWFwU2VydmljZSA9IG51bGw7XG4gIHRoaXMuX2xvYWREYXRhT25NYXBWaWV3Q2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICB0aGlzLl9jdXJyZW50RWRpdGluZ0xheWVyID0gbnVsbDtcbiAgdGhpcy5fcGx1Z2luVG9vbHMgPSBudWxsO1xuXG4gIHRoaXMuc3RhdGUgPSB7XG4gICAgZWRpdGluZzoge1xuICAgICAgb246IGZhbHNlLFxuICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICBsYXllckNvZGU6IG51bGwsXG4gICAgICB0b29sVHlwZTogbnVsbCxcbiAgICAgIHN0YXJ0aW5nRWRpdGluZ1Rvb2w6IGZhbHNlLFxuICAgICAgdG9vbHN0ZXA6IHtcbiAgICAgICAgbjogbnVsbCxcbiAgICAgICAgdG90YWw6IG51bGwsXG4gICAgICAgIG1lc3NhZ2U6IG51bGxcbiAgICAgIH1cbiAgICB9LFxuICAgIHJldHJpZXZpbmdEYXRhOiBmYWxzZSxcbiAgICBoYXNFZGl0czogZmFsc2VcbiAgfTtcblxuICAvL2RlZmluaXNjbyBpbCBsb2FkZXIgZGVsIHBsdWdpblxuICB0aGlzLl9sb2FkZXIgPSBuZXcgVmVjdG9yTG9hZGVyTGF5ZXI7XG4gIC8vIHZpbmNvbGkgYWxsYSBwb3NzaWJpbGl0w6AgIGRpIGF0dGl2YXJlIGwnZWRpdGluZ1xuICB2YXIgZWRpdGluZ0NvbnN0cmFpbnRzID0ge1xuICAgIC8vcmVzb2x1dGlvbjogMSAvLyB2aW5jb2xvIGRpIHJpc29sdXppb25lIG1hc3NpbWFcbiAgfTtcbiAgLy8gaW5pemlhbGl6emF6aW9uZSBkZWwgcGx1Z2luXG4gIC8vIGNoaWFtdG8gZGFsbCAkc2NyaXB0KHVybCkgZGVsIHBsdWdpbiByZWdpc3RyeVxuICB0aGlzLmluaXQgPSBmdW5jdGlvbihjb25maWcsIHBsdWdpbkNvbmZpZykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9jcnMgPSBudWxsO1xuICAgIHRoaXMuX2xheWVycyA9IHBsdWdpbkNvbmZpZy5sYXllcnM7XG4gICAgdGhpcy5fZWRpdG9yQ2xhc3MgPSBwbHVnaW5Db25maWcuZWRpdG9yQ2xhc3M7XG4gICAgdGhpcy5sYXllckNvZGVzID0gcGx1Z2luQ29uZmlnLmxheWVyc0NvZGU7XG4gICAgLy8gc3RpbGkgZGVpIGxheWVyXG4gICAgdGhpcy5fbGF5ZXJzU3R5bGUgPSBwbHVnaW5Db25maWcubGF5ZXJzU3R5bGU7XG4gICAgLy8gc3RpbGkgZGVsIGxheWVyIGluIGVkaXRpbmcgKGluIGZ1dHVybyBkYSBkaXN0aW5ndWVyZSBkZWxldGUsIG1vdmUsIGVkaXRpbmcuLilcbiAgICB0aGlzLl9sYXllcnNFZGl0aW5nU3R5bGUgPSBwbHVnaW5Db25maWcubGF5ZXJzRWRpdGluZ1N0eWxlO1xuICAgIHRoaXMuX2N1c3RvbVVybFBhcmFtZXRlcnMgPSBwbHVnaW5Db25maWcuY3VzdG9tVXJsUGFyYW1ldGVycyB8fCBudWxsO1xuICAgIC8vIHNldHRvIGlsIG1hcHNlcnZpY2UgY2hlIG1pIHBlcm1ldHRlIGRpIGluZXJhZ2lyZSBjb24gbGEgbWFwcGFcbiAgICB0aGlzLl9tYXBTZXJ2aWNlID0gR1VJLmdldENvbXBvbmVudCgnbWFwJykuZ2V0U2VydmljZSgpO1xuICAgIC8vdmFkbyBhIHNldHRhcmUgbGUgaWNvbiB1cmxzIGUgaWwgY3JzIHNlIGVzaXN0ZSBjaSBzb25vOlxuICAgIF8uZm9yRWFjaCh0aGlzLmNvbmZpZy5sYXllcnMsIGZ1bmN0aW9uKGxheWVyQ29uZmlnLCBsYXllck5hbWUgKSB7XG4gICAgICBzZWxmLl9sYXllcnNbbGF5ZXJOYW1lXS5pbmZvdXJsID0gbGF5ZXJDb25maWcuaW5mb3VybDtcbiAgICAgIHNlbGYuX2xheWVyc1tsYXllck5hbWVdLmNycyA9IFwiRVBTRzpcIitsYXllckNvbmZpZy5jcnM7XG4gICAgICBzZWxmLnNldExheWVyU3R5bGUobGF5ZXJOYW1lKTtcbiAgICB9KTtcbiAgICAvL2luaXppYWxpenpvIGlsIGxvYWRlclxuICAgIC8vIHBhc3NhbmRvZ2xpOlxuICAgIC8vIDEgLSBsYXllcnMgZGVsIHBsdWdpbiAoc3R5bGUgZXRjLi4pXG4gICAgLy8gMiAtIGxhIGJhc2V1cmwgY2hlIG1pIHNlcnZlciBwZXIgaW50ZXJhZ2lyZSBjb24gaWwgc2VydmVyIHBlciBmYXJlIHR1dHRlIGxlIG1vZGlmaWNoZVxuICAgIHZhciBvcHRpb25zX2xvYWRlciA9IHtcbiAgICAgICdsYXllcnMnOiB0aGlzLl9sYXllcnMsXG4gICAgICAnYmFzZXVybCc6IHRoaXMuY29uZmlnLmJhc2V1cmwsXG4gICAgICAnbWFwU2VydmljZSc6IHRoaXMuX21hcFNlcnZpY2VcbiAgICB9O1xuICAgIC8vaW5pemlhbGl6em8gaWwgbG9hZGVyXG4gICAgdGhpcy5fbG9hZGVyLmluaXQob3B0aW9uc19sb2FkZXIpO1xuICAgIC8vY2FzbyBkaSBsb2FkaW5nIGRhdGFcbiAgICB0aGlzLl9sb2FkZXIub24oJ2xvYWRpbmd2ZWN0b3JsYXllcnNzdGFydCcsIGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5zdGF0ZS5yZXRyaWV2aW5nRGF0YSA9IHRydWU7XG4gICAgfSk7XG4gICAgdGhpcy5fbG9hZGVyLm9uKCdsb2FkaW5ndmVjdG9ybGF5ZXJzZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLnN0YXRlLnJldHJpZXZpbmdEYXRhID0gZmFsc2U7XG4gICAgfSk7XG4gICAgdGhpcy5fbG9hZGVyLm9uKCdzZXRtb2RlJywgZnVuY3Rpb24obW9kZSkge1xuICAgICAgc3dpdGNoKG1vZGUpIHtcbiAgICAgICAgY2FzZSAndyc6XG4gICAgICAgICAgc2VsZi5zdGF0ZS5lZGl0aW5nLm9uID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLmVtaXQoXCJlZGl0aW5nc3RhcnRlZFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncic6XG4gICAgICAgICAgc2VsZi5zdGF0ZS5lZGl0aW5nLm9uID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBkaXNhYmlsaXRvIGwnZXZlbnR1YWxlIHRvb2wgYXR0aXZvIHNlIHZpZW5lIGF0dGl2YXRhXG4gICAgLy8gdW4naW50ZXJhemlvbmUgZGkgdGlwbyBwb2ludGVySW50ZXJhY3Rpb25TZXQgc3VsbGEgbWFwcGFcbiAgICB0aGlzLl9tYXBTZXJ2aWNlLm9uKCdwb2ludGVySW50ZXJhY3Rpb25TZXQnLCBmdW5jdGlvbihpbnRlcmFjdGlvbikge1xuICAgICAgdmFyIGN1cnJlbnRFZGl0aW5nTGF5ZXIgPSBzZWxmLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgICBpZiAoY3VycmVudEVkaXRpbmdMYXllcikge1xuICAgICAgICB2YXIgYWN0aXZlVG9vbCA9IGN1cnJlbnRFZGl0aW5nTGF5ZXIuZWRpdG9yLmdldEFjdGl2ZVRvb2woKS5pbnN0YW5jZTtcbiAgICAgICAgLy8gZGV2byB2ZXJpZmljYXJlIGNoZSBub24gc2lhIHVuJ2ludGVyYXppb25lIGF0dGl2YXRhIGRhIHVubyBkZWkgdG9vbCBkaSBlZGl0aW5nIGRlbCBwbHVnaW5cbiAgICAgICAgaWYgKGFjdGl2ZVRvb2wgJiYgIWFjdGl2ZVRvb2wub3duc0ludGVyYWN0aW9uKGludGVyYWN0aW9uKSkge1xuICAgICAgICAgIHNlbGYuX3N0b3BFZGl0aW5nVG9vbCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gIGFiaWxpdG8gbyBtZW5vIGwnZWRpdGluZyBpbiBiYXNlIGFsbGEgcmlzb2x1emlvbmUgZGVsbGEgbWFwcGFcbiAgICAvKnRoaXMuX21hcFNlcnZpY2Uub25hZnRlcignc2V0TWFwVmlldycsZnVuY3Rpb24oYmJveCwgcmVzb2x1dGlvbiwgY2VudGVyKXtcbiAgICAgIHNlbGYuc3RhdGUuZWRpdGluZy5lbmFibGVkID0gKHJlc29sdXRpb24gPCBlZGl0aW5nQ29uc3RyYWludHMucmVzb2x1dGlvbikgPyB0cnVlIDogZmFsc2U7XG4gICAgfSk7Ki9cbiAgICAvLyBhdHRyaWJ1dG8gZGVsbG8gc3RhdG8gZGVsIHNyZXZpemlvIGNoZSBtaSBwZXJtZXR0ZSBkaSBhY2NlbmRlcmUgbyBzcGVuZ2VyZSBsJ2VkaXRpbmdcbiAgICAvLyBzZXJ2ZSBhbmNoZSBwZXIgcG90ZXIgaW4gZmFzZSBkaSB0b2dnbGVFZGl0aW5nKGJvdHRvbmUgZGkgYXZ2aW8gZWRpdGluZykgZGkgdmVkZXJlIHNlIHBvc3NvIGluemlhcmUgbyBtZW5vXG4gICAgLy8gY2FyaWNhcmUgaSB2ZXR0b3JpYWxpIGV0Yy4uXG4gICAgdGhpcy5zdGF0ZS5lZGl0aW5nLmVuYWJsZWQgPSB0cnVlOy8vKHRoaXMuX21hcFNlcnZpY2UuZ2V0UmVzb2x1dGlvbigpIDwgZWRpdGluZ0NvbnN0cmFpbnRzLnJlc29sdXRpb24pID8gdHJ1ZSA6IGZhbHNlO1xuICAgIC8vIHBlciBvZ25pIGxheWVyIGRlZmluaXRpIG5lbCBwbHVnaW4gc2V0dG8gbmFtZSBlIGlkXG4gICAgLy8gcmVjdXBlcmF0aSBncmF6aWUgYWwgbWFwc2VydmljZVxuICAgIF8uZm9yRWFjaCh0aGlzLl9sYXllcnMsIGZ1bmN0aW9uKExheWVyLCBsYXllckNvZGUpIHtcbiAgICAgIC8vcmVjdXBlcm8gbCdpZCBkYWxsYSBjb25maWd1cmF6aW9uZSBkZWwgcGx1Z2luXG4gICAgICAvLyBpIGxheWVycyBuZWxsYSBjb25maWd1cmF6aW9uZSBwYXNzYXRhIGkgbGF5ZXJzIGhhbm5vIGR1ZSBhdHRyaWJ1dGk6IGlkIGUgbmFtZVxuICAgICAgdmFyIGxheWVySWQgPSBjb25maWcubGF5ZXJzW2xheWVyQ29kZV0uaWQ7XG4gICAgICB2YXIgbGF5ZXJOYW1lID0gY29uZmlnLmxheWVyc1tsYXllckNvZGVdLm5hbWU7XG4gICAgICAvLyByZWN1cGVyYSBpbCBsYXllciBkYWwgbWFwc2VydmljZVxuICAgICAgdmFyIGxheWVyID0gc2VsZi5fbWFwU2VydmljZS5nZXRQcm9qZWN0KCkuZ2V0TGF5ZXJCeUlkKGxheWVySWQpO1xuICAgICAgLy8gbWVzc28gYWwgbW9tZW50byBnZW5lcmljbyBwZXIgcmlwcmVuZGVyZSBzdGVzc28gY29ubXBvcnRhbWVudG8gSXRlcm5ldFxuICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgIC8vIHJlY3VwZXJvIGwnb3JpZ2luIG5hbWUgZGFsIHByb2plY3RsYXllclxuICAgICAgICBMYXllci5uYW1lID0gbGF5ZXIuZ2V0T3JpZ05hbWUoKTtcbiAgICAgICAgTGF5ZXIuaWQgPSBsYXllcklkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgTGF5ZXIubmFtZSA9IGxheWVyTmFtZTtcbiAgICAgICAgTGF5ZXIuaWQgPSBsYXllcklkO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICAvLyBmaW5lIGRlbCBtZXRvZG8gSU5JVFxuICB0aGlzLnNldFBsdWdpblRvb2xzU2VydmljZSA9IGZ1bmN0aW9uKHBsdWdpblRvb2xzU2VydmljZSkge1xuICAgIHRoaXMuX3BsdWdpblRvb2xzU2VydmljZSA9IHBsdWdpblRvb2xzU2VydmljZTtcbiAgfTtcbiAgdGhpcy5zZXRQbHVnaW5Ub29scyA9IGZ1bmN0aW9uKHRvb2xzKSB7XG5cbiAgICB0aGlzLl9wbHVnaW5Ub29scyA9IHRvb2xzO1xuICB9O1xuICB0aGlzLmdldFBsdWdpblRvb2xzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BsdWdpblRvb2xzO1xuICB9O1xuICB0aGlzLnNldExheWVyU3R5bGUgPSBmdW5jdGlvbihsYXllckNvZGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGljb25zID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0uaWNvbnM7XG5cbiAgICBfLmZvckVhY2goaWNvbnMsIGZ1bmN0aW9uKGljb251cmwsIGtleSkge1xuICAgICAgaWYgKGtleSA9PSAndXJsJykge1xuICAgICAgICBzZWxmLl9sYXllcnNbbGF5ZXJDb2RlXS5zdHlsZSA9IHNlbGYuX2xheWVyc1N0eWxlW2xheWVyQ29kZV1ba2V5XSh7XG4gICAgICAgICAgaWNvbnVybDogaWNvbnVybFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHNlbGYuX2xheWVyc0VkaXRpbmdTdHlsZVtsYXllckNvZGVdW2tleV0gPSBzZWxmLl9sYXllcnNTdHlsZVtsYXllckNvZGVdW2tleV0oe1xuICAgICAgICAgIGljb251cmw6IGljb251cmxcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIC8vIHNldHRvIHRlbXBvcmFuZWFtZW50ZSBsJ2VkaXRuZyBzdHlsZVxuXG4gIH07XG5cbiAgdGhpcy5nZXRMYXllclN0eWxlID0gZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xheWVyc1tsYXllckNvZGVdLnN0eWxlO1xuICB9O1xuXG4gIHRoaXMuX3RvZ2dsZUNoZWNrQm94UGx1Z2luVG9vbCA9IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcGx1Z2luSW5kZXggPSAwO1xuICAgIC8vIGFsIG1vbWVudG8gMSBoYXJkY29kZWRcbiAgICBpZiAodGhpcy5fcGx1Z2luVG9vbHNTZXJ2aWNlLmdldFN0YXRlKCkudG9vbHNHcm91cHMubGVuZ3RoID4gMSkge1xuICAgICAgcGx1Z2luSW5kZXggPSAxO1xuICAgIH1cbiAgICB2YXIgcGx1Z2luVG9vbHMgPSB0aGlzLl9wbHVnaW5Ub29sc1NlcnZpY2UuZ2V0U3RhdGUoKS50b29sc0dyb3Vwc1twbHVnaW5JbmRleF0udG9vbHM7XG4gICAgdmFyIHZlY3RvckxheWVyID0gdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yO1xuICAgIF8uZm9yRWFjaChwbHVnaW5Ub29scywgZnVuY3Rpb24ocGx1Z2luVG9vbCwgaW5kZXgpIHtcbiAgICAgIGlmIChfLmhhcyhwbHVnaW5Ub29sLCAndHlwZScpICYmIHBsdWdpblRvb2wubGF5ZXJOYW1lID09IGxheWVyQ29kZSAmJiBwbHVnaW5Ub29sLnR5cGUgPT0gJ2NoZWNrYm94Jykge1xuICAgICAgICB2YXIgdG9vbENvbmZpZyAgPSBwbHVnaW5Ub29sc1tpbmRleF07XG4gICAgICAgIHRvb2xDb25maWcuaXNDaGVjayA9IHRydWU7XG4gICAgICAgIHBsdWdpblRvb2xzW2luZGV4XSA9IHRvb2xDb25maWc7XG4gICAgICAgIHNlbGYuX3BsdWdpblRvb2xzU2VydmljZS51cGRhdGVUb29sc0dyb3VwKHBsdWdpbkluZGV4LCB7bmFtZTonR0VPTk9URVMnLCB0b29sczpwbHVnaW5Ub29sc30pO1xuICAgICAgICB2ZWN0b3JMYXllci5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuaXNMYXllclZpc2libGUgPSBmdW5jdGlvbihsYXllckNvZGUpIHtcbiAgICB2YXIgdmVjdG9yTGF5ZXIgPSB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS52ZWN0b3I7XG4gICAgcmV0dXJuIHZlY3RvckxheWVyLmlzVmlzaWJsZSgpO1xuICB9O1xuXG4gIHRoaXMuc2hvd0hpZGVMYXllciA9IGZ1bmN0aW9uKGxheWVyQ29kZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdmVjdG9yTGF5ZXIgPSBudWxsO1xuICAgIGlmICh0aGlzLl9sb2FkZXIuaXNSZWFkeSgpKSB7XG4gICAgICB2ZWN0b3JMYXllciA9IHRoaXMuX2xheWVyc1tsYXllckNvZGVdLnZlY3RvcjtcbiAgICAgIHZlY3RvckxheWVyLnNldFZpc2libGUoIXZlY3RvckxheWVyLmlzVmlzaWJsZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbG9hZGVyLmxvYWRMYXllcnMoJ3InLCB0aGlzLl9jdXN0b21VcmxQYXJhbWV0ZXJzKVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgc2VsZi5fYWRkVG9NYXAoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvL3N0b3BcbiAgdGhpcy5zdG9wID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gICAgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy5vbikge1xuICAgICAgdGhpcy5fY2FuY2VsT3JTYXZlKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgc2VsZi5fc3RvcEVkaXRpbmcoKTtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICB9KVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfTtcblxuICAvLyBhdnZpbyBvIHRlcm1pbm8gbGEgc2Vzc2lvbmUgZGkgZWRpdGluZyBnZW5lcmFsZVxuICAvLyB1bnRvIGRpIHBhcnRlbnphIGRlbGwnYXZ2aW8gZGVsbCdlZGl0aW5nXG4gIHRoaXMudG9nZ2xlRWRpdGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIGNyZW8gb2dnZXR0byBkZWZlcnJlZCBwZXIgcmVzdGl0dWlyZSB1bmEgcHJvbWlzZVxuICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICAvLyBxdWkgZGljZSBjaGUgc2UgbmVsIGNhc28gbGEgcmlzb2x1emlvbmUgZGVsbGEgbWFwcGEgdmEgYmVuZSAoc3RhdGUuZWRpdGluZy5lbmFibGVkKVxuICAgIC8vIGUgbm9uIMOoIGFuY29yYSBzdGF0byBhdHRpdmF0byBsJ2VkaXRpbmdcbiAgICAvLyBxdWluZGkgY2FzbyBwcmltYSB2b2x0YVxuICAgIGlmICh0aGlzLnN0YXRlLmVkaXRpbmcuZW5hYmxlZCAmJiAhdGhpcy5zdGF0ZS5lZGl0aW5nLm9uKSB7XG4gICAgICAvLyBmYWNjaW8gcGFydGlyZSBlZGl0aW5nXG4gICAgICB0aGlzLl9zdGFydEVkaXRpbmcoKTtcbiAgICB9XG4gICAgLy8gYWx0cmltZW50aSBzZSDDqCBnacOgIGluIGVkaXRpbmcgY2hpYW1vIGxvIHN0b3AgZGVsIHBsdWdpblxuICAgIC8vIGNoZSBub24gw6ggYWx0cm8gY2hlIGxvcyB0b3BvIGRlbGwnZWRpdGluZ1xuICAgIGVsc2UgaWYgKHRoaXMuc3RhdGUuZWRpdGluZy5vbikge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcCgpO1xuICAgIH1cbiAgICAvLyByZXN0aXR1aXNjbyB1bmEgcHJvbWVzc2FcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuXG4gIHRoaXMuc2F2ZUVkaXRzID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLl9zYXZlV2l0aG91dEFzaygpO1xuICAgIC8vdGhpcy5fY2FuY2VsT3JTYXZlKDIpO1xuICB9O1xuXG4gIC8vIGF2dmlhIHVubyBkZWkgdG9vbCBkaSBlZGl0aW5nIHRyYSBxdWVsbGkgc3VwcG9ydGF0aSBkYSBFZGl0b3IgKGFkZGZlYXR1cmUsIGVjYy4pXG4gIC8vIGZ1bnppb25lIGRlbGwnZWxlbWVudG8gcGFuZWwgdnVlXG4gIHRoaXMudG9nZ2xlRWRpdFRvb2wgPSBmdW5jdGlvbihsYXllckNvZGUsIHRvb2xUeXBlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vcHJlbmRvIGlsIGxheWVyIGluIGJhc2UgYWwgY29kaWNlIHBhc3NhdG8gZGFsbCBjb21wb25lbnRlIHZ1ZVxuICAgIHZhciBsYXllciA9IHRoaXMuX2xheWVyc1tsYXllckNvZGVdO1xuICAgIGlmIChsYXllcikge1xuICAgICAgLy9yZWN1cHJlcm8gaWwgY3VycmVudCBsYXllciBpbiBlZGl0aW5nXG4gICAgICB2YXIgY3VycmVudEVkaXRpbmdMYXllciA9IHRoaXMuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICAgIC8vIHNlIHNpIHN0YSB1c2FuZG8gdW4gdG9vbCBjaGUgcHJldmVkZSBsbyBzdGVzc28gbGF5ZXIgaW4gZWRpdGF6aW9uZVxuICAgICAgaWYgKGN1cnJlbnRFZGl0aW5nTGF5ZXIgJiYgbGF5ZXJDb2RlID09IGN1cnJlbnRFZGl0aW5nTGF5ZXIubGF5ZXJDb2RlKSB7XG4gICAgICAgIC8vIGUgbG8gc3Rlc3NvIHRvb2wgYWxsb3JhIGRpc2F0dGl2byBpbCB0b29sIChpbiBxdWFudG8gw6hcbiAgICAgICAgLy8gcHJlbXV0byBzdWxsbyBzdGVzc28gYm90dG9uZSlcbiAgICAgICAgaWYgKHRvb2xUeXBlID09IGN1cnJlbnRFZGl0aW5nTGF5ZXIuZWRpdG9yLmdldEFjdGl2ZVRvb2woKS5nZXRUeXBlKCkpIHtcbiAgICAgICAgICAvLyBzdGVzc28gdGlwbyBkaSB0b29sIHF1aW5kaSBzaSDDqCB2ZXJpZmljYXRvIHVuIHRvZ2dsZSBuZWwgYm90dG9uZVxuICAgICAgICAgIC8vIGFsbG9yYSBzdGlwcG8gbCdlZGl0aW5nIFRvb2xcbiAgICAgICAgICB0aGlzLl9zdG9wRWRpdGluZ1Rvb2woKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhbHRyaW1lbnRpIGF0dGl2byBpbCB0b29sIHJpY2hpZXN0b1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvL3N0b3BwbyBwcmV2ZW50aXZhbWVudGUgbCdlZGl0aW5nIHRvb2wgYXR0aXZvXG4gICAgICAgICAgdGhpcy5fc3RvcEVkaXRpbmdUb29sKCk7XG4gICAgICAgICAgLy9mYWNjaW8gcGFydGlyZSBsJ2VkaXRuZyB0b29sIHBhc3NhbmRvIGN1cnJlbnQgRWRpdGluZyBMYXllciBlIGlsIHRpcG8gZGkgdG9vbFxuICAgICAgICAgIHRoaXMuX3N0YXJ0RWRpdGluZ1Rvb2woY3VycmVudEVkaXRpbmdMYXllciwgdG9vbFR5cGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBhbHRyaW1lbnRpIGNhc28gaW4gY3VpIG5vbiDDqCBzdGF0byBzZXR0YXRvIGlsIGN1cnJlbnQgZWRpdGluZyBsYXllciBvXG4gICAgICAgIC8vIGlsIGxheWVyIGNoZSBzaSBzdGEgY2VyY2FuZG8gZGkgZWRpdGFyZSDDqCBkaXZlcnNvIGRhIHF1ZWxsbyBpbiBlZGl0aW5nIGluIHByZWNlZGVuemFcbiAgICAgICAgLy8gbmVsIGNhc28gc2lhIGdpw6AgIGF0dGl2byB1biBlZGl0b3IgdmVyaWZpY28gZGkgcG90ZXJsbyBzdG9wcGFyZVxuICAgICAgICBpZiAoY3VycmVudEVkaXRpbmdMYXllciAmJiBjdXJyZW50RWRpdGluZ0xheWVyLmVkaXRvci5pc1N0YXJ0ZWQoKSkge1xuICAgICAgICAgIC8vIHNlIGxhIHRlcm1pbmF6aW9uZSBkZWxsJ2VkaXRpbmcgc2Fyw6AgIGFuZGF0YSBhIGJ1b24gZmluZSwgc2V0dG8gaWwgdG9vbFxuICAgICAgICAgIC8vIHByb3ZvIGEgc3RvcHBhcmVcbiAgICAgICAgICB0aGlzLl9jYW5jZWxPclNhdmUoMilcbiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5fc3RvcEVkaXRvcigpKSB7XG4gICAgICAgICAgICAgICAgICBzZWxmLl9zdGFydEVkaXRpbmdUb29sKGxheWVyLCB0b29sVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy9uZWwgY2FzbyBzaWEgbGEgcHJpbWEgdm9sdGEgY2hlIGludGVyYWdpc2NvIGNvbiB1biB0b29sXG4gICAgICAgICAgLy8gZSBxdWluZGkgbm9uIMOoIHN0YXRvIHNldHRhdG8gbmVzc3VuIGxheWVyIGluIGVkaXRpbmdcbiAgICAgICAgICB0aGlzLl9zdGFydEVkaXRpbmdUb29sKGxheWVyLCB0b29sVHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy9mdW56aW9uZSBjaGUgcmVzdGl0dWlzY2UgbCdhcnJheSBkZWkgY29kaWNpIGRlaSBsYXllcnNcbiAgdGhpcy5nZXRMYXllckNvZGVzID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gXy52YWx1ZXModGhpcy5sYXllckNvZGVzKTtcbiAgfTtcblxuICAvKiBNRVRPREkgUFJJVkFUSSAqL1xuICAvLyBmdW56aW9uZSBwZXIgc2V0dGFyZSBpbCB2ZWN0b3JsYXllciBhbGxhIHByb3JpZXTDoCB2ZWN0b3IgZGVsIGxheWVyXG4gIHRoaXMuX3NldFVwVmVjdG9yTGF5ZXIgPSBmdW5jdGlvbihsYXllckNvZGUsIHZlY3RvckxheWVyKSB7XG4gICAgdGhpcy5fbGF5ZXJzW2xheWVyQ29kZV0udmVjdG9yID0gdmVjdG9yTGF5ZXI7XG4gIH07XG5cbiAgLy9mdW56aW9uZSBjaGUgcGVybWV0dGUgZGkgZmFyZSBpbCBzZXR1cCBkZWxsJ2VkaXRvciBlIGFzc2VnYW5ybG8gYWwgbGF5ZXJcbiAgdGhpcy5fc2V0VXBFZGl0b3IgPSBmdW5jdGlvbihsYXllckNvZGUpIHtcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvL29wdGlvbiBlZGl0b3JcbiAgICB2YXIgb3B0aW9uc19lZGl0b3IgPSB7XG4gICAgICAnbWFwU2VydmljZSc6IHNlbGYuX21hcFNlcnZpY2UsXG4gICAgICAnZm9ybUNsYXNzJzogRm9ybUNsYXNzLFxuICAgICAgJ2VkaXRpbmdWZWN0b3JTdHlsZSc6IHRoaXMuX2xheWVyc0VkaXRpbmdTdHlsZVtsYXllckNvZGVdXG4gICAgfTtcbiAgICAvLyBwcmVuZG8gaWwgdmVjdG9yIGxheWVyIGRlbCBsYXllclxuICAgIHZhciB2ZWN0b3JMYXllciA9IHRoaXMuX2xheWVyc1tsYXllckNvZGVdLnZlY3RvcjtcbiAgICAvL0dFU1RJT05FIEUgSU5JWklBTElaWkFaSU9ORSBERUxMJ0VESVRPUiBSRUxBVElWTyBBTCBMQVlFUiBWRVRUT1JJQUxFXG4gICAgLy9jcmVvIGwnaXN0YW56YSBkZWxsJ2VkaXRvciBjaGUgZ2VzdGlyw6AgaWwgbGF5ZXJcbiAgICB2YXIgZWRpdG9yID0gbmV3IHNlbGYuX2VkaXRvckNsYXNzW2xheWVyQ29kZV0ob3B0aW9uc19lZGl0b3IpO1xuICAgIC8vc2V0dG8gaWwgbGF5ZXIgdmV0dG9yaWFsZSBhc3NvY2lhdG8gYWxsJ2VkaXRvclxuICAgIC8vIGUgaSB0aXBpIGRpIHRvb2xzIGFzc29jaWF0aSBhZCBlc3NvXG4gICAgZWRpdG9yLnNldFZlY3RvckxheWVyKHZlY3RvckxheWVyKTtcbiAgICAvL2VtZXR0ZSBldmVudG8gY2hlIMOoIHN0YXRhIGdlbmVyYXRhIHVuYSBtb2RpZmljYSBsYSBsYXllclxuICAgIGVkaXRvci5vbihcImRpcnR5XCIsIGZ1bmN0aW9uIChkaXJ0eSkge1xuICAgICAgc2VsZi5zdGF0ZS5oYXNFZGl0cyA9IGRpcnR5O1xuICAgIH0pO1xuICAgIC8vYXNzZWdubyBsJ2lzdGFuemEgZWRpdG9yIGFsIGxheWVyIHRyYW1pdGUgbGEgcHJvcHJpZXTDoCBlZGl0b3JcbiAgICB0aGlzLl9sYXllcnNbbGF5ZXJDb2RlXS5lZGl0b3IgPSBlZGl0b3I7XG4gICAgLy8vLyBGSU5FIEdFU1RJT05FIEVESVRPUlxuICB9O1xuICAvL2ZhIHBhcnRpcmUgbCdlZGl0aW5nXG4gIHRoaXMuX3N0YXJ0RWRpdGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIG1pIGFzc2ljdXJvIGNoZSBzZSBwZXIgcXVhbHNpc2kgbW90aXZvXG4gICAgLy8gZmFjY2lvIHVubyBzdGFyZWRpdGluZyBkaSB1biBlZGl0aW5nIGdpw6AgYXZ2aWF0b1xuICAgIC8vIHJpdG9ybm8gcGVyY2jDqCBobyBnacOgIHR1dHRvIChsbyBmYWNjaW8gcGVyIHNpY3VyZW5uemEgbm9uIHNpIHNhIG1haSlcbiAgICBpZiAodGhpcy5zdGF0ZS5lZGl0aW5nLm9uIHx8IHRoaXMuc3RhdGUucmV0cmlldmluZ0RhdGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIGNoaWVkbyBhbCBsb2FkZXIgZGkgY2FyaWNhcmUgaSBkYXRpXG4gICAgaWYgKCF0aGlzLl9sb2FkZXIuaXNSZWFkeSgpKSB7XG4gICAgICB0aGlzLl9sb2FkZXIubG9hZExheWVycygndycsIHRoaXMuX2N1c3RvbVVybFBhcmFtZXRlcnMpIC8vIGNhcmljbyBpIGxheWVyIGluIG1vZGFsaXTDoCBlZGl0aW5nIChzY3JpdHR1cmEpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uICh2ZWN0b3JMYXllcnNDb2Rlcykge1xuICAgICAgICAgIC8vdW5hIHZvbHRhIGNoZSBpbCBsb2FkZXIgaGEgZmluaXRvIGRpIGNhcmljYXJlIGkgbGF5ZXIgdmV0dG9yaWFsaVxuICAgICAgICAgIC8vcXVlc3RvIG1pIHJlc3RpdHVpc2NlIGkgY29kaWNlIGRlaSBsYXllciBjaGUgc29ubyBzdGF0aSBjYXJpY2F0aShhcnJheSlcbiAgICAgICAgICBfLmZvckVhY2godmVjdG9yTGF5ZXJzQ29kZXMsIGZ1bmN0aW9uIChsYXllckNvZGUpIHtcbiAgICAgICAgICAgIC8vIHBlciBvZ25pIGxheWVyIGZhY2NpbyBpbCBzZXR1cCBkZWxsJ2VkaXRvclxuICAgICAgICAgICAgc2VsZi5fc2V0VXBFZGl0b3IobGF5ZXJDb2RlKTtcbiAgICAgICAgICAgIHNlbGYuX3RvZ2dsZUNoZWNrQm94UGx1Z2luVG9vbChsYXllckNvZGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vIHNlIHR1dHRvICDDqCBhbmRhdG8gYSBidW9uIGZpbmUgYWdnaXVuZ28gaSBWZWN0b3JMYXllciBhbGxhIG1hcHBhXG4gICAgICAgICAgc2VsZi5fYWRkVG9NYXAoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIEdVSS5ub3RpZnkuZXJyb3IodCgnY291bGRfbm90X2xvYWRfdmVjdG9yX2xheWVycycpKTtcbiAgICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbG9hZGVyLnNldE1vZGUoJ3cnKTtcbiAgICAgIHZhciB2ZWN0b3JMYXllcnNDb2RlcyA9IHRoaXMuX2xvYWRlci5nZXRWZWN0b3JMYXllcnNDb2RlcygpO1xuICAgICAgXy5mb3JFYWNoKHZlY3RvckxheWVyc0NvZGVzLCBmdW5jdGlvbiAobGF5ZXJDb2RlKSB7XG4gICAgICAgIC8vIHBlciBvZ25pIGxheWVyIGZhY2NpbyBpbCBzZXR1cCBkZWxsJ2VkaXRvclxuICAgICAgICBzZWxmLl9sb2FkZXIubG9ja0ZlYXR1cmVzKHNlbGYuX2xheWVyc1tsYXllckNvZGVdLm5hbWUpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBzZWxmLl9zZXRVcEVkaXRvcihsYXllckNvZGUpO1xuICAgICAgICAgIHNlbGYuX3RvZ2dsZUNoZWNrQm94UGx1Z2luVG9vbChsYXllckNvZGUpO1xuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgICBzZWxmLnN0YXRlLmVkaXRpbmcub24gPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLl9zdG9wRWRpdGluZyA9IGZ1bmN0aW9uKHJlc2V0KSB7XG4gICAgLy8gc2UgcG9zc28gc3RvcHBhcmUgdHV0dGkgZ2xpIGVkaXRvci4uLlxuICAgIGlmICh0aGlzLl9zdG9wRWRpdG9yKHJlc2V0KSl7XG4gICAgICBfLmZvckVhY2godGhpcy5fbGF5ZXJzLCBmdW5jdGlvbihsYXllciwgbGF5ZXJDb2RlKSB7XG4gICAgICAgIHZhciB2ZWN0b3IgPSBsYXllci52ZWN0b3I7XG4gICAgICAgIC8vc2VsZi5fbWFwU2VydmljZS52aWV3ZXIucmVtb3ZlTGF5ZXJCeU5hbWUodmVjdG9yLm5hbWUpO1xuICAgICAgICAvL2xheWVyLnZlY3Rvcj0gbnVsbDtcbiAgICAgICAgbGF5ZXIuZWRpdG9yPSBudWxsO1xuICAgICAgICBzZWxmLl91bmxvY2tMYXllcihzZWxmLl9sYXllcnNbbGF5ZXJDb2RlXSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuX3VwZGF0ZUVkaXRpbmdTdGF0ZSgpO1xuICAgICAgdGhpcy5fbG9hZGVyLnNldE1vZGUoJ3InKTtcbiAgICAgIHNlbGYuX2NsZWFuVXAoKTtcbiAgICAgIHNlbGYuZW1pdChcImVkaXRpbmdzdG9wcGVkXCIpO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLl9jbGVhblVwID0gZnVuY3Rpb24oKSB7XG4gICAgLy92YWRvIGFkIGFubnVsYXJlIGwnZXN0ZW56aW9uZSBkZWwgbG9hZGVyIHBlciBwb3RlciByaWNhcmljYXJlIGkgZGF0aSB2ZXR0dG9yaWFsaVxuICAgIC8vZGEgcml2ZWRlcmU7XG4gICAgdGhpcy5fbG9hZGVyLmNsZWFuVXBMYXllcnMoKTtcblxuICB9O1xuICAvL3NlIG5vbiDDqCBhbmNvcmEgcGFydGl0byBmYWNjaW8gcGFydGlyZSBsbyBzdGFydCBlZGl0b3JcbiAgdGhpcy5fc3RhcnRFZGl0b3IgPSBmdW5jdGlvbihsYXllcil7XG4gICAgLy8gYXZ2aW8gbCdlZGl0b3JcbiAgICAvLyBwYXNzYW5kb2xpIGlsIHNlcnZpY2UgY2hlIGxvIGFjY2V0dGFcbiAgICBpZiAobGF5ZXIuZWRpdG9yLnN0YXJ0KHRoaXMpKSB7XG4gICAgICAvLyByZWdpc3RybyBpbCBjdXJyZW50IGxheWVyIGluIGVkaXRpbmdcbiAgICAgIHRoaXMuX3NldEN1cnJlbnRFZGl0aW5nTGF5ZXIobGF5ZXIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbiAgLy9mdW56aW9uZSBjaGUgdmllbmUgY2hpYW1hdGEgYWwgY2xpY2sgc3UgdW4gdG9vbCBkZWxsJ2VkaXRpbmcgZSBzZVxuICAvL25vbiDDqCBzdGF0byBhc3NlZ25hdG8gYW5jb3JhIG5lc3N1biBsYXllciBjb21lIGN1cnJlbnQgbGF5ZXIgZWRpdGluZ1xuICB0aGlzLl9zdGFydEVkaXRpbmdUb29sID0gZnVuY3Rpb24obGF5ZXIsIHRvb2xUeXBlLCBvcHRpb25zKSB7XG4gICAgLy9hc3NlZ25vIHRydWUgYWxsbyBzdGFydEVkaXRpbmdUb29sIGF0dHJpYnV0byBkZWxsbG8gc3RhdGVcbiAgICB0aGlzLnN0YXRlLnN0YXJ0aW5nRWRpdGluZ1Rvb2wgPSB0cnVlO1xuICAgIHZhciBjYW5TdGFydFRvb2wgPSB0cnVlO1xuICAgIC8vdmVyaWZpY28gc2UgbCdlZGl0b3Igw6ggcGFydGl0byBvIG1lbm9cbiAgICBpZiAoIWxheWVyLmVkaXRvci5pc1N0YXJ0ZWQoKSkge1xuICAgICAgLy9zZSBub24gw6ggYW5jb3JhIHBhcnRpdG8gbG8gZmFjY2lvIHBhcnRpcmUgZSBuZSBwcmVuZG8gaWwgcmlzdWx0YXRvXG4gICAgICAvLyB0cnVlIG8gZmFsc2VcbiAgICAgIGNhblN0YXJ0VG9vbCA9IHRoaXMuX3N0YXJ0RWRpdG9yKGxheWVyKTtcbiAgICB9XG4gICAgLy8gdmVyaWZpY2Egc2UgaWwgdG9vbCBwdcOyIGVzc2VyZSBhdHRpdmF0b1xuICAgIC8vIGwnZWRpdG9yIHZlcmlmaWNhIHNlIGlsIHRvb2wgcmljaGllc3RvIMOoIGNvbXBhdGliaWxlXG4gICAgLy8gY29uIGkgdG9vbHMgcHJldmlzdGkgZGFsbCdlZGl0b3IuIENyZWEgaXN0YW56YSBkaSB0b29sIGUgYXZ2aWEgaWwgdG9vbFxuICAgIC8vIGF0dHJhdmVyc28gaWwgbWV0b2RvIHJ1blxuICAgIGlmIChjYW5TdGFydFRvb2wgJiYgbGF5ZXIuZWRpdG9yLnNldFRvb2wodG9vbFR5cGUsIG9wdGlvbnMpKSB7XG4gICAgICB0aGlzLl91cGRhdGVFZGl0aW5nU3RhdGUoKTtcbiAgICAgIHRoaXMuc3RhdGUuc3RhcnRpbmdFZGl0aW5nVG9vbCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHRoaXMuc3RhdGUuc3RhcnRpbmdFZGl0aW5nVG9vbCA9IGZhbHNlO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICB0aGlzLl9zdG9wRWRpdG9yID0gZnVuY3Rpb24ocmVzZXQpe1xuICAgIHZhciByZXQgPSB0cnVlO1xuICAgIHZhciBsYXllciA9IHRoaXMuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICBpZiAobGF5ZXIpIHtcbiAgICAgIHJldCA9IGxheWVyLmVkaXRvci5zdG9wKHJlc2V0KTtcbiAgICAgIGlmIChyZXQpe1xuICAgICAgICB0aGlzLl9zZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSBzaSBvY2N1cGEgZGkgaW50ZXJyb21lcGVyZSBsJ2VkdGluZyB0b29sXG4gIHRoaXMuX3N0b3BFZGl0aW5nVG9vbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXQgPSB0cnVlO1xuICAgIC8vIHJlY3VwZXJlIGlsIGxheWVyIGluIGN1cnJlbnQgZWRpdGluZ1xuICAgIHZhciBsYXllciA9IHRoaXMuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICAvLyBzZSBlc2lzdGUgZWQgZXJhIHN0YXRvIHNldHRhdG9cbiAgICBpZiAobGF5ZXIpIHtcbiAgICAgIC8vIHNlIGFuZGF0byBiZW5lIHJpdG9ybmEgdHJ1ZVxuICAgICAgcmV0ID0gbGF5ZXIuZWRpdG9yLnN0b3BUb29sKCk7XG4gICAgICBpZiAocmV0KSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUVkaXRpbmdTdGF0ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9O1xuICAvLyBmdW56aW9uZSBjaGUgYWNjZXR0YSBjb21lIHBhcmFtZXRybyBpbCB0aXBvIGRpXG4gIC8vIG9wZXJhemlvbmUgZGEgZmFyZSBhIHNlY29uZGEgZGljb3NhIMOoIGF2dmVudXRvXG4gIHRoaXMuX3NhdmVXaXRob3V0QXNrID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIHZhciBkaXJ0eUVkaXRvcnMgPSB7fTtcbiAgICAvLyB2ZXJpZmljbyBwZXIgb2duaSBsYXllciBzZSBsJ2VkaXRvIGFzc29jaWF0byDDqCBEaXJ0eVxuICAgIF8uZm9yRWFjaCh0aGlzLl9sYXllcnMsIGZ1bmN0aW9uKGxheWVyLCBsYXllckNvZGUpIHtcbiAgICAgIGlmIChsYXllci5lZGl0b3IuaXNEaXJ0eSgpKSB7XG4gICAgICAgIGRpcnR5RWRpdG9yc1tsYXllckNvZGVdID0gbGF5ZXIuZWRpdG9yO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuX3NhdmVFZGl0cyhkaXJ0eUVkaXRvcnMpLlxuICAgIHRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICB9KVxuXG4gIH07XG4gIHRoaXMuX2NhbmNlbE9yU2F2ZSA9IGZ1bmN0aW9uKHR5cGUpe1xuICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICAvLyBwZXIgc2ljdXJlenphIHRlbmdvIHR1dHRvIGRlbnRybyB1biBncm9zc28gdHJ5L2NhdGNoLFxuICAgIC8vIHBlciBub24gcmlzY2hpYXJlIGRpIHByb3ZvY2FyZSBpbmNvbnNpc3RlbnplIG5laSBkYXRpIGR1cmFudGUgaWwgc2FsdmF0YWdnaW9cbiAgICB0cnkge1xuICAgICAgdmFyIF9hc2tUeXBlID0gMTtcbiAgICAgIGlmICh0eXBlKSB7XG4gICAgICAgIF9hc2tUeXBlID0gdHlwZVxuICAgICAgfVxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGNob2ljZSA9IFwiY2FuY2VsXCI7XG4gICAgICB2YXIgZGlydHlFZGl0b3JzID0ge307XG4gICAgICAvLyB2ZXJpZmljbyBwZXIgb2duaSBsYXllciBzZSBsJ2VkaXRvIGFzc29jaWF0byDDqCBEaXJ0eVxuICAgICAgXy5mb3JFYWNoKHRoaXMuX2xheWVycywgZnVuY3Rpb24obGF5ZXIsIGxheWVyQ29kZSkge1xuICAgICAgICBpZiAobGF5ZXIuZWRpdG9yLmlzRGlydHkoKSkge1xuICAgICAgICAgIGRpcnR5RWRpdG9yc1tsYXllckNvZGVdID0gbGF5ZXIuZWRpdG9yO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIHZlcmlmaWNvIHNlIGNpIHNvbm8gbyBtZW5vIGVkaXRvciBzcG9yY2hpXG4gICAgICBpZihfLmtleXMoZGlydHlFZGl0b3JzKS5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fYXNrQ2FuY2VsT3JTYXZlKF9hc2tUeXBlKS5cbiAgICAgICAgdGhlbihmdW5jdGlvbihhY3Rpb24pIHtcbiAgICAgICAgICAvLyByaXRvcm5hIGlsIHRpcG8gZGkgYXppb25lIGRhIGZhcmVcbiAgICAgICAgICAvLyBzYXZlLCBjYW5jZWwsIG5vc2F2ZVxuICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdzYXZlJykge1xuICAgICAgICAgICAgLy8gcGFzc28gZ2xpIGVkaXRvciBzcG9jaGkgYWxsYSBmdW56aW9uZSBfc2F2ZUVkaXRzXG4gICAgICAgICAgICBzZWxmLl9zYXZlRWRpdHMoZGlydHlFZGl0b3JzKS5cbiAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT0gJ25vc2F2ZScpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PSAnY2FuY2VsJykge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgIH1cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuICAvLyBmdW56aW9uZSBjaGUgaW4gYmFzZSBhbCB0aXBvIGRpIGFza1R5cGVcbiAgLy8gdmlzdWFsaXp6YSBpbCBtb2RhbGUgYSBjdWkgcmlzcG9uZGVyZSwgc2FsdmEgZXRjIC4uXG4gIHRoaXMuX2Fza0NhbmNlbE9yU2F2ZSA9IGZ1bmN0aW9uKHR5cGUpe1xuICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICB2YXIgYnV0dG9uVHlwZXMgPSB7XG4gICAgICBTQVZFOiB7XG4gICAgICAgIGxhYmVsOiBcIlNhbHZhXCIsXG4gICAgICAgIGNsYXNzTmFtZTogXCJidG4tc3VjY2Vzc1wiLFxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oKXtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdzYXZlJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBOT1NBVkU6IHtcbiAgICAgICAgbGFiZWw6IFwiVGVybWluYSBzZW56YSBzYWx2YXJlXCIsXG4gICAgICAgIGNsYXNzTmFtZTogXCJidG4tZGFuZ2VyXCIsXG4gICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ25vc2F2ZScpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgQ0FOQ0VMOiB7XG4gICAgICAgIGxhYmVsOiBcIkFubnVsbGFcIixcbiAgICAgICAgY2xhc3NOYW1lOiBcImJ0bi1wcmltYXJ5XCIsXG4gICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdjYW5jZWwnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgc3dpdGNoICh0eXBlKXtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgYnV0dG9ucyA9IHtcbiAgICAgICAgICBzYXZlOiBidXR0b25UeXBlcy5TQVZFLFxuICAgICAgICAgIG5vc2F2ZTogYnV0dG9uVHlwZXMuTk9TQVZFLFxuICAgICAgICAgIGNhbmNlbDogYnV0dG9uVHlwZXMuQ0FOQ0VMXG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBidXR0b25zID0ge1xuICAgICAgICAgIHNhdmU6IGJ1dHRvblR5cGVzLlNBVkUsXG4gICAgICAgICAgY2FuY2VsOiBidXR0b25UeXBlcy5DQU5DRUxcbiAgICAgICAgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIEdVSS5kaWFsb2cuZGlhbG9nKHtcbiAgICAgIG1lc3NhZ2U6IFwiVnVvaSBzYWx2YXJlIGRlZmluaXRpdmFtZW50ZSBsZSBtb2RpZmljaGU/XCIsXG4gICAgICB0aXRsZTogXCJTYWx2YXRhZ2dpbyBtb2RpZmljYVwiLFxuICAgICAgYnV0dG9uczogYnV0dG9uc1xuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH07XG4gIC8vIGZ1bnppb25lIGNoZSBzYWx2YSBpIGRhdGkgcmVsYXRpdmkgYWwgbGF5ZXIgdmV0dG9yaWFsZVxuICAvLyBkZWwgZGlydHlFZGl0b3JcbiAgdGhpcy5fc2F2ZUVkaXRzID0gZnVuY3Rpb24oZGlydHlFZGl0b3JzKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICB0aGlzLl9zZW5kRWRpdHMoZGlydHlFZGl0b3JzKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgR1VJLm5vdGlmeS5zdWNjZXNzKFwiSSBkYXRpIHNvbm8gc3RhdGkgc2FsdmF0aSBjb3JyZXR0YW1lbnRlXCIpO1xuICAgICAgICAgIHNlbGYuX2NvbW1pdEVkaXRzKGRpcnR5RWRpdG9ycywgcmVzcG9uc2UpO1xuICAgICAgICAgIC8vc2VsZi5fbWFwU2VydmljZS5yZWZyZXNoTWFwKCk7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbihlcnJvcnMpe1xuICAgICAgICAgIEdVSS5ub3RpZnkuZXJyb3IoXCJFcnJvcmUgbmVsIHNhbHZhdGFnZ2lvIHN1bCBzZXJ2ZXJcIik7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuICAvLyBmdW56aW9uZSBjaGUgcHJlbmRlIGNvbWUgaW5ncmVzc28gZ2xpIGVkaXRvciBzcG9yY2hpXG4gIHRoaXMuX3NlbmRFZGl0cyA9IGZ1bmN0aW9uKGRpcnR5RWRpdG9ycykge1xuICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICB2YXIgZWRpdHNUb1B1c2ggPSBfLm1hcChkaXJ0eUVkaXRvcnMsIGZ1bmN0aW9uKGVkaXRvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGF5ZXJuYW1lOiBlZGl0b3IuZ2V0VmVjdG9yTGF5ZXIoKS5uYW1lLFxuICAgICAgICBlZGl0czogZWRpdG9yLmdldEVkaXRlZEZlYXR1cmVzKClcbiAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBlc2VndWUgaWwgcG9zdCBkZWkgZGF0aVxuICAgIHRoaXMuX3Bvc3REYXRhKGVkaXRzVG9QdXNoKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXR1cm5lZCl7XG4gICAgICAgICAgaWYgKHJldHVybmVkLnJlc3VsdCl7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJldHVybmVkLnJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QocmV0dXJuZWQucmVzcG9uc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24ocmV0dXJuZWQpe1xuICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXR1cm5lZC5yZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH07XG5cbiAgdGhpcy5fY29tbWl0RWRpdHMgPSBmdW5jdGlvbihlZGl0b3JzLCByZXNwb25zZSl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIF8uZm9yRWFjaChlZGl0b3JzLGZ1bmN0aW9uKGVkaXRvcikge1xuICAgICAgdmFyIG5ld0F0dHJpYnV0ZXNGcm9tU2VydmVyID0gbnVsbDtcbiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5uZXcpe1xuICAgICAgICBfLmZvckVhY2gocmVzcG9uc2UubmV3LCBmdW5jdGlvbih1cGRhdGVkRmVhdHVyZUF0dHJpYnV0ZXMpe1xuICAgICAgICAgIHZhciBvbGRmaWQgPSB1cGRhdGVkRmVhdHVyZUF0dHJpYnV0ZXMuY2xpZW50aWQ7XG4gICAgICAgICAgdmFyIGZpZCA9IHVwZGF0ZWRGZWF0dXJlQXR0cmlidXRlcy5pZDtcbiAgICAgICAgICBlZGl0b3IuZ2V0RWRpdFZlY3RvckxheWVyKCkuc2V0RmVhdHVyZURhdGEob2xkZmlkLGZpZCxudWxsLHVwZGF0ZWRGZWF0dXJlQXR0cmlidXRlcyk7XG4gICAgICAgICAgXy5mb3JFYWNoKHJlc3BvbnNlLm5ld19sb2NraWRzLCBmdW5jdGlvbihuZXdsb2NrSWQpe1xuICAgICAgICAgICAgZWRpdG9yLmdldFZlY3RvckxheWVyKCkuYWRkTG9ja0lkKG5ld2xvY2tJZCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZygnZWRpdG9yIGNvbW1pdCcpO1xuICAgICAgZWRpdG9yLmNvbW1pdCgpO1xuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuX3VuZG9FZGl0cyA9IGZ1bmN0aW9uKGRpcnR5RWRpdG9ycyl7XG4gICAgdmFyIGN1cnJlbnRFZGl0aW5nTGF5ZXJDb2RlID0gdGhpcy5fZ2V0Q3VycmVudEVkaXRpbmdMYXllcigpLmxheWVyQ29kZTtcbiAgICB2YXIgZWRpdG9yID0gZGlydHlFZGl0b3JzW2N1cnJlbnRFZGl0aW5nTGF5ZXJDb2RlXTtcbiAgICB0aGlzLl9zdG9wRWRpdGluZyh0cnVlKTtcbiAgfTtcbiAgLy8gZXNlZ3VlIGwndXBkYXRlIGRlbGxvIHN0YXRlIG5lbCBjYXNvIGFkIGVzZW1waW8gZGkgdW4gdG9nZ2xlIGRlbCBib3R0b25lIHRvb2xcbiAgdGhpcy5fdXBkYXRlRWRpdGluZ1N0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gcHJlbmRlIGlsIGxheWVyIGluIEVkaXRpbmdcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLl9nZXRDdXJyZW50RWRpdGluZ0xheWVyKCk7XG4gICAgaWYgKGxheWVyKSB7XG4gICAgICB0aGlzLnN0YXRlLmVkaXRpbmcubGF5ZXJDb2RlID0gbGF5ZXIubGF5ZXJDb2RlO1xuICAgICAgdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xUeXBlID0gbGF5ZXIuZWRpdG9yLmdldEFjdGl2ZVRvb2woKS5nZXRUeXBlKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5zdGF0ZS5lZGl0aW5nLmxheWVyQ29kZSA9IG51bGw7XG4gICAgICB0aGlzLnN0YXRlLmVkaXRpbmcudG9vbFR5cGUgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLl91cGRhdGVUb29sU3RlcHNTdGF0ZSgpO1xuICB9O1xuXG4gIHRoaXMuX3VwZGF0ZVRvb2xTdGVwc1N0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBsYXllciA9IHRoaXMuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIoKTtcbiAgICB2YXIgYWN0aXZlVG9vbDtcbiAgICBpZiAobGF5ZXIpIHtcbiAgICAgIGFjdGl2ZVRvb2wgPSBsYXllci5lZGl0b3IuZ2V0QWN0aXZlVG9vbCgpO1xuICAgIH1cbiAgICBpZiAoYWN0aXZlVG9vbCAmJiBhY3RpdmVUb29sLmdldFRvb2woKSkge1xuICAgICAgdmFyIHRvb2xJbnN0YW5jZSA9IGFjdGl2ZVRvb2wuZ2V0VG9vbCgpO1xuICAgICAgaWYgKHRvb2xJbnN0YW5jZS5zdGVwcyl7XG4gICAgICAgIHRoaXMuX3NldFRvb2xTdGVwU3RhdGUoYWN0aXZlVG9vbCk7XG4gICAgICAgIHRvb2xJbnN0YW5jZS5zdGVwcy5vbignc3RlcCcsIGZ1bmN0aW9uKGluZGV4LHN0ZXApIHtcbiAgICAgICAgICBzZWxmLl9zZXRUb29sU3RlcFN0YXRlKGFjdGl2ZVRvb2wpO1xuICAgICAgICB9KTtcbiAgICAgICAgdG9vbEluc3RhbmNlLnN0ZXBzLm9uKCdjb21wbGV0ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgc2VsZi5fc2V0VG9vbFN0ZXBTdGF0ZSgpO1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHNlbGYuX3NldFRvb2xTdGVwU3RhdGUoKTtcbiAgICB9XG4gIH07XG5cbiAgdGhpcy5fc2V0VG9vbFN0ZXBTdGF0ZSA9IGZ1bmN0aW9uKGFjdGl2ZVRvb2wpe1xuICAgIHZhciBpbmRleCwgdG90YWwsIG1lc3NhZ2U7XG4gICAgaWYgKF8uaXNVbmRlZmluZWQoYWN0aXZlVG9vbCkpe1xuICAgICAgaW5kZXggPSBudWxsO1xuICAgICAgdG90YWwgPSBudWxsO1xuICAgICAgbWVzc2FnZSA9IG51bGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdmFyIHRvb2wgPSBhY3RpdmVUb29sLmdldFRvb2woKTtcbiAgICAgIHZhciBtZXNzYWdlcyA9IHRvb2xTdGVwc01lc3NhZ2VzW2FjdGl2ZVRvb2wuZ2V0VHlwZSgpXTtcbiAgICAgIGluZGV4ID0gdG9vbC5zdGVwcy5jdXJyZW50U3RlcEluZGV4KCk7XG4gICAgICB0b3RhbCA9IHRvb2wuc3RlcHMudG90YWxTdGVwcygpO1xuICAgICAgbWVzc2FnZSA9IG1lc3NhZ2VzW2luZGV4XTtcbiAgICAgIGlmIChfLmlzVW5kZWZpbmVkKG1lc3NhZ2UpKSB7XG4gICAgICAgIGluZGV4ID0gbnVsbDtcbiAgICAgICAgdG90YWwgPSBudWxsO1xuICAgICAgICBtZXNzYWdlID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLm4gPSBpbmRleCArIDE7XG4gICAgdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLnRvdGFsID0gdG90YWw7XG4gICAgdGhpcy5zdGF0ZS5lZGl0aW5nLnRvb2xzdGVwLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICB9O1xuXG4gIHRoaXMuX2dldEN1cnJlbnRFZGl0aW5nTGF5ZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudEVkaXRpbmdMYXllcjtcbiAgfTtcblxuICB0aGlzLl9zZXRDdXJyZW50RWRpdGluZ0xheWVyID0gZnVuY3Rpb24obGF5ZXIpe1xuICAgIGlmICghbGF5ZXIpe1xuICAgICAgdGhpcy5fY3VycmVudEVkaXRpbmdMYXllciA9IG51bGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5fY3VycmVudEVkaXRpbmdMYXllciA9IGxheWVyO1xuICAgIH1cbiAgfTtcbiAgdGhpcy5fYWRkVG9NYXAgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy9yZWN1cGVybyBsJ2VsZW1lbnRvIG1hcCBvbDNcbiAgICB2YXIgbWFwID0gdGhpcy5fbWFwU2VydmljZS52aWV3ZXIubWFwO1xuICAgIHZhciBsYXllckNvZGVzID0gdGhpcy5nZXRMYXllckNvZGVzKCk7XG4gICAgLy9vZ25pIGxheWVyIGxvIGFnZ2l1bmdvIGFsbGEgbWFwcGFcbiAgICAvL2NvbiBpbCBtZXRvZG8gYWRkVG9NYXAgZGkgdmVjdG9yTGF5ZXJcbiAgICBfLmZvckVhY2gobGF5ZXJDb2RlcywgZnVuY3Rpb24obGF5ZXJDb2RlKSB7XG4gICAgICBzZWxmLl9sYXllcnNbbGF5ZXJDb2RlXS52ZWN0b3IuYWRkVG9NYXAobWFwKTtcbiAgICB9KTtcbiAgICAvL2FnZ2l1bmdvIGlsIGxpc3RlbmVyXG4gICAgaWYgKCF0aGlzLl9sb2FkRGF0YU9uTWFwVmlld0NoYW5nZUxpc3RlbmVyKSB7XG4gICAgICAvL3ZpZW5lIHJpdG9ybmF0YSBsYSBsaXN0ZW5lciBrZXlcbiAgICAgIHRoaXMuX2xvYWREYXRhT25NYXBWaWV3Q2hhbmdlTGlzdGVuZXIgPSB0aGlzLl9tYXBTZXJ2aWNlLm9uYWZ0ZXIoJ3NldE1hcFZpZXcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLnN0YXRlLmVkaXRpbmcub24gJiYgc2VsZi5zdGF0ZS5lZGl0aW5nLmVuYWJsZWQpIHtcbiAgICAgICAgICBzZWxmLl9sb2FkZXIubG9hZEFsbFZlY3RvcnNEYXRhKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLl9wb3N0RGF0YSA9IGZ1bmN0aW9uKGVkaXRzVG9QdXNoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIG1hbmRvIHVuIG9nZ2V0dG8gY29tZSBuZWwgY2FzbyBkZWwgYmF0Y2gsXG4gICAgLy8gbWEgaW4gcXVlc3RvIGNhc28gZGV2byBwcmVuZGVyZSBzb2xvIGlsIHByaW1vLCBlIHVuaWNvLCBlbGVtZW50b1xuICAgIGlmIChlZGl0c1RvUHVzaC5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcG9zdEJhdGNoRGF0YShlZGl0c1RvUHVzaCk7XG4gICAgfVxuICAgIHZhciBsYXllck5hbWUgPSBlZGl0c1RvUHVzaFswXS5sYXllcm5hbWU7XG4gICAgLy9vZ2dldHRvIGNvbnRlbmV0ZW50ZSBhZGQgZGVsZXRlIHJlbGF0aW9ucyBsb2NraWRzXG4gICAgdmFyIGVkaXRzID0gZWRpdHNUb1B1c2hbMF0uZWRpdHM7XG4gICAgdmFyIGpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoZWRpdHMpO1xuICAgIHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgXy5mb3JFYWNoKGVkaXRzLCBmdW5jdGlvbih2YWx1ZXMsIGtleSkge1xuICAgICAgZm9ybS5hcHBlbmQoa2V5LCB2YWx1ZXMpO1xuICAgIH0pO1xuICAgIHJldHVybiAkLmFqYXgoe1xuICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgdXJsOiB0aGlzLmNvbmZpZy5iYXNldXJsK2xheWVyTmFtZStcIi8/XCIrc2VsZi5fY3VzdG9tVXJsUGFyYW1ldGVycyxcbiAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIGRhdGE6IGpzb25EYXRhXG5cbiAgICAgIC8qZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgIGRhdGE6IGZvcm0sXG4gICAgICBjb250ZW50VHlwZTogZmFsc2UsXG4gICAgICBwcm9jZXNzRGF0YTogZmFsc2UqL1xuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuX3Bvc3RCYXRjaERhdGEgPSBmdW5jdGlvbihtdWx0aUVkaXRzVG9QdXNoKXtcbiAgICB2YXIgZWRpdHMgPSB7fTtcbiAgICBfLmZvckVhY2gobXVsdGlFZGl0c1RvUHVzaCxmdW5jdGlvbihlZGl0c1RvUHVzaCl7XG4gICAgICBlZGl0c1tlZGl0c1RvUHVzaC5sYXllcm5hbWVdID0gZWRpdHNUb1B1c2guZWRpdHM7XG4gICAgfSk7XG4gICAgdmFyIGpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoZWRpdHMpO1xuICAgIHJldHVybiAkLnBvc3Qoe1xuICAgICAgdXJsOiB0aGlzLmNvbmZpZy5iYXNldXJsLFxuICAgICAgZGF0YToganNvbkRhdGEsXG4gICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLl91bmxvY2sgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGF5ZXJDb2RlcyA9IHRoaXMuZ2V0TGF5ZXJDb2RlcygpO1xuICAgIC8vIGVzZWd1byBsZSByaWNoaWVzdGUgZGVsbGUgY29uZmlndXJhemlvbmkgZSBtaSB0ZW5nbyBsZSBwcm9tZXNzZVxuICAgIF8ubWFwKGxheWVyQ29kZXMsZnVuY3Rpb24obGF5ZXJDb2RlKXtcbiAgICAgIHJldHVybiBzZWxmLl91bmxvY2tMYXllcihzZWxmLl9sYXllcnNbbGF5ZXJDb2RlXSk7XG4gICAgfSk7XG4gIH07XG4gIC8vIGZ1bnppb25lIGludmlvIGxvY2tzXG4gIHRoaXMuX2xvY2tMYXllciA9IGZ1bmN0aW9uKGxheWVyQ29uZmlnKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBmZWF0dXJlTG9ja3MgPSB0aGlzLl9sb2FkZXIuX3ZlY3RvckxheWVyc0RhdGFbbGF5ZXJDb25maWcubmFtZV0uZmVhdHVyZWxvY2tzO1xuICAgIHZhciBqc29uRGF0YSA9IEpTT04uc3RyaW5naWZ5KGZlYXR1cmVMb2Nrcyk7XG4gICAgcmV0dXJuICQucG9zdCh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLmJhc2V1cmwrbGF5ZXJDb25maWcubmFtZStcIi8/bG9ja1wiICsgdGhpcy5fY3VzdG9tVXJsUGFyYW1ldGVycyxcbiAgICAgIGRhdGE6IGpzb25EYXRhLFxuICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5fbG9ja0xheWVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsYXllckNvZGVzID0gdGhpcy5nZXRMYXllckNvZGVzKCk7XG4gICAgLy8gZXNlZ3VvIGxlIHJpY2hpZXN0ZSBkZWxsZSBjb25maWd1cmF6aW9uaSBlIG1pIHRlbmdvIGxlIHByb21lc3NlXG4gICAgXy5tYXAobGF5ZXJDb2RlcyxmdW5jdGlvbihsYXllckNvZGUpe1xuICAgICAgcmV0dXJuIHNlbGYuX2xvY2tMYXllcihzZWxmLl9sYXllcnNbbGF5ZXJDb2RlXSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5fdW5sb2NrTGF5ZXIgPSBmdW5jdGlvbihsYXllckNvbmZpZyl7XG4gICAgJC5nZXQodGhpcy5jb25maWcuYmFzZXVybCtsYXllckNvbmZpZy5uYW1lK1wiLz91bmxvY2tcIiArIHRoaXMuX2N1c3RvbVVybFBhcmFtZXRlcnMpO1xuICB9O1xuICAvL2dldCBsb2FkZXIgc2VydmljZVxuICB0aGlzLmdldExvYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9sb2FkZXI7XG4gIH1cbn1cblxuaW5oZXJpdChHZW9ub3Rlc1NlcnZpY2UsIEczV09iamVjdCk7XG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBHZW9ub3Rlc1NlcnZpY2U7XG59LHtcIi4vZWRpdG9ycy9hdHRyaWJ1dGVzZm9ybVwiOjF9XX0se30sWzNdKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
