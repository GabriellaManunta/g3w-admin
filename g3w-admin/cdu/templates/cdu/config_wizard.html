{% extends "base.html" %}
{% load staticfiles %}
{% load g3wadmin_tags %}
{% load crispy_forms_tags %}
{% load i18n %}

{% block custom_js_links_page %}
<script>
/*
    $(function() {
        initUploadFields($('#cdu-config-form'),{
            upload_url: '{% url 'file_form_handle_upload' %}',
            delete_url: '{% url 'file_form_handle_delete_no_args' %}',
        });
    });
*/
</script>
{% endblock %}

{% block main_content %}
<form method="post" id="cdu-config-form" enctype="multipart/form-data">
<div class="row">
    <div class="col-md-8">
        <div class="progress progress-sm active">
            <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
            <span class="sr-only">20% Complete</span>
            </div>
        </div>
    </div>
    <div class="col-md-4">
    {% if wizard.steps.prev %}
        <button class="btn btn-default" name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}"><span class="glyphicon glyphicon-arrow-left"></span> {% trans "prev step" %}</button>
        <button class="btn btn-default" name="wizard_goto_step" type="submit" value="{{ wizard.steps.first }}"><span class="glyphicon glyphicon-arrow-left"></span> {% trans "first step" %}</button>
    {% endif %}
        <input class="btn btn-primary" type="submit" value="{% if wizard.steps.step1 ==  wizard.steps.count %}{% trans "submit" %}{% else %}{% trans "next step" %}{% endif %}"/>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <h2>{% trans 'Step' %} {{ wizard.steps.step1 }} {% trans 'of' %} {{ wizard.steps.count }}</h2>
    </div>
</div>

<div class="row">
    <div class="col-md-8">

        {% if form.errors %}
            <div class="row">
                <div class="col-md-12">
                <div class="alert alert-danger alert-dismissable">
                    <h4><i class="icon fa fa-ban"></i> {% trans 'Alert' %}!</h4>
                        {% trans 'Some errors on form. Check it and send again.' %}
                  </div>
                </div>
            </div>
        {% endif %}
        {{ wizard.management_form }}
        {% if wizard.form.forms %}
            {{ wizard.form.management_form }}
            {% for form in wizard.form.forms %}
                {% crispy form %}
            {% endfor %}
        {% else %}
            {% crispy wizard.form %}
        {% endif %}

    {% include 'core/django_file_form/upload_template.html' %}
    </div>
    <div class="col-md-4">
        <div class="info-box">
            <span class="info-box-icon bg-gray"><i class="fa fa-gear"></i></span>
            <div class="info-box-content">
                <span class="info-box-text">CPU Traffic</span>
                <span class="info-box-number">90<small>%</small></span>
            </div><!-- /.info-box-content -->
        </div>
    </div>
</div>
</form>
{% endblock %}